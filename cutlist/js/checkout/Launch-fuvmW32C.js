var b2 = Object.defineProperty;
var v2 = (e, t, n) => t in e ? b2(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n;
var H = (e, t, n) => v2(e, typeof t != "symbol" ? t + "" : t, n);
import { i as w2, u as Ie, o as pa, n as Qr, r as Pe, a as x2, w as dr, g as S2, b as A2, c as k2, s as no, d as ta, e as gp, f as Nr, m as ea, h as _2, j as Vt, k as re, F as ri, l as ts, p as wi, q as zn, t as fe, v as gn, x as Gg, y as Vg, z as N2, A as Ne, B as Ds, C as rn, D as Lf, E as Yg, G as mc, H as Vn, I as ii, J as Fu, K as sa, L as P2, M as L2 } from "./main-BFZHuxOW.js";
let cu;
const C2 = new Uint8Array(16);
function T2() {
  if (!cu && (cu = typeof crypto < "u" && crypto.getRandomValues && crypto.getRandomValues.bind(crypto), !cu))
    throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");
  return cu(C2);
}
const Gn = [];
for (let e = 0; e < 256; ++e)
  Gn.push((e + 256).toString(16).slice(1));
function I2(e, t = 0) {
  return Gn[e[t + 0]] + Gn[e[t + 1]] + Gn[e[t + 2]] + Gn[e[t + 3]] + "-" + Gn[e[t + 4]] + Gn[e[t + 5]] + "-" + Gn[e[t + 6]] + Gn[e[t + 7]] + "-" + Gn[e[t + 8]] + Gn[e[t + 9]] + "-" + Gn[e[t + 10]] + Gn[e[t + 11]] + Gn[e[t + 12]] + Gn[e[t + 13]] + Gn[e[t + 14]] + Gn[e[t + 15]];
}
const E2 = typeof crypto < "u" && crypto.randomUUID && crypto.randomUUID.bind(crypto), mp = {
  randomUUID: E2
};
function Kg(e, t, n) {
  if (mp.randomUUID && !t && !e)
    return mp.randomUUID();
  e = e || {};
  const i = e.random || (e.rng || T2)();
  return i[6] = i[6] & 15 | 64, i[8] = i[8] & 63 | 128, I2(i);
}
const Xo = 1e-10, O2 = 10, F2 = Number.MAX_SAFE_INTEGER, M2 = 4294967295, vi = (e) => typeof e == "number" && Number.isFinite(e), Mu = (e) => Array.isArray(e) && e.length > 0;
function Ja(e, t, n = Xo) {
  if (e === t) return 0;
  if (Number.isInteger(e) && Number.isInteger(t))
    return e > t ? 1 : -1;
  const i = e - t;
  return Math.abs(i) < n ? 0 : i;
}
const R2 = {
  greaterThan: (e, t, n = Xo) => !vi(e) || !vi(t) ? !1 : Ja(e, t, n) > 0,
  greaterThanOrEqualTo: (e, t, n = Xo) => !vi(e) || !vi(t) ? !1 : Ja(e, t, n) >= 0,
  lessThan: (e, t, n = Xo) => !vi(e) || !vi(t) ? !1 : Ja(e, t, n) < 0,
  lessThanOrEqualTo: (e, t, n = Xo) => !vi(e) || !vi(t) ? !1 : Ja(e, t, n) <= 0,
  equalTo: (e, t, n = Xo) => !vi(e) || !vi(t) ? !1 : Ja(e, t, n) === 0
};
function D2(e) {
  return vi(e) ? Number.isInteger(e) ? e : Number(e.toFixed(O2)) : !1;
}
function j2(e) {
  if (!vi(e) || e < 0 || e > F2)
    throw new Error("Invalid length parameter");
  return Math.floor(crypto.getRandomValues(new Uint32Array(1))[0] / (M2 + 1) * e);
}
function B2(e, t) {
  if (!Mu(e))
    throw new Error("Invalid array parameter");
  if (!vi(t) || t < 0 || t > e.length)
    throw new Error("Invalid size parameter");
  const n = e.slice(), i = e.length - t;
  for (let r = e.length - 1; r >= i; r--) {
    const s = Math.floor(Math.random() * (r + 1));
    [n[r], n[s]] = [n[s], n[r]];
  }
  return n.slice(i);
}
class hu {
  static calculateMean(t) {
    if (!Mu(t))
      throw new Error("Invalid input array");
    return t.reduce((n, i) => n + i, 0) / t.length;
  }
  static calculateStandardDeviation(t, n = null) {
    if (!Mu(t))
      throw new Error("Invalid input array");
    const i = n ?? this.calculateMean(t), r = t.reduce((s, o) => {
      const a = o - i;
      return s + a * a;
    }, 0) / t.length;
    return Math.sqrt(r);
  }
  static calculateCoefficientOfVariation(t) {
    if (!Mu(t))
      throw new Error("Invalid input array");
    const n = this.calculateMean(t);
    if (n === 0)
      throw new Error("Mean is zero, coefficient of variation undefined");
    return this.calculateStandardDeviation(t, n) / n;
  }
}
const Ue = {
  ...R2,
  isNumber: vi,
  round: D2,
  getRandom: j2,
  getRandomSample: B2,
  calculateStandardDeviation: hu.calculateStandardDeviation.bind(hu),
  calculateCoefficientOfVariation: hu.calculateCoefficientOfVariation.bind(hu)
}, Hu = {
  //sort by width then length - use .sort(sortHeightDescWidthDesc)
  WDLD(e, t) {
    if (e.w < t.w) return 1;
    if (e.w > t.w) return -1;
    if (e.l === t.l) return 0;
    if (e.l < t.l) return 1;
    if (e.l > t.l) return -1;
  },
  WALA(e, t) {
    if (e.w > t.w) return 1;
    if (e.w < t.w) return -1;
    if (e.l === t.l) return 0;
    if (e.l > t.l) return 1;
    if (e.l < t.l) return -1;
  },
  //sort by length d then width d
  LDWD(e, t) {
    if (e.l < t.l) return 1;
    if (e.l > t.l) return -1;
    if (e.w === t.w) return 0;
    if (e.w < t.w) return 1;
    if (e.w > t.w) return -1;
  },
  LAWA(e, t) {
    if (e.l > t.l) return 1;
    if (e.l < t.l) return -1;
    if (e.w === t.w) return 0;
    if (e.w > t.w) return 1;
    if (e.w < t.w) return -1;
  },
  //sort by width d
  WD(e, t) {
    if (e.w < t.w) return 1;
    if (e.w > t.w) return -1;
    if (e.w === t.w) return 0;
  },
  LD(e, t) {
    if (e.l < t.l) return 1;
    if (e.l > t.l) return -1;
    if (e.l === t.l) return 0;
  },
  LDIDA(e, t) {
    if (e.l < t.l) return 1;
    if (e.l > t.l) return -1;
    const n = e.id.toString().split("."), i = t.id.toString().split(".");
    return n[0] !== i[0] ? parseInt(n[0]) - parseInt(i[0]) : parseInt(n[1]) - parseInt(i[1]);
  },
  WDIDA(e, t) {
    if (e.w < t.w) return 1;
    if (e.w > t.w) return -1;
    const n = e.id.toString().split("."), i = t.id.toString().split(".");
    return n[0] !== i[0] ? parseInt(n[0]) - parseInt(i[0]) : parseInt(n[1]) - parseInt(i[1]);
  },
  //sort by proportion
  /* sortProportion: function(a, b) {
  
  		if (a.proportion < b.proportion) return 1;
  		if (a.proportion > b.proportion) return -1;
  
  		if (a.proportion === b.proportion) return a.index - b.index;
  
  	} */
  //area descending
  AD(e, t) {
    const n = e.getArea(), i = t.getArea();
    if (n < i) return 1;
    if (n > i) return -1;
    if (n === i) return 0;
  },
  AA(e, t) {
    const n = e.getArea(), i = t.getArea();
    if (n < i) return -1;
    if (n > i) return 1;
    if (n === i) return 0;
  },
  AAID(e, t) {
    const n = e.getArea(), i = t.getArea();
    if (n < i) return -1;
    if (n > i) return 1;
    if (n === i) {
      const r = e.id.toString().split("."), s = t.id.toString().split(".");
      return r[0] !== s[0] ? parseInt(r[0]) - parseInt(s[0]) : parseInt(r[1]) - parseInt(s[1]);
    }
    return 0;
  },
  ADID(e, t) {
    const n = e.getArea(), i = t.getArea();
    if (n < i) return 1;
    if (n > i) return -1;
    if (n === i) return 0;
    if (n === i) {
      const r = e.id.toString().split("."), s = t.id.toString().split(".");
      return r[0] !== s[0] ? parseInt(r[0]) - parseInt(s[0]) : parseInt(r[1]) - parseInt(s[1]);
    }
    return 0;
  },
  //by id ascending
  ID(e, t) {
    if (!e.id || !t.id) return 0;
    const n = e.id.toString().split("."), i = t.id.toString().split(".");
    return n[0] !== i[0] ? parseInt(n[0]) - parseInt(i[0]) : parseInt(n[1]) - parseInt(i[1]);
  },
  IDDesc(e, t) {
    const n = e.id.toString().split("."), i = t.id.toString().split(".");
    return n[0] !== i[0] ? parseInt(i[0]) - parseInt(n[0]) : parseInt(i[1]) - parseInt(n[1]);
  },
  StockID(e, t) {
    const n = e.stock.id.toString().split("."), i = t.stock.id.toString().split(".");
    return n[0] !== i[0] ? parseInt(n[0]) - parseInt(i[0]) : parseInt(n[1]) - parseInt(i[1]);
  },
  StockIDAD(e, t) {
    const n = e.stock.id.toString().split("."), i = t.stock.id.toString().split(".");
    if (n[0] !== i[0])
      return parseInt(n[0]) - parseInt(i[0]);
    if (n[1] !== i[1])
      return parseInt(n[1]) - parseInt(i[1]);
    const r = e.getArea(), s = t.getArea();
    if (r < s) return 1;
    if (r > s) return -1;
  },
  parentID(e, t) {
    return e.parentID - t.parentID;
  },
  YX(e, t) {
    if (e.y < t.y) return -1;
    if (e.y > t.y) return 1;
    if (e.y === t.y) return 0;
    if (e.x < t.x) return -1;
    if (e.x > t.x) return 1;
  },
  XY(e, t) {
    if (e.x < t.x) return -1;
    if (e.x > t.x) return 1;
    if (e.x === t.x) return 0;
    if (e.y < t.y) return -1;
    if (e.y > t.y) return 1;
  },
  subset(e, t) {
    if (e.totalLength < t.totalLength) return 1;
    if (e.totalLength > t.totalLength) return -1;
    if (e.area === t.area) return 0;
    if (e.area < t.area) return 1;
    if (e.area > t.area) return -1;
  },
  placementOrder(e, t) {
    return (e == null ? void 0 : e.placementOrder) - (t == null ? void 0 : t.placementOrder);
  },
  typePlacementOrder(e, t) {
    if (e.offcut && !t.offcut) return 1;
    if (!e.offcut && t.offcut) return 0;
    if (e.offcut === t.offcut) return e.placementOrder - t.placementOrder;
  },
  stockIDTypePlacementOrder(e, t) {
    const n = e.stock.id.toString().split("."), i = t.stock.id.toString().split(".");
    if (n[0] !== i[0])
      return parseInt(n[0]) - parseInt(i[0]);
    if (n[1] !== i[1])
      return parseInt(n[1]) - parseInt(i[1]);
    if (e.offcut && !t.offcut) return 1;
    if (!e.offcut && t.offcut) return 0;
    if (e.offcut === t.offcut) return e.placementOrder - t.placementOrder;
  },
  offcutPlacementOrder(e, t) {
    var r, s;
    if (!((r = e == null ? void 0 : e.stock) != null && r.id) || !((s = t == null ? void 0 : t.stock) != null && s.id)) return 0;
    const n = e.stock.id.toString().split("."), i = t.stock.id.toString().split(".");
    return n[0] !== i[0] ? parseInt(n[0]) - parseInt(i[0]) : n[1] !== i[1] ? parseInt(n[1]) - parseInt(i[1]) : (e == null ? void 0 : e.placementOrder) - (t == null ? void 0 : t.placementOrder);
  },
  groupPlacementOrder(e, t) {
    if (e.placementOrder > t.placementOrder) return 1;
    if (e.placementOrder < t.placementOrder) return -1;
    if (e.groupPlacementOrder === t.groupPlacementOrder) return 0;
    if (e.groupPlacementOrder > t.groupPlacementOrder) return 1;
    if (e.groupPlacementOrder < t.groupPlacementOrder) return -1;
  },
  swapFirstTwo(e) {
    const t = e[1];
    e[1] = e[0], e[0] = t;
  },
  //Fisher-Yates shuffle
  shuffle(e) {
    for (let t = e.length - 1; t > 0; t--) {
      const n = Math.floor(Math.random() * (t + 1));
      [e[t], e[n]] = [e[n], e[t]];
    }
  },
  /**
      * generator function which accepts a dimension to cater for shape rotation lock
      */
  fillThenArea(e) {
    return function(t, n) {
      return t.getLongSide(e) > n.getLongSide(e) ? -1 : t.getLongSide(e) < n.getLongSide(e) ? 1 : t.getArea() > n.getArea() ? -1 : t.getArea() < n.getArea() ? 1 : 0;
    };
  },
  aspect(e, t) {
    const n = e.getAspect(), i = t.getAspect();
    return n > i ? -1 : n < i ? 1 : 0;
  }
};
function q2(e) {
  if (e === "l") return "x";
  if (e === "w") return "y";
}
function go(e) {
  return e ? e === "l" ? "w" : "l" : null;
}
function $2(e) {
  return e ? e === "x" ? "y" : "x" : null;
}
class na {
  constructor(t) {
    H(this, "x1");
    H(this, "x2");
    H(this, "y1");
    H(this, "y2");
    H(this, "dimension");
    H(this, "direction");
    H(this, "shapeCollisions");
    H(this, "origin");
    H(this, "type");
    this.x1 = t.x1, this.x2 = t.x2, this.y1 = t.y1, this.y2 = t.y2, this.dimension = z2(this), this.direction = U2(this), this.type = t != null && t.type ? t.type : null, this.origin = t != null && t.origin ? t.origin : null;
  }
  getCoordinates() {
    return {
      x1: this.x1,
      x2: this.x2,
      y1: this.y1,
      y2: this.y2
    };
  }
}
function Ss(e, t, n, i, r = null, s = null) {
  return new na({ x1: e, y1: t, x2: n, y2: i, origin: r, type: s });
}
function z2(e) {
  return typeof e > "u" || !Ue.isNumber(e.x1) || !Ue.isNumber(e.x2) || !Ue.isNumber(e.y1) || !Ue.isNumber(e.y2) ? null : e.x1 === e.x2 && e.y1 !== e.y2 ? "w" : e.y1 === e.y2 && e.x1 !== e.x2 ? "l" : null;
}
function U2(e) {
  return typeof e > "u" || !Ue.isNumber(e.x1) || !Ue.isNumber(e.x2) || !Ue.isNumber(e.y1) || !Ue.isNumber(e.y2) ? null : e.x1 < e.x2 ? "lr" : e.x1 > e.x2 ? "rl" : e.y1 < e.y2 ? "bt" : e.y1 > e.y2 ? "tb" : null;
}
function W2(e, t) {
  const n = e.getCorners(), i = {};
  return n.bottomLeft.x > 0 && n.bottomLeft.y > 0 && (i.bottomLeftDown = Ss(
    n.bottomLeft.x,
    n.bottomLeft.y,
    n.bottomLeft.x,
    0,
    "bottomLeft",
    "bottomLeftDown"
  ), i.bottomLeftLeft = Ss(
    n.bottomLeft.x,
    n.bottomLeft.y,
    0,
    n.bottomLeft.y,
    "bottomLeft",
    "bottomLeftLeft"
  )), n.topLeft.x > 0 && n.topLeft.y < t.w && (i.topLeftLeft = Ss(
    n.topLeft.x,
    n.topLeft.y,
    0,
    n.topLeft.y,
    "topLeft",
    "topLeftLeft"
  ), i.topLeftTop = Ss(
    n.topLeft.x,
    n.topLeft.y,
    n.topLeft.x,
    t.w,
    "topLeft",
    "topLeftTop"
  )), n.topRight.y < t.w && n.topRight.x < t.l && (i.topRightTop = Ss(
    n.topRight.x,
    n.topRight.y,
    n.topRight.x,
    t.w,
    "topRight",
    "topRightTop"
  ), i.topRightRight = Ss(
    n.topRight.x,
    n.topRight.y,
    t.l,
    n.topRight.y,
    "topRight",
    "topRightRight"
  )), n.bottomRight.x < t.l && n.bottomRight.y > 0 && (i.bottomRightRight = Ss(
    n.bottomRight.x,
    n.bottomRight.y,
    t.l,
    n.bottomRight.y,
    "bottomRight",
    "bottomRightRight"
  ), i.bottomRightDown = Ss(
    n.bottomRight.x,
    n.bottomRight.y,
    n.bottomRight.x,
    0,
    "bottomRight",
    "bottomRightDown"
  )), i;
}
var Jg = Object.defineProperty, H2 = Object.getOwnPropertyNames, At = (e, t) => Jg(e, "name", { value: t, configurable: !0 }), G2 = (e, t) => function() {
  return t || (0, e[H2(e)[0]])((t = { exports: {} }).exports, t), t.exports;
}, Cf = (e, t) => {
  for (var n in t)
    Jg(e, n, { get: t[n], enumerable: !0 });
}, V2 = G2({
  "(disabled):util"() {
  }
}), Gu = {};
Cf(Gu, {
  addChainableMethod: () => $f,
  addLengthGuard: () => Al,
  addMethod: () => jf,
  addProperty: () => Df,
  checkError: () => Ri,
  compareByInspect: () => Ju,
  eql: () => A0,
  expectTypes: () => i0,
  flag: () => Oe,
  getActual: () => bc,
  getMessage: () => Ef,
  getName: () => wc,
  getOperator: () => Hf,
  getOwnEnumerableProperties: () => Wf,
  getOwnEnumerablePropertySymbols: () => Uf,
  getPathInfo: () => Rf,
  hasProperty: () => vc,
  inspect: () => ze,
  isNaN: () => Xu,
  isNumeric: () => Un,
  isProxyEnabled: () => Sl,
  isRegExp: () => Zu,
  objDisplay: () => oo,
  overwriteChainableMethod: () => zf,
  overwriteMethod: () => qf,
  overwriteProperty: () => Bf,
  proxify: () => ga,
  test: () => Tf,
  transferFlags: () => br,
  type: () => sn
});
var Ri = {};
Cf(Ri, {
  compatibleConstructor: () => Qg,
  compatibleInstance: () => Zg,
  compatibleMessage: () => t0,
  getConstructorName: () => e0,
  getMessage: () => n0
});
function yc(e) {
  return e instanceof Error || Object.prototype.toString.call(e) === "[object Error]";
}
At(yc, "isErrorInstance");
function Xg(e) {
  return Object.prototype.toString.call(e) === "[object RegExp]";
}
At(Xg, "isRegExp");
function Zg(e, t) {
  return yc(t) && e === t;
}
At(Zg, "compatibleInstance");
function Qg(e, t) {
  return yc(t) ? e.constructor === t.constructor || e instanceof t.constructor : (typeof t == "object" || typeof t == "function") && t.prototype ? e.constructor === t || e instanceof t : !1;
}
At(Qg, "compatibleConstructor");
function t0(e, t) {
  const n = typeof e == "string" ? e : e.message;
  return Xg(t) ? t.test(n) : typeof t == "string" ? n.indexOf(t) !== -1 : !1;
}
At(t0, "compatibleMessage");
function e0(e) {
  let t = e;
  return yc(e) ? t = e.constructor.name : typeof e == "function" && (t = e.name, t === "" && (t = new e().name || t)), t;
}
At(e0, "getConstructorName");
function n0(e) {
  let t = "";
  return e && e.message ? t = e.message : typeof e == "string" && (t = e), t;
}
At(n0, "getMessage");
function Oe(e, t, n) {
  var i = e.__flags || (e.__flags = /* @__PURE__ */ Object.create(null));
  if (arguments.length === 3)
    i[t] = n;
  else
    return i[t];
}
At(Oe, "flag");
function Tf(e, t) {
  var n = Oe(e, "negate"), i = t[0];
  return n ? !i : i;
}
At(Tf, "test");
function sn(e) {
  if (typeof e > "u")
    return "undefined";
  if (e === null)
    return "null";
  const t = e[Symbol.toStringTag];
  return typeof t == "string" ? t : Object.prototype.toString.call(e).slice(8, -1);
}
At(sn, "type");
var Y2 = "captureStackTrace" in Error, po, Ve = (po = class extends Error {
  constructor(n = "Unspecified AssertionError", i, r) {
    super(n);
    H(this, "message");
    this.message = n, Y2 && Error.captureStackTrace(this, r || po);
    for (const s in i)
      s in this || (this[s] = i[s]);
  }
  get name() {
    return "AssertionError";
  }
  get ok() {
    return !1;
  }
  toJSON(n) {
    return {
      ...this,
      name: this.name,
      message: this.message,
      ok: !1,
      stack: n !== !1 ? this.stack : void 0
    };
  }
}, At(po, "AssertionError"), po);
function i0(e, t) {
  var n = Oe(e, "message"), i = Oe(e, "ssfi");
  n = n ? n + ": " : "", e = Oe(e, "object"), t = t.map(function(o) {
    return o.toLowerCase();
  }), t.sort();
  var r = t.map(function(o, a) {
    var l = ~["a", "e", "i", "o", "u"].indexOf(o.charAt(0)) ? "an" : "a", h = t.length > 1 && a === t.length - 1 ? "or " : "";
    return h + l + " " + o;
  }).join(", "), s = sn(e).toLowerCase();
  if (!t.some(function(o) {
    return s === o;
  }))
    throw new Ve(
      n + "object tested must be " + r + ", but " + s + " given",
      void 0,
      i
    );
}
At(i0, "expectTypes");
function bc(e, t) {
  return t.length > 4 ? t[4] : e._obj;
}
At(bc, "getActual");
var yp = {
  bold: ["1", "22"],
  dim: ["2", "22"],
  italic: ["3", "23"],
  underline: ["4", "24"],
  // 5 & 6 are blinking
  inverse: ["7", "27"],
  hidden: ["8", "28"],
  strike: ["9", "29"],
  // 10-20 are fonts
  // 21-29 are resets for 1-9
  black: ["30", "39"],
  red: ["31", "39"],
  green: ["32", "39"],
  yellow: ["33", "39"],
  blue: ["34", "39"],
  magenta: ["35", "39"],
  cyan: ["36", "39"],
  white: ["37", "39"],
  brightblack: ["30;1", "39"],
  brightred: ["31;1", "39"],
  brightgreen: ["32;1", "39"],
  brightyellow: ["33;1", "39"],
  brightblue: ["34;1", "39"],
  brightmagenta: ["35;1", "39"],
  brightcyan: ["36;1", "39"],
  brightwhite: ["37;1", "39"],
  grey: ["90", "39"]
}, K2 = {
  special: "cyan",
  number: "yellow",
  bigint: "yellow",
  boolean: "yellow",
  undefined: "grey",
  null: "bold",
  string: "green",
  symbol: "green",
  date: "magenta",
  regexp: "red"
}, la = "…";
function r0(e, t) {
  const n = yp[K2[t]] || yp[t] || "";
  return n ? `\x1B[${n[0]}m${String(e)}\x1B[${n[1]}m` : String(e);
}
At(r0, "colorise");
function s0({
  showHidden: e = !1,
  depth: t = 2,
  colors: n = !1,
  customInspect: i = !0,
  showProxy: r = !1,
  maxArrayLength: s = 1 / 0,
  breakLength: o = 1 / 0,
  seen: a = [],
  // eslint-disable-next-line no-shadow
  truncate: l = 1 / 0,
  stylize: h = String
} = {}, c) {
  const d = {
    showHidden: !!e,
    depth: Number(t),
    colors: !!n,
    customInspect: !!i,
    showProxy: !!r,
    maxArrayLength: Number(s),
    breakLength: Number(o),
    truncate: Number(l),
    seen: a,
    inspect: c,
    stylize: h
  };
  return d.colors && (d.stylize = r0), d;
}
At(s0, "normaliseOptions");
function o0(e) {
  return e >= "\uD800" && e <= "\uDBFF";
}
At(o0, "isHighSurrogate");
function rs(e, t, n = la) {
  e = String(e);
  const i = n.length, r = e.length;
  if (i > t && r > i)
    return n;
  if (r > t && r > i) {
    let s = t - i;
    return s > 0 && o0(e[s - 1]) && (s = s - 1), `${e.slice(0, s)}${n}`;
  }
  return e;
}
At(rs, "truncate");
function Qi(e, t, n, i = ", ") {
  n = n || t.inspect;
  const r = e.length;
  if (r === 0)
    return "";
  const s = t.truncate;
  let o = "", a = "", l = "";
  for (let h = 0; h < r; h += 1) {
    const c = h + 1 === e.length, d = h + 2 === e.length;
    l = `${la}(${e.length - h})`;
    const g = e[h];
    t.truncate = s - o.length - (c ? 0 : i.length);
    const p = a || n(g, t) + (c ? "" : i), b = o.length + p.length, x = b + l.length;
    if (c && b > s && o.length + l.length <= s || !c && !d && x > s || (a = c ? "" : n(e[h + 1], t) + (d ? "" : i), !c && d && x > s && b + a.length > s))
      break;
    if (o += p, !c && !d && b + a.length >= s) {
      l = `${la}(${e.length - h - 1})`;
      break;
    }
    l = "";
  }
  return `${o}${l}`;
}
At(Qi, "inspectList");
function a0(e) {
  return e.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/) ? e : JSON.stringify(e).replace(/'/g, "\\'").replace(/\\"/g, '"').replace(/(^"|"$)/g, "'");
}
At(a0, "quoteComplexKey");
function ua([e, t], n) {
  return n.truncate -= 2, typeof e == "string" ? e = a0(e) : typeof e != "number" && (e = `[${n.inspect(e, n)}]`), n.truncate -= e.length, t = n.inspect(t, n), `${e}: ${t}`;
}
At(ua, "inspectProperty");
function l0(e, t) {
  const n = Object.keys(e).slice(e.length);
  if (!e.length && !n.length)
    return "[]";
  t.truncate -= 4;
  const i = Qi(e, t);
  t.truncate -= i.length;
  let r = "";
  return n.length && (r = Qi(n.map((s) => [s, e[s]]), t, ua)), `[ ${i}${r ? `, ${r}` : ""} ]`;
}
At(l0, "inspectArray");
var J2 = /* @__PURE__ */ At((e) => typeof Buffer == "function" && e instanceof Buffer ? "Buffer" : e[Symbol.toStringTag] ? e[Symbol.toStringTag] : e.constructor.name, "getArrayName");
function Pr(e, t) {
  const n = J2(e);
  t.truncate -= n.length + 4;
  const i = Object.keys(e).slice(e.length);
  if (!e.length && !i.length)
    return `${n}[]`;
  let r = "";
  for (let o = 0; o < e.length; o++) {
    const a = `${t.stylize(rs(e[o], t.truncate), "number")}${o === e.length - 1 ? "" : ", "}`;
    if (t.truncate -= a.length, e[o] !== e.length && t.truncate <= 3) {
      r += `${la}(${e.length - e[o] + 1})`;
      break;
    }
    r += a;
  }
  let s = "";
  return i.length && (s = Qi(i.map((o) => [o, e[o]]), t, ua)), `${n}[ ${r}${s ? `, ${s}` : ""} ]`;
}
At(Pr, "inspectTypedArray");
function u0(e, t) {
  const n = e.toJSON();
  if (n === null)
    return "Invalid Date";
  const i = n.split("T"), r = i[0];
  return t.stylize(`${r}T${rs(i[1], t.truncate - r.length - 1)}`, "date");
}
At(u0, "inspectDate");
function Rh(e, t) {
  const n = e[Symbol.toStringTag] || "Function", i = e.name;
  return i ? t.stylize(`[${n} ${rs(i, t.truncate - 11)}]`, "special") : t.stylize(`[${n}]`, "special");
}
At(Rh, "inspectFunction");
function c0([e, t], n) {
  return n.truncate -= 4, e = n.inspect(e, n), n.truncate -= e.length, t = n.inspect(t, n), `${e} => ${t}`;
}
At(c0, "inspectMapEntry");
function h0(e) {
  const t = [];
  return e.forEach((n, i) => {
    t.push([i, n]);
  }), t;
}
At(h0, "mapToEntries");
function f0(e, t) {
  return e.size - 1 <= 0 ? "Map{}" : (t.truncate -= 7, `Map{ ${Qi(h0(e), t, c0)} }`);
}
At(f0, "inspectMap");
var X2 = Number.isNaN || ((e) => e !== e);
function Dh(e, t) {
  return X2(e) ? t.stylize("NaN", "number") : e === 1 / 0 ? t.stylize("Infinity", "number") : e === -1 / 0 ? t.stylize("-Infinity", "number") : e === 0 ? t.stylize(1 / e === 1 / 0 ? "+0" : "-0", "number") : t.stylize(rs(String(e), t.truncate), "number");
}
At(Dh, "inspectNumber");
function jh(e, t) {
  let n = rs(e.toString(), t.truncate - 1);
  return n !== la && (n += "n"), t.stylize(n, "bigint");
}
At(jh, "inspectBigInt");
function d0(e, t) {
  const n = e.toString().split("/")[2], i = t.truncate - (2 + n.length), r = e.source;
  return t.stylize(`/${rs(r, i)}/${n}`, "regexp");
}
At(d0, "inspectRegExp");
function p0(e) {
  const t = [];
  return e.forEach((n) => {
    t.push(n);
  }), t;
}
At(p0, "arrayFromSet");
function g0(e, t) {
  return e.size === 0 ? "Set{}" : (t.truncate -= 7, `Set{ ${Qi(p0(e), t)} }`);
}
At(g0, "inspectSet");
var bp = new RegExp("['\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]", "g"), Z2 = {
  "\b": "\\b",
  "	": "\\t",
  "\n": "\\n",
  "\f": "\\f",
  "\r": "\\r",
  "'": "\\'",
  "\\": "\\\\"
}, Q2 = 16, ty = 4;
function m0(e) {
  return Z2[e] || `\\u${`0000${e.charCodeAt(0).toString(Q2)}`.slice(-ty)}`;
}
At(m0, "escape");
function Bh(e, t) {
  return bp.test(e) && (e = e.replace(bp, m0)), t.stylize(`'${rs(e, t.truncate - 2)}'`, "string");
}
At(Bh, "inspectString");
function qh(e) {
  return "description" in Symbol.prototype ? e.description ? `Symbol(${e.description})` : "Symbol()" : e.toString();
}
At(qh, "inspectSymbol");
var y0 = /* @__PURE__ */ At(() => "Promise{…}", "getPromiseValue");
try {
  const { getPromiseDetails: e, kPending: t, kRejected: n } = process.binding("util");
  Array.isArray(e(Promise.resolve())) && (y0 = /* @__PURE__ */ At((i, r) => {
    const [s, o] = e(i);
    return s === t ? "Promise{<pending>}" : `Promise${s === n ? "!" : ""}{${r.inspect(o, r)}}`;
  }, "getPromiseValue"));
} catch {
}
var ey = y0;
function ll(e, t) {
  const n = Object.getOwnPropertyNames(e), i = Object.getOwnPropertySymbols ? Object.getOwnPropertySymbols(e) : [];
  if (n.length === 0 && i.length === 0)
    return "{}";
  if (t.truncate -= 4, t.seen = t.seen || [], t.seen.includes(e))
    return "[Circular]";
  t.seen.push(e);
  const r = Qi(n.map((a) => [a, e[a]]), t, ua), s = Qi(i.map((a) => [a, e[a]]), t, ua);
  t.seen.pop();
  let o = "";
  return r && s && (o = ", "), `{ ${r}${o}${s} }`;
}
At(ll, "inspectObject");
var hh = typeof Symbol < "u" && Symbol.toStringTag ? Symbol.toStringTag : !1;
function b0(e, t) {
  let n = "";
  return hh && hh in e && (n = e[hh]), n = n || e.constructor.name, (!n || n === "_class") && (n = "<Anonymous Class>"), t.truncate -= n.length, `${n}${ll(e, t)}`;
}
At(b0, "inspectClass");
function v0(e, t) {
  return e.length === 0 ? "Arguments[]" : (t.truncate -= 13, `Arguments[ ${Qi(e, t)} ]`);
}
At(v0, "inspectArguments");
var ny = [
  "stack",
  "line",
  "column",
  "name",
  "message",
  "fileName",
  "lineNumber",
  "columnNumber",
  "number",
  "description",
  "cause"
];
function w0(e, t) {
  const n = Object.getOwnPropertyNames(e).filter((o) => ny.indexOf(o) === -1), i = e.name;
  t.truncate -= i.length;
  let r = "";
  if (typeof e.message == "string" ? r = rs(e.message, t.truncate) : n.unshift("message"), r = r ? `: ${r}` : "", t.truncate -= r.length + 5, t.seen = t.seen || [], t.seen.includes(e))
    return "[Circular]";
  t.seen.push(e);
  const s = Qi(n.map((o) => [o, e[o]]), t, ua);
  return `${i}${r}${s ? ` { ${s} }` : ""}`;
}
At(w0, "inspectObject");
function x0([e, t], n) {
  return n.truncate -= 3, t ? `${n.stylize(String(e), "yellow")}=${n.stylize(`"${t}"`, "string")}` : `${n.stylize(String(e), "yellow")}`;
}
At(x0, "inspectAttribute");
function Vu(e, t) {
  return Qi(e, t, If, `
`);
}
At(Vu, "inspectHTMLCollection");
function If(e, t) {
  const n = e.getAttributeNames(), i = e.tagName.toLowerCase(), r = t.stylize(`<${i}`, "special"), s = t.stylize(">", "special"), o = t.stylize(`</${i}>`, "special");
  t.truncate -= i.length * 2 + 5;
  let a = "";
  n.length > 0 && (a += " ", a += Qi(n.map((c) => [c, e.getAttribute(c)]), t, x0, " ")), t.truncate -= a.length;
  const l = t.truncate;
  let h = Vu(e.children, t);
  return h && h.length > l && (h = `${la}(${e.children.length})`), `${r}${a}${s}${h}${o}`;
}
At(If, "inspectHTML");
var iy = typeof Symbol == "function" && typeof Symbol.for == "function", fh = iy ? Symbol.for("chai/inspect") : "@@chai/inspect", ia = !1;
try {
  const e = V2();
  ia = e.inspect ? e.inspect.custom : !1;
} catch {
  ia = !1;
}
var vp = /* @__PURE__ */ new WeakMap(), wp = {}, xp = {
  undefined: (e, t) => t.stylize("undefined", "undefined"),
  null: (e, t) => t.stylize("null", "null"),
  boolean: (e, t) => t.stylize(String(e), "boolean"),
  Boolean: (e, t) => t.stylize(String(e), "boolean"),
  number: Dh,
  Number: Dh,
  bigint: jh,
  BigInt: jh,
  string: Bh,
  String: Bh,
  function: Rh,
  Function: Rh,
  symbol: qh,
  // A Symbol polyfill will return `Symbol` not `symbol` from typedetect
  Symbol: qh,
  Array: l0,
  Date: u0,
  Map: f0,
  Set: g0,
  RegExp: d0,
  Promise: ey,
  // WeakSet, WeakMap are totally opaque to us
  WeakSet: (e, t) => t.stylize("WeakSet{…}", "special"),
  WeakMap: (e, t) => t.stylize("WeakMap{…}", "special"),
  Arguments: v0,
  Int8Array: Pr,
  Uint8Array: Pr,
  Uint8ClampedArray: Pr,
  Int16Array: Pr,
  Uint16Array: Pr,
  Int32Array: Pr,
  Uint32Array: Pr,
  Float32Array: Pr,
  Float64Array: Pr,
  Generator: () => "",
  DataView: () => "",
  ArrayBuffer: () => "",
  Error: w0,
  HTMLCollection: Vu,
  NodeList: Vu
}, ry = /* @__PURE__ */ At((e, t, n) => fh in e && typeof e[fh] == "function" ? e[fh](t) : ia && ia in e && typeof e[ia] == "function" ? e[ia](t.depth, t) : "inspect" in e && typeof e.inspect == "function" ? e.inspect(t.depth, t) : "constructor" in e && vp.has(e.constructor) ? vp.get(e.constructor)(e, t) : wp[n] ? wp[n](e, t) : "", "inspectCustom"), sy = Object.prototype.toString;
function Yu(e, t = {}) {
  const n = s0(t, Yu), { customInspect: i } = n;
  let r = e === null ? "null" : typeof e;
  if (r === "object" && (r = sy.call(e).slice(8, -1)), r in xp)
    return xp[r](e, n);
  if (i && e) {
    const o = ry(e, n, r);
    if (o)
      return typeof o == "string" ? o : Yu(o, n);
  }
  const s = e ? Object.getPrototypeOf(e) : !1;
  return s === Object.prototype || s === null ? ll(e, n) : e && typeof HTMLElement == "function" && e instanceof HTMLElement ? If(e, n) : "constructor" in e ? e.constructor !== Object ? b0(e, n) : ll(e, n) : e === Object(e) ? ll(e, n) : n.stylize(String(e), r);
}
At(Yu, "inspect");
var di = {
  /**
   * ### config.includeStack
   *
   * User configurable property, influences whether stack trace
   * is included in Assertion error message. Default of false
   * suppresses stack trace in the error message.
   *
   *     chai.config.includeStack = true;  // enable stack on error
   *
   * @param {boolean}
   * @public
   */
  includeStack: !1,
  /**
   * ### config.showDiff
   *
   * User configurable property, influences whether or not
   * the `showDiff` flag should be included in the thrown
   * AssertionErrors. `false` will always be `false`; `true`
   * will be true when the assertion has requested a diff
   * be shown.
   *
   * @param {boolean}
   * @public
   */
  showDiff: !0,
  /**
   * ### config.truncateThreshold
   *
   * User configurable property, sets length threshold for actual and
   * expected values in assertion errors. If this threshold is exceeded, for
   * example for large data structures, the value is replaced with something
   * like `[ Array(3) ]` or `{ Object (prop1, prop2) }`.
   *
   * Set it to zero if you want to disable truncating altogether.
   *
   * This is especially userful when doing assertions on arrays: having this
   * set to a reasonable large value makes the failure messages readily
   * inspectable.
   *
   *     chai.config.truncateThreshold = 0;  // disable truncating
   *
   * @param {number}
   * @public
   */
  truncateThreshold: 40,
  /**
   * ### config.useProxy
   *
   * User configurable property, defines if chai will use a Proxy to throw
   * an error when a non-existent property is read, which protects users
   * from typos when using property-based assertions.
   *
   * Set it to false if you want to disable this feature.
   *
   *     chai.config.useProxy = false;  // disable use of Proxy
   *
   * This feature is automatically disabled regardless of this config value
   * in environments that don't support proxies.
   *
   * @param {boolean}
   * @public
   */
  useProxy: !0,
  /**
   * ### config.proxyExcludedKeys
   *
   * User configurable property, defines which properties should be ignored
   * instead of throwing an error if they do not exist on the assertion.
   * This is only applied if the environment Chai is running in supports proxies and
   * if the `useProxy` configuration setting is enabled.
   * By default, `then` and `inspect` will not throw an error if they do not exist on the
   * assertion object because the `.inspect` property is read by `util.inspect` (for example, when
   * using `console.log` on the assertion object) and `.then` is necessary for promise type-checking.
   *
   *     // By default these keys will not throw an error if they do not exist on the assertion object
   *     chai.config.proxyExcludedKeys = ['then', 'inspect'];
   *
   * @param {Array}
   * @public
   */
  proxyExcludedKeys: ["then", "catch", "inspect", "toJSON"],
  /**
   * ### config.deepEqual
   *
   * User configurable property, defines which a custom function to use for deepEqual
   * comparisons.
   * By default, the function used is the one from the `deep-eql` package without custom comparator.
   *
   *     // use a custom comparator
   *     chai.config.deepEqual = (expected, actual) => {
   *         return chai.util.eql(expected, actual, {
   *             comparator: (expected, actual) => {
   *                 // for non number comparison, use the default behavior
   *                 if(typeof expected !== 'number') return null;
   *                 // allow a difference of 10 between compared numbers
   *                 return typeof actual === 'number' && Math.abs(actual - expected) < 10
   *             }
   *         })
   *     };
   *
   * @param {Function}
   * @public
   */
  deepEqual: null
};
function ze(e, t, n, i) {
  var r = {
    colors: i,
    depth: typeof n > "u" ? 2 : n,
    showHidden: t,
    truncate: di.truncateThreshold ? di.truncateThreshold : 1 / 0
  };
  return Yu(e, r);
}
At(ze, "inspect");
function oo(e) {
  var t = ze(e), n = Object.prototype.toString.call(e);
  if (di.truncateThreshold && t.length >= di.truncateThreshold) {
    if (n === "[object Function]")
      return !e.name || e.name === "" ? "[Function]" : "[Function: " + e.name + "]";
    if (n === "[object Array]")
      return "[ Array(" + e.length + ") ]";
    if (n === "[object Object]") {
      var i = Object.keys(e), r = i.length > 2 ? i.splice(0, 2).join(", ") + ", ..." : i.join(", ");
      return "{ Object (" + r + ") }";
    } else
      return t;
  } else
    return t;
}
At(oo, "objDisplay");
function Ef(e, t) {
  var n = Oe(e, "negate"), i = Oe(e, "object"), r = t[3], s = bc(e, t), o = n ? t[2] : t[1], a = Oe(e, "message");
  return typeof o == "function" && (o = o()), o = o || "", o = o.replace(/#\{this\}/g, function() {
    return oo(i);
  }).replace(/#\{act\}/g, function() {
    return oo(s);
  }).replace(/#\{exp\}/g, function() {
    return oo(r);
  }), a ? a + ": " + o : o;
}
At(Ef, "getMessage");
function br(e, t, n) {
  var i = e.__flags || (e.__flags = /* @__PURE__ */ Object.create(null));
  t.__flags || (t.__flags = /* @__PURE__ */ Object.create(null)), n = arguments.length === 3 ? n : !0;
  for (var r in i)
    (n || r !== "object" && r !== "ssfi" && r !== "lockSsfi" && r != "message") && (t.__flags[r] = i[r]);
}
At(br, "transferFlags");
function $h(e) {
  if (typeof e > "u")
    return "undefined";
  if (e === null)
    return "null";
  const t = e[Symbol.toStringTag];
  return typeof t == "string" ? t : Object.prototype.toString.call(e).slice(8, -1);
}
At($h, "type");
function Of() {
  this._key = "chai/deep-eql__" + Math.random() + Date.now();
}
At(Of, "FakeMap");
Of.prototype = {
  get: /* @__PURE__ */ At(function(t) {
    return t[this._key];
  }, "get"),
  set: /* @__PURE__ */ At(function(t, n) {
    Object.isExtensible(t) && Object.defineProperty(t, this._key, {
      value: n,
      configurable: !0
    });
  }, "set")
};
var S0 = typeof WeakMap == "function" ? WeakMap : Of;
function zh(e, t, n) {
  if (!n || mo(e) || mo(t))
    return null;
  var i = n.get(e);
  if (i) {
    var r = i.get(t);
    if (typeof r == "boolean")
      return r;
  }
  return null;
}
At(zh, "memoizeCompare");
function il(e, t, n, i) {
  if (!(!n || mo(e) || mo(t))) {
    var r = n.get(e);
    r ? r.set(t, i) : (r = new S0(), r.set(t, i), n.set(e, r));
  }
}
At(il, "memoizeSet");
var A0 = xl;
function xl(e, t, n) {
  if (n && n.comparator)
    return Uh(e, t, n);
  var i = Ff(e, t);
  return i !== null ? i : Uh(e, t, n);
}
At(xl, "deepEqual");
function Ff(e, t) {
  return e === t ? e !== 0 || 1 / e === 1 / t : e !== e && // eslint-disable-line no-self-compare
  t !== t ? !0 : mo(e) || mo(t) ? !1 : null;
}
At(Ff, "simpleEqual");
function Uh(e, t, n) {
  n = n || {}, n.memoize = n.memoize === !1 ? !1 : n.memoize || new S0();
  var i = n && n.comparator, r = zh(e, t, n.memoize);
  if (r !== null)
    return r;
  var s = zh(t, e, n.memoize);
  if (s !== null)
    return s;
  if (i) {
    var o = i(e, t);
    if (o === !1 || o === !0)
      return il(e, t, n.memoize, o), o;
    var a = Ff(e, t);
    if (a !== null)
      return a;
  }
  var l = $h(e);
  if (l !== $h(t))
    return il(e, t, n.memoize, !1), !1;
  il(e, t, n.memoize, !0);
  var h = k0(e, t, l, n);
  return il(e, t, n.memoize, h), h;
}
At(Uh, "extensiveDeepEqual");
function k0(e, t, n, i) {
  switch (n) {
    case "String":
    case "Number":
    case "Boolean":
    case "Date":
      return xl(e.valueOf(), t.valueOf());
    case "Promise":
    case "Symbol":
    case "function":
    case "WeakMap":
    case "WeakSet":
      return e === t;
    case "Error":
      return Mf(e, t, ["name", "message", "code"], i);
    case "Arguments":
    case "Int8Array":
    case "Uint8Array":
    case "Uint8ClampedArray":
    case "Int16Array":
    case "Uint16Array":
    case "Int32Array":
    case "Uint32Array":
    case "Float32Array":
    case "Float64Array":
    case "Array":
      return Ts(e, t, i);
    case "RegExp":
      return _0(e, t);
    case "Generator":
      return N0(e, t, i);
    case "DataView":
      return Ts(new Uint8Array(e.buffer), new Uint8Array(t.buffer), i);
    case "ArrayBuffer":
      return Ts(new Uint8Array(e), new Uint8Array(t), i);
    case "Set":
      return Wh(e, t, i);
    case "Map":
      return Wh(e, t, i);
    case "Temporal.PlainDate":
    case "Temporal.PlainTime":
    case "Temporal.PlainDateTime":
    case "Temporal.Instant":
    case "Temporal.ZonedDateTime":
    case "Temporal.PlainYearMonth":
    case "Temporal.PlainMonthDay":
      return e.equals(t);
    case "Temporal.Duration":
      return e.total("nanoseconds") === t.total("nanoseconds");
    case "Temporal.TimeZone":
    case "Temporal.Calendar":
      return e.toString() === t.toString();
    default:
      return L0(e, t, i);
  }
}
At(k0, "extensiveDeepEqualByType");
function _0(e, t) {
  return e.toString() === t.toString();
}
At(_0, "regexpEqual");
function Wh(e, t, n) {
  try {
    if (e.size !== t.size)
      return !1;
    if (e.size === 0)
      return !0;
  } catch {
    return !1;
  }
  var i = [], r = [];
  return e.forEach(/* @__PURE__ */ At(function(o, a) {
    i.push([o, a]);
  }, "gatherEntries")), t.forEach(/* @__PURE__ */ At(function(o, a) {
    r.push([o, a]);
  }, "gatherEntries")), Ts(i.sort(), r.sort(), n);
}
At(Wh, "entriesEqual");
function Ts(e, t, n) {
  var i = e.length;
  if (i !== t.length)
    return !1;
  if (i === 0)
    return !0;
  for (var r = -1; ++r < i; )
    if (xl(e[r], t[r], n) === !1)
      return !1;
  return !0;
}
At(Ts, "iterableEqual");
function N0(e, t, n) {
  return Ts(Ku(e), Ku(t), n);
}
At(N0, "generatorEqual");
function P0(e) {
  return typeof Symbol < "u" && typeof e == "object" && typeof Symbol.iterator < "u" && typeof e[Symbol.iterator] == "function";
}
At(P0, "hasIteratorFunction");
function Hh(e) {
  if (P0(e))
    try {
      return Ku(e[Symbol.iterator]());
    } catch {
      return [];
    }
  return [];
}
At(Hh, "getIteratorEntries");
function Ku(e) {
  for (var t = e.next(), n = [t.value]; t.done === !1; )
    t = e.next(), n.push(t.value);
  return n;
}
At(Ku, "getGeneratorEntries");
function Gh(e) {
  var t = [];
  for (var n in e)
    t.push(n);
  return t;
}
At(Gh, "getEnumerableKeys");
function Vh(e) {
  for (var t = [], n = Object.getOwnPropertySymbols(e), i = 0; i < n.length; i += 1) {
    var r = n[i];
    Object.getOwnPropertyDescriptor(e, r).enumerable && t.push(r);
  }
  return t;
}
At(Vh, "getEnumerableSymbols");
function Mf(e, t, n, i) {
  var r = n.length;
  if (r === 0)
    return !0;
  for (var s = 0; s < r; s += 1)
    if (xl(e[n[s]], t[n[s]], i) === !1)
      return !1;
  return !0;
}
At(Mf, "keysEqual");
function L0(e, t, n) {
  var i = Gh(e), r = Gh(t), s = Vh(e), o = Vh(t);
  if (i = i.concat(s), r = r.concat(o), i.length && i.length === r.length)
    return Ts(Yh(i).sort(), Yh(r).sort()) === !1 ? !1 : Mf(e, t, i, n);
  var a = Hh(e), l = Hh(t);
  return a.length && a.length === l.length ? (a.sort(), l.sort(), Ts(a, l, n)) : i.length === 0 && a.length === 0 && r.length === 0 && l.length === 0;
}
At(L0, "objectEqual");
function mo(e) {
  return e === null || typeof e != "object";
}
At(mo, "isPrimitive");
function Yh(e) {
  return e.map(/* @__PURE__ */ At(function(n) {
    return typeof n == "symbol" ? n.toString() : n;
  }, "mapSymbol"));
}
At(Yh, "mapSymbols");
function vc(e, t) {
  return typeof e > "u" || e === null ? !1 : t in Object(e);
}
At(vc, "hasProperty");
function C0(e) {
  return e.replace(/([^\\])\[/g, "$1.[").match(/(\\\.|[^.]+?)+/g).map((i) => {
    if (i === "constructor" || i === "__proto__" || i === "prototype")
      return {};
    const s = /^\[(\d+)\]$/.exec(i);
    let o = null;
    return s ? o = { i: parseFloat(s[1]) } : o = { p: i.replace(/\\([.[\]])/g, "$1") }, o;
  });
}
At(C0, "parsePath");
function Kh(e, t, n) {
  let i = e, r = null;
  n = typeof n > "u" ? t.length : n;
  for (let s = 0; s < n; s++) {
    const o = t[s];
    i && (typeof o.p > "u" ? i = i[o.i] : i = i[o.p], s === n - 1 && (r = i));
  }
  return r;
}
At(Kh, "internalGetPathValue");
function Rf(e, t) {
  const n = C0(t), i = n[n.length - 1], r = {
    parent: n.length > 1 ? Kh(e, n, n.length - 1) : e,
    name: i.p || i.i,
    value: Kh(e, n)
  };
  return r.exists = vc(r.parent, r.name), r;
}
At(Rf, "getPathInfo");
function X(e, t, n, i) {
  return Oe(this, "ssfi", n || X), Oe(this, "lockSsfi", i), Oe(this, "object", e), Oe(this, "message", t), Oe(this, "eql", di.deepEqual || A0), ga(this);
}
At(X, "Assertion");
Object.defineProperty(X, "includeStack", {
  get: function() {
    return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."), di.includeStack;
  },
  set: function(e) {
    console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."), di.includeStack = e;
  }
});
Object.defineProperty(X, "showDiff", {
  get: function() {
    return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."), di.showDiff;
  },
  set: function(e) {
    console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."), di.showDiff = e;
  }
});
X.addProperty = function(e, t) {
  Df(this.prototype, e, t);
};
X.addMethod = function(e, t) {
  jf(this.prototype, e, t);
};
X.addChainableMethod = function(e, t, n) {
  $f(this.prototype, e, t, n);
};
X.overwriteProperty = function(e, t) {
  Bf(this.prototype, e, t);
};
X.overwriteMethod = function(e, t) {
  qf(this.prototype, e, t);
};
X.overwriteChainableMethod = function(e, t, n) {
  zf(this.prototype, e, t, n);
};
X.prototype.assert = function(e, t, n, i, r, s) {
  var o = Tf(this, arguments);
  if (s !== !1 && (s = !0), i === void 0 && r === void 0 && (s = !1), di.showDiff !== !0 && (s = !1), !o) {
    t = Ef(this, arguments);
    var a = bc(this, arguments), l = {
      actual: a,
      expected: i,
      showDiff: s
    }, h = Hf(this, arguments);
    throw h && (l.operator = h), new Ve(
      t,
      l,
      di.includeStack ? this.assert : Oe(this, "ssfi")
    );
  }
};
Object.defineProperty(
  X.prototype,
  "_obj",
  {
    get: function() {
      return Oe(this, "object");
    },
    set: function(e) {
      Oe(this, "object", e);
    }
  }
);
function Sl() {
  return di.useProxy && typeof Proxy < "u" && typeof Reflect < "u";
}
At(Sl, "isProxyEnabled");
function Df(e, t, n) {
  n = n === void 0 ? function() {
  } : n, Object.defineProperty(
    e,
    t,
    {
      get: /* @__PURE__ */ At(function i() {
        !Sl() && !Oe(this, "lockSsfi") && Oe(this, "ssfi", i);
        var r = n.call(this);
        if (r !== void 0)
          return r;
        var s = new X();
        return br(this, s), s;
      }, "propertyGetter"),
      configurable: !0
    }
  );
}
At(Df, "addProperty");
var oy = Object.getOwnPropertyDescriptor(function() {
}, "length");
function Al(e, t, n) {
  return oy.configurable && Object.defineProperty(e, "length", {
    get: function() {
      throw Error(n ? "Invalid Chai property: " + t + '.length. Due to a compatibility issue, "length" cannot directly follow "' + t + '". Use "' + t + '.lengthOf" instead.' : "Invalid Chai property: " + t + '.length. See docs for proper usage of "' + t + '".');
    }
  }), e;
}
At(Al, "addLengthGuard");
function T0(e) {
  var t = Object.getOwnPropertyNames(e);
  function n(r) {
    t.indexOf(r) === -1 && t.push(r);
  }
  At(n, "addProperty");
  for (var i = Object.getPrototypeOf(e); i !== null; )
    Object.getOwnPropertyNames(i).forEach(n), i = Object.getPrototypeOf(i);
  return t;
}
At(T0, "getProperties");
var Sp = ["__flags", "__methods", "_obj", "assert"];
function ga(e, t) {
  return Sl() ? new Proxy(e, {
    get: /* @__PURE__ */ At(function n(i, r) {
      if (typeof r == "string" && di.proxyExcludedKeys.indexOf(r) === -1 && !Reflect.has(i, r)) {
        if (t)
          throw Error("Invalid Chai property: " + t + "." + r + '. See docs for proper usage of "' + t + '".');
        var s = null, o = 4;
        throw T0(i).forEach(function(a) {
          if (!Object.prototype.hasOwnProperty(a) && Sp.indexOf(a) === -1) {
            var l = I0(
              r,
              a,
              o
            );
            l < o && (s = a, o = l);
          }
        }), Error(s !== null ? "Invalid Chai property: " + r + '. Did you mean "' + s + '"?' : "Invalid Chai property: " + r);
      }
      return Sp.indexOf(r) === -1 && !Oe(i, "lockSsfi") && Oe(i, "ssfi", n), Reflect.get(i, r);
    }, "proxyGetter")
  }) : e;
}
At(ga, "proxify");
function I0(e, t, n) {
  if (Math.abs(e.length - t.length) >= n)
    return n;
  for (var i = [], r = 0; r <= e.length; r++)
    i[r] = Array(t.length + 1).fill(0), i[r][0] = r;
  for (var s = 0; s < t.length; s++)
    i[0][s] = s;
  for (var r = 1; r <= e.length; r++)
    for (var o = e.charCodeAt(r - 1), s = 1; s <= t.length; s++) {
      if (Math.abs(r - s) >= n) {
        i[r][s] = n;
        continue;
      }
      i[r][s] = Math.min(
        i[r - 1][s] + 1,
        i[r][s - 1] + 1,
        i[r - 1][s - 1] + (o === t.charCodeAt(s - 1) ? 0 : 1)
      );
    }
  return i[e.length][t.length];
}
At(I0, "stringDistanceCapped");
function jf(e, t, n) {
  var i = /* @__PURE__ */ At(function() {
    Oe(this, "lockSsfi") || Oe(this, "ssfi", i);
    var r = n.apply(this, arguments);
    if (r !== void 0)
      return r;
    var s = new X();
    return br(this, s), s;
  }, "methodWrapper");
  Al(i, t, !1), e[t] = ga(i, t);
}
At(jf, "addMethod");
function Bf(e, t, n) {
  var i = Object.getOwnPropertyDescriptor(e, t), r = /* @__PURE__ */ At(function() {
  }, "_super");
  i && typeof i.get == "function" && (r = i.get), Object.defineProperty(
    e,
    t,
    {
      get: /* @__PURE__ */ At(function s() {
        !Sl() && !Oe(this, "lockSsfi") && Oe(this, "ssfi", s);
        var o = Oe(this, "lockSsfi");
        Oe(this, "lockSsfi", !0);
        var a = n(r).call(this);
        if (Oe(this, "lockSsfi", o), a !== void 0)
          return a;
        var l = new X();
        return br(this, l), l;
      }, "overwritingPropertyGetter"),
      configurable: !0
    }
  );
}
At(Bf, "overwriteProperty");
function qf(e, t, n) {
  var i = e[t], r = /* @__PURE__ */ At(function() {
    throw new Error(t + " is not a function");
  }, "_super");
  i && typeof i == "function" && (r = i);
  var s = /* @__PURE__ */ At(function() {
    Oe(this, "lockSsfi") || Oe(this, "ssfi", s);
    var o = Oe(this, "lockSsfi");
    Oe(this, "lockSsfi", !0);
    var a = n(r).apply(this, arguments);
    if (Oe(this, "lockSsfi", o), a !== void 0)
      return a;
    var l = new X();
    return br(this, l), l;
  }, "overwritingMethodWrapper");
  Al(s, t, !1), e[t] = ga(s, t);
}
At(qf, "overwriteMethod");
var ay = typeof Object.setPrototypeOf == "function", Ap = /* @__PURE__ */ At(function() {
}, "testFn"), ly = Object.getOwnPropertyNames(Ap).filter(function(e) {
  var t = Object.getOwnPropertyDescriptor(Ap, e);
  return typeof t != "object" ? !0 : !t.configurable;
}), uy = Function.prototype.call, cy = Function.prototype.apply;
function $f(e, t, n, i) {
  typeof i != "function" && (i = /* @__PURE__ */ At(function() {
  }, "chainingBehavior"));
  var r = {
    method: n,
    chainingBehavior: i
  };
  e.__methods || (e.__methods = {}), e.__methods[t] = r, Object.defineProperty(
    e,
    t,
    {
      get: /* @__PURE__ */ At(function() {
        r.chainingBehavior.call(this);
        var o = /* @__PURE__ */ At(function() {
          Oe(this, "lockSsfi") || Oe(this, "ssfi", o);
          var h = r.method.apply(this, arguments);
          if (h !== void 0)
            return h;
          var c = new X();
          return br(this, c), c;
        }, "chainableMethodWrapper");
        if (Al(o, t, !0), ay) {
          var a = Object.create(this);
          a.call = uy, a.apply = cy, Object.setPrototypeOf(o, a);
        } else {
          var l = Object.getOwnPropertyNames(e);
          l.forEach(function(h) {
            if (ly.indexOf(h) === -1) {
              var c = Object.getOwnPropertyDescriptor(e, h);
              Object.defineProperty(o, h, c);
            }
          });
        }
        return br(this, o), ga(o);
      }, "chainableMethodGetter"),
      configurable: !0
    }
  );
}
At($f, "addChainableMethod");
function zf(e, t, n, i) {
  var r = e.__methods[t], s = r.chainingBehavior;
  r.chainingBehavior = /* @__PURE__ */ At(function() {
    var l = i(s).call(this);
    if (l !== void 0)
      return l;
    var h = new X();
    return br(this, h), h;
  }, "overwritingChainableMethodGetter");
  var o = r.method;
  r.method = /* @__PURE__ */ At(function() {
    var l = n(o).apply(this, arguments);
    if (l !== void 0)
      return l;
    var h = new X();
    return br(this, h), h;
  }, "overwritingChainableMethodWrapper");
}
At(zf, "overwriteChainableMethod");
function Ju(e, t) {
  return ze(e) < ze(t) ? -1 : 1;
}
At(Ju, "compareByInspect");
function Uf(e) {
  return typeof Object.getOwnPropertySymbols != "function" ? [] : Object.getOwnPropertySymbols(e).filter(function(t) {
    return Object.getOwnPropertyDescriptor(e, t).enumerable;
  });
}
At(Uf, "getOwnEnumerablePropertySymbols");
function Wf(e) {
  return Object.keys(e).concat(Uf(e));
}
At(Wf, "getOwnEnumerableProperties");
function E0(e) {
  return e !== e;
}
At(E0, "_isNaN");
var Xu = Number.isNaN || E0;
function O0(e) {
  var t = sn(e), n = ["Array", "Object", "Function"];
  return n.indexOf(t) !== -1;
}
At(O0, "isObjectType");
function Hf(e, t) {
  var n = Oe(e, "operator"), i = Oe(e, "negate"), r = t[3], s = i ? t[2] : t[1];
  if (n)
    return n;
  if (typeof s == "function" && (s = s()), s = s || "", !!s && !/\shave\s/.test(s)) {
    var o = O0(r);
    return /\snot\s/.test(s) ? o ? "notDeepStrictEqual" : "notStrictEqual" : o ? "deepStrictEqual" : "strictEqual";
  }
}
At(Hf, "getOperator");
function wc(e) {
  return e.name;
}
At(wc, "getName");
function Zu(e) {
  return Object.prototype.toString.call(e) === "[object RegExp]";
}
At(Zu, "isRegExp");
function Un(e) {
  return ["Number", "BigInt"].includes(sn(e));
}
At(Un, "isNumeric");
var { flag: dt } = Gu;
[
  "to",
  "be",
  "been",
  "is",
  "and",
  "has",
  "have",
  "with",
  "that",
  "which",
  "at",
  "of",
  "same",
  "but",
  "does",
  "still",
  "also"
].forEach(function(e) {
  X.addProperty(e);
});
X.addProperty("not", function() {
  dt(this, "negate", !0);
});
X.addProperty("deep", function() {
  dt(this, "deep", !0);
});
X.addProperty("nested", function() {
  dt(this, "nested", !0);
});
X.addProperty("own", function() {
  dt(this, "own", !0);
});
X.addProperty("ordered", function() {
  dt(this, "ordered", !0);
});
X.addProperty("any", function() {
  dt(this, "any", !0), dt(this, "all", !1);
});
X.addProperty("all", function() {
  dt(this, "all", !0), dt(this, "any", !1);
});
var kp = {
  function: ["function", "asyncfunction", "generatorfunction", "asyncgeneratorfunction"],
  asyncfunction: ["asyncfunction", "asyncgeneratorfunction"],
  generatorfunction: ["generatorfunction", "asyncgeneratorfunction"],
  asyncgeneratorfunction: ["asyncgeneratorfunction"]
};
function Gf(e, t) {
  t && dt(this, "message", t), e = e.toLowerCase();
  var n = dt(this, "object"), i = ~["a", "e", "i", "o", "u"].indexOf(e.charAt(0)) ? "an " : "a ";
  const r = sn(n).toLowerCase();
  kp.function.includes(e) ? this.assert(
    kp[e].includes(r),
    "expected #{this} to be " + i + e,
    "expected #{this} not to be " + i + e
  ) : this.assert(
    e === r,
    "expected #{this} to be " + i + e,
    "expected #{this} not to be " + i + e
  );
}
At(Gf, "an");
X.addChainableMethod("an", Gf);
X.addChainableMethod("a", Gf);
function F0(e, t) {
  return Xu(e) && Xu(t) || e === t;
}
At(F0, "SameValueZero");
function kl() {
  dt(this, "contains", !0);
}
At(kl, "includeChainingBehavior");
function _l(e, t) {
  t && dt(this, "message", t);
  var n = dt(this, "object"), i = sn(n).toLowerCase(), r = dt(this, "message"), s = dt(this, "negate"), o = dt(this, "ssfi"), a = dt(this, "deep"), l = a ? "deep " : "", h = a ? dt(this, "eql") : F0;
  r = r ? r + ": " : "";
  var c = !1;
  switch (i) {
    case "string":
      c = n.indexOf(e) !== -1;
      break;
    case "weakset":
      if (a)
        throw new Ve(
          r + "unable to use .deep.include with WeakSet",
          void 0,
          o
        );
      c = n.has(e);
      break;
    case "map":
      n.forEach(function(b) {
        c = c || h(b, e);
      });
      break;
    case "set":
      a ? n.forEach(function(b) {
        c = c || h(b, e);
      }) : c = n.has(e);
      break;
    case "array":
      a ? c = n.some(function(b) {
        return h(b, e);
      }) : c = n.indexOf(e) !== -1;
      break;
    default:
      if (e !== Object(e))
        throw new Ve(
          r + "the given combination of arguments (" + i + " and " + sn(e).toLowerCase() + ") is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a " + sn(e).toLowerCase(),
          void 0,
          o
        );
      var d = Object.keys(e), g = null, p = 0;
      if (d.forEach(function(b) {
        var x = new X(n);
        if (br(this, x, !0), dt(x, "lockSsfi", !0), !s || d.length === 1) {
          x.property(b, e[b]);
          return;
        }
        try {
          x.property(b, e[b]);
        } catch (N) {
          if (!Ri.compatibleConstructor(N, Ve))
            throw N;
          g === null && (g = N), p++;
        }
      }, this), s && d.length > 1 && p === d.length)
        throw g;
      return;
  }
  this.assert(
    c,
    "expected #{this} to " + l + "include " + ze(e),
    "expected #{this} to not " + l + "include " + ze(e)
  );
}
At(_l, "include");
X.addChainableMethod("include", _l, kl);
X.addChainableMethod("contain", _l, kl);
X.addChainableMethod("contains", _l, kl);
X.addChainableMethod("includes", _l, kl);
X.addProperty("ok", function() {
  this.assert(
    dt(this, "object"),
    "expected #{this} to be truthy",
    "expected #{this} to be falsy"
  );
});
X.addProperty("true", function() {
  this.assert(
    dt(this, "object") === !0,
    "expected #{this} to be true",
    "expected #{this} to be false",
    !dt(this, "negate")
  );
});
X.addProperty("numeric", function() {
  const e = dt(this, "object");
  this.assert(
    ["Number", "BigInt"].includes(sn(e)),
    "expected #{this} to be numeric",
    "expected #{this} to not be numeric",
    !dt(this, "negate")
  );
});
X.addProperty("callable", function() {
  const e = dt(this, "object"), t = dt(this, "ssfi"), n = dt(this, "message"), i = n ? `${n}: ` : "", r = dt(this, "negate"), s = r ? `${i}expected ${ze(e)} not to be a callable function` : `${i}expected ${ze(e)} to be a callable function`, o = ["Function", "AsyncFunction", "GeneratorFunction", "AsyncGeneratorFunction"].includes(sn(e));
  if (o && r || !o && !r)
    throw new Ve(
      s,
      void 0,
      t
    );
});
X.addProperty("false", function() {
  this.assert(
    dt(this, "object") === !1,
    "expected #{this} to be false",
    "expected #{this} to be true",
    !!dt(this, "negate")
  );
});
X.addProperty("null", function() {
  this.assert(
    dt(this, "object") === null,
    "expected #{this} to be null",
    "expected #{this} not to be null"
  );
});
X.addProperty("undefined", function() {
  this.assert(
    dt(this, "object") === void 0,
    "expected #{this} to be undefined",
    "expected #{this} not to be undefined"
  );
});
X.addProperty("NaN", function() {
  this.assert(
    Xu(dt(this, "object")),
    "expected #{this} to be NaN",
    "expected #{this} not to be NaN"
  );
});
function Vf() {
  var e = dt(this, "object");
  this.assert(
    e != null,
    "expected #{this} to exist",
    "expected #{this} to not exist"
  );
}
At(Vf, "assertExist");
X.addProperty("exist", Vf);
X.addProperty("exists", Vf);
X.addProperty("empty", function() {
  var e = dt(this, "object"), t = dt(this, "ssfi"), n = dt(this, "message"), i;
  switch (n = n ? n + ": " : "", sn(e).toLowerCase()) {
    case "array":
    case "string":
      i = e.length;
      break;
    case "map":
    case "set":
      i = e.size;
      break;
    case "weakmap":
    case "weakset":
      throw new Ve(
        n + ".empty was passed a weak collection",
        void 0,
        t
      );
    case "function":
      var r = n + ".empty was passed a function " + wc(e);
      throw new Ve(r.trim(), void 0, t);
    default:
      if (e !== Object(e))
        throw new Ve(
          n + ".empty was passed non-string primitive " + ze(e),
          void 0,
          t
        );
      i = Object.keys(e).length;
  }
  this.assert(
    i === 0,
    "expected #{this} to be empty",
    "expected #{this} not to be empty"
  );
});
function Yf() {
  var e = dt(this, "object"), t = sn(e);
  this.assert(
    t === "Arguments",
    "expected #{this} to be arguments but got " + t,
    "expected #{this} to not be arguments"
  );
}
At(Yf, "checkArguments");
X.addProperty("arguments", Yf);
X.addProperty("Arguments", Yf);
function xc(e, t) {
  t && dt(this, "message", t);
  var n = dt(this, "object");
  if (dt(this, "deep")) {
    var i = dt(this, "lockSsfi");
    dt(this, "lockSsfi", !0), this.eql(e), dt(this, "lockSsfi", i);
  } else
    this.assert(
      e === n,
      "expected #{this} to equal #{exp}",
      "expected #{this} to not equal #{exp}",
      e,
      this._obj,
      !0
    );
}
At(xc, "assertEqual");
X.addMethod("equal", xc);
X.addMethod("equals", xc);
X.addMethod("eq", xc);
function Kf(e, t) {
  t && dt(this, "message", t);
  var n = dt(this, "eql");
  this.assert(
    n(e, dt(this, "object")),
    "expected #{this} to deeply equal #{exp}",
    "expected #{this} to not deeply equal #{exp}",
    e,
    this._obj,
    !0
  );
}
At(Kf, "assertEql");
X.addMethod("eql", Kf);
X.addMethod("eqls", Kf);
function Sc(e, t) {
  t && dt(this, "message", t);
  var n = dt(this, "object"), i = dt(this, "doLength"), r = dt(this, "message"), s = r ? r + ": " : "", o = dt(this, "ssfi"), a = sn(n).toLowerCase(), l = sn(e).toLowerCase();
  if (i && a !== "map" && a !== "set" && new X(n, r, o, !0).to.have.property("length"), !i && a === "date" && l !== "date")
    throw new Ve(s + "the argument to above must be a date", void 0, o);
  if (!Un(e) && (i || Un(n)))
    throw new Ve(s + "the argument to above must be a number", void 0, o);
  if (!i && a !== "date" && !Un(n)) {
    var h = a === "string" ? "'" + n + "'" : n;
    throw new Ve(s + "expected " + h + " to be a number or a date", void 0, o);
  }
  if (i) {
    var c = "length", d;
    a === "map" || a === "set" ? (c = "size", d = n.size) : d = n.length, this.assert(
      d > e,
      "expected #{this} to have a " + c + " above #{exp} but got #{act}",
      "expected #{this} to not have a " + c + " above #{exp}",
      e,
      d
    );
  } else
    this.assert(
      n > e,
      "expected #{this} to be above #{exp}",
      "expected #{this} to be at most #{exp}",
      e
    );
}
At(Sc, "assertAbove");
X.addMethod("above", Sc);
X.addMethod("gt", Sc);
X.addMethod("greaterThan", Sc);
function Ac(e, t) {
  t && dt(this, "message", t);
  var n = dt(this, "object"), i = dt(this, "doLength"), r = dt(this, "message"), s = r ? r + ": " : "", o = dt(this, "ssfi"), a = sn(n).toLowerCase(), l = sn(e).toLowerCase(), h, c = !0;
  if (i && a !== "map" && a !== "set" && new X(n, r, o, !0).to.have.property("length"), !i && a === "date" && l !== "date")
    h = s + "the argument to least must be a date";
  else if (!Un(e) && (i || Un(n)))
    h = s + "the argument to least must be a number";
  else if (!i && a !== "date" && !Un(n)) {
    var d = a === "string" ? "'" + n + "'" : n;
    h = s + "expected " + d + " to be a number or a date";
  } else
    c = !1;
  if (c)
    throw new Ve(h, void 0, o);
  if (i) {
    var g = "length", p;
    a === "map" || a === "set" ? (g = "size", p = n.size) : p = n.length, this.assert(
      p >= e,
      "expected #{this} to have a " + g + " at least #{exp} but got #{act}",
      "expected #{this} to have a " + g + " below #{exp}",
      e,
      p
    );
  } else
    this.assert(
      n >= e,
      "expected #{this} to be at least #{exp}",
      "expected #{this} to be below #{exp}",
      e
    );
}
At(Ac, "assertLeast");
X.addMethod("least", Ac);
X.addMethod("gte", Ac);
X.addMethod("greaterThanOrEqual", Ac);
function kc(e, t) {
  t && dt(this, "message", t);
  var n = dt(this, "object"), i = dt(this, "doLength"), r = dt(this, "message"), s = r ? r + ": " : "", o = dt(this, "ssfi"), a = sn(n).toLowerCase(), l = sn(e).toLowerCase(), h, c = !0;
  if (i && a !== "map" && a !== "set" && new X(n, r, o, !0).to.have.property("length"), !i && a === "date" && l !== "date")
    h = s + "the argument to below must be a date";
  else if (!Un(e) && (i || Un(n)))
    h = s + "the argument to below must be a number";
  else if (!i && a !== "date" && !Un(n)) {
    var d = a === "string" ? "'" + n + "'" : n;
    h = s + "expected " + d + " to be a number or a date";
  } else
    c = !1;
  if (c)
    throw new Ve(h, void 0, o);
  if (i) {
    var g = "length", p;
    a === "map" || a === "set" ? (g = "size", p = n.size) : p = n.length, this.assert(
      p < e,
      "expected #{this} to have a " + g + " below #{exp} but got #{act}",
      "expected #{this} to not have a " + g + " below #{exp}",
      e,
      p
    );
  } else
    this.assert(
      n < e,
      "expected #{this} to be below #{exp}",
      "expected #{this} to be at least #{exp}",
      e
    );
}
At(kc, "assertBelow");
X.addMethod("below", kc);
X.addMethod("lt", kc);
X.addMethod("lessThan", kc);
function _c(e, t) {
  t && dt(this, "message", t);
  var n = dt(this, "object"), i = dt(this, "doLength"), r = dt(this, "message"), s = r ? r + ": " : "", o = dt(this, "ssfi"), a = sn(n).toLowerCase(), l = sn(e).toLowerCase(), h, c = !0;
  if (i && a !== "map" && a !== "set" && new X(n, r, o, !0).to.have.property("length"), !i && a === "date" && l !== "date")
    h = s + "the argument to most must be a date";
  else if (!Un(e) && (i || Un(n)))
    h = s + "the argument to most must be a number";
  else if (!i && a !== "date" && !Un(n)) {
    var d = a === "string" ? "'" + n + "'" : n;
    h = s + "expected " + d + " to be a number or a date";
  } else
    c = !1;
  if (c)
    throw new Ve(h, void 0, o);
  if (i) {
    var g = "length", p;
    a === "map" || a === "set" ? (g = "size", p = n.size) : p = n.length, this.assert(
      p <= e,
      "expected #{this} to have a " + g + " at most #{exp} but got #{act}",
      "expected #{this} to have a " + g + " above #{exp}",
      e,
      p
    );
  } else
    this.assert(
      n <= e,
      "expected #{this} to be at most #{exp}",
      "expected #{this} to be above #{exp}",
      e
    );
}
At(_c, "assertMost");
X.addMethod("most", _c);
X.addMethod("lte", _c);
X.addMethod("lessThanOrEqual", _c);
X.addMethod("within", function(e, t, n) {
  n && dt(this, "message", n);
  var i = dt(this, "object"), r = dt(this, "doLength"), s = dt(this, "message"), o = s ? s + ": " : "", a = dt(this, "ssfi"), l = sn(i).toLowerCase(), h = sn(e).toLowerCase(), c = sn(t).toLowerCase(), d, g = !0, p = h === "date" && c === "date" ? e.toISOString() + ".." + t.toISOString() : e + ".." + t;
  if (r && l !== "map" && l !== "set" && new X(i, s, a, !0).to.have.property("length"), !r && l === "date" && (h !== "date" || c !== "date"))
    d = o + "the arguments to within must be dates";
  else if ((!Un(e) || !Un(t)) && (r || Un(i)))
    d = o + "the arguments to within must be numbers";
  else if (!r && l !== "date" && !Un(i)) {
    var b = l === "string" ? "'" + i + "'" : i;
    d = o + "expected " + b + " to be a number or a date";
  } else
    g = !1;
  if (g)
    throw new Ve(d, void 0, a);
  if (r) {
    var x = "length", N;
    l === "map" || l === "set" ? (x = "size", N = i.size) : N = i.length, this.assert(
      N >= e && N <= t,
      "expected #{this} to have a " + x + " within " + p,
      "expected #{this} to not have a " + x + " within " + p
    );
  } else
    this.assert(
      i >= e && i <= t,
      "expected #{this} to be within " + p,
      "expected #{this} to not be within " + p
    );
});
function Jf(e, t) {
  t && dt(this, "message", t);
  var n = dt(this, "object"), i = dt(this, "ssfi"), r = dt(this, "message");
  try {
    var s = n instanceof e;
  } catch (a) {
    throw a instanceof TypeError ? (r = r ? r + ": " : "", new Ve(
      r + "The instanceof assertion needs a constructor but " + sn(e) + " was given.",
      void 0,
      i
    )) : a;
  }
  var o = wc(e);
  o == null && (o = "an unnamed constructor"), this.assert(
    s,
    "expected #{this} to be an instance of " + o,
    "expected #{this} to not be an instance of " + o
  );
}
At(Jf, "assertInstanceOf");
X.addMethod("instanceof", Jf);
X.addMethod("instanceOf", Jf);
function Xf(e, t, n) {
  n && dt(this, "message", n);
  var i = dt(this, "nested"), r = dt(this, "own"), s = dt(this, "message"), o = dt(this, "object"), a = dt(this, "ssfi"), l = typeof e;
  if (s = s ? s + ": " : "", i) {
    if (l !== "string")
      throw new Ve(
        s + "the argument to property must be a string when using nested syntax",
        void 0,
        a
      );
  } else if (l !== "string" && l !== "number" && l !== "symbol")
    throw new Ve(
      s + "the argument to property must be a string, number, or symbol",
      void 0,
      a
    );
  if (i && r)
    throw new Ve(
      s + 'The "nested" and "own" flags cannot be combined.',
      void 0,
      a
    );
  if (o == null)
    throw new Ve(
      s + "Target cannot be null or undefined.",
      void 0,
      a
    );
  var h = dt(this, "deep"), c = dt(this, "negate"), d = i ? Rf(o, e) : null, g = i ? d.value : o[e], p = h ? dt(this, "eql") : (N, v) => N === v, b = "";
  h && (b += "deep "), r && (b += "own "), i && (b += "nested "), b += "property ";
  var x;
  r ? x = Object.prototype.hasOwnProperty.call(o, e) : i ? x = d.exists : x = vc(o, e), (!c || arguments.length === 1) && this.assert(
    x,
    "expected #{this} to have " + b + ze(e),
    "expected #{this} to not have " + b + ze(e)
  ), arguments.length > 1 && this.assert(
    x && p(t, g),
    "expected #{this} to have " + b + ze(e) + " of #{exp}, but got #{act}",
    "expected #{this} to not have " + b + ze(e) + " of #{act}",
    t,
    g
  ), dt(this, "object", g);
}
At(Xf, "assertProperty");
X.addMethod("property", Xf);
function Zf(e, t, n) {
  dt(this, "own", !0), Xf.apply(this, arguments);
}
At(Zf, "assertOwnProperty");
X.addMethod("ownProperty", Zf);
X.addMethod("haveOwnProperty", Zf);
function Qf(e, t, n) {
  typeof t == "string" && (n = t, t = null), n && dt(this, "message", n);
  var i = dt(this, "object"), r = Object.getOwnPropertyDescriptor(Object(i), e), s = dt(this, "eql");
  r && t ? this.assert(
    s(t, r),
    "expected the own property descriptor for " + ze(e) + " on #{this} to match " + ze(t) + ", got " + ze(r),
    "expected the own property descriptor for " + ze(e) + " on #{this} to not match " + ze(t),
    t,
    r,
    !0
  ) : this.assert(
    r,
    "expected #{this} to have an own property descriptor for " + ze(e),
    "expected #{this} to not have an own property descriptor for " + ze(e)
  ), dt(this, "object", r);
}
At(Qf, "assertOwnPropertyDescriptor");
X.addMethod("ownPropertyDescriptor", Qf);
X.addMethod("haveOwnPropertyDescriptor", Qf);
function td() {
  dt(this, "doLength", !0);
}
At(td, "assertLengthChain");
function ed(e, t) {
  t && dt(this, "message", t);
  var n = dt(this, "object"), i = sn(n).toLowerCase(), r = dt(this, "message"), s = dt(this, "ssfi"), o = "length", a;
  switch (i) {
    case "map":
    case "set":
      o = "size", a = n.size;
      break;
    default:
      new X(n, r, s, !0).to.have.property("length"), a = n.length;
  }
  this.assert(
    a == e,
    "expected #{this} to have a " + o + " of #{exp} but got #{act}",
    "expected #{this} to not have a " + o + " of #{act}",
    e,
    a
  );
}
At(ed, "assertLength");
X.addChainableMethod("length", ed, td);
X.addChainableMethod("lengthOf", ed, td);
function nd(e, t) {
  t && dt(this, "message", t);
  var n = dt(this, "object");
  this.assert(
    e.exec(n),
    "expected #{this} to match " + e,
    "expected #{this} not to match " + e
  );
}
At(nd, "assertMatch");
X.addMethod("match", nd);
X.addMethod("matches", nd);
X.addMethod("string", function(e, t) {
  t && dt(this, "message", t);
  var n = dt(this, "object"), i = dt(this, "message"), r = dt(this, "ssfi");
  new X(n, i, r, !0).is.a("string"), this.assert(
    ~n.indexOf(e),
    "expected #{this} to contain " + ze(e),
    "expected #{this} to not contain " + ze(e)
  );
});
function id(e) {
  var t = dt(this, "object"), n = sn(t), i = sn(e), r = dt(this, "ssfi"), s = dt(this, "deep"), o, a = "", l, h = !0, c = dt(this, "message");
  c = c ? c + ": " : "";
  var d = c + "when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";
  if (n === "Map" || n === "Set")
    a = s ? "deeply " : "", l = [], t.forEach(function(w, k) {
      l.push(k);
    }), i !== "Array" && (e = Array.prototype.slice.call(arguments));
  else {
    switch (l = Wf(t), i) {
      case "Array":
        if (arguments.length > 1)
          throw new Ve(d, void 0, r);
        break;
      case "Object":
        if (arguments.length > 1)
          throw new Ve(d, void 0, r);
        e = Object.keys(e);
        break;
      default:
        e = Array.prototype.slice.call(arguments);
    }
    e = e.map(function(w) {
      return typeof w == "symbol" ? w : String(w);
    });
  }
  if (!e.length)
    throw new Ve(c + "keys required", void 0, r);
  var g = e.length, p = dt(this, "any"), b = dt(this, "all"), x = e, N = s ? dt(this, "eql") : (w, k) => w === k;
  if (!p && !b && (b = !0), p && (h = x.some(function(w) {
    return l.some(function(k) {
      return N(w, k);
    });
  })), b && (h = x.every(function(w) {
    return l.some(function(k) {
      return N(w, k);
    });
  }), dt(this, "contains") || (h = h && e.length == l.length)), g > 1) {
    e = e.map(function(w) {
      return ze(w);
    });
    var v = e.pop();
    b && (o = e.join(", ") + ", and " + v), p && (o = e.join(", ") + ", or " + v);
  } else
    o = ze(e[0]);
  o = (g > 1 ? "keys " : "key ") + o, o = (dt(this, "contains") ? "contain " : "have ") + o, this.assert(
    h,
    "expected #{this} to " + a + o,
    "expected #{this} to not " + a + o,
    x.slice(0).sort(Ju),
    l.sort(Ju),
    !0
  );
}
At(id, "assertKeys");
X.addMethod("keys", id);
X.addMethod("key", id);
function Nc(e, t, n) {
  n && dt(this, "message", n);
  var i = dt(this, "object"), r = dt(this, "ssfi"), s = dt(this, "message"), o = dt(this, "negate") || !1;
  new X(i, s, r, !0).is.a("function"), (Zu(e) || typeof e == "string") && (t = e, e = null);
  let a, l = !1;
  try {
    i();
  } catch (w) {
    l = !0, a = w;
  }
  var h = e === void 0 && t === void 0, c = !!(e && t), d = !1, g = !1;
  if (h || !h && !o) {
    var p = "an error";
    e instanceof Error ? p = "#{exp}" : e && (p = Ri.getConstructorName(e));
    let w = a;
    if (a instanceof Error)
      w = a.toString();
    else if (typeof a == "string")
      w = a;
    else if (a && (typeof a == "object" || typeof a == "function"))
      try {
        w = Ri.getConstructorName(a);
      } catch {
      }
    this.assert(
      l,
      "expected #{this} to throw " + p,
      "expected #{this} to not throw an error but #{act} was thrown",
      e && e.toString(),
      w
    );
  }
  if (e && a) {
    if (e instanceof Error) {
      var b = Ri.compatibleInstance(a, e);
      b === o && (c && o ? d = !0 : this.assert(
        o,
        "expected #{this} to throw #{exp} but #{act} was thrown",
        "expected #{this} to not throw #{exp}" + (a && !o ? " but #{act} was thrown" : ""),
        e.toString(),
        a.toString()
      ));
    }
    var x = Ri.compatibleConstructor(a, e);
    x === o && (c && o ? d = !0 : this.assert(
      o,
      "expected #{this} to throw #{exp} but #{act} was thrown",
      "expected #{this} to not throw #{exp}" + (a ? " but #{act} was thrown" : ""),
      e instanceof Error ? e.toString() : e && Ri.getConstructorName(e),
      a instanceof Error ? a.toString() : a && Ri.getConstructorName(a)
    ));
  }
  if (a && t !== void 0 && t !== null) {
    var N = "including";
    Zu(t) && (N = "matching");
    var v = Ri.compatibleMessage(a, t);
    v === o && (c && o ? g = !0 : this.assert(
      o,
      "expected #{this} to throw error " + N + " #{exp} but got #{act}",
      "expected #{this} to throw error not " + N + " #{exp}",
      t,
      Ri.getMessage(a)
    ));
  }
  d && g && this.assert(
    o,
    "expected #{this} to throw #{exp} but #{act} was thrown",
    "expected #{this} to not throw #{exp}" + (a ? " but #{act} was thrown" : ""),
    e instanceof Error ? e.toString() : e && Ri.getConstructorName(e),
    a instanceof Error ? a.toString() : a && Ri.getConstructorName(a)
  ), dt(this, "object", a);
}
At(Nc, "assertThrows");
X.addMethod("throw", Nc);
X.addMethod("throws", Nc);
X.addMethod("Throw", Nc);
function rd(e, t) {
  t && dt(this, "message", t);
  var n = dt(this, "object"), i = dt(this, "itself"), r = typeof n == "function" && !i ? n.prototype[e] : n[e];
  this.assert(
    typeof r == "function",
    "expected #{this} to respond to " + ze(e),
    "expected #{this} to not respond to " + ze(e)
  );
}
At(rd, "respondTo");
X.addMethod("respondTo", rd);
X.addMethod("respondsTo", rd);
X.addProperty("itself", function() {
  dt(this, "itself", !0);
});
function sd(e, t) {
  t && dt(this, "message", t);
  var n = dt(this, "object"), i = e(n);
  this.assert(
    i,
    "expected #{this} to satisfy " + oo(e),
    "expected #{this} to not satisfy" + oo(e),
    !dt(this, "negate"),
    i
  );
}
At(sd, "satisfy");
X.addMethod("satisfy", sd);
X.addMethod("satisfies", sd);
function od(e, t, n) {
  n && dt(this, "message", n);
  var i = dt(this, "object"), r = dt(this, "message"), s = dt(this, "ssfi");
  new X(i, r, s, !0).is.numeric;
  let o = "A `delta` value is required for `closeTo`";
  if (t == null)
    throw new Ve(r ? `${r}: ${o}` : o, void 0, s);
  if (new X(t, r, s, !0).is.numeric, o = "A `expected` value is required for `closeTo`", e == null)
    throw new Ve(r ? `${r}: ${o}` : o, void 0, s);
  new X(e, r, s, !0).is.numeric;
  const a = /* @__PURE__ */ At((l) => l < 0n ? -l : l, "abs");
  this.assert(
    a(i - e) <= t,
    "expected #{this} to be close to " + e + " +/- " + t,
    "expected #{this} not to be close to " + e + " +/- " + t
  );
}
At(od, "closeTo");
X.addMethod("closeTo", od);
X.addMethod("approximately", od);
function M0(e, t, n, i, r) {
  let s = Array.from(t), o = Array.from(e);
  if (!i) {
    if (o.length !== s.length)
      return !1;
    s = s.slice();
  }
  return o.every(function(a, l) {
    if (r)
      return n ? n(a, s[l]) : a === s[l];
    if (!n) {
      var h = s.indexOf(a);
      return h === -1 ? !1 : (i || s.splice(h, 1), !0);
    }
    return s.some(function(c, d) {
      return n(a, c) ? (i || s.splice(d, 1), !0) : !1;
    });
  });
}
At(M0, "isSubsetOf");
X.addMethod("members", function(e, t) {
  t && dt(this, "message", t);
  var n = dt(this, "object"), i = dt(this, "message"), r = dt(this, "ssfi");
  new X(n, i, r, !0).to.be.iterable, new X(e, i, r, !0).to.be.iterable;
  var s = dt(this, "contains"), o = dt(this, "ordered"), a, l, h;
  s ? (a = o ? "an ordered superset" : "a superset", l = "expected #{this} to be " + a + " of #{exp}", h = "expected #{this} to not be " + a + " of #{exp}") : (a = o ? "ordered members" : "members", l = "expected #{this} to have the same " + a + " as #{exp}", h = "expected #{this} to not have the same " + a + " as #{exp}");
  var c = dt(this, "deep") ? dt(this, "eql") : void 0;
  this.assert(
    M0(e, n, c, s, o),
    l,
    h,
    e,
    n,
    !0
  );
});
X.addProperty("iterable", function(e) {
  e && dt(this, "message", e);
  var t = dt(this, "object");
  this.assert(
    t != null && t[Symbol.iterator],
    "expected #{this} to be an iterable",
    "expected #{this} to not be an iterable",
    t
  );
});
function R0(e, t) {
  t && dt(this, "message", t);
  var n = dt(this, "object"), i = dt(this, "message"), r = dt(this, "ssfi"), s = dt(this, "contains"), o = dt(this, "deep"), a = dt(this, "eql");
  new X(e, i, r, !0).to.be.an("array"), s ? this.assert(
    e.some(function(l) {
      return n.indexOf(l) > -1;
    }),
    "expected #{this} to contain one of #{exp}",
    "expected #{this} to not contain one of #{exp}",
    e,
    n
  ) : o ? this.assert(
    e.some(function(l) {
      return a(n, l);
    }),
    "expected #{this} to deeply equal one of #{exp}",
    "expected #{this} to deeply equal one of #{exp}",
    e,
    n
  ) : this.assert(
    e.indexOf(n) > -1,
    "expected #{this} to be one of #{exp}",
    "expected #{this} to not be one of #{exp}",
    e,
    n
  );
}
At(R0, "oneOf");
X.addMethod("oneOf", R0);
function ad(e, t, n) {
  n && dt(this, "message", n);
  var i = dt(this, "object"), r = dt(this, "message"), s = dt(this, "ssfi");
  new X(i, r, s, !0).is.a("function");
  var o;
  t ? (new X(e, r, s, !0).to.have.property(t), o = e[t]) : (new X(e, r, s, !0).is.a("function"), o = e()), i();
  var a = t == null ? e() : e[t], l = t == null ? o : "." + t;
  dt(this, "deltaMsgObj", l), dt(this, "initialDeltaValue", o), dt(this, "finalDeltaValue", a), dt(this, "deltaBehavior", "change"), dt(this, "realDelta", a !== o), this.assert(
    o !== a,
    "expected " + l + " to change",
    "expected " + l + " to not change"
  );
}
At(ad, "assertChanges");
X.addMethod("change", ad);
X.addMethod("changes", ad);
function ld(e, t, n) {
  n && dt(this, "message", n);
  var i = dt(this, "object"), r = dt(this, "message"), s = dt(this, "ssfi");
  new X(i, r, s, !0).is.a("function");
  var o;
  t ? (new X(e, r, s, !0).to.have.property(t), o = e[t]) : (new X(e, r, s, !0).is.a("function"), o = e()), new X(o, r, s, !0).is.a("number"), i();
  var a = t == null ? e() : e[t], l = t == null ? o : "." + t;
  dt(this, "deltaMsgObj", l), dt(this, "initialDeltaValue", o), dt(this, "finalDeltaValue", a), dt(this, "deltaBehavior", "increase"), dt(this, "realDelta", a - o), this.assert(
    a - o > 0,
    "expected " + l + " to increase",
    "expected " + l + " to not increase"
  );
}
At(ld, "assertIncreases");
X.addMethod("increase", ld);
X.addMethod("increases", ld);
function ud(e, t, n) {
  n && dt(this, "message", n);
  var i = dt(this, "object"), r = dt(this, "message"), s = dt(this, "ssfi");
  new X(i, r, s, !0).is.a("function");
  var o;
  t ? (new X(e, r, s, !0).to.have.property(t), o = e[t]) : (new X(e, r, s, !0).is.a("function"), o = e()), new X(o, r, s, !0).is.a("number"), i();
  var a = t == null ? e() : e[t], l = t == null ? o : "." + t;
  dt(this, "deltaMsgObj", l), dt(this, "initialDeltaValue", o), dt(this, "finalDeltaValue", a), dt(this, "deltaBehavior", "decrease"), dt(this, "realDelta", o - a), this.assert(
    a - o < 0,
    "expected " + l + " to decrease",
    "expected " + l + " to not decrease"
  );
}
At(ud, "assertDecreases");
X.addMethod("decrease", ud);
X.addMethod("decreases", ud);
function D0(e, t) {
  t && dt(this, "message", t);
  var n = dt(this, "deltaMsgObj"), i = dt(this, "initialDeltaValue"), r = dt(this, "finalDeltaValue"), s = dt(this, "deltaBehavior"), o = dt(this, "realDelta"), a;
  s === "change" ? a = Math.abs(r - i) === Math.abs(e) : a = o === Math.abs(e), this.assert(
    a,
    "expected " + n + " to " + s + " by " + e,
    "expected " + n + " to not " + s + " by " + e
  );
}
At(D0, "assertDelta");
X.addMethod("by", D0);
X.addProperty("extensible", function() {
  var e = dt(this, "object"), t = e === Object(e) && Object.isExtensible(e);
  this.assert(
    t,
    "expected #{this} to be extensible",
    "expected #{this} to not be extensible"
  );
});
X.addProperty("sealed", function() {
  var e = dt(this, "object"), t = e === Object(e) ? Object.isSealed(e) : !0;
  this.assert(
    t,
    "expected #{this} to be sealed",
    "expected #{this} to not be sealed"
  );
});
X.addProperty("frozen", function() {
  var e = dt(this, "object"), t = e === Object(e) ? Object.isFrozen(e) : !0;
  this.assert(
    t,
    "expected #{this} to be frozen",
    "expected #{this} to not be frozen"
  );
});
X.addProperty("finite", function(e) {
  var t = dt(this, "object");
  this.assert(
    typeof t == "number" && isFinite(t),
    "expected #{this} to be a finite number",
    "expected #{this} to not be a finite number"
  );
});
function Is(e, t) {
  return new X(e, t);
}
At(Is, "expect");
Is.fail = function(e, t, n, i) {
  throw arguments.length < 2 && (n = e, e = void 0), n = n || "expect.fail()", new Ve(n, {
    actual: e,
    expected: t,
    operator: i
  }, Is.fail);
};
var j0 = {};
Cf(j0, {
  Should: () => fy,
  should: () => hy
});
function cd() {
  function e() {
    return this instanceof String || this instanceof Number || this instanceof Boolean || typeof Symbol == "function" && this instanceof Symbol || typeof BigInt == "function" && this instanceof BigInt ? new X(this.valueOf(), null, e) : new X(this, null, e);
  }
  At(e, "shouldGetter");
  function t(i) {
    Object.defineProperty(this, "should", {
      value: i,
      enumerable: !0,
      configurable: !0,
      writable: !0
    });
  }
  At(t, "shouldSetter"), Object.defineProperty(Object.prototype, "should", {
    set: t,
    get: e,
    configurable: !0
  });
  var n = {};
  return n.fail = function(i, r, s, o) {
    throw arguments.length < 2 && (s = i, i = void 0), s = s || "should.fail()", new Ve(s, {
      actual: i,
      expected: r,
      operator: o
    }, n.fail);
  }, n.equal = function(i, r, s) {
    new X(i, s).to.equal(r);
  }, n.Throw = function(i, r, s, o) {
    new X(i, o).to.Throw(r, s);
  }, n.exist = function(i, r) {
    new X(i, r).to.exist;
  }, n.not = {}, n.not.equal = function(i, r, s) {
    new X(i, s).to.not.equal(r);
  }, n.not.Throw = function(i, r, s, o) {
    new X(i, o).to.not.Throw(r, s);
  }, n.not.exist = function(i, r) {
    new X(i, r).to.not.exist;
  }, n.throw = n.Throw, n.not.throw = n.not.Throw, n;
}
At(cd, "loadShould");
var hy = cd, fy = cd;
function K(e, t) {
  var n = new X(null, null, K, !0);
  n.assert(
    e,
    t,
    "[ negation message unavailable ]"
  );
}
At(K, "assert");
K.fail = function(e, t, n, i) {
  throw arguments.length < 2 && (n = e, e = void 0), n = n || "assert.fail()", new Ve(n, {
    actual: e,
    expected: t,
    operator: i
  }, K.fail);
};
K.isOk = function(e, t) {
  new X(e, t, K.isOk, !0).is.ok;
};
K.isNotOk = function(e, t) {
  new X(e, t, K.isNotOk, !0).is.not.ok;
};
K.equal = function(e, t, n) {
  var i = new X(e, n, K.equal, !0);
  i.assert(
    t == Oe(i, "object"),
    "expected #{this} to equal #{exp}",
    "expected #{this} to not equal #{act}",
    t,
    e,
    !0
  );
};
K.notEqual = function(e, t, n) {
  var i = new X(e, n, K.notEqual, !0);
  i.assert(
    t != Oe(i, "object"),
    "expected #{this} to not equal #{exp}",
    "expected #{this} to equal #{act}",
    t,
    e,
    !0
  );
};
K.strictEqual = function(e, t, n) {
  new X(e, n, K.strictEqual, !0).to.equal(t);
};
K.notStrictEqual = function(e, t, n) {
  new X(e, n, K.notStrictEqual, !0).to.not.equal(t);
};
K.deepEqual = K.deepStrictEqual = function(e, t, n) {
  new X(e, n, K.deepEqual, !0).to.eql(t);
};
K.notDeepEqual = function(e, t, n) {
  new X(e, n, K.notDeepEqual, !0).to.not.eql(t);
};
K.isAbove = function(e, t, n) {
  new X(e, n, K.isAbove, !0).to.be.above(t);
};
K.isAtLeast = function(e, t, n) {
  new X(e, n, K.isAtLeast, !0).to.be.least(t);
};
K.isBelow = function(e, t, n) {
  new X(e, n, K.isBelow, !0).to.be.below(t);
};
K.isAtMost = function(e, t, n) {
  new X(e, n, K.isAtMost, !0).to.be.most(t);
};
K.isTrue = function(e, t) {
  new X(e, t, K.isTrue, !0).is.true;
};
K.isNotTrue = function(e, t) {
  new X(e, t, K.isNotTrue, !0).to.not.equal(!0);
};
K.isFalse = function(e, t) {
  new X(e, t, K.isFalse, !0).is.false;
};
K.isNotFalse = function(e, t) {
  new X(e, t, K.isNotFalse, !0).to.not.equal(!1);
};
K.isNull = function(e, t) {
  new X(e, t, K.isNull, !0).to.equal(null);
};
K.isNotNull = function(e, t) {
  new X(e, t, K.isNotNull, !0).to.not.equal(null);
};
K.isNaN = function(e, t) {
  new X(e, t, K.isNaN, !0).to.be.NaN;
};
K.isNotNaN = function(e, t) {
  new X(e, t, K.isNotNaN, !0).not.to.be.NaN;
};
K.exists = function(e, t) {
  new X(e, t, K.exists, !0).to.exist;
};
K.notExists = function(e, t) {
  new X(e, t, K.notExists, !0).to.not.exist;
};
K.isUndefined = function(e, t) {
  new X(e, t, K.isUndefined, !0).to.equal(void 0);
};
K.isDefined = function(e, t) {
  new X(e, t, K.isDefined, !0).to.not.equal(void 0);
};
K.isCallable = function(e, t) {
  new X(e, t, K.isCallable, !0).is.callable;
};
K.isNotCallable = function(e, t) {
  new X(e, t, K.isNotCallable, !0).is.not.callable;
};
K.isObject = function(e, t) {
  new X(e, t, K.isObject, !0).to.be.a("object");
};
K.isNotObject = function(e, t) {
  new X(e, t, K.isNotObject, !0).to.not.be.a("object");
};
K.isArray = function(e, t) {
  new X(e, t, K.isArray, !0).to.be.an("array");
};
K.isNotArray = function(e, t) {
  new X(e, t, K.isNotArray, !0).to.not.be.an("array");
};
K.isString = function(e, t) {
  new X(e, t, K.isString, !0).to.be.a("string");
};
K.isNotString = function(e, t) {
  new X(e, t, K.isNotString, !0).to.not.be.a("string");
};
K.isNumber = function(e, t) {
  new X(e, t, K.isNumber, !0).to.be.a("number");
};
K.isNotNumber = function(e, t) {
  new X(e, t, K.isNotNumber, !0).to.not.be.a("number");
};
K.isNumeric = function(e, t) {
  new X(e, t, K.isNumeric, !0).is.numeric;
};
K.isNotNumeric = function(e, t) {
  new X(e, t, K.isNotNumeric, !0).is.not.numeric;
};
K.isFinite = function(e, t) {
  new X(e, t, K.isFinite, !0).to.be.finite;
};
K.isBoolean = function(e, t) {
  new X(e, t, K.isBoolean, !0).to.be.a("boolean");
};
K.isNotBoolean = function(e, t) {
  new X(e, t, K.isNotBoolean, !0).to.not.be.a("boolean");
};
K.typeOf = function(e, t, n) {
  new X(e, n, K.typeOf, !0).to.be.a(t);
};
K.notTypeOf = function(e, t, n) {
  new X(e, n, K.notTypeOf, !0).to.not.be.a(t);
};
K.instanceOf = function(e, t, n) {
  new X(e, n, K.instanceOf, !0).to.be.instanceOf(t);
};
K.notInstanceOf = function(e, t, n) {
  new X(e, n, K.notInstanceOf, !0).to.not.be.instanceOf(t);
};
K.include = function(e, t, n) {
  new X(e, n, K.include, !0).include(t);
};
K.notInclude = function(e, t, n) {
  new X(e, n, K.notInclude, !0).not.include(t);
};
K.deepInclude = function(e, t, n) {
  new X(e, n, K.deepInclude, !0).deep.include(t);
};
K.notDeepInclude = function(e, t, n) {
  new X(e, n, K.notDeepInclude, !0).not.deep.include(t);
};
K.nestedInclude = function(e, t, n) {
  new X(e, n, K.nestedInclude, !0).nested.include(t);
};
K.notNestedInclude = function(e, t, n) {
  new X(e, n, K.notNestedInclude, !0).not.nested.include(t);
};
K.deepNestedInclude = function(e, t, n) {
  new X(e, n, K.deepNestedInclude, !0).deep.nested.include(t);
};
K.notDeepNestedInclude = function(e, t, n) {
  new X(e, n, K.notDeepNestedInclude, !0).not.deep.nested.include(t);
};
K.ownInclude = function(e, t, n) {
  new X(e, n, K.ownInclude, !0).own.include(t);
};
K.notOwnInclude = function(e, t, n) {
  new X(e, n, K.notOwnInclude, !0).not.own.include(t);
};
K.deepOwnInclude = function(e, t, n) {
  new X(e, n, K.deepOwnInclude, !0).deep.own.include(t);
};
K.notDeepOwnInclude = function(e, t, n) {
  new X(e, n, K.notDeepOwnInclude, !0).not.deep.own.include(t);
};
K.match = function(e, t, n) {
  new X(e, n, K.match, !0).to.match(t);
};
K.notMatch = function(e, t, n) {
  new X(e, n, K.notMatch, !0).to.not.match(t);
};
K.property = function(e, t, n) {
  new X(e, n, K.property, !0).to.have.property(t);
};
K.notProperty = function(e, t, n) {
  new X(e, n, K.notProperty, !0).to.not.have.property(t);
};
K.propertyVal = function(e, t, n, i) {
  new X(e, i, K.propertyVal, !0).to.have.property(t, n);
};
K.notPropertyVal = function(e, t, n, i) {
  new X(e, i, K.notPropertyVal, !0).to.not.have.property(t, n);
};
K.deepPropertyVal = function(e, t, n, i) {
  new X(e, i, K.deepPropertyVal, !0).to.have.deep.property(t, n);
};
K.notDeepPropertyVal = function(e, t, n, i) {
  new X(e, i, K.notDeepPropertyVal, !0).to.not.have.deep.property(t, n);
};
K.ownProperty = function(e, t, n) {
  new X(e, n, K.ownProperty, !0).to.have.own.property(t);
};
K.notOwnProperty = function(e, t, n) {
  new X(e, n, K.notOwnProperty, !0).to.not.have.own.property(t);
};
K.ownPropertyVal = function(e, t, n, i) {
  new X(e, i, K.ownPropertyVal, !0).to.have.own.property(t, n);
};
K.notOwnPropertyVal = function(e, t, n, i) {
  new X(e, i, K.notOwnPropertyVal, !0).to.not.have.own.property(t, n);
};
K.deepOwnPropertyVal = function(e, t, n, i) {
  new X(e, i, K.deepOwnPropertyVal, !0).to.have.deep.own.property(t, n);
};
K.notDeepOwnPropertyVal = function(e, t, n, i) {
  new X(e, i, K.notDeepOwnPropertyVal, !0).to.not.have.deep.own.property(t, n);
};
K.nestedProperty = function(e, t, n) {
  new X(e, n, K.nestedProperty, !0).to.have.nested.property(t);
};
K.notNestedProperty = function(e, t, n) {
  new X(e, n, K.notNestedProperty, !0).to.not.have.nested.property(t);
};
K.nestedPropertyVal = function(e, t, n, i) {
  new X(e, i, K.nestedPropertyVal, !0).to.have.nested.property(t, n);
};
K.notNestedPropertyVal = function(e, t, n, i) {
  new X(e, i, K.notNestedPropertyVal, !0).to.not.have.nested.property(t, n);
};
K.deepNestedPropertyVal = function(e, t, n, i) {
  new X(e, i, K.deepNestedPropertyVal, !0).to.have.deep.nested.property(t, n);
};
K.notDeepNestedPropertyVal = function(e, t, n, i) {
  new X(e, i, K.notDeepNestedPropertyVal, !0).to.not.have.deep.nested.property(t, n);
};
K.lengthOf = function(e, t, n) {
  new X(e, n, K.lengthOf, !0).to.have.lengthOf(t);
};
K.hasAnyKeys = function(e, t, n) {
  new X(e, n, K.hasAnyKeys, !0).to.have.any.keys(t);
};
K.hasAllKeys = function(e, t, n) {
  new X(e, n, K.hasAllKeys, !0).to.have.all.keys(t);
};
K.containsAllKeys = function(e, t, n) {
  new X(e, n, K.containsAllKeys, !0).to.contain.all.keys(t);
};
K.doesNotHaveAnyKeys = function(e, t, n) {
  new X(e, n, K.doesNotHaveAnyKeys, !0).to.not.have.any.keys(t);
};
K.doesNotHaveAllKeys = function(e, t, n) {
  new X(e, n, K.doesNotHaveAllKeys, !0).to.not.have.all.keys(t);
};
K.hasAnyDeepKeys = function(e, t, n) {
  new X(e, n, K.hasAnyDeepKeys, !0).to.have.any.deep.keys(t);
};
K.hasAllDeepKeys = function(e, t, n) {
  new X(e, n, K.hasAllDeepKeys, !0).to.have.all.deep.keys(t);
};
K.containsAllDeepKeys = function(e, t, n) {
  new X(e, n, K.containsAllDeepKeys, !0).to.contain.all.deep.keys(t);
};
K.doesNotHaveAnyDeepKeys = function(e, t, n) {
  new X(e, n, K.doesNotHaveAnyDeepKeys, !0).to.not.have.any.deep.keys(t);
};
K.doesNotHaveAllDeepKeys = function(e, t, n) {
  new X(e, n, K.doesNotHaveAllDeepKeys, !0).to.not.have.all.deep.keys(t);
};
K.throws = function(e, t, n, i) {
  (typeof t == "string" || t instanceof RegExp) && (n = t, t = null);
  var r = new X(e, i, K.throws, !0).to.throw(t, n);
  return Oe(r, "object");
};
K.doesNotThrow = function(e, t, n, i) {
  (typeof t == "string" || t instanceof RegExp) && (n = t, t = null), new X(e, i, K.doesNotThrow, !0).to.not.throw(t, n);
};
K.operator = function(e, t, n, i) {
  var r;
  switch (t) {
    case "==":
      r = e == n;
      break;
    case "===":
      r = e === n;
      break;
    case ">":
      r = e > n;
      break;
    case ">=":
      r = e >= n;
      break;
    case "<":
      r = e < n;
      break;
    case "<=":
      r = e <= n;
      break;
    case "!=":
      r = e != n;
      break;
    case "!==":
      r = e !== n;
      break;
    default:
      throw i = i && i + ": ", new Ve(
        i + 'Invalid operator "' + t + '"',
        void 0,
        K.operator
      );
  }
  var s = new X(r, i, K.operator, !0);
  s.assert(
    Oe(s, "object") === !0,
    "expected " + ze(e) + " to be " + t + " " + ze(n),
    "expected " + ze(e) + " to not be " + t + " " + ze(n)
  );
};
K.closeTo = function(e, t, n, i) {
  new X(e, i, K.closeTo, !0).to.be.closeTo(t, n);
};
K.approximately = function(e, t, n, i) {
  new X(e, i, K.approximately, !0).to.be.approximately(t, n);
};
K.sameMembers = function(e, t, n) {
  new X(e, n, K.sameMembers, !0).to.have.same.members(t);
};
K.notSameMembers = function(e, t, n) {
  new X(e, n, K.notSameMembers, !0).to.not.have.same.members(t);
};
K.sameDeepMembers = function(e, t, n) {
  new X(e, n, K.sameDeepMembers, !0).to.have.same.deep.members(t);
};
K.notSameDeepMembers = function(e, t, n) {
  new X(e, n, K.notSameDeepMembers, !0).to.not.have.same.deep.members(t);
};
K.sameOrderedMembers = function(e, t, n) {
  new X(e, n, K.sameOrderedMembers, !0).to.have.same.ordered.members(t);
};
K.notSameOrderedMembers = function(e, t, n) {
  new X(e, n, K.notSameOrderedMembers, !0).to.not.have.same.ordered.members(t);
};
K.sameDeepOrderedMembers = function(e, t, n) {
  new X(e, n, K.sameDeepOrderedMembers, !0).to.have.same.deep.ordered.members(t);
};
K.notSameDeepOrderedMembers = function(e, t, n) {
  new X(e, n, K.notSameDeepOrderedMembers, !0).to.not.have.same.deep.ordered.members(t);
};
K.includeMembers = function(e, t, n) {
  new X(e, n, K.includeMembers, !0).to.include.members(t);
};
K.notIncludeMembers = function(e, t, n) {
  new X(e, n, K.notIncludeMembers, !0).to.not.include.members(t);
};
K.includeDeepMembers = function(e, t, n) {
  new X(e, n, K.includeDeepMembers, !0).to.include.deep.members(t);
};
K.notIncludeDeepMembers = function(e, t, n) {
  new X(e, n, K.notIncludeDeepMembers, !0).to.not.include.deep.members(t);
};
K.includeOrderedMembers = function(e, t, n) {
  new X(e, n, K.includeOrderedMembers, !0).to.include.ordered.members(t);
};
K.notIncludeOrderedMembers = function(e, t, n) {
  new X(e, n, K.notIncludeOrderedMembers, !0).to.not.include.ordered.members(t);
};
K.includeDeepOrderedMembers = function(e, t, n) {
  new X(e, n, K.includeDeepOrderedMembers, !0).to.include.deep.ordered.members(t);
};
K.notIncludeDeepOrderedMembers = function(e, t, n) {
  new X(e, n, K.notIncludeDeepOrderedMembers, !0).to.not.include.deep.ordered.members(t);
};
K.oneOf = function(e, t, n) {
  new X(e, n, K.oneOf, !0).to.be.oneOf(t);
};
K.isIterable = function(e, t) {
  if (e == null || !e[Symbol.iterator])
    throw t = t ? `${t} expected ${ze(e)} to be an iterable` : `expected ${ze(e)} to be an iterable`, new Ve(
      t,
      void 0,
      K.isIterable
    );
};
K.changes = function(e, t, n, i) {
  arguments.length === 3 && typeof t == "function" && (i = n, n = null), new X(e, i, K.changes, !0).to.change(t, n);
};
K.changesBy = function(e, t, n, i, r) {
  if (arguments.length === 4 && typeof t == "function") {
    var s = i;
    i = n, r = s;
  } else arguments.length === 3 && (i = n, n = null);
  new X(e, r, K.changesBy, !0).to.change(t, n).by(i);
};
K.doesNotChange = function(e, t, n, i) {
  return arguments.length === 3 && typeof t == "function" && (i = n, n = null), new X(e, i, K.doesNotChange, !0).to.not.change(t, n);
};
K.changesButNotBy = function(e, t, n, i, r) {
  if (arguments.length === 4 && typeof t == "function") {
    var s = i;
    i = n, r = s;
  } else arguments.length === 3 && (i = n, n = null);
  new X(e, r, K.changesButNotBy, !0).to.change(t, n).but.not.by(i);
};
K.increases = function(e, t, n, i) {
  return arguments.length === 3 && typeof t == "function" && (i = n, n = null), new X(e, i, K.increases, !0).to.increase(t, n);
};
K.increasesBy = function(e, t, n, i, r) {
  if (arguments.length === 4 && typeof t == "function") {
    var s = i;
    i = n, r = s;
  } else arguments.length === 3 && (i = n, n = null);
  new X(e, r, K.increasesBy, !0).to.increase(t, n).by(i);
};
K.doesNotIncrease = function(e, t, n, i) {
  return arguments.length === 3 && typeof t == "function" && (i = n, n = null), new X(e, i, K.doesNotIncrease, !0).to.not.increase(t, n);
};
K.increasesButNotBy = function(e, t, n, i, r) {
  if (arguments.length === 4 && typeof t == "function") {
    var s = i;
    i = n, r = s;
  } else arguments.length === 3 && (i = n, n = null);
  new X(e, r, K.increasesButNotBy, !0).to.increase(t, n).but.not.by(i);
};
K.decreases = function(e, t, n, i) {
  return arguments.length === 3 && typeof t == "function" && (i = n, n = null), new X(e, i, K.decreases, !0).to.decrease(t, n);
};
K.decreasesBy = function(e, t, n, i, r) {
  if (arguments.length === 4 && typeof t == "function") {
    var s = i;
    i = n, r = s;
  } else arguments.length === 3 && (i = n, n = null);
  new X(e, r, K.decreasesBy, !0).to.decrease(t, n).by(i);
};
K.doesNotDecrease = function(e, t, n, i) {
  return arguments.length === 3 && typeof t == "function" && (i = n, n = null), new X(e, i, K.doesNotDecrease, !0).to.not.decrease(t, n);
};
K.doesNotDecreaseBy = function(e, t, n, i, r) {
  if (arguments.length === 4 && typeof t == "function") {
    var s = i;
    i = n, r = s;
  } else arguments.length === 3 && (i = n, n = null);
  return new X(e, r, K.doesNotDecreaseBy, !0).to.not.decrease(t, n).by(i);
};
K.decreasesButNotBy = function(e, t, n, i, r) {
  if (arguments.length === 4 && typeof t == "function") {
    var s = i;
    i = n, r = s;
  } else arguments.length === 3 && (i = n, n = null);
  new X(e, r, K.decreasesButNotBy, !0).to.decrease(t, n).but.not.by(i);
};
K.ifError = function(e) {
  if (e)
    throw e;
};
K.isExtensible = function(e, t) {
  new X(e, t, K.isExtensible, !0).to.be.extensible;
};
K.isNotExtensible = function(e, t) {
  new X(e, t, K.isNotExtensible, !0).to.not.be.extensible;
};
K.isSealed = function(e, t) {
  new X(e, t, K.isSealed, !0).to.be.sealed;
};
K.isNotSealed = function(e, t) {
  new X(e, t, K.isNotSealed, !0).to.not.be.sealed;
};
K.isFrozen = function(e, t) {
  new X(e, t, K.isFrozen, !0).to.be.frozen;
};
K.isNotFrozen = function(e, t) {
  new X(e, t, K.isNotFrozen, !0).to.not.be.frozen;
};
K.isEmpty = function(e, t) {
  new X(e, t, K.isEmpty, !0).to.be.empty;
};
K.isNotEmpty = function(e, t) {
  new X(e, t, K.isNotEmpty, !0).to.not.be.empty;
};
(/* @__PURE__ */ At(function e(t, n) {
  return K[n] = K[t], e;
}, "alias"))("isOk", "ok")("isNotOk", "notOk")("throws", "throw")("throws", "Throw")("isExtensible", "extensible")("isNotExtensible", "notExtensible")("isSealed", "sealed")("isNotSealed", "notSealed")("isFrozen", "frozen")("isNotFrozen", "notFrozen")("isEmpty", "empty")("isNotEmpty", "notEmpty")("isCallable", "isFunction")("isNotCallable", "isNotFunction");
var _p = [];
function dy(e) {
  const t = {
    AssertionError: Ve,
    util: Gu,
    config: di,
    expect: Is,
    assert: K,
    Assertion: X,
    ...j0
  };
  return ~_p.indexOf(e) || (e(t, Gu), _p.push(e)), t;
}
At(dy, "use");
/*!
 * Chai - flag utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Chai - test utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Chai - expectTypes utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Chai - getActual utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Chai - message composition utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Chai - transferFlags utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * chai
 * http://chaijs.com
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Chai - isProxyEnabled helper
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Chai - addProperty utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Chai - addLengthGuard utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Chai - getProperties utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Chai - proxify utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Chai - addMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Chai - overwriteProperty utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Chai - overwriteMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Chai - addChainingMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Chai - overwriteChainableMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Chai - compareByInspect utility
 * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Chai - getOwnEnumerablePropertySymbols utility
 * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Chai - getOwnEnumerableProperties utility
 * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Chai - isNaN utility
 * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
 * MIT Licensed
 */
/*!
 * chai
 * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * chai
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*! Bundled license information:

deep-eql/index.js:
  (*!
   * deep-eql
   * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Check to see if the MemoizeMap has recorded a result of the two operands
   *
   * @param {Mixed} leftHandOperand
   * @param {Mixed} rightHandOperand
   * @param {MemoizeMap} memoizeMap
   * @returns {Boolean|null} result
  *)
  (*!
   * Set the result of the equality into the MemoizeMap
   *
   * @param {Mixed} leftHandOperand
   * @param {Mixed} rightHandOperand
   * @param {MemoizeMap} memoizeMap
   * @param {Boolean} result
  *)
  (*!
   * Primary Export
   *)
  (*!
   * The main logic of the `deepEqual` function.
   *
   * @param {Mixed} leftHandOperand
   * @param {Mixed} rightHandOperand
   * @param {Object} [options] (optional) Additional options
   * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
   * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
      complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
      references to blow the stack.
   * @return {Boolean} equal match
  *)
  (*!
   * Compare two Regular Expressions for equality.
   *
   * @param {RegExp} leftHandOperand
   * @param {RegExp} rightHandOperand
   * @return {Boolean} result
   *)
  (*!
   * Compare two Sets/Maps for equality. Faster than other equality functions.
   *
   * @param {Set} leftHandOperand
   * @param {Set} rightHandOperand
   * @param {Object} [options] (Optional)
   * @return {Boolean} result
   *)
  (*!
   * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
   *
   * @param {Iterable} leftHandOperand
   * @param {Iterable} rightHandOperand
   * @param {Object} [options] (Optional)
   * @return {Boolean} result
   *)
  (*!
   * Simple equality for generator objects such as those returned by generator functions.
   *
   * @param {Iterable} leftHandOperand
   * @param {Iterable} rightHandOperand
   * @param {Object} [options] (Optional)
   * @return {Boolean} result
   *)
  (*!
   * Determine if the given object has an @@iterator function.
   *
   * @param {Object} target
   * @return {Boolean} `true` if the object has an @@iterator function.
   *)
  (*!
   * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
   * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
   *
   * @param {Object} target
   * @returns {Array} an array of entries from the @@iterator function
   *)
  (*!
   * Gets all entries from a Generator. This will consume the generator - which could have side effects.
   *
   * @param {Generator} target
   * @returns {Array} an array of entries from the Generator.
   *)
  (*!
   * Gets all own and inherited enumerable keys from a target.
   *
   * @param {Object} target
   * @returns {Array} an array of own and inherited enumerable keys from the target.
   *)
  (*!
   * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
   * each key. If any value of the given key is not equal, the function will return false (early).
   *
   * @param {Mixed} leftHandOperand
   * @param {Mixed} rightHandOperand
   * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
   * @param {Object} [options] (Optional)
   * @return {Boolean} result
   *)
  (*!
   * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
   * for each enumerable key in the object.
   *
   * @param {Mixed} leftHandOperand
   * @param {Mixed} rightHandOperand
   * @param {Object} [options] (Optional)
   * @return {Boolean} result
   *)
  (*!
   * Returns true if the argument is a primitive.
   *
   * This intentionally returns true for all objects that can be compared by reference,
   * including functions and symbols.
   *
   * @param {Mixed} value
   * @return {Boolean} result
   *)
*/
var dh = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
function hd(e) {
  return e && e.__esModule && Object.prototype.hasOwnProperty.call(e, "default") ? e.default : e;
}
function py(e) {
  if (e.__esModule) return e;
  var t = e.default;
  if (typeof t == "function") {
    var n = function i() {
      return this instanceof i ? Reflect.construct(t, arguments, this.constructor) : t.apply(this, arguments);
    };
    n.prototype = t.prototype;
  } else n = {};
  return Object.defineProperty(n, "__esModule", { value: !0 }), Object.keys(e).forEach(function(i) {
    var r = Object.getOwnPropertyDescriptor(e, i);
    Object.defineProperty(n, i, r.get ? r : {
      enumerable: !0,
      get: function() {
        return e[i];
      }
    });
  }), n;
}
var Jh = { exports: {} }, ph, Np;
function gy() {
  if (Np) return ph;
  Np = 1;
  var e = 1e3, t = e * 60, n = t * 60, i = n * 24, r = i * 7, s = i * 365.25;
  ph = function(c, d) {
    d = d || {};
    var g = typeof c;
    if (g === "string" && c.length > 0)
      return o(c);
    if (g === "number" && isFinite(c))
      return d.long ? l(c) : a(c);
    throw new Error(
      "val is not a non-empty string or a valid number. val=" + JSON.stringify(c)
    );
  };
  function o(c) {
    if (c = String(c), !(c.length > 100)) {
      var d = /^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(
        c
      );
      if (d) {
        var g = parseFloat(d[1]), p = (d[2] || "ms").toLowerCase();
        switch (p) {
          case "years":
          case "year":
          case "yrs":
          case "yr":
          case "y":
            return g * s;
          case "weeks":
          case "week":
          case "w":
            return g * r;
          case "days":
          case "day":
          case "d":
            return g * i;
          case "hours":
          case "hour":
          case "hrs":
          case "hr":
          case "h":
            return g * n;
          case "minutes":
          case "minute":
          case "mins":
          case "min":
          case "m":
            return g * t;
          case "seconds":
          case "second":
          case "secs":
          case "sec":
          case "s":
            return g * e;
          case "milliseconds":
          case "millisecond":
          case "msecs":
          case "msec":
          case "ms":
            return g;
          default:
            return;
        }
      }
    }
  }
  function a(c) {
    var d = Math.abs(c);
    return d >= i ? Math.round(c / i) + "d" : d >= n ? Math.round(c / n) + "h" : d >= t ? Math.round(c / t) + "m" : d >= e ? Math.round(c / e) + "s" : c + "ms";
  }
  function l(c) {
    var d = Math.abs(c);
    return d >= i ? h(c, d, i, "day") : d >= n ? h(c, d, n, "hour") : d >= t ? h(c, d, t, "minute") : d >= e ? h(c, d, e, "second") : c + " ms";
  }
  function h(c, d, g, p) {
    var b = d >= g * 1.5;
    return Math.round(c / g) + " " + p + (b ? "s" : "");
  }
  return ph;
}
function my(e) {
  n.debug = n, n.default = n, n.coerce = l, n.disable = s, n.enable = r, n.enabled = o, n.humanize = gy(), n.destroy = h, Object.keys(e).forEach((c) => {
    n[c] = e[c];
  }), n.names = [], n.skips = [], n.formatters = {};
  function t(c) {
    let d = 0;
    for (let g = 0; g < c.length; g++)
      d = (d << 5) - d + c.charCodeAt(g), d |= 0;
    return n.colors[Math.abs(d) % n.colors.length];
  }
  n.selectColor = t;
  function n(c) {
    let d, g = null, p, b;
    function x(...N) {
      if (!x.enabled)
        return;
      const v = x, w = Number(/* @__PURE__ */ new Date()), k = w - (d || w);
      v.diff = k, v.prev = d, v.curr = w, d = w, N[0] = n.coerce(N[0]), typeof N[0] != "string" && N.unshift("%O");
      let T = 0;
      N[0] = N[0].replace(/%([a-zA-Z%])/g, (G, R) => {
        if (G === "%%")
          return "%";
        T++;
        const O = n.formatters[R];
        if (typeof O == "function") {
          const $ = N[T];
          G = O.call(v, $), N.splice(T, 1), T--;
        }
        return G;
      }), n.formatArgs.call(v, N), (v.log || n.log).apply(v, N);
    }
    return x.namespace = c, x.useColors = n.useColors(), x.color = n.selectColor(c), x.extend = i, x.destroy = n.destroy, Object.defineProperty(x, "enabled", {
      enumerable: !0,
      configurable: !1,
      get: () => g !== null ? g : (p !== n.namespaces && (p = n.namespaces, b = n.enabled(c)), b),
      set: (N) => {
        g = N;
      }
    }), typeof n.init == "function" && n.init(x), x;
  }
  function i(c, d) {
    const g = n(this.namespace + (typeof d > "u" ? ":" : d) + c);
    return g.log = this.log, g;
  }
  function r(c) {
    n.save(c), n.namespaces = c, n.names = [], n.skips = [];
    let d;
    const g = (typeof c == "string" ? c : "").split(/[\s,]+/), p = g.length;
    for (d = 0; d < p; d++)
      g[d] && (c = g[d].replace(/\*/g, ".*?"), c[0] === "-" ? n.skips.push(new RegExp("^" + c.slice(1) + "$")) : n.names.push(new RegExp("^" + c + "$")));
  }
  function s() {
    const c = [
      ...n.names.map(a),
      ...n.skips.map(a).map((d) => "-" + d)
    ].join(",");
    return n.enable(""), c;
  }
  function o(c) {
    if (c[c.length - 1] === "*")
      return !0;
    let d, g;
    for (d = 0, g = n.skips.length; d < g; d++)
      if (n.skips[d].test(c))
        return !1;
    for (d = 0, g = n.names.length; d < g; d++)
      if (n.names[d].test(c))
        return !0;
    return !1;
  }
  function a(c) {
    return c.toString().substring(2, c.toString().length - 2).replace(/\.\*\?$/, "*");
  }
  function l(c) {
    return c instanceof Error ? c.stack || c.message : c;
  }
  function h() {
    console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");
  }
  return n.enable(n.load()), n;
}
var yy = my;
(function(e, t) {
  t.formatArgs = i, t.save = r, t.load = s, t.useColors = n, t.storage = o(), t.destroy = /* @__PURE__ */ (() => {
    let l = !1;
    return () => {
      l || (l = !0, console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."));
    };
  })(), t.colors = [
    "#0000CC",
    "#0000FF",
    "#0033CC",
    "#0033FF",
    "#0066CC",
    "#0066FF",
    "#0099CC",
    "#0099FF",
    "#00CC00",
    "#00CC33",
    "#00CC66",
    "#00CC99",
    "#00CCCC",
    "#00CCFF",
    "#3300CC",
    "#3300FF",
    "#3333CC",
    "#3333FF",
    "#3366CC",
    "#3366FF",
    "#3399CC",
    "#3399FF",
    "#33CC00",
    "#33CC33",
    "#33CC66",
    "#33CC99",
    "#33CCCC",
    "#33CCFF",
    "#6600CC",
    "#6600FF",
    "#6633CC",
    "#6633FF",
    "#66CC00",
    "#66CC33",
    "#9900CC",
    "#9900FF",
    "#9933CC",
    "#9933FF",
    "#99CC00",
    "#99CC33",
    "#CC0000",
    "#CC0033",
    "#CC0066",
    "#CC0099",
    "#CC00CC",
    "#CC00FF",
    "#CC3300",
    "#CC3333",
    "#CC3366",
    "#CC3399",
    "#CC33CC",
    "#CC33FF",
    "#CC6600",
    "#CC6633",
    "#CC9900",
    "#CC9933",
    "#CCCC00",
    "#CCCC33",
    "#FF0000",
    "#FF0033",
    "#FF0066",
    "#FF0099",
    "#FF00CC",
    "#FF00FF",
    "#FF3300",
    "#FF3333",
    "#FF3366",
    "#FF3399",
    "#FF33CC",
    "#FF33FF",
    "#FF6600",
    "#FF6633",
    "#FF9900",
    "#FF9933",
    "#FFCC00",
    "#FFCC33"
  ];
  function n() {
    if (typeof window < "u" && window.process && (window.process.type === "renderer" || window.process.__nwjs))
      return !0;
    if (typeof navigator < "u" && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))
      return !1;
    let l;
    return typeof document < "u" && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || // Is firebug? http://stackoverflow.com/a/398120/376773
    typeof window < "u" && window.console && (window.console.firebug || window.console.exception && window.console.table) || // Is firefox >= v31?
    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages
    typeof navigator < "u" && navigator.userAgent && (l = navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)) && parseInt(l[1], 10) >= 31 || // Double check webkit in userAgent just in case we are in a worker
    typeof navigator < "u" && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/);
  }
  function i(l) {
    if (l[0] = (this.useColors ? "%c" : "") + this.namespace + (this.useColors ? " %c" : " ") + l[0] + (this.useColors ? "%c " : " ") + "+" + e.exports.humanize(this.diff), !this.useColors)
      return;
    const h = "color: " + this.color;
    l.splice(1, 0, h, "color: inherit");
    let c = 0, d = 0;
    l[0].replace(/%[a-zA-Z%]/g, (g) => {
      g !== "%%" && (c++, g === "%c" && (d = c));
    }), l.splice(d, 0, h);
  }
  t.log = console.debug || console.log || (() => {
  });
  function r(l) {
    try {
      l ? t.storage.setItem("debug", l) : t.storage.removeItem("debug");
    } catch {
    }
  }
  function s() {
    let l;
    try {
      l = t.storage.getItem("debug");
    } catch {
    }
    return !l && typeof process < "u" && "env" in process && (l = void 0), l;
  }
  function o() {
    try {
      return localStorage;
    } catch {
    }
  }
  e.exports = yy(t);
  const { formatters: a } = e.exports;
  a.j = function(l) {
    try {
      return JSON.stringify(l);
    } catch (h) {
      return "[UnexpectedJSONParseError]: " + h.message;
    }
  };
})(Jh, Jh.exports);
var by = Jh.exports;
const B0 = /* @__PURE__ */ hd(by), vy = {
  cacheResults: !0,
  successMetric: "efficiency",
  calculateCuts: !0,
  stack: !0,
  findDuplicatePatterns: !0,
  //dev specific
  captureProfile: !1,
  runTests: !1,
  throwErrorsOnFailedTests: !1,
  // recordPlacementPositions: isDevOrTest ? true : false,
  sample: {
    enable: !0,
    groupSize: 6,
    efficiency: 4,
    guillotine: 2
  },
  priority: {
    enable: !0,
    variationThreshold: 0.3
  },
  secondRun: {
    enabled: !1,
    efficiencyCutoff: 0.5,
    stack: !1
  },
  efficiency: {
    tidy: !1,
    //[] issue with picking winner when tidy is enabled
    rayCasting: !0
  },
  groups: {
    shapeAreaCutOff: 0.7,
    tolerance: 0.04,
    guillotine: {
      strips: !0,
      segments: !0,
      runWithout: !1
    },
    efficiency: {
      firstShapes: !0,
      position: !0,
      limit: 100
    }
  },
  guillotine: {
    viableShapeArea: 0.5,
    secondPass: !0,
    strips: {
      rearrange: !0,
      efficiencyThreshold: 0.7
    },
    stripShapes: {
      allocation: !0,
      iterations: 6,
      numPriorityShapes: 1
    }
  },
  subset: {
    shuffles: 80,
    //this is the default - can be overwritten (for example when creating groups)
    guillotine: {
      shuffles: 80
    },
    efficiency: {
      limit: 0.5
    }
  },
  evo: {
    disable: !1,
    stockLimit: 40
  }
};
di.showDiff = !0;
const Pp = B0("tests");
B0("timers");
function q0() {
  return typeof process < "u" && (process != null && process.env), !1;
}
function $0(e, t = null) {
  if (e != null && e.length && q0() && vy.runTests)
    for (const n of e)
      try {
        n();
      } catch (i) {
        t ? Pp(t, i.message) : Pp(i.message);
      }
}
var Xh = { exports: {} }, gh, Lp;
function wy() {
  if (Lp) return gh;
  Lp = 1;
  var e = 1e3, t = e * 60, n = t * 60, i = n * 24, r = i * 7, s = i * 365.25;
  gh = function(c, d) {
    d = d || {};
    var g = typeof c;
    if (g === "string" && c.length > 0)
      return o(c);
    if (g === "number" && isFinite(c))
      return d.long ? l(c) : a(c);
    throw new Error(
      "val is not a non-empty string or a valid number. val=" + JSON.stringify(c)
    );
  };
  function o(c) {
    if (c = String(c), !(c.length > 100)) {
      var d = /^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(
        c
      );
      if (d) {
        var g = parseFloat(d[1]), p = (d[2] || "ms").toLowerCase();
        switch (p) {
          case "years":
          case "year":
          case "yrs":
          case "yr":
          case "y":
            return g * s;
          case "weeks":
          case "week":
          case "w":
            return g * r;
          case "days":
          case "day":
          case "d":
            return g * i;
          case "hours":
          case "hour":
          case "hrs":
          case "hr":
          case "h":
            return g * n;
          case "minutes":
          case "minute":
          case "mins":
          case "min":
          case "m":
            return g * t;
          case "seconds":
          case "second":
          case "secs":
          case "sec":
          case "s":
            return g * e;
          case "milliseconds":
          case "millisecond":
          case "msecs":
          case "msec":
          case "ms":
            return g;
          default:
            return;
        }
      }
    }
  }
  function a(c) {
    var d = Math.abs(c);
    return d >= i ? Math.round(c / i) + "d" : d >= n ? Math.round(c / n) + "h" : d >= t ? Math.round(c / t) + "m" : d >= e ? Math.round(c / e) + "s" : c + "ms";
  }
  function l(c) {
    var d = Math.abs(c);
    return d >= i ? h(c, d, i, "day") : d >= n ? h(c, d, n, "hour") : d >= t ? h(c, d, t, "minute") : d >= e ? h(c, d, e, "second") : c + " ms";
  }
  function h(c, d, g, p) {
    var b = d >= g * 1.5;
    return Math.round(c / g) + " " + p + (b ? "s" : "");
  }
  return gh;
}
function xy(e) {
  n.debug = n, n.default = n, n.coerce = l, n.disable = s, n.enable = r, n.enabled = o, n.humanize = wy(), n.destroy = h, Object.keys(e).forEach((c) => {
    n[c] = e[c];
  }), n.names = [], n.skips = [], n.formatters = {};
  function t(c) {
    let d = 0;
    for (let g = 0; g < c.length; g++)
      d = (d << 5) - d + c.charCodeAt(g), d |= 0;
    return n.colors[Math.abs(d) % n.colors.length];
  }
  n.selectColor = t;
  function n(c) {
    let d, g = null, p, b;
    function x(...N) {
      if (!x.enabled)
        return;
      const v = x, w = Number(/* @__PURE__ */ new Date()), k = w - (d || w);
      v.diff = k, v.prev = d, v.curr = w, d = w, N[0] = n.coerce(N[0]), typeof N[0] != "string" && N.unshift("%O");
      let T = 0;
      N[0] = N[0].replace(/%([a-zA-Z%])/g, (G, R) => {
        if (G === "%%")
          return "%";
        T++;
        const O = n.formatters[R];
        if (typeof O == "function") {
          const $ = N[T];
          G = O.call(v, $), N.splice(T, 1), T--;
        }
        return G;
      }), n.formatArgs.call(v, N), (v.log || n.log).apply(v, N);
    }
    return x.namespace = c, x.useColors = n.useColors(), x.color = n.selectColor(c), x.extend = i, x.destroy = n.destroy, Object.defineProperty(x, "enabled", {
      enumerable: !0,
      configurable: !1,
      get: () => g !== null ? g : (p !== n.namespaces && (p = n.namespaces, b = n.enabled(c)), b),
      set: (N) => {
        g = N;
      }
    }), typeof n.init == "function" && n.init(x), x;
  }
  function i(c, d) {
    const g = n(this.namespace + (typeof d > "u" ? ":" : d) + c);
    return g.log = this.log, g;
  }
  function r(c) {
    n.save(c), n.namespaces = c, n.names = [], n.skips = [];
    let d;
    const g = (typeof c == "string" ? c : "").split(/[\s,]+/), p = g.length;
    for (d = 0; d < p; d++)
      g[d] && (c = g[d].replace(/\*/g, ".*?"), c[0] === "-" ? n.skips.push(new RegExp("^" + c.slice(1) + "$")) : n.names.push(new RegExp("^" + c + "$")));
  }
  function s() {
    const c = [
      ...n.names.map(a),
      ...n.skips.map(a).map((d) => "-" + d)
    ].join(",");
    return n.enable(""), c;
  }
  function o(c) {
    if (c[c.length - 1] === "*")
      return !0;
    let d, g;
    for (d = 0, g = n.skips.length; d < g; d++)
      if (n.skips[d].test(c))
        return !1;
    for (d = 0, g = n.names.length; d < g; d++)
      if (n.names[d].test(c))
        return !0;
    return !1;
  }
  function a(c) {
    return c.toString().substring(2, c.toString().length - 2).replace(/\.\*\?$/, "*");
  }
  function l(c) {
    return c instanceof Error ? c.stack || c.message : c;
  }
  function h() {
    console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");
  }
  return n.enable(n.load()), n;
}
var Sy = xy;
(function(e, t) {
  t.formatArgs = i, t.save = r, t.load = s, t.useColors = n, t.storage = o(), t.destroy = /* @__PURE__ */ (() => {
    let l = !1;
    return () => {
      l || (l = !0, console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."));
    };
  })(), t.colors = [
    "#0000CC",
    "#0000FF",
    "#0033CC",
    "#0033FF",
    "#0066CC",
    "#0066FF",
    "#0099CC",
    "#0099FF",
    "#00CC00",
    "#00CC33",
    "#00CC66",
    "#00CC99",
    "#00CCCC",
    "#00CCFF",
    "#3300CC",
    "#3300FF",
    "#3333CC",
    "#3333FF",
    "#3366CC",
    "#3366FF",
    "#3399CC",
    "#3399FF",
    "#33CC00",
    "#33CC33",
    "#33CC66",
    "#33CC99",
    "#33CCCC",
    "#33CCFF",
    "#6600CC",
    "#6600FF",
    "#6633CC",
    "#6633FF",
    "#66CC00",
    "#66CC33",
    "#9900CC",
    "#9900FF",
    "#9933CC",
    "#9933FF",
    "#99CC00",
    "#99CC33",
    "#CC0000",
    "#CC0033",
    "#CC0066",
    "#CC0099",
    "#CC00CC",
    "#CC00FF",
    "#CC3300",
    "#CC3333",
    "#CC3366",
    "#CC3399",
    "#CC33CC",
    "#CC33FF",
    "#CC6600",
    "#CC6633",
    "#CC9900",
    "#CC9933",
    "#CCCC00",
    "#CCCC33",
    "#FF0000",
    "#FF0033",
    "#FF0066",
    "#FF0099",
    "#FF00CC",
    "#FF00FF",
    "#FF3300",
    "#FF3333",
    "#FF3366",
    "#FF3399",
    "#FF33CC",
    "#FF33FF",
    "#FF6600",
    "#FF6633",
    "#FF9900",
    "#FF9933",
    "#FFCC00",
    "#FFCC33"
  ];
  function n() {
    if (typeof window < "u" && window.process && (window.process.type === "renderer" || window.process.__nwjs))
      return !0;
    if (typeof navigator < "u" && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))
      return !1;
    let l;
    return typeof document < "u" && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || // Is firebug? http://stackoverflow.com/a/398120/376773
    typeof window < "u" && window.console && (window.console.firebug || window.console.exception && window.console.table) || // Is firefox >= v31?
    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages
    typeof navigator < "u" && navigator.userAgent && (l = navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)) && parseInt(l[1], 10) >= 31 || // Double check webkit in userAgent just in case we are in a worker
    typeof navigator < "u" && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/);
  }
  function i(l) {
    if (l[0] = (this.useColors ? "%c" : "") + this.namespace + (this.useColors ? " %c" : " ") + l[0] + (this.useColors ? "%c " : " ") + "+" + e.exports.humanize(this.diff), !this.useColors)
      return;
    const h = "color: " + this.color;
    l.splice(1, 0, h, "color: inherit");
    let c = 0, d = 0;
    l[0].replace(/%[a-zA-Z%]/g, (g) => {
      g !== "%%" && (c++, g === "%c" && (d = c));
    }), l.splice(d, 0, h);
  }
  t.log = console.debug || console.log || (() => {
  });
  function r(l) {
    try {
      l ? t.storage.setItem("debug", l) : t.storage.removeItem("debug");
    } catch {
    }
  }
  function s() {
    let l;
    try {
      l = t.storage.getItem("debug");
    } catch {
    }
    return !l && typeof process < "u" && "env" in process && (l = void 0), l;
  }
  function o() {
    try {
      return localStorage;
    } catch {
    }
  }
  e.exports = Sy(t);
  const { formatters: a } = e.exports;
  a.j = function(l) {
    try {
      return JSON.stringify(l);
    } catch (h) {
      return "[UnexpectedJSONParseError]: " + h.message;
    }
  };
})(Xh, Xh.exports);
var Ay = Xh.exports;
const tr = /* @__PURE__ */ hd(Ay);
tr.colors = [
  2,
  3,
  4,
  5,
  7,
  9,
  10,
  11,
  14,
  159
];
tr("logs");
tr("cuts");
tr("guillotine");
tr("results");
tr("scoring");
tr("calculations");
tr("subset");
tr("secondRun");
tr("stack");
const ky = tr("errors");
tr("allStock");
ky.color = 1;
function _y(e) {
  if (e != null && e.dimension)
    switch (e.dimension) {
      case "l":
        return e.x2 - e.x1;
      case "w":
        return e.y2 - e.y1;
    }
  switch (e.type) {
    case "top":
    case "bottom":
      return e.x2 - e.x1;
    case "left":
    case "right":
      return e.y2 - e.y1;
  }
  return 0;
}
class Pc extends na {
  //used to mark for removal
  constructor(n) {
    var i, r, s, o;
    n.x2 < n.x1 && ([n.x1, n.x2] = [n.x2, n.x1]), n.y2 < n.y1 && ([n.y1, n.y2] = [n.y2, n.y1]);
    super(n);
    H(this, "stock");
    H(this, "stockId");
    H(this, "guillotine");
    H(this, "guillotineData");
    H(this, "isTrim");
    H(this, "distances");
    H(this, "beamTrimX1");
    H(this, "beamTrimY1");
    H(this, "type", null);
    H(this, "remove");
    Lt(n == null ? void 0 : n.stock) && (((r = (i = n.stock) == null ? void 0 : i.constructor) == null ? void 0 : r.name) === "Stock" ? this.stock = n.stock : this.stock = new ns(n.stock), this.stockId = this.stock.id), this.stockId = (s = n == null ? void 0 : n.stock) == null ? void 0 : s.id, this.type = n.type ?? null, this.guillotine = n.guillotine, this.guillotineData = Lt(n.guillotineData) ? n.guillotineData : {}, this.guillotineData.ptxDummyCut = (n == null ? void 0 : n.ptxDummyCut) || ((o = n == null ? void 0 : n.guillotineData) == null ? void 0 : o.ptxDummyCut) || !1, this.isTrim = Lt(n.isTrim) ? n.isTrim : !1, this.distances = Lt(n.distances) ? n.distances : {}, this.beamTrimX1 = n.beamTrimX1, this.beamTrimY1 = n.beamTrimY1;
  }
  //compress for saving / transfer
  compress() {
    var n;
    this.stockId = (this == null ? void 0 : this.stockId) ?? ((n = this == null ? void 0 : this.stock) == null ? void 0 : n.id), delete this.shapeCollisions, delete this.stock;
  }
  clone() {
    const n = structuredClone(this);
    return new Pc(n);
  }
  getCoordinates() {
    return {
      x1: this.x1,
      x2: this.x2,
      y1: this.y1,
      y2: this.y2
    };
  }
  trim() {
    this.dimension === "l" ? (this.x1 = this.x1 < 0 ? 0 : this.x1, this.x2 = this.x2 > this.stock.l ? this.stock.l : this.x2) : this.dimension === "w" && (this.y1 = this.y1 < 0 ? 0 : this.y1, this.y2 = this.y2 > this.stock.w ? this.stock.w : this.y2);
  }
  lookupDirectionByType(n) {
    const r = {
      top: "l",
      bottom: "l",
      left: "w",
      right: "w"
    }[n];
    if (r) return r;
    throw new Error("no direction found in lookupDirectionByType");
  }
  isInsideStock() {
    switch (this.type) {
      case "bottom":
        return Ue.greaterThan(
          this.y1 + this.stock.getBladeWidth() / 2,
          0
        );
      case "left":
        return Ue.greaterThan(
          this.x1 + this.stock.getBladeWidth() / 2,
          0
        );
      case "top":
        return Ue.lessThan(
          this.y1 - this.stock.getBladeWidth() / 2,
          this.stock.w
        );
      case "right":
        return Ue.lessThan(
          this.x1 - this.stock.getBladeWidth() / 2,
          this.stock.l
        );
      default:
        return !0;
    }
  }
  /**
      * the cuts are visualised differently from their exact dimensions
      * @param {string} coord
      */
  getVisCoords(n) {
    return this[n];
  }
  getLength() {
    return _y(this);
  }
  getArea() {
    if (!this.stock) return 0;
    const n = this.getLength();
    return n ? n * this.stock.getBladeWidth() : 0;
  }
}
const Ny = {
  tb: {
    bottomLeft: {
      top: "topRight",
      topLeft: "topLeft"
    },
    bottomRight: {
      top: "topLeft",
      topRight: "topRight"
    }
  },
  bt: {
    topLeft: {
      bottom: "bottomRight",
      bottomLeft: "bottomLeft"
    },
    topRight: {
      bottom: "bottomLeft",
      bottomRight: "bottomRight"
    }
  },
  lr: {
    topRight: {
      left: "bottomLeft",
      topLeft: "topLeft"
    },
    bottomRight: {
      left: "topLeft",
      bottomLeft: "bottomLeft"
    }
  },
  rl: {
    topLeft: {
      right: "bottomRight",
      topRight: "topRight"
    },
    bottomLeft: {
      right: "topRight",
      bottomRight: "bottomRight"
    }
  }
}, fu = {
  topLeft: {
    top: ["topRight"],
    default: ["topRight"]
  },
  bottomRight: {
    right: ["topRight"],
    default: ["topRight"]
  }
}, du = {
  topRight: {
    top: ["topLeft"],
    right: ["bottomRight"],
    default: ["topLeft", "bottomRight"]
  },
  topLeft: {
    top: ["topRight"],
    left: ["bottomLeft"],
    default: ["topRight", "bottomLeft"]
  },
  bottomRight: {
    bottom: ["bottomLeft"],
    right: ["topRight"],
    default: ["bottomLeft", "topRight"]
  },
  bottomLeft: {
    bottom: ["bottomRight"],
    left: ["topLeft"],
    default: ["bottomRight", "topLeft"]
  }
};
class $n {
  constructor(t, n, i = null) {
    H(this, "x");
    H(this, "y");
    H(this, "z");
    H(this, "a");
    //shape id
    H(this, "b");
    //shape id
    H(this, "direction");
    //direction of the raay
    H(this, "type");
    //[] need to type
    H(this, "corner");
    //originating corner of this point
    H(this, "grid");
    //if a grid point, which grid position
    H(this, "stockID");
    H(this, "raycast");
    H(this, "collision");
    H(this, "tooClose");
    H(this, "adjustedForMinSpacing");
    this.x = parseFloat(t), this.y = parseFloat(n), this.z = parseFloat(i) || 0, this.validate();
  }
  /**
   * clone with the ability to change the coordinates
   * NOTE: looks odd for performance reasons
   */
  clone(t = null, n = null) {
    const i = new $n(t ?? this.x, n ?? this.y);
    for (const r in this)
      r !== "x" && r !== "y" && (i[r] = this[r]);
    return i;
  }
  validate() {
    if (isNaN(this.x) || isNaN(this.y))
      throw new Error("invalid point coordinates");
  }
  coords() {
    return {
      x: this.x,
      y: this.y
    };
  }
  collidesWith(t) {
    return this.x >= t.x && this.x <= t.x + t.l && this.y >= t.y && this.y <= t.y + t.w;
  }
  isIdenticalTo(t) {
    return this.x === t.x && this.y === t.y;
  }
  /**
   * given a point from a shape corner or a ray, get the available positions for this shape
   * @returns the position of the shape relative to the point e.g. bottomRight means the shape is placed to the bottom right of the point
   * @remarks does not cater for diagonals
   */
  //[x] needs to cater for raycast coords, which don't originate from a shape corner
  //[x] cater for raycast corners and grid
  getAvailableShapePositions(t) {
    const n = /* @__PURE__ */ new Set();
    if (this.raycast) {
      const i = Ny[this.direction];
      return i && i[this.corner] && i[this.corner][this.grid] && n.add(i[this.corner][this.grid]), n;
    }
    return (t == null ? void 0 : t.cutType) !== "efficiency" ? (fu[this.corner] && (this.grid ? fu[this.corner][this.grid] && fu[this.corner][this.grid].forEach((i) => n.add(i)) : fu[this.corner].default.forEach((i) => n.add(i))), n) : (du[this.corner] && (this.grid ? du[this.corner][this.grid] && du[this.corner][this.grid].forEach((i) => n.add(i)) : du[this.corner].default.forEach((i) => n.add(i))), n);
  }
}
class wo {
  constructor(t = []) {
    H(this, "points", /* @__PURE__ */ new Map());
    t.forEach((n) => this.addPoint(n));
  }
  addPoint(t, n = null) {
    if (this.contains(t)) {
      const i = this.getPoint(t);
      i.type === "group" && !n && (i.type = void 0);
      return;
    }
    t.validate(), n && (t.type = n), this.points.set(this.createKey(t), t);
  }
  addPoints(t, n = null) {
    for (const i of t) {
      if (!i) return;
      i.validate(), this.addPoint(i, n);
    }
  }
  createKey(t) {
    return `${t.x},${t.y}`;
  }
  getPoint(t) {
    return this.points.get(this.createKey(t));
  }
  deletePoint(t) {
    t.validate(), this.points.delete(this.createKey(t));
  }
  deletePoints(t) {
    for (const n of t)
      n.validate(), this.deletePoint(n);
  }
  clear() {
    this.points.clear();
  }
  toArray() {
    return Array.from(this.points.values());
  }
  contains(t) {
    return this.points.has(this.createKey(t));
  }
}
function Xe(e, t, n, i, r) {
  const s = Py[e](t, n);
  return i && (s.corner = i), r && (s.direction = r), s;
}
const Py = {
  bottom: (e, t) => {
    const n = e.clone(e.x, e.y - t);
    return n.grid = "bottom", n;
  },
  bottomLeft: (e, t) => {
    const n = e.clone(e.x - t, e.y - t);
    return n.grid = "bottomLeft", n;
  },
  bottomRight: (e, t) => {
    const n = e.clone(e.x + t, e.y - t);
    return n.grid = "bottomRight", n;
  },
  left: (e, t) => {
    const n = e.clone(e.x - t, e.y);
    return n.grid = "left", n;
  },
  centre: (e) => {
    const t = e.clone(e.x, e.y);
    return t.grid = "centre", t;
  },
  right: (e, t) => {
    const n = e.clone(e.x + t, e.y);
    return n.grid = "right", n;
  },
  top: (e, t) => {
    const n = e.clone(e.x, e.y + t);
    return n.grid = "top", n;
  },
  topLeft: (e, t) => {
    const n = e.clone(e.x - t, e.y + t);
    return n.grid = "topLeft", n;
  },
  topRight: (e, t) => {
    const n = e.clone(e.x + t, e.y + t);
    return n.grid = "topRight", n;
  }
};
function Ly(e, t, n) {
  var o, a, l, h, c, d;
  const i = new wo(), r = n.toArray().sort(z0), s = t.getBladeWidth();
  if (r.forEach((g) => {
    const p = g.corner, b = g.type;
    if (!s)
      i.addPoint(g);
    else
      switch (p) {
        case "topRight":
          i.addPoint(
            Xe("top", g, s, p),
            b
          ), i.addPoint(
            Xe("right", g, s, p),
            b
          );
          break;
        case "topLeft":
          i.addPoint(
            Xe("top", g, s, p),
            b
          ), i.addPoint(
            Xe("left", g, s, p),
            b
          );
          break;
        case "bottomRight":
          i.addPoint(
            Xe("bottom", g, s, p),
            b
          ), i.addPoint(
            Xe("right", g, s, p),
            b
          );
          break;
        case "bottomLeft":
          i.addPoint(
            Xe("bottom", g, s, p),
            b
          ), i.addPoint(
            Xe("left", g, s, p),
            b
          );
          break;
      }
    const x = i.toArray();
    if (s)
      for (let N = x.length; N--; ) {
        const v = x[N];
        n.contains(v) && i.deletePoint(v);
      }
    else
      for (let N = x.length; N--; ) {
        const v = x[N];
        for (let w = e.length; w--; ) {
          const k = e[w];
          if (v.x === k.x && v.y === k.y) {
            i.deletePoint(v);
            break;
          }
        }
      }
  }), s) {
    const g = /* @__PURE__ */ new Set();
    let p, b, x, N;
    ((o = t == null ? void 0 : t.constructor) == null ? void 0 : o.name) === "Stock" && (t != null && t.trimmed) || ((a = t == null ? void 0 : t.constructor) == null ? void 0 : a.name) === "Segment" ? (p = t.x, b = t.y, x = t.x + t.l, N = t.y + t.w) : (p = t.x + ((l = t == null ? void 0 : t.trim) == null ? void 0 : l.x1), b = t.y + ((h = t == null ? void 0 : t.trim) == null ? void 0 : h.y1), x = t.x + t.l - ((c = t == null ? void 0 : t.trim) == null ? void 0 : c.x2), N = t.y + t.w - ((d = t == null ? void 0 : t.trim) == null ? void 0 : d.y2));
    let v = i.toArray();
    for (let w = v.length; w--; ) {
      const k = v[w];
      (Ue.lessThan(k.x, p) || Ue.lessThan(k.y, b) || Ue.greaterThan(k.x, x) || Ue.greaterThan(k.y, N)) && v.splice(w, 1);
    }
    i.clear(), i.addPoints(v), g.clear(), v = i.toArray();
    for (let w = v.length; w--; ) {
      const k = v[w];
      for (let T = e.length; T--; ) {
        const D = e[T];
        if (k.collidesWith(D)) {
          i.deletePoint(k);
          break;
        }
      }
    }
  }
  return i;
}
function Cy(e, t, n) {
  let i = [];
  const r = e.getMinSpacing(n), s = t.corner, o = t.direction;
  if (t.type === "shape")
    switch (s) {
      case "topLeft":
        o === "rl" && (i.push(Xe("right", t, r, s, o)), i.push(Xe("topRight", t, r, s, o))), o === "bt" && (i.push(Xe("bottom", t, r, s, o)), i.push(Xe("bottomLeft", t, r, s, o)));
        break;
      case "topRight":
        o === "lr" && (i.push(Xe("left", t, r, s, o)), i.push(Xe("topLeft", t, r, s, o))), o === "bt" && (i.push(Xe("bottom", t, r, s, o)), i.push(Xe("bottomRight", t, r, s, o)));
        break;
      case "bottomRight":
        o === "lr" && (i.push(Xe("left", t, r, s, o)), i.push(Xe("bottomLeft", t, r, s, o))), o === "tb" && (i.push(Xe("top", t, r, s, o)), i.push(Xe("topRight", t, r, s, o)));
        break;
      case "bottomLeft":
        o === "rl" && (i.push(Xe("right", t, r, s, o)), i.push(Xe("bottomRight", t, r, s, o))), o === "tb" && (i.push(Xe("top", t, r, s, o)), i.push(Xe("topLeft", t, r, s, o)));
        break;
    }
  else if (t.type === "edge")
    switch (o) {
      case "rl":
      case "lr":
        i.push(Xe("top", t, 0)), i.push(Xe("centre", t, 0)), i.push(Xe("bottom", t, 0));
        break;
      case "tb":
      case "bt":
        i.push(Xe("left", t, 0)), i.push(Xe("right", t, 0)), i.push(Xe("centre", t, 0));
        break;
    }
  if (i = i.filter((l) => l.x >= 0 && l.y >= 0), !i.length) return null;
  const a = new wo();
  for (const l of i)
    l.raycast = !0, a.addPoints(H0(e, l, n).toArray());
  return G0(e, n, a), a;
}
function Ty(e, t) {
  const n = new wo();
  return e.sort(z0), e.forEach((i) => {
    Cr(i) ? (n.addPoints(i.getCoords(t)), i.shapes.forEach((r) => {
      const s = r.getCoords(t);
      n.addPoints(s, "group");
    })) : n.addPoints(i.getCoords(t));
  }), n.points.forEach((i) => {
    i.stockID = t.getStock().id;
  }), n;
}
function Iy(e = [], t, n) {
  const i = Ty(
    e === null ? t : e,
    n
  );
  return Ly(
    t,
    n,
    i
  );
}
function z0(e, t) {
  return e.y === t.y ? t.x - e.x : t.y - e.y;
}
function U0(e, t, n, i, r, s) {
  e.a = t.id, e.b = n ? n.id : null, e.direction = i, e.raycast = !0, e.type = r, e.corner = s;
}
function Ey(e, t) {
  if (e.saw.cutType !== "efficiency" || t.length <= 1) return null;
  let n = new wo();
  const i = W0(t, e);
  for (const a of t)
    for (const l of i) {
      if (l.shape.id === a.id) continue;
      const h = Object.values(l.rays);
      for (const c of h)
        Oy(
          c,
          l.shape,
          a,
          n
        );
    }
  const s = e.saw.efficiencyOptions.primaryCompression === "x" ? "lr" : "tb", o = t.reduce((a, l) => (s === "tb" ? a.x + a.l > l.x + l.l : a.y + a.w > l.y + l.w) ? a : l);
  return i.filter(({ shape: a }) => a.id === o.id).forEach(({ shape: a, rays: l }) => {
    const h = Object.values(l);
    for (const c of h) {
      const d = new $n(c.x2, c.y2);
      s === c.direction && (U0(d, a, null, c.direction, "edge"), n.addPoint(d));
    }
  }), n = Fy(n), n;
}
function W0(e, t) {
  return e.map((n) => {
    const i = W2(n, t);
    return {
      shape: n,
      rays: i
    };
  });
}
function Oy(e, t, n, i) {
  switch (e.direction) {
    case "rl":
      pu(
        e,
        t,
        n,
        i,
        n.x + n.l
      );
      break;
    case "lr":
      pu(
        e,
        t,
        n,
        i,
        n.x
      );
      break;
    case "tb":
      pu(
        e,
        t,
        n,
        i,
        n.y + n.w
      );
      break;
    case "bt":
      pu(
        e,
        t,
        n,
        i,
        n.y
      );
      break;
  }
}
function pu(e, t, n, i, r) {
  const s = e.dimension === "w", o = s ? "y" : "x", a = s ? "x" : "y", l = s ? "l" : "w";
  if (e[`${a}1`] >= n[a] && e[`${a}1`] <= n[a] + n[l]) {
    const h = e.direction === "lr" && e[`${o}1`] <= r && e[`${o}2`] >= r, c = e.direction === "rl" && e[`${o}1`] >= r && e[`${o}2`] <= r, d = e.direction === "bt" && e[`${o}1`] <= r && e[`${o}2`] >= r, g = e.direction === "tb" && e[`${o}1`] >= r && e[`${o}2`] <= r;
    if (h || c || d || g) {
      const b = s ? e[`${a}1`] : r, x = s ? r : e[`${a}1`], N = new $n(b, x), v = e.origin;
      U0(N, t, n, e.direction, "shape", v), i.addPoint(N);
    }
  }
}
function Fy(e) {
  const t = new wo();
  return e.points.size === 0 || new Set(e.toArray().map((i) => i.a)).forEach((i) => {
    const r = e.toArray().filter((s) => s.a === i);
    ["right", "left", "top", "bottom"].forEach((s) => {
      const o = My(
        r,
        s
      );
      o && t.addPoint(o);
    });
  }), t;
}
function My(e, t) {
  return e.length === 0 ? null : e.reduce((n, i) => {
    switch (t) {
      case "left":
        return !n || i.x < n.x ? i : n;
      case "right":
        return !n || i.x > n.x ? i : n;
      case "top":
        return !n || i.y > n.y ? i : n;
      case "bottom":
        return !n || i.y < n.y ? i : n;
      default:
        return null;
    }
  }, null);
}
function H0(e, t, n) {
  const i = new wo(), r = t.getAvailableShapePositions(n);
  for (const s of r) {
    let o;
    switch (o = Ry(t, e, n), s) {
      case "bottomLeft":
        o = o.clone(o.x - e.l, o.y - e.w), o.shapePosition = "bottomLeft";
        break;
      case "bottomRight":
        o = o.clone(o.x, o.y - e.w), o.shapePosition = "bottomRight";
        break;
      case "topLeft":
        o = o.clone(o.x - e.l, o.y), o.shapePosition = "topLeft";
        break;
      case "topRight":
        o = o.clone(o.x, o.y), o.shapePosition = "topRight";
        break;
    }
    i.addPoint(o);
  }
  return G0(e, n, i), i;
}
function Ry(e, t, n) {
  if (n.saw.cutType !== "efficiency") return e;
  const i = t.getMinSpacing(n), r = n.getBladeWidth();
  if (!i || i === r) return e;
  let s;
  if (!e.grid) return e;
  switch (e.grid) {
    case "bottom":
      s = e.clone(e.x, e.y - i + r);
      break;
    case "top":
      s = e.clone(e.x, e.y + i - r);
      break;
    case "left":
      s = e.clone(e.x - i + r, e.y);
      break;
    case "right":
      s = e.clone(e.x + i - r, e.y);
      break;
  }
  return s ? (s.x < 0 && (s.x = 0), s.y < 0 && (s.y = 0), s.adjustedForMinSpacing = !0, s) : e;
}
function G0(e, t, n) {
  var l, h, c, d, g, p;
  let i, r, s, o;
  ((l = t == null ? void 0 : t.constructor) == null ? void 0 : l.name) === "Stock" && (t != null && t.trimmed) || ((h = t == null ? void 0 : t.constructor) == null ? void 0 : h.name) === "Segment" ? (i = 0, r = 0, s = t.x + t.l - e.l, o = t.y + t.w - e.w) : (i = (c = t == null ? void 0 : t.trim) == null ? void 0 : c.x1, r = (d = t == null ? void 0 : t.trim) == null ? void 0 : d.y1, s = t.l - ((g = t == null ? void 0 : t.trim) == null ? void 0 : g.x2) - e.l, o = t.w - ((p = t == null ? void 0 : t.trim) == null ? void 0 : p.y2) - e.w);
  const a = n.toArray();
  for (let b = a.length; b--; ) {
    const x = a[b];
    (Ue.lessThan(x.x, i) || Ue.lessThan(x.y, r) || Ue.greaterThan(x.x, s) || Ue.greaterThan(x.y, o) || x.x < 0 || x.y < 0) && n.deletePoint(x);
  }
}
/**
* @license Fraction.js v4.3.7 31/08/2023
* https://www.xarg.org/2014/03/rational-numbers-in-javascript/
*
* Copyright (c) 2023, Robert Eisele (robert@raw.org)
* Dual licensed under the MIT or GPL Version 2 licenses.
**/
var Dy = 2e3, se = {
  s: 1,
  n: 0,
  d: 1
};
function Xr(e, t) {
  if (isNaN(e = parseInt(e, 10)))
    throw Ru();
  return e * t;
}
function bn(e, t) {
  if (t === 0)
    throw fd();
  var n = Object.create(_s.prototype);
  n.s = e < 0 ? -1 : 1, e = e < 0 ? -e : e;
  var i = ra(e, t);
  return n.n = e / i, n.d = t / i, n;
}
function Cp(e) {
  for (var t = {}, n = e, i = 2, r = 4; r <= n; ) {
    for (; n % i === 0; )
      n /= i, t[i] = (t[i] || 0) + 1;
    r += 1 + 2 * i++;
  }
  return n !== e ? n > 1 && (t[n] = (t[n] || 0) + 1) : t[e] = (t[e] || 0) + 1, t;
}
var Mi = function(e, t) {
  var n = 0, i = 1, r = 1, s = 0, o = 0, a = 0, l = 1, h = 1, c = 0, d = 1, g = 1, p = 1, b = 1e7, x;
  if (e != null) if (t !== void 0) {
    if (n = e, i = t, r = n * i, n % 1 !== 0 || i % 1 !== 0)
      throw $y();
  } else
    switch (typeof e) {
      case "object": {
        if ("d" in e && "n" in e)
          n = e.n, i = e.d, "s" in e && (n *= e.s);
        else if (0 in e)
          n = e[0], 1 in e && (i = e[1]);
        else
          throw Ru();
        r = n * i;
        break;
      }
      case "number": {
        if (e < 0 && (r = e, e = -e), e % 1 === 0)
          n = e;
        else if (e > 0) {
          for (e >= 1 && (h = Math.pow(10, Math.floor(1 + Math.log(e) / Math.LN10)), e /= h); d <= b && p <= b; )
            if (x = (c + g) / (d + p), e === x) {
              d + p <= b ? (n = c + g, i = d + p) : p > d ? (n = g, i = p) : (n = c, i = d);
              break;
            } else
              e > x ? (c += g, d += p) : (g += c, p += d), d > b ? (n = g, i = p) : (n = c, i = d);
          n *= h;
        } else (isNaN(e) || isNaN(t)) && (i = n = NaN);
        break;
      }
      case "string": {
        if (d = e.match(/\d+|./g), d === null)
          throw Ru();
        if (d[c] === "-" ? (r = -1, c++) : d[c] === "+" && c++, d.length === c + 1 ? o = Xr(d[c++], r) : d[c + 1] === "." || d[c] === "." ? (d[c] !== "." && (s = Xr(d[c++], r)), c++, (c + 1 === d.length || d[c + 1] === "(" && d[c + 3] === ")" || d[c + 1] === "'" && d[c + 3] === "'") && (o = Xr(d[c], r), l = Math.pow(10, d[c].length), c++), (d[c] === "(" && d[c + 2] === ")" || d[c] === "'" && d[c + 2] === "'") && (a = Xr(d[c + 1], r), h = Math.pow(10, d[c + 1].length) - 1, c += 3)) : d[c + 1] === "/" || d[c + 1] === ":" ? (o = Xr(d[c], r), l = Xr(d[c + 2], 1), c += 3) : d[c + 3] === "/" && d[c + 1] === " " && (s = Xr(d[c], r), o = Xr(d[c + 2], r), l = Xr(d[c + 4], 1), c += 5), d.length <= c) {
          i = l * h, r = /* void */
          n = a + i * s + h * o;
          break;
        }
      }
      default:
        throw Ru();
    }
  if (i === 0)
    throw fd();
  se.s = r < 0 ? -1 : 1, se.n = Math.abs(n), se.d = Math.abs(i);
};
function jy(e, t, n) {
  for (var i = 1; t > 0; e = e * e % n, t >>= 1)
    t & 1 && (i = i * e % n);
  return i;
}
function By(e, t) {
  for (; t % 2 === 0; t /= 2)
    ;
  for (; t % 5 === 0; t /= 5)
    ;
  if (t === 1)
    return 0;
  for (var n = 10 % t, i = 1; n !== 1; i++)
    if (n = n * 10 % t, i > Dy)
      return 0;
  return i;
}
function qy(e, t, n) {
  for (var i = 1, r = jy(10, n, t), s = 0; s < 300; s++) {
    if (i === r)
      return s;
    i = i * 10 % t, r = r * 10 % t;
  }
  return 0;
}
function ra(e, t) {
  if (!e)
    return t;
  if (!t)
    return e;
  for (; ; ) {
    if (e %= t, !e)
      return t;
    if (t %= e, !t)
      return e;
  }
}
function _s(e, t) {
  if (Mi(e, t), this instanceof _s)
    e = ra(se.d, se.n), this.s = se.s, this.n = se.n / e, this.d = se.d / e;
  else
    return bn(se.s * se.n, se.d);
}
var fd = function() {
  return new Error("Division by Zero");
}, Ru = function() {
  return new Error("Invalid argument");
}, $y = function() {
  return new Error("Parameters must be integer");
};
_s.prototype = {
  s: 1,
  n: 0,
  d: 1,
  /**
   * Calculates the absolute value
   *
   * Ex: new Fraction(-4).abs() => 4
   **/
  abs: function() {
    return bn(this.n, this.d);
  },
  /**
   * Inverts the sign of the current fraction
   *
   * Ex: new Fraction(-4).neg() => 4
   **/
  neg: function() {
    return bn(-this.s * this.n, this.d);
  },
  /**
   * Adds two rational numbers
   *
   * Ex: new Fraction({n: 2, d: 3}).add("14.9") => 467 / 30
   **/
  add: function(e, t) {
    return Mi(e, t), bn(
      this.s * this.n * se.d + se.s * this.d * se.n,
      this.d * se.d
    );
  },
  /**
   * Subtracts two rational numbers
   *
   * Ex: new Fraction({n: 2, d: 3}).add("14.9") => -427 / 30
   **/
  sub: function(e, t) {
    return Mi(e, t), bn(
      this.s * this.n * se.d - se.s * this.d * se.n,
      this.d * se.d
    );
  },
  /**
   * Multiplies two rational numbers
   *
   * Ex: new Fraction("-17.(345)").mul(3) => 5776 / 111
   **/
  mul: function(e, t) {
    return Mi(e, t), bn(
      this.s * se.s * this.n * se.n,
      this.d * se.d
    );
  },
  /**
   * Divides two rational numbers
   *
   * Ex: new Fraction("-17.(345)").inverse().div(3)
   **/
  div: function(e, t) {
    return Mi(e, t), bn(
      this.s * se.s * this.n * se.d,
      this.d * se.n
    );
  },
  /**
   * Clones the actual object
   *
   * Ex: new Fraction("-17.(345)").clone()
   **/
  clone: function() {
    return bn(this.s * this.n, this.d);
  },
  /**
   * Calculates the modulo of two rational numbers - a more precise fmod
   *
   * Ex: new Fraction('4.(3)').mod([7, 8]) => (13/3) % (7/8) = (5/6)
   **/
  mod: function(e, t) {
    if (isNaN(this.n) || isNaN(this.d))
      return new _s(NaN);
    if (e === void 0)
      return bn(this.s * this.n % this.d, 1);
    if (Mi(e, t), se.n === 0 && this.d === 0)
      throw fd();
    return bn(
      this.s * (se.d * this.n) % (se.n * this.d),
      se.d * this.d
    );
  },
  /**
   * Calculates the fractional gcd of two rational numbers
   *
   * Ex: new Fraction(5,8).gcd(3,7) => 1/56
   */
  gcd: function(e, t) {
    return Mi(e, t), bn(ra(se.n, this.n) * ra(se.d, this.d), se.d * this.d);
  },
  /**
   * Calculates the fractional lcm of two rational numbers
   *
   * Ex: new Fraction(5,8).lcm(3,7) => 15
   */
  lcm: function(e, t) {
    return Mi(e, t), se.n === 0 && this.n === 0 ? bn(0, 1) : bn(se.n * this.n, ra(se.n, this.n) * ra(se.d, this.d));
  },
  /**
   * Calculates the ceil of a rational number
   *
   * Ex: new Fraction('4.(3)').ceil() => (5 / 1)
   **/
  ceil: function(e) {
    return e = Math.pow(10, e || 0), isNaN(this.n) || isNaN(this.d) ? new _s(NaN) : bn(Math.ceil(e * this.s * this.n / this.d), e);
  },
  /**
   * Calculates the floor of a rational number
   *
   * Ex: new Fraction('4.(3)').floor() => (4 / 1)
   **/
  floor: function(e) {
    return e = Math.pow(10, e || 0), isNaN(this.n) || isNaN(this.d) ? new _s(NaN) : bn(Math.floor(e * this.s * this.n / this.d), e);
  },
  /**
   * Rounds a rational number
   *
   * Ex: new Fraction('4.(3)').round() => (4 / 1)
   **/
  round: function(e) {
    return e = Math.pow(10, e || 0), isNaN(this.n) || isNaN(this.d) ? new _s(NaN) : bn(Math.round(e * this.s * this.n / this.d), e);
  },
  /**
   * Rounds a rational number to a multiple of another rational number
   *
   * Ex: new Fraction('0.9').roundTo("1/8") => 7 / 8
   **/
  roundTo: function(e, t) {
    return Mi(e, t), bn(this.s * Math.round(this.n * se.d / (this.d * se.n)) * se.n, se.d);
  },
  /**
   * Gets the inverse of the fraction, means numerator and denominator are exchanged
   *
   * Ex: new Fraction([-3, 4]).inverse() => -4 / 3
   **/
  inverse: function() {
    return bn(this.s * this.d, this.n);
  },
  /**
   * Calculates the fraction to some rational exponent, if possible
   *
   * Ex: new Fraction(-1,2).pow(-3) => -8
   */
  pow: function(e, t) {
    if (Mi(e, t), se.d === 1)
      return se.s < 0 ? bn(Math.pow(this.s * this.d, se.n), Math.pow(this.n, se.n)) : bn(Math.pow(this.s * this.n, se.n), Math.pow(this.d, se.n));
    if (this.s < 0) return null;
    var n = Cp(this.n), i = Cp(this.d), r = 1, s = 1;
    for (var o in n)
      if (o !== "1") {
        if (o === "0") {
          r = 0;
          break;
        }
        if (n[o] *= se.n, n[o] % se.d === 0)
          n[o] /= se.d;
        else return null;
        r *= Math.pow(o, n[o]);
      }
    for (var o in i)
      if (o !== "1") {
        if (i[o] *= se.n, i[o] % se.d === 0)
          i[o] /= se.d;
        else return null;
        s *= Math.pow(o, i[o]);
      }
    return se.s < 0 ? bn(s, r) : bn(r, s);
  },
  /**
   * Check if two rational numbers are the same
   *
   * Ex: new Fraction(19.6).equals([98, 5]);
   **/
  equals: function(e, t) {
    return Mi(e, t), this.s * this.n * se.d === se.s * se.n * this.d;
  },
  /**
   * Check if two rational numbers are the same
   *
   * Ex: new Fraction(19.6).equals([98, 5]);
   **/
  compare: function(e, t) {
    Mi(e, t);
    var n = this.s * this.n * se.d - se.s * se.n * this.d;
    return (0 < n) - (n < 0);
  },
  simplify: function(e) {
    if (isNaN(this.n) || isNaN(this.d))
      return this;
    e = e || 1e-3;
    for (var t = this.abs(), n = t.toContinued(), i = 1; i < n.length; i++) {
      for (var r = bn(n[i - 1], 1), s = i - 2; s >= 0; s--)
        r = r.inverse().add(n[s]);
      if (Math.abs(r.sub(t).valueOf()) < e)
        return r.mul(this.s);
    }
    return this;
  },
  /**
   * Check if two rational numbers are divisible
   *
   * Ex: new Fraction(19.6).divisible(1.5);
   */
  divisible: function(e, t) {
    return Mi(e, t), !(!(se.n * this.d) || this.n * se.d % (se.n * this.d));
  },
  /**
   * Returns a decimal representation of the fraction
   *
   * Ex: new Fraction("100.'91823'").valueOf() => 100.91823918239183
   **/
  valueOf: function() {
    return this.s * this.n / this.d;
  },
  /**
   * Returns a string-fraction representation of a Fraction object
   *
   * Ex: new Fraction("1.'3'").toFraction(true) => "4 1/3"
   **/
  toFraction: function(e) {
    var t, n = "", i = this.n, r = this.d;
    return this.s < 0 && (n += "-"), r === 1 ? n += i : (e && (t = Math.floor(i / r)) > 0 && (n += t, n += " ", i %= r), n += i, n += "/", n += r), n;
  },
  /**
   * Returns a latex representation of a Fraction object
   *
   * Ex: new Fraction("1.'3'").toLatex() => "\frac{4}{3}"
   **/
  toLatex: function(e) {
    var t, n = "", i = this.n, r = this.d;
    return this.s < 0 && (n += "-"), r === 1 ? n += i : (e && (t = Math.floor(i / r)) > 0 && (n += t, i %= r), n += "\\frac{", n += i, n += "}{", n += r, n += "}"), n;
  },
  /**
   * Returns an array of continued fraction elements
   *
   * Ex: new Fraction("7/8").toContinued() => [0,1,7]
   */
  toContinued: function() {
    var e, t = this.n, n = this.d, i = [];
    if (isNaN(t) || isNaN(n))
      return i;
    do
      i.push(Math.floor(t / n)), e = t % n, t = n, n = e;
    while (t !== 1);
    return i;
  },
  /**
   * Creates a string representation of a fraction with all digits
   *
   * Ex: new Fraction("100.'91823'").toString() => "100.(91823)"
   **/
  toString: function(e) {
    var t = this.n, n = this.d;
    if (isNaN(t) || isNaN(n))
      return "NaN";
    e = e || 15;
    var i = By(t, n), r = qy(t, n, i), s = this.s < 0 ? "-" : "";
    if (s += t / n | 0, t %= n, t *= 10, t && (s += "."), i) {
      for (var o = r; o--; )
        s += t / n | 0, t %= n, t *= 10;
      s += "(";
      for (var o = i; o--; )
        s += t / n | 0, t %= n, t *= 10;
      s += ")";
    } else
      for (var o = e; t && o--; )
        s += t / n | 0, t %= n, t *= 10;
    return s;
  }
};
function zy(e) {
  if (!e) return null;
  if (e = e.toString().trim(), typeof navigator > "u" || typeof navigator.language > "u")
    return parseFloat(e);
  const { thousandsSeparator: t, decimalSeparator: n } = Uy();
  return e = Array.from(e, (i) => i === t ? "" : i === n ? "." : i).join(""), parseFloat(e);
}
function Uy() {
  const e = navigator.language, t = 123456789e-2.toLocaleString(e), n = t.replace(/\d/g, ""), i = Array.from(new Set(n.split("")));
  let r = "", s = "";
  if (i.length === 1)
    s = i[0];
  else if (i.length === 2) {
    const o = t[t.length - 3];
    i.includes(o) ? (s = o, r = i.find((a) => a !== o)) : (s = i[1], r = i[0]);
  }
  return { thousandsSeparator: r, decimalSeparator: s };
}
function V0(e) {
  if (!e || typeof e == "number") return !1;
  e = e.toString().replace(/[^0-9/ ]/g, "");
  const t = /\b\d+\/\d+\b/g;
  return e.match(t);
}
function Wy(e, t = !1) {
  if (!Lt(e)) return null;
  if (e === 0) return "0";
  let n = e.toString().trim();
  if (!n) return null;
  if (V0(e))
    return n = n.replace(/[^0-9/,. -]/g, "").replace(/  +/g, " "), n;
  {
    n = n.replace(/[^0-9,. -]/g, ""), n.startsWith(".") && (n = "0" + n);
    let i;
    return t ? i = zy(n) : i = parseFloat(n), i ? i.toString() : null;
  }
}
function Xa(e) {
  let t;
  try {
    t = new _s(e);
  } catch {
    console.log(`issue parsing ${e} to new Fraction()`), t = 0;
  }
  return t;
}
function Yt(e, t = "decimal", n = !1, i = !1, r = 0) {
  if (!Lt(e) || !t) return null;
  if (t !== "decimal" && t !== "fraction")
    return console.error("incorrect conversion type specified for convertUnit"), null;
  try {
    const s = Wy(e, i);
    if (!s) return 0;
    let o;
    if (t === "fraction")
      if (V0(s))
        o = Xa(s);
      else {
        const a = parseFloat(s);
        Number.isInteger(a) ? o = Xa(s) : o = Xa(a);
      }
    else o = Xa(s);
    switch (t) {
      case "fraction":
        if (r > 0) {
          const a = o.valueOf(), l = Math.round(a * r) / r;
          o = Xa(l);
        }
        return o.toFraction(!0);
      case "decimal":
        if (n === !1 || typeof n != "number")
          return o.valueOf();
        {
          const a = o.valueOf();
          return a === 0 ? 0 : parseFloat(a.toFixed(n));
        }
      default:
        return 0;
    }
  } catch (s) {
    return console.error(s), 0;
  }
}
function Hy(e) {
  let t = e;
  return typeof e != "number" && (t = parseFloat(e)), t % 1 !== 0;
}
const si = {
  customData: (e, t = null) => {
    const n = [];
    return typeof e != "object" ? (n.push({ message: "Custom data must be an object." }), n) : (Object.entries(e).forEach(([i, r]) => {
      Lt(r) && (["string", "number", "boolean"].includes(typeof r) || n.push({
        message: `Custom data ${i} must be a string, number or boolean.`,
        index: t
      }));
    }), n);
  },
  banding: (e, t = null) => {
    const n = [];
    if (!Lt(e)) return [];
    if (typeof e != "object")
      return n.push({
        message: "Banding must be an object.",
        field: ["banding"],
        index: t
      }), n;
    Object.entries(e).forEach(([i, r]) => {
      Lt(r) && r !== !0 && r !== !1 && n.push({
        message: `Banding ${i} must be a boolean.`,
        field: ["banding"],
        index: t
      });
    });
  },
  //when trim provided as number
  partTrim(e, t, n = null) {
    t = Yt(t);
    const i = Yt(e.l), r = Yt(e.w), s = i - t * 2, o = r - t * 2;
    return s < 0 || o < 0 ? [
      {
        message: `When applying trim of ${t}, part is ${s} x ${o}.`,
        field: ["trim"],
        index: n
      }
    ] : [];
  },
  //when trim provided as object
  trim: (e, t = null) => {
    const n = [];
    if (!Lt(e.trim)) return n;
    if (mr.forEach((i) => {
      Lt(e.trim[i]) || (e.trim[i] = 0);
    }), !es(e) || es(e) && !(e != null && e.trimmed)) {
      const i = ["l", "w"], [r, s] = i.map((d) => Yt(e[d])), [o, a, l, h] = mr.map((d) => Yt(e.trim[d]));
      Object.entries({ x1: o, x2: a, y1: l, y2: h }).forEach(([d, g]) => {
        isNaN(g) && n.push({
          message: `The value of trim ${tf[d]} is not understood.`,
          field: ["trim"],
          index: t
        });
      }), r && s && r > 0 && s > 0 && (o + a >= e.l && n.push({
        message: `Trim W1 + W2 = ${o + a}, which is greater than or equal to total length of ${r}.`,
        field: ["trim"],
        subField: ["x1", "x2"],
        index: t
      }), l + h >= e.w && n.push({
        message: `Trim L1 + L2 = ${l + h}, which is greater than or equal to total width of ${s}.`,
        field: ["trim"],
        subField: ["y1", "y2"],
        index: t
      }));
    }
    return n;
  },
  x: (e, t = null) => {
    const n = [];
    return Lt(e) ? (e = Yt(e), isNaN(e) ? (n.push({ message: `X value is not understood, got ${e}`, index: t }), n) : (e < 0 && n.push({ message: `X must be greater than or equal to zero, got ${e}` }), n)) : n;
  },
  y: (e, t = null) => {
    const n = [];
    return Lt(e) && (e = Yt(e), isNaN(e) && n.push({ message: `Y value is not understood, got ${e}`, index: t }), e < 0 && n.push({ message: `Y must be greater than or equal to zero, got ${e}`, index: t })), n;
  },
  l: (e, t = null, n = 0) => {
    const i = [];
    return Lt(e) ? (e = Yt(e), isNaN(e) ? (i.push({
      message: `Length value is not understood, got ${e}`,
      field: ["l"],
      index: t
    }), i) : (e < n && i.push({
      message: `Length must be greater than or equal to ${n}, got ${e}`,
      field: ["l"],
      index: t
    }), i)) : (i.push({
      message: "Length is required.",
      field: ["l"],
      index: t
    }), i);
  },
  w: (e, t = null, n = 0) => {
    const i = [];
    return Lt(e) ? (e = Yt(e), isNaN(e) ? (i.push({
      message: `Width value is not understood, got ${e}`,
      field: ["w"],
      index: t
    }), i) : (e < n && i.push({
      message: `Width must be greater than or equal to ${n}, got ${e}`,
      field: ["w"],
      index: t
    }), i)) : (i.push({
      message: "Width is required.",
      field: ["w"],
      index: t
    }), i);
  },
  t: (e, t = null) => {
    const n = [];
    return !Lt(e) || e === "" ? n : (e = Yt(e), isNaN(e) ? (n.push({
      message: `Thickness value is not understood, got ${e}`,
      field: ["t"],
      index: t
    }), n) : (e && e <= 0 && n.push({
      message: `Thickness must be greater than zero, got ${e}`,
      field: ["t"],
      index: t
    }), n));
  },
  q: (e, t = null, n = null) => {
    const i = [];
    return Lt(e) ? (e = parseInt(e), isNaN(e) ? (i.push({
      message: `Quantity value is not understood, got ${e}`,
      field: ["q"],
      index: n
    }), i) : (Hy(e) && i.push({
      message: "Quantity should be an integer.",
      field: ["q"],
      index: n
    }), e <= 0 && (t || i.push({
      message: `Quantity should be greater than or equal to zero, got ${e}`,
      field: ["q"],
      index: n
    })), i)) : (i.push({
      message: "Quantity should be set.",
      field: ["q"],
      index: n
    }), i);
  },
  orientationLock: (e, t = null) => {
    const n = [];
    return Lt(e) && (e = e.toLowerCase(), e !== "l" && e !== "w" && n.push({
      message: `Orientation lock must be l or w, got ${e}`,
      field: ["orientationLock"],
      index: t
    })), n;
  },
  grain: (e, t = null) => {
    const n = [];
    return Lt(e) && (e = e.toLowerCase(), e !== "l" && e !== "w" && n.push({
      message: `Grain must be l or w, got ${e}`,
      index: t
    })), n;
  },
  stockMatch: (e, t, n, i = 0, r = null) => {
    if (!e.q) return [];
    if (e.applyPartTrim(i), e.issues.length) return [];
    const s = Bb([e], t, n);
    if (!s) return [];
    const o = [];
    if (s.unusableShapes.length) {
      const a = s.unusableShapes[0], l = a.stockMatch;
      if (!l.fit) {
        const h = a.getTrimmedDimensions();
        o.push({
          message: `${h.l.toFixed(0)}x${h.w.toFixed(0)} will not fit on any stock - check trim, dimensions & orientation lock.`,
          field: ["l", "w"],
          index: r
        });
      }
      l.material || o.push({
        message: "No matching stock material found.",
        field: ["material"],
        index: r
      }), l.thickness || o.push({
        message: "No matching stock thickness found.",
        field: ["t"],
        index: r
      }), !l.width && n === "linear" && o.push({
        message: "No matching stock width found - required for linear calculations.",
        field: ["w"],
        index: r
      });
    }
    return o;
  },
  machining: (e, t = null) => {
    e.machining.validateEverything(e, t);
  }
};
function Zh(e) {
  let t, n;
  switch (e) {
    case "l":
    case "length":
      t = "guillotine", n = "l";
      break;
    case "w":
    case "width":
      t = "guillotine", n = "w";
      break;
    case "flex":
      t = "guillotine", n = "flex";
      break;
    case "efficiency":
      t = "efficiency", n = "none";
      break;
    case "beam":
      t = "beam", n = "l";
      break;
    default:
      t = null, n = null;
      break;
  }
  return {
    cutPreference: n,
    cutType: t
  };
}
var Y0 = typeof global == "object" && global && global.Object === Object && global, Gy = typeof self == "object" && self && self.Object === Object && self, dd = Y0 || Gy || Function("return this")(), Qu = dd.Symbol, K0 = Object.prototype, Vy = K0.hasOwnProperty, Yy = K0.toString, Za = Qu ? Qu.toStringTag : void 0;
function Ky(e) {
  var t = Vy.call(e, Za), n = e[Za];
  try {
    e[Za] = void 0;
    var i = !0;
  } catch {
  }
  var r = Yy.call(e);
  return i && (t ? e[Za] = n : delete e[Za]), r;
}
var Jy = Object.prototype, Xy = Jy.toString;
function Zy(e) {
  return Xy.call(e);
}
var Qy = "[object Null]", t5 = "[object Undefined]", Tp = Qu ? Qu.toStringTag : void 0;
function pd(e) {
  return e == null ? e === void 0 ? t5 : Qy : Tp && Tp in Object(e) ? Ky(e) : Zy(e);
}
function gd(e) {
  return e != null && typeof e == "object";
}
var e5 = Array.isArray;
function Lc(e) {
  var t = typeof e;
  return e != null && (t == "object" || t == "function");
}
function J0(e) {
  return e;
}
var n5 = "[object AsyncFunction]", i5 = "[object Function]", r5 = "[object GeneratorFunction]", s5 = "[object Proxy]";
function X0(e) {
  if (!Lc(e))
    return !1;
  var t = pd(e);
  return t == i5 || t == r5 || t == n5 || t == s5;
}
var mh = dd["__core-js_shared__"], Ip = function() {
  var e = /[^.]+$/.exec(mh && mh.keys && mh.keys.IE_PROTO || "");
  return e ? "Symbol(src)_1." + e : "";
}();
function o5(e) {
  return !!Ip && Ip in e;
}
var a5 = Function.prototype, l5 = a5.toString;
function u5(e) {
  if (e != null) {
    try {
      return l5.call(e);
    } catch {
    }
    try {
      return e + "";
    } catch {
    }
  }
  return "";
}
var c5 = /[\\^$.*+?()[\]{}|]/g, h5 = /^\[object .+?Constructor\]$/, f5 = Function.prototype, d5 = Object.prototype, p5 = f5.toString, g5 = d5.hasOwnProperty, m5 = RegExp(
  "^" + p5.call(g5).replace(c5, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"
);
function y5(e) {
  if (!Lc(e) || o5(e))
    return !1;
  var t = X0(e) ? m5 : h5;
  return t.test(u5(e));
}
function b5(e, t) {
  return e == null ? void 0 : e[t];
}
function v5(e, t) {
  var n = b5(e, t);
  return y5(n) ? n : void 0;
}
function w5(e, t, n) {
  switch (n.length) {
    case 0:
      return e.call(t);
    case 1:
      return e.call(t, n[0]);
    case 2:
      return e.call(t, n[0], n[1]);
    case 3:
      return e.call(t, n[0], n[1], n[2]);
  }
  return e.apply(t, n);
}
var x5 = 800, S5 = 16, A5 = Date.now;
function k5(e) {
  var t = 0, n = 0;
  return function() {
    var i = A5(), r = S5 - (i - n);
    if (n = i, r > 0) {
      if (++t >= x5)
        return arguments[0];
    } else
      t = 0;
    return e.apply(void 0, arguments);
  };
}
function _5(e) {
  return function() {
    return e;
  };
}
var Ep = function() {
  try {
    var e = v5(Object, "defineProperty");
    return e({}, "", {}), e;
  } catch {
  }
}(), N5 = Ep ? function(e, t) {
  return Ep(e, "toString", {
    configurable: !0,
    enumerable: !1,
    value: _5(t),
    writable: !0
  });
} : J0, P5 = k5(N5), L5 = 9007199254740991, C5 = /^(?:0|[1-9]\d*)$/;
function Z0(e, t) {
  var n = typeof e;
  return t = t ?? L5, !!t && (n == "number" || n != "symbol" && C5.test(e)) && e > -1 && e % 1 == 0 && e < t;
}
function Q0(e, t) {
  return e === t || e !== e && t !== t;
}
var Op = Math.max;
function T5(e, t, n) {
  return t = Op(t === void 0 ? e.length - 1 : t, 0), function() {
    for (var i = arguments, r = -1, s = Op(i.length - t, 0), o = Array(s); ++r < s; )
      o[r] = i[t + r];
    r = -1;
    for (var a = Array(t + 1); ++r < t; )
      a[r] = i[r];
    return a[t] = n(o), w5(e, this, a);
  };
}
function I5(e, t) {
  return P5(T5(e, t, J0), e + "");
}
var E5 = 9007199254740991;
function t1(e) {
  return typeof e == "number" && e > -1 && e % 1 == 0 && e <= E5;
}
function e1(e) {
  return e != null && t1(e.length) && !X0(e);
}
function O5(e, t, n) {
  if (!Lc(n))
    return !1;
  var i = typeof t;
  return (i == "number" ? e1(n) && Z0(t, n.length) : i == "string" && t in n) ? Q0(n[t], e) : !1;
}
var F5 = Object.prototype;
function M5(e) {
  var t = e && e.constructor, n = typeof t == "function" && t.prototype || F5;
  return e === n;
}
function R5(e, t) {
  for (var n = -1, i = Array(e); ++n < e; )
    i[n] = t(n);
  return i;
}
var D5 = "[object Arguments]";
function Fp(e) {
  return gd(e) && pd(e) == D5;
}
var n1 = Object.prototype, j5 = n1.hasOwnProperty, B5 = n1.propertyIsEnumerable, q5 = Fp(/* @__PURE__ */ function() {
  return arguments;
}()) ? Fp : function(e) {
  return gd(e) && j5.call(e, "callee") && !B5.call(e, "callee");
};
function $5() {
  return !1;
}
var i1 = typeof exports == "object" && exports && !exports.nodeType && exports, Mp = i1 && typeof module == "object" && module && !module.nodeType && module, z5 = Mp && Mp.exports === i1, Rp = z5 ? dd.Buffer : void 0, U5 = Rp ? Rp.isBuffer : void 0, W5 = U5 || $5, H5 = "[object Arguments]", G5 = "[object Array]", V5 = "[object Boolean]", Y5 = "[object Date]", K5 = "[object Error]", J5 = "[object Function]", X5 = "[object Map]", Z5 = "[object Number]", Q5 = "[object Object]", tb = "[object RegExp]", eb = "[object Set]", nb = "[object String]", ib = "[object WeakMap]", rb = "[object ArrayBuffer]", sb = "[object DataView]", ob = "[object Float32Array]", ab = "[object Float64Array]", lb = "[object Int8Array]", ub = "[object Int16Array]", cb = "[object Int32Array]", hb = "[object Uint8Array]", fb = "[object Uint8ClampedArray]", db = "[object Uint16Array]", pb = "[object Uint32Array]", dn = {};
dn[ob] = dn[ab] = dn[lb] = dn[ub] = dn[cb] = dn[hb] = dn[fb] = dn[db] = dn[pb] = !0;
dn[H5] = dn[G5] = dn[rb] = dn[V5] = dn[sb] = dn[Y5] = dn[K5] = dn[J5] = dn[X5] = dn[Z5] = dn[Q5] = dn[tb] = dn[eb] = dn[nb] = dn[ib] = !1;
function gb(e) {
  return gd(e) && t1(e.length) && !!dn[pd(e)];
}
function mb(e) {
  return function(t) {
    return e(t);
  };
}
var r1 = typeof exports == "object" && exports && !exports.nodeType && exports, ul = r1 && typeof module == "object" && module && !module.nodeType && module, yb = ul && ul.exports === r1, yh = yb && Y0.process, Dp = function() {
  try {
    var e = ul && ul.require && ul.require("util").types;
    return e || yh && yh.binding && yh.binding("util");
  } catch {
  }
}(), jp = Dp && Dp.isTypedArray, bb = jp ? mb(jp) : gb;
function vb(e, t) {
  var n = e5(e), i = !n && q5(e), r = !n && !i && W5(e), s = !n && !i && !r && bb(e), o = n || i || r || s, a = o ? R5(e.length, String) : [], l = a.length;
  for (var h in e)
    o && // Safari 9 has enumerable `arguments.length` in strict mode.
    (h == "length" || // Node.js 0.10 has enumerable non-index properties on buffers.
    r && (h == "offset" || h == "parent") || // PhantomJS 2 has enumerable non-index properties on typed arrays.
    s && (h == "buffer" || h == "byteLength" || h == "byteOffset") || // Skip index properties.
    Z0(h, l)) || a.push(h);
  return a;
}
function wb(e) {
  var t = [];
  if (e != null)
    for (var n in Object(e))
      t.push(n);
  return t;
}
var xb = Object.prototype, Sb = xb.hasOwnProperty;
function Ab(e) {
  if (!Lc(e))
    return wb(e);
  var t = M5(e), n = [];
  for (var i in e)
    i == "constructor" && (t || !Sb.call(e, i)) || n.push(i);
  return n;
}
function kb(e) {
  return e1(e) ? vb(e) : Ab(e);
}
var s1 = Object.prototype, _b = s1.hasOwnProperty, rl = I5(function(e, t) {
  e = Object(e);
  var n = -1, i = t.length, r = i > 2 ? t[2] : void 0;
  for (r && O5(t[0], t[1], r) && (i = 1); ++n < i; )
    for (var s = t[n], o = kb(s), a = -1, l = o.length; ++a < l; ) {
      var h = o[a], c = e[h];
      (c === void 0 || Q0(c, s1[h]) && !_b.call(e, h)) && (e[h] = s[h]);
    }
  return e;
});
function Nb(e, t, n) {
  if (!Nl.includes(t) || !e.machining.corners) return 0;
  const i = o1(e, t);
  return n * i;
}
function o1(e, t) {
  if (!Nl.includes(t) || !e.machining.corners) return 0;
  const n = e.machining.corners.find((r) => r.getCorner() === t);
  return n ? n.getLength() : 0;
}
function a1(e, t, n, i) {
  Object.keys(t).forEach((r) => {
    var s, o;
    r in e && ((s = t[r]) != null && s.min && Yt(e[r]) < Yt(t[r].min) ? n.push({
      index: i,
      message: `${r.charAt(0).toUpperCase() + r.slice(1)} cannot be less than ${t[r].min}.`,
      fields: [r]
    }) : (o = t[r]) != null && o.max && Yt(e[r]) > Yt(t[r].max) && n.push({
      index: i,
      message: `${r.charAt(0).toUpperCase() + r.slice(1)} cannot be greater than ${t[r].max}.`,
      fields: [r]
    }));
  });
}
class Qh {
  constructor({ x: t, y: n, diameter: i, depth: r = 0, face: s = 0, type: o = null }) {
    H(this, "x");
    H(this, "y");
    H(this, "diameter");
    H(this, "depth");
    H(this, "face");
    H(this, "valid");
    H(this, "type");
    this.x = t, this.y = n, this.diameter = i, this.depth = r, this.face = s, this.type = o;
  }
  getFace() {
    return pr[this.face];
  }
  getXDrawPosition(t) {
    let n = 0;
    const i = Yt(this.x);
    return t.rot ? n = t.l - Yt(this.y) + ("x" in t ? Yt(t.x) : 0) : n = i + ("x" in t ? Yt(t.x) : 0), n;
  }
  getYDrawPosition(t, n, i) {
    let r = t.rot ? Yt(this.x) : Yt(this.y);
    return r += "y" in t ? Yt(t.y) : 0, n === 1 && (i ? r = Yt(i.w) - r : r = Yt(t.w) - r), r;
  }
  shouldShow(t, n) {
    return this.face === n || this.isThroughShape(t) === !0;
  }
  isThroughShape(t) {
    return !this.depth || Yt(this.depth) >= Yt(t.t);
  }
  getDistanceToEdge(t) {
    const n = this.x, i = this.y, r = this.diameter / 2, s = Yt(t.getLongSide()), o = Yt(t.getShortSide()), a = t.machining.corners.map((b) => b.type ? b.size : 0), l = [
      {
        edge: "left",
        distance: n - r
      },
      {
        edge: "right",
        distance: s - n - r
      },
      {
        edge: "bottom",
        distance: o - i - r
      },
      {
        edge: "top",
        distance: i - r
      }
    ], h = t.machining.corners.map((b, x) => {
      const N = x === 0 || x === 3, v = x < 2, w = N ? n : s - n;
      let k = null;
      this.face === 0 ? k = v ? i : o - i : this.face === 1 && (k = v ? o - i : i);
      const T = Math.sqrt(w * w + k * k);
      return {
        c: b,
        distance: T
      };
    }), c = Math.min(...l.map((b) => b.distance)), d = Math.min(...h.map((b) => b.distance)), g = h.findIndex((b) => b.distance === d), p = t.machining.corners[g];
    if (p && p.type === "radius") {
      let b = g === 0 || g === 3 ? 0 : s, x = g < 2 ? 0 : o;
      const N = g < 2;
      b += g === 0 || g === 3 ? a[g] : -a[g], x += N ? a[g] : -a[g];
      const w = n - b, k = g < 2;
      let T;
      this.face === 0 ? T = k ? i : o - i : this.face === 1 && (T = k ? o - i : i);
      const D = T - x, G = Math.sqrt(w * w + D * D), R = a[g] - G - r;
      let O = !1;
      return p.index === 0 ? O = n <= b && T <= x : p.index === 1 ? O = n >= b && T <= x : p.index === 2 ? O = n >= b && T >= x : p.index === 3 && (O = n <= b && T >= x), O && R < c ? R : c;
    } else if (p && p.type === "bevel") {
      let b, x, N;
      p.index === 0 ? (b = 1, x = 1, N = -p.size) : p.index === 1 ? (b = 1, x = -1, N = -s + p.size) : p.index === 2 ? (b = 1, x = 1, N = -s - o + p.size) : p.index === 3 && (b = -1, x = 1, N = -o + p.size);
      const v = p.index === 0 ? 1 : -1, w = (b * n + x * i + N) / Math.sqrt(b * b + x * x) * v - r;
      return w < c ? w : c;
    } else
      return c;
  }
  validate(t, n, i = null) {
    const r = [];
    if (!Lt(this.x) || !Lt(this.y) || !Lt(this.diameter)) {
      const o = {
        index: n,
        message: "X, Y & diameter are all required.",
        fields: []
      };
      this.x || o.fields.push("x"), this.y || o.fields.push("y"), this.diameter || o.fields.push("diameter"), r.push(o);
    }
    return Yt(this.diameter) <= 0 && r.push({
      index: n,
      message: "Diameter cannot be negative or zero.",
      fields: ["diameter"]
    }), Yt(this.depth) < 0 && r.push({
      index: n,
      message: "Depth cannot be negative.",
      fields: ["depth"]
    }), "t" in t && Yt(t.t) > 0 && Yt(this.depth) > Yt(t.t) && r.push({
      index: n,
      message: "Depth cannot be greater than part thickness.",
      fields: ["depth"]
    }), (!("t" in t) || !t.t) && Yt(this.depth) > 0 && r.push({
      index: n,
      message: "Part thickness is not defined.",
      fields: ["depth"]
    }), this.getDistanceToEdge(t) < 0 && r.push({
      index: n,
      message: "Outside of part."
    }), i && a1(this, i, r, n), r.length ? this.valid = !1 : this.valid = !0, r;
  }
}
class Bp {
  constructor({
    position: t = null,
    //from left or bottom
    edge: n = "x1",
    face: i = 0,
    numHoles: r = null,
    diameter: s = 0,
    depth: o = 0,
    distanceFromEdge: a = 0,
    outerSpacing: l = 0,
    hingeLength: h = 0,
    minimumHoleDistance: c = 0,
    positionLimit: d = 0
  }, g) {
    H(this, "position");
    H(this, "edge");
    H(this, "face");
    H(this, "numHoles");
    H(this, "holes", []);
    H(this, "diameter");
    H(this, "depth");
    H(this, "distanceFromEdge");
    //from edge to center of hole
    H(this, "outerSpacing");
    //from edge to center of hole
    H(this, "hingeLength");
    H(this, "minimumHoleDistance");
    H(this, "positionLimit");
    H(this, "valid");
    this.position = t, this.edge = n, this.face = i, this.numHoles = r, this.diameter = s, this.depth = o, this.distanceFromEdge = a, this.outerSpacing = l, this.hingeLength = h, this.minimumHoleDistance = c, this.positionLimit = d, g && this.createHoles(g);
  }
  getFace() {
    return pr[this.face];
  }
  getHoleSpacing() {
    const t = Yt(this.hingeLength) - Yt(this.outerSpacing) * 2, n = this.numHoles - 1;
    return t / n;
  }
  getHoleXPosition(t, n) {
    let i = 0;
    const r = this.getHoleSpacing();
    switch (this.edge) {
      case "x1":
        i = this.distanceFromEdge;
        break;
      case "x2":
        i = t.getLongSide() - Yt(this.distanceFromEdge);
        break;
      case "y1":
      case "y2":
        i = Yt(this.position) + Yt(this.outerSpacing) + r * n;
        break;
    }
    return i;
  }
  getHoleYPosition(t, n) {
    let i = 0;
    const r = this.getHoleSpacing();
    switch (this.edge) {
      case "x1":
      case "x2":
        i = Yt(this.position) + Yt(this.outerSpacing) + r * n;
        break;
      case "y1":
        i = Yt(this.distanceFromEdge);
        break;
      case "y2":
        i = t.getShortSide() - Yt(this.distanceFromEdge);
        break;
    }
    return i;
  }
  createHoles(t) {
    this.holes = [];
    for (let n = 0; n < this.numHoles; n++) {
      const i = new Qh({
        x: this.getHoleXPosition(t, n),
        y: this.getHoleYPosition(t, n),
        diameter: this.diameter,
        depth: this.depth,
        face: this.face,
        type: "hinge"
      });
      this.holes.push(i);
    }
    return this.holes;
  }
  validate(t, n, i = null) {
    const r = [];
    return this.holes.forEach((s, o) => {
      const a = s.validate(t, o).map((l) => (l.index = n, l.message = `Hole ${o + 1}: ${l.message}`, l));
      r.push(...a);
    }), i && a1(this, i, r, n), r.length ? this.valid = !1 : this.valid = !0, r;
  }
}
class qp {
  constructor({ type: t = "radius", size: n, index: i }) {
    H(this, "type");
    H(this, "size");
    H(this, "index");
    H(this, "valid");
    this.type = t, this.size = n, this.index = i;
  }
  getLength() {
    return this.type === "radius" ? Math.PI * this.size / 2 : this.type === "bevel" ? Math.sqrt(2) * this.size : 0;
  }
  getCorner() {
    return ["a", "b", "c", "d"][this.index];
  }
  isPresent() {
    return (this.valid === !0 || this.valid === void 0) && this.type !== null && this.size > 0;
  }
  validate(t, n) {
    const i = t.getShortSide(), r = [];
    if (this.type === null) {
      this.size = null;
      const s = this.getCorner();
      t.banding[s] = !1;
    }
    return this.type && Yt(this.size) <= 0 && r.push({
      index: n,
      message: "Corner size cannot be zero or negative"
    }), this.type && Yt(this.size) > i / 2 && (this.size = i / 2), r.length ? this.valid = !1 : this.valid = !0, r;
  }
}
class l1 {
  //shelfHoles?: ShelfHoles[] = [];
  constructor({
    holes: t = [],
    hingeHoles: n = [],
    corners: i = []
  } = {}) {
    H(this, "holes", []);
    H(this, "corners", []);
    H(this, "hingeHoles", []);
    i && i.length === 4 ? this.corners = i.map((r) => new qp(r)) : [0, 1, 2, 3].forEach((r) => {
      this.corners.push(new qp({
        type: null,
        size: null,
        index: r
      }));
    }), t && (this.holes = t.map((r) => new Qh(r))), n && (this.hingeHoles = n.map((r) => new Bp(r)));
  }
  validateEverything(t, n = null) {
    const i = this.validate(t, "holes"), r = this.validate(t, "hingeHoles"), s = this.validate(t, "corners");
    t.issues.push(...i.map((o) => yr(t) ? { message: `Part ${t.id} hole issue: ${o.message}`, index: n } : { message: `Hole issue: ${o.message}`, index: n })), t.issues.push(...r.map((o) => yr(t) ? { message: `Part ${t.id} hinge hole issue: ${o.message}`, index: n } : { message: `Hinge hole issue: ${o.message}`, index: n })), t.issues.push(...s.map((o) => yr(t) ? { message: `Part ${t.id} corner issue: ${o.message}`, index: n } : { message: `Corner issue: ${o.message}`, index: n }));
  }
  validate(t, n, i = null) {
    if (!t) return [];
    if (!n) return [];
    const r = [];
    return r.push(...this.validateAll(t, n, i)), r;
  }
  validateAll(t, n, i = null) {
    if (!t) return [];
    const r = [];
    return this[n].forEach((s, o) => r.push(...s.validate(t, o, i))), r;
  }
  createHole(t, n, i, r = 0, s = 0) {
    const o = new Qh({
      x: t,
      y: n,
      diameter: i,
      depth: r,
      face: s
    });
    return this.holes.push(o), o;
  }
  createHingeHoles({
    numHoles: t,
    position: n,
    diameter: i,
    depth: r = 0,
    edge: s = "x1",
    face: o = 0,
    distanceFromEdge: a = 0,
    outerSpacing: l = 0,
    minimumHoleDistance: h = 0,
    hingeLength: c = 0
  }) {
    const d = new Bp({
      numHoles: t,
      position: n,
      //from left or bottom
      edge: s,
      face: o,
      diameter: i,
      depth: r,
      distanceFromEdge: a,
      outerSpacing: l,
      minimumHoleDistance: h,
      hingeLength: c
    });
    return this.hingeHoles.push(d), d;
  }
  updateHingeHoles(t) {
    this.hingeHoles.forEach((n) => n.createHoles(t));
  }
  getAllHingeHoles(t) {
    const n = [];
    return this.hingeHoles.forEach((i) => {
      i.holes.length ? n.push(...i.holes) : (i.createHoles(t), n.push(...i.holes));
    }), n;
  }
  getNumHoles() {
    return this.holes.length + this.hingeHoles.reduce(
      (t, n) => t + n.numHoles,
      0
    );
  }
  getNumCorners() {
    return this.corners.filter((t) => t.type !== null).length;
  }
}
function u1(e) {
  var t, n, i, r, s, o, a, l;
  return !e || !(e != null && e.machining) ? !1 : (n = (t = e.machining) == null ? void 0 : t.holes) != null && n.length || (r = (i = e.machining) == null ? void 0 : i.hingeHoles) != null && r.length ? !0 : (o = (s = e.machining) == null ? void 0 : s.corners) != null && o.length ? (l = (a = e.machining) == null ? void 0 : a.corners) == null ? void 0 : l.some((h) => h.type && h.size) : !1;
}
function Pb(e) {
  var t, n, i, r;
  if ("machining" in e) {
    if (!u1(e)) {
      e.machining = null;
      return;
    }
    (t = e.machining.holes) != null && t.length || (e.machining.holes = null), (n = e.machining.hingeHoles) != null && n.length || (e.machining.hingeHoles = null), (r = (i = e.machining) == null ? void 0 : i.corners) != null && r.some((s) => s.type && s.size) || (e.machining.corners = null);
  }
}
class Lb {
  constructor(t = null) {
    H(this, "id");
    //api
    H(this, "listId");
    H(this, "shapeListIds", []);
    H(this, "shapes");
    H(this, "direction");
    H(this, "q");
    H(this, "duplicate", !1);
    H(this, "issues", []);
    H(this, "stockMatch");
    var n;
    this.listId = t != null && t.listId ? t.listId : Date.now().toString() + Math.ceil(Math.random() * 1e16), this.id = t == null ? void 0 : t.id, this.shapes = Lt(t == null ? void 0 : t.shapes) ? t.shapes.map((i) => i.toString()) : [], this.shapeListIds = Lt(t == null ? void 0 : t.shapeListIds) ? t.shapeListIds : [], this.direction = Lt(t == null ? void 0 : t.direction) ? t.direction : "l", this.q = Lt(t == null ? void 0 : t.q) ? t.q : 1, Lt(t == null ? void 0 : t.shapeList) && ((n = t.shapeList) != null && n.length) && this.validate(t.shapeList);
  }
  validate(t = []) {
    var o, a;
    if (this.issues = [], !(t != null && t.length))
      throw new Error("shapeList is required to validate user group");
    const n = this.findShapes(t);
    if (!n.length)
      return this.issues.push({ message: "Must have 2 or more parts." }), this.issues;
    const i = n[0];
    if (yr(i)) {
      if (!(this != null && this.shapes) || ((o = this.shapes) == null ? void 0 : o.length) < 2)
        return this.issues.push({ message: "Must have 2 or more parts." }), this.issues;
    } else if (!(this != null && this.shapeListIds) || ((a = this.shapeListIds) == null ? void 0 : a.length) < 2)
      return this.issues.push({ message: "Must have 2 or more parts." }), this.issues;
    if (n.forEach((l, h) => {
      !l.isSquare() && !["l", "w"].includes(l.orientationLock) && this.issues.push({ message: `Part in position ${h + 1} must have orientation lock set to be part of a group.` });
    }), this.issues.length) return this.issues;
    const r = go(this.direction), s = i.getTrimmedDimensions(!0)[r];
    return n.forEach((l, h) => {
      if (l.id === i.id) return;
      const c = l.getTrimmedDimensions(!0)[r];
      Ue.equalTo(c, s) || this.issues.push({ message: `Part in position ${h + 1} final ${r === "l" ? "length" : "width"} is not correct for the group. Expected ${s} and is ${c}. Check the dimensions, trim & orientation lock.` });
    }), this.issues;
  }
  findShapes(t = []) {
    var i, r;
    if (!t.length) return [];
    let n = [];
    if (fr(t[0])) {
      if (!((i = this.shapeListIds) != null && i.length)) return [];
      if (n = this.shapeListIds.map((s) => t.find((o) => o.listId === s)).filter((s) => s), !n.length)
        throw new Error("could not map group shapes to shape list");
      return n;
    } else {
      if (!((r = this.shapes) != null && r.length)) return [];
      const s = /* @__PURE__ */ new Set();
      n = this.shapes.map((o) => {
        const a = t.find((l) => l.parentID === o && !l.inUserGroup && !s.has(l.id));
        return a ? (s.add(a.id), a) : null;
      }).filter((o) => o);
    }
    if (!n.length)
      throw new Error("could not map group shapes to shape list");
    return n;
  }
  populateParentID(t) {
    var n;
    t != null && t.length && (n = this == null ? void 0 : this.shapeListIds) != null && n.length && (this.shapes = this.shapeListIds.map((i) => (t.findIndex((s) => s.listId === i) + 1).toString()));
  }
  //create a group from a user group
  createGroup(t = 0, n = 0, i = [], r = null) {
    if (!(i != null && i.length))
      throw new Error("some parts are required to create a user group");
    if (!yr(i[0]))
      throw new Error("shapeList must be of type Shape[]");
    const s = this.findShapes(i);
    if (!s.length) return !1;
    const o = s[0];
    s.forEach((c) => {
      const d = i.findIndex((g) => !g.inUserGroup && g.parentID === c.parentID);
      if (d === -1)
        throw new Error("shape not found in shapeList while creating user group.");
      i.splice(d, 1), c.setRotationToOrientationLockWithoutContainer(), c.inUserGroup = !0;
    });
    let a = 0, l = 0;
    this.direction === "l" ? l = o.w : a = o.l;
    let h;
    try {
      const c = {
        id: `ug${t}.${n}`,
        shapes: s,
        l: a,
        w: l,
        t: o == null ? void 0 : o.t,
        material: o == null ? void 0 : o.material,
        // joinDimension:
        //     referenceShape.l === l ? referenceShape.l : referenceShape.w,
        direction: this.direction,
        preventAutoRotation: !0,
        container: r,
        type: "user"
      };
      h = new js(c);
    } catch (c) {
      return console.error(c), !1;
    }
    return h.parentID = `ug${t}`, r && h.updateShapeSpacing(r), h;
  }
}
const mr = ["y1", "y2", "x1", "x2"], Nl = ["a", "b", "c", "d"], Ps = [...mr, ...Nl], pr = ["a", "b"];
function c1(e) {
  return Nl.includes(e);
}
function Cb(e) {
  return Ps.includes(e);
}
const tf = {
  x: "x",
  y: "y",
  l: "length",
  w: "width",
  t: "thickness",
  q: "quantity",
  orientationLock: "rotation",
  name: "name",
  material: "material",
  banding: "banding",
  finish: "finish",
  cost: "cost",
  grain: "grain",
  trim: "trim",
  x1: "w1",
  x2: "w2",
  y1: "l1",
  y2: "l2",
  a: "a",
  b: "b",
  c: "c",
  d: "d",
  all: "all"
};
function Tb(e) {
  return mr.map((t) => e[t] ?? null);
}
function yo(e) {
  if (!Lt(e) || typeof e != "object") return {};
  e = { ...e };
  for (const [t, n] of Object.entries(e))
    t !== "_id" && t.startsWith("_") && (e[t.substring(1)] = n, delete e[t]);
  return e;
}
function Ib(e, t = null) {
  return !e || !(e != null && e.length) ? [] : e.map((n) => {
    var i;
    return delete n.id, t ? n.units = t : n.units || (n.units = ((i = this == null ? void 0 : this.optionsStore) == null ? void 0 : i.units) ?? "decimal"), new md(n);
  });
}
function Eb({
  stockList: e,
  removeScores: t = !1,
  saw: n = null,
  preventAutoRotation: i = !1,
  preventGrainRotation: r = !1
}) {
  return !e || !(e != null && e.length) ? [] : e.filter((s) => s).map((s) => {
    n && (s.saw = n), i && (s.preventAutoRotation = !0), r && (s.preventGrainRotation = !0);
    const o = new ns(s);
    if (o.issues.length)
      throw new Error(
        `Issues found when attempting to recreate stock list - ${o.issues.map((a) => a.message).join()}`,
        { cause: o.issues }
      );
    return t && delete o.algoBenchmark, o;
  }).sort(Hu.ID);
}
function Ob({
  shapeList: e,
  stockList: t,
  preventAutoRotation: n = !1
}) {
  if (typeof t > "u")
    throw new Error("recreateShapeList requires stockList");
  return !e || !(e != null && e.length) ? [] : e.filter((i) => i).map((i) => {
    var o;
    n && (i.preventAutoRotation = !0);
    let r;
    if ($b(i) && ((o = i == null ? void 0 : i.shapes) != null && o.length)) {
      i.shapes = i.shapes.map((a) => new is(a));
      try {
        r = new js(i);
      } catch {
        throw new Error("error creating group from shape data");
      }
    } else
      r = new is(i);
    if (r.issues.length)
      throw new Error(`Issues found when attempting to recreate shape list - ${r.issues.join()}`);
    const s = t.find((a) => {
      var l;
      return a.id === (((l = i == null ? void 0 : i.stock) == null ? void 0 : l.id) ?? (i == null ? void 0 : i.stockId));
    });
    return r.stock = s, r;
  }).sort(Hu.ID);
}
function Fb({
  cutList: e,
  stockList: t
}) {
  if (typeof t > "u")
    throw new Error("recreateCutList requires stockList");
  return !e || !(e != null && e.length) ? [] : e.map((n) => {
    const i = new Pc(n), r = t.find((s) => {
      var o;
      return s.id === (((o = n == null ? void 0 : n.stock) == null ? void 0 : o.id) ?? (n == null ? void 0 : n.stockId));
    });
    return i.stock = r, i;
  });
}
function Mb({
  segmentList: e,
  stockList: t
}) {
  return !e || !(e != null && e.length) ? [] : e.map((n) => {
    const i = t.find((s) => {
      var o;
      return s.id === (((o = n == null ? void 0 : n.stock) == null ? void 0 : o.id) ?? (n == null ? void 0 : n.stockId));
    });
    return n.stock = i, new d1(n);
  });
}
function h1(e = null, t = null, n = null) {
  if (!e) throw new Error("no container supplied to willItFit");
  if (!t) throw new Error("no shape supplied to willItFit");
  const i = t.rot;
  function r(g = !1, p = "l") {
    var b, x;
    return Ue.equalTo(
      t[g ? go(p) : p],
      e[p]
    ) || Ue.lessThanOrEqualTo(t[g ? go(p) : p], e[p] - (ef(e) ? (x = (b = e == null ? void 0 : e.saw) == null ? void 0 : b.options) == null ? void 0 : x.minSpacing : 0));
  }
  function s(g = !0) {
    return t.forceRotate(i), g;
  }
  const o = t.getNecessaryOrientation(e);
  let a = null;
  if (o && (a = o === "l" ? 0 : 1), t.orientationLock) {
    if (Lt(n) && n !== a)
      return s(!1);
    t.forceRotate(a);
  } else Lt(n) && t.forceRotate(n);
  if (a && t.rot !== a)
    return s(!1);
  const l = r(!1, "l"), h = r(!1, "w"), c = r(!0, "l"), d = r(!0, "w");
  return Lt(n) || o ? s(l && h) : s(l && h || c && d);
}
function tc(e, t, n = "decimal", i = !1) {
  return Lt(e == null ? void 0 : e[t]) ? Yt(e[t], n, !1, i) : null;
}
class f1 {
  constructor(t, n = !1) {
    H(this, "readonly");
    H(this, "id");
    H(this, "listId");
    H(this, "units", "decimal");
    H(this, "l");
    H(this, "w");
    H(this, "t");
    H(this, "q");
    H(this, "name");
    H(this, "material");
    H(this, "trim", {
      x1: 0,
      x2: 0,
      y1: 0,
      y2: 0
    });
    H(this, "cost", null);
    H(this, "grain", "");
    H(this, "selected", !1);
    //used for multiple editing
    H(this, "multiEdit", !1);
    //is this the multi-select stock
    H(this, "type", null);
    H(this, "autoAdd", !1);
    H(this, "used");
    H(this, "saw");
    H(this, "preventGrainRotation");
    H(this, "allowExactFitShapes");
    H(this, "issues", []);
    H(this, "warnings", []);
    H(this, "notes", "");
    var s, o;
    t = yo(t), Lt(t.units) || console.warn("Attempting to create InputStock without units"), this.units = t.units, this.readonly = t.readonly, this.id = t.id, this.listId = t != null && t.listId ? t.listId : Date.now().toString() + Kg(), ["l", "w", "t"].forEach((a) => {
      this[a] = tc(t, a, this.units, n);
    }), this.q = Lt(t.q) ? typeof t.q == "string" ? parseInt(t.q) : t.q : null, this.autoAdd = Lt(t.autoAdd) ? t.autoAdd : !1, this.name = Lt(t.name) ? Ll(t.name).toUpperCase() : "", this.material = Lt(t.material) ? t.material.trim().toUpperCase() : "";
    const r = ["x1", "x2", "y1", "y2"];
    this.trim = {
      x1: null,
      x2: null,
      y1: null,
      y2: null
    }, r.forEach((a) => {
      this.trim[a] = tc(t.trim, a, this.units, n);
    }), this.cost = Lt(t.cost) ? t.cost : null, t.grain = (s = t == null ? void 0 : t.grain) == null ? void 0 : s.toLowerCase(), (t == null ? void 0 : t.grain) === " " && (t.grain = ""), this.grain = t.grain, this.multiEdit = t.multiEdit, this.type = t.type, this.allowExactFitShapes = Lt(t == null ? void 0 : t.allowExactFitShapes) ? t.allowExactFitShapes : !1, this.preventGrainRotation = !0, this.notes = t != null && t.notes ? (o = t.notes) == null ? void 0 : o.replace(/,/g, "") : "";
  }
  //change the units of the stock
  changeUnits(t, n, i) {
    if (!(t === "decimal" || t === "fraction")) return;
    this.units = t;
    function r(o) {
      return o ? Yt(o, t, !1, !1, i) : null;
    }
    this.l = r(this.l), this.w = r(this.w), this.t = r(this.t), ["x1", "x2", "y1", "y2"].forEach((o) => {
      var a;
      this.trim[o] = Lt((a = this.trim) == null ? void 0 : a[o]) ? r(this.trim[o]) : null;
    });
  }
  //change the type of stock
  changeType(t) {
    switch (t !== "sheet" && (this.grain = ""), t) {
      case "linear":
        this.trim.y1 = 0, this.trim.y2 = 0;
        break;
      case "roll":
        this.trim.x1 = 0, this.trim.x2 = 0, this.trim.y1 = 0, this.trim.y2 = 0, this.t = null;
        break;
    }
  }
  //create an id from an index
  createId(t, n = 0) {
    this.id = `${t + 1}.${n}`;
  }
  isSquare() {
    return this.l === this.w;
  }
  getWarnings() {
    this.warnings = [], ["q"].forEach((t) => this.warnings.push(...si[t](this[t])));
  }
  validate() {
    return this.issues = [], ["l", "w", "t"].forEach((t) => this.issues.push(...si[t](this[t]))), this.issues.push(...si.trim(this)), this.getWarnings(), this.issues;
  }
}
class md {
  constructor(t, n = !1) {
    H(this, "readonly");
    H(this, "id");
    H(this, "listId");
    H(this, "units", "decimal");
    H(this, "l");
    H(this, "w");
    H(this, "t");
    H(this, "q", 1);
    H(this, "name", "");
    H(this, "material", "");
    H(this, "cost");
    H(this, "orientationLock");
    H(this, "selectedMaterial");
    H(this, "selected", !1);
    //used for multiple editing
    H(this, "multiEdit", !1);
    H(this, "issues", []);
    H(this, "warnings", []);
    H(this, "notes", "");
    H(this, "stockLock");
    H(this, "stockMatch");
    H(this, "customData");
    //objects
    H(this, "machining");
    H(this, "trim", Object.fromEntries(
      mr.map((t) => [t, 0])
    ));
    H(this, "banding", Object.fromEntries(
      Ps.map((t) => [t, !1])
    ));
    H(this, "bandingOptions", Object.fromEntries([
      ...Ps,
      "all"
    ].map((t) => [t, {}])));
    H(this, "finish", Object.fromEntries(
      pr.map((t) => [t, ""])
    ));
    H(this, "finishOptions", Object.fromEntries(
      pr.map((t) => [t, {}])
    ));
    var r, s, o, a, l;
    t = t = yo(t), this.units = t.units, this.readonly = t.readonly, this.id = t.id, this.listId = t != null && t.listId ? t.listId : Date.now().toString() + Kg(), ["l", "w", "t"].forEach((h) => {
      this[h] = tc(t, h, this.units, n);
    }), this.q = Lt(t == null ? void 0 : t.q) ? typeof t.q == "string" ? parseInt(t.q) : t.q : null, this.name = Lt(t.name) ? Ll(t.name).toUpperCase() : "", this.material = Lt(t.material) ? t.material.trim().toUpperCase() : "", this.multiEdit = t.multiEdit, this.notes = t != null && t.notes ? (r = t.notes) == null ? void 0 : r.replace(/,/g, "") : "", this.stockLock = (t == null ? void 0 : t.stockLock) ?? [];
    for (const h of Object.keys(this.trim))
      this.trim[h] = tc(t.trim, h, this.units, n);
    for (const h of Object.keys(this.banding))
      this.banding[h] = Lt((s = t == null ? void 0 : t.banding) == null ? void 0 : s[h]) ? t.banding[h] : !1;
    for (const h of Object.keys(this.bandingOptions))
      this.bandingOptions[h] = Lt((o = t == null ? void 0 : t.bandingOptions) == null ? void 0 : o[h]) ? t.bandingOptions[h] : {};
    for (const h of Object.keys(this.finish))
      this.finish[h] = Lt((a = t == null ? void 0 : t.finish) == null ? void 0 : a[h]) ? t.finish[h] : "";
    for (const h of Object.keys(this.finishOptions))
      this.finishOptions[h] = Lt((l = t == null ? void 0 : t.finishOptions) == null ? void 0 : l[h]) ? t.finishOptions[h] : {};
    this.orientationLock = Lt(t.orientationLock) ? t.orientationLock.toLowerCase() : "", this.machining = new l1(t.machining ?? {
      holes: [],
      hingeHoles: [],
      corners: []
    }), this.customData = (t == null ? void 0 : t.customData) ?? {};
  }
  /**
   * change the units of the shape
   * @param {String} newUnits
   */
  changeUnits(t, n, i) {
    if (!(t === "decimal" || t === "fraction")) return;
    this.units = t;
    function r(o) {
      return o ? Yt(o, t, !1, !1, i) : null;
    }
    this.l = r(this.l), this.w = r(this.w), this.t = r(this.t), ["x1", "x2", "y1", "y2"].forEach((o) => {
      var a;
      this.trim[o] = Lt((a = this.trim) == null ? void 0 : a[o]) ? r(this.trim[o]) : null;
    });
  }
  isSquare() {
    return this.l === this.w;
  }
  /**
   * change the type of the stock
   * @param {String} newType
   */
  changeStockType(t) {
    switch (t) {
      case "sheet":
      case "roll":
        this.orientationLock = "", t === "roll" && (this.t = null);
        break;
      case "linear":
        this.orientationLock = "", this.banding = Object.fromEntries(
          Ps.map((n) => [n, !1])
        );
        break;
    }
  }
  /**
   * create an id from an index
   * @param {Integer} index
   * @param {Integer} secondaryIndex
   */
  createId(t, n = 0) {
    this.id = `${t + 1}.${n}`;
  }
  getLongSide() {
    return Yt(this.l) > Yt(this.w) ? Yt(this.l) : Yt(this.w);
  }
  getShortSide() {
    return Yt(this.l) < Yt(this.w) ? Yt(this.l) : Yt(this.w);
  }
  getRotatedDimensions() {
    return ["l", "w"].includes(this.orientationLock) ? {
      name: this.name,
      listId: this.listId,
      l: this.orientationLock === "l" ? this.getLongSide() : this.getShortSide(),
      w: this.orientationLock === "l" ? this.getShortSide() : this.getLongSide(),
      orientationLock: this.orientationLock
    } : {
      name: this.name,
      l: this.getLongSide(),
      w: this.getShortSide(),
      orientationLock: this.orientationLock
    };
  }
  getTrimmedDimensions(t = !1) {
    let n = { l: Yt(this.l), w: Yt(this.w) };
    return t && (n = this.getRotatedDimensions()), {
      name: this.name,
      listId: this.listId,
      l: n.l - (this.trim.x1 + this.trim.x2),
      w: n.w - (this.trim.y1 + this.trim.y2),
      orientationLock: this.orientationLock
    };
  }
  //used to apply a single trim value to all sides
  applyPartTrim(t, n) {
    if (!this.readonly)
      if (t = Yt(t), this.trim) {
        for (const i in this.trim)
          this.trim[i] = t;
        n === "linear" && (this.trim.y1 = 0, this.trim.y2 = 0);
      } else
        this.trim = {
          x1: t,
          x2: t,
          y1: n !== "linear" ? t : 0,
          y2: n !== "linear" ? t : 0
        };
  }
  /**
   * to align with Shape
   * @remarks input shapes are always 0
   */
  get rot() {
    return 0;
  }
  validate(t, n, i, r = 0, s = !1) {
    return this.issues = [], ["l", "w", "t"].forEach((o) => {
      const a = si[o](this[o], n);
      a.length && this.issues.push(...a);
    }), r = Yt(r), this.issues.push(...si.partTrim(this, r, n)), this.issues.push(...si.trim(this, n)), si.machining(this, n), this.getWarnings(t, n, i, r, s), this.issues;
  }
  getWarnings(t, n = null, i, r = 0, s = !1) {
    this.warnings = [], ["q"].forEach((o) => {
      this.warnings.push(...si[o](this[o], n));
    }), t.length && !s && this.warnings.push(...si.stockMatch(this, t, i, r, n));
  }
}
class Pl {
  constructor(t) {
    H(this, "id");
    H(this, "parentID");
    H(this, "name");
    H(this, "x");
    H(this, "y");
    H(this, "l");
    H(this, "w");
    H(this, "t");
    H(this, "q");
    H(this, "material");
    H(this, "grain");
    H(this, "orientationLock");
    H(this, "duplicate");
    H(this, "trimmed");
    H(this, "preventAutoRotation");
    H(this, "preventGrainRotation");
    H(this, "units");
    H(this, "issues", []);
    H(this, "stock");
    H(this, "stockId");
    //used when object is compressed
    H(this, "cost");
    H(this, "offcut");
    H(this, "notes");
    //for user notes
    H(this, "proximity");
    //objects
    H(this, "_trim", Object.fromEntries(
      mr.map((t) => [t, 0])
    ));
    H(this, "customData");
    this.initRectangle(t);
  }
  validateRectangle(t) {
    Cr(this) || ["x", "y", "l", "w", "t"].forEach((n) => {
      this.createIssues(si[n](t[n]));
    }), es(this) && "q" in t && this.createIssues(si.q((t == null ? void 0 : t.q) ?? 0, t.autoAdd)), "q" in t && this.isShape() && !this.isGroup() && !this.isUserGroup() && this.createIssues(si.q((t == null ? void 0 : t.q) ?? 0)), "customData" in t && this.createIssues(si.customData((t == null ? void 0 : t.customData) ?? {}));
  }
  initRectangle(t, n = !1) {
    var r, s, o;
    if (!n) {
      if (this.validateRectangle(t), this.issues.length) return;
      this.id = Lt(t.id) ? t.id.toString() : this.id || null, this.setParentID(), Lt(t == null ? void 0 : t.q) ? typeof t.q == "string" ? this.q = parseInt(t.q) : this.q = t.q : this.q = 0, this.name = Lt(t.name) && ((r = t == null ? void 0 : t.name) != null && r.length) ? (s = p1(Ll(t == null ? void 0 : t.name))) == null ? void 0 : s.toUpperCase() : null, Lt(t == null ? void 0 : t.cost) ? typeof t.cost == "string" ? this.cost = parseFloat(t.cost) : typeof t.cost == "number" && (this.cost = t.cost) : this.cost = 0, this.material = Lt(t.material) ? t.material.trim().toLowerCase() : null, this.duplicate = Lt(t == null ? void 0 : t.duplicate) ? t.duplicate : !1, this.grain = typeof t.grain < "u" && Lt(t == null ? void 0 : t.grain) ? t.grain.toLowerCase() : null, this.trimmed = Lt(t == null ? void 0 : t.trimmed) ? t.trimmed : !1, this.offcut = Lt(t == null ? void 0 : t.offcut) ? t.offcut : !1, this.notes = typeof (t == null ? void 0 : t.notes) == "string" && t.notes.length ? t.notes.replace(/,/g, "").substring(0, 200) : "", this.customData = (t == null ? void 0 : t.customData) ?? {}, this.proximity = {
        rectangle: null,
        distance: null
      };
      try {
        this.trim = t == null ? void 0 : t.trim;
      } catch (a) {
        if ((o = a == null ? void 0 : a.cause) != null && o.issues) this.issues.push(...a.cause.issues);
        else throw new Error("error when attempting to set trim");
      }
    }
    [
      {
        key: "x",
        default: 0,
        required: !1
      },
      {
        key: "y",
        default: 0,
        required: !1
      },
      {
        key: "l",
        default: null,
        required: !0
      },
      {
        key: "w",
        default: 1,
        //for linear
        required: !0
      },
      {
        key: "t",
        default: null,
        required: !1
      }
    ].forEach((a) => {
      let l = t[a.key];
      if (!Lt(l))
        return this[a.key] = this[a.key] || a.default;
      typeof l == "string" && (l = Yt(l)), this[a.key] = l;
    }), !(t != null && t.preventAutoRotation) && !t.trimmed && this.w > this.l && ([this.l, this.w] = [this.w, this.l], this.grain && !(t != null && t.preventGrainRotation) && (this.grain = go(this.grain))), Lt(t == null ? void 0 : t.stock) && (es(t.stock) ? this.stock = t.stock : this.stock = new ns(t.stock), this.stockId = this.stock.id);
  }
  updateRectangle(t) {
    t.preventAutoRotation = !0, this.initRectangle(t, !0);
  }
  set trim(t) {
    if (this._trim = Object.fromEntries(
      mr.map((n) => [n, 0])
    ), !!bo(t))
      for (const n of mr) {
        let i;
        if (typeof t[n] == "string") {
          const r = Yt(t[n]);
          isNaN(r) || r < 0 ? (this.issues.push(
            this.createIssue(
              `${t[n] ?? "N/A"} is not a valid value for trim: ${n}`
            )
          ), i = 0) : i = r;
        } else
          i = t[n];
        this._trim[n] = i;
      }
  }
  get trim() {
    return this._trim;
  }
  get rot() {
    return this.w > this.l ? 1 : 0;
  }
  setParentID() {
    this.parentID = this.getParentID();
  }
  getParentID() {
    return this.id ? this.parentID ? this.parentID : typeof this.id != "number" && this.id.includes(".") ? this.id.split(".")[0] : typeof this.id != "number" && !this.id.includes(".") ? null : this != null && this.id ? this.id.toString() : null : null;
  }
  getCopyNumber() {
    return typeof this.id != "number" && this.id.includes(".") ? parseInt(this.id.split(".")[1]) : 0;
  }
  createIssues(t) {
    t != null && t.length && t.forEach((n) => {
      this.issues.push(this.createIssue(n.message, n.field));
    });
  }
  createIssue(t, n = null) {
    var o;
    let i = "";
    const r = this.getClass();
    switch (r) {
      case "Shape":
        i = "part";
        break;
      case "Stock":
        i = "stock";
        break;
      default:
        i = r.toLowerCase();
        break;
    }
    const s = (o = this == null ? void 0 : this.name) != null && o.length ? this.name.toUpperCase() : this.parentID;
    return s ? {
      message: `${t} [${i.charAt(0).toUpperCase() + i.slice(1)} ${s}]`,
      field: n
    } : { message: t, field: n };
  }
  dimensions() {
    return {
      id: this.id,
      l: this.l,
      w: this.w,
      t: this.t
    };
  }
  getRotatedDimensions() {
    return ["l", "w"].includes(this.orientationLock) ? {
      l: this.orientationLock === "l" ? this.getLongSide() : this.getShortSide(),
      w: this.orientationLock === "l" ? this.getShortSide() : this.getLongSide(),
      orientationLock: this.orientationLock
    } : {
      l: this.getLongSide(),
      w: this.getShortSide(),
      orientationLock: this.orientationLock
    };
  }
  coords() {
    return {
      id: this.id,
      x: this.x,
      y: this.y
    };
  }
  hasCoords(t, n) {
    return this.x === t && this.y === n;
  }
  getAspect() {
    return this.l > this.w ? this.w / this.l : this.l / this.w;
  }
  getPerimeter() {
    return this.w * 2 + this.l * 2;
  }
  getLongSide() {
    return this.l > this.w ? this.l : this.w;
  }
  getShortSide() {
    return this.l < this.w ? this.l : this.w;
  }
  getSides() {
    return [
      this.getSide("bottom"),
      this.getSide("right"),
      this.getSide("top"),
      this.getSide("left")
    ];
  }
  getSide(t) {
    switch (t) {
      case "bottom":
        return new na({
          x1: this.x,
          x2: this.x + this.l,
          y1: this.y,
          y2: this.y,
          type: "bottom"
          // parentID: this.id
        });
      case "right":
        return new na({
          x1: this.x + this.l,
          x2: this.x + this.l,
          y1: this.y,
          y2: this.y + this.w,
          type: "right"
          // parentID: this.id
        });
      case "top":
        return new na({
          x1: this.x,
          x2: this.x + this.l,
          y1: this.y + this.w,
          y2: this.y + this.w,
          type: "top"
          // parentID: this.id
        });
      case "left":
        return new na({
          x1: this.x,
          x2: this.x,
          y1: this.y,
          y2: this.y + this.w,
          type: "left"
          // parentID: this.id
        });
    }
  }
  getTopPosition(t = !0, n = null) {
    var i;
    if (t && typeof ((i = this.stock) == null ? void 0 : i.getBladeWidth) > "u" && n === null)
      throw new Error("not able to detect blade width in getTopPosition");
    return t ? this.y + this.w + ((this.stock.getBladeWidth() || n) ?? 0) : this.y + this.w;
  }
  getRightPosition(t = !0, n = null) {
    var i;
    if (t && typeof ((i = this.stock) == null ? void 0 : i.getBladeWidth) > "u" && n === null)
      throw new Error("not able to detect blade width in getTopPosition");
    return t ? this.x + this.l + ((this.stock.getBladeWidth() || n) ?? 0) : this.x + this.l;
  }
  getBottomPosition(t = !0, n = null) {
    var i;
    if (t && typeof ((i = this.stock) == null ? void 0 : i.getBladeWidth) > "u" && n === null)
      throw new Error("not able to detect blade width in getTopPosition");
    return t ? this.y - ((this.stock.getBladeWidth() || n) ?? 0) : this.y;
  }
  getLeftPosition(t = !0, n = null) {
    var i;
    if (t && typeof ((i = this.stock) == null ? void 0 : i.getBladeWidth) > "u" && n === null)
      throw new Error("not able to detect blade width in getTopPosition");
    return t ? this.x - ((this.stock.getBladeWidth() || n) ?? 0) : this.x;
  }
  sharesSide(t, n = 0, i = null) {
    switch (i) {
      case "left":
        return t.x + t.l + n === this.x;
      case "right":
        return t.x === this.x + this.l + n;
      case "bottom":
        return t.y + t.w + n === this.y;
      case "top":
        return t.y === this.y + this.w + n;
    }
    return !1;
  }
  sameSide(t, n = null) {
    switch (n) {
      case "left":
        return t.x === this.x;
      case "right":
        return t.x + t.l === this.x + this.l;
      case "bottom":
        return t.y === this.y;
      case "top":
        return t.y + t.w === this.y + this.w;
    }
    return !1;
  }
  //considers if the shape can rotate
  getLongestDimension(t) {
    return this.orientationLock ? this[t] : this.getLongSide();
  }
  getArea() {
    return this.w * this.l;
  }
  getCoords(t, n = !1) {
    const i = new $n(this.x + this.l, this.y);
    i.corner = "bottomRight";
    const r = new $n(this.x, this.y + this.w);
    if (r.corner = "topLeft", (t == null ? void 0 : t.cutType) !== "efficiency" && !n)
      return [r, i];
    const s = new $n(this.x, this.y);
    s.corner = "bottomLeft";
    const o = new $n(this.x + this.l, this.y + this.w);
    return o.corner = "topRight", [s, r, o, i];
  }
  getCorners() {
    return {
      bottomLeft: new $n(this.x, this.y),
      topLeft: new $n(this.x, this.y + this.w),
      topRight: new $n(this.x + this.l, this.y + this.w),
      bottomRight: new $n(this.x + this.l, this.y)
    };
  }
  round() {
    return {
      l: Math.round(this.l),
      w: Math.round(this.w)
    };
  }
  getClass() {
    return this.constructor.name;
  }
  getTrimmedDimensions(t = !1) {
    let n = { l: this.l, w: this.w };
    return t && (n = this.getRotatedDimensions()), this.trimmed ? n : {
      l: n.l - (this.trim.x1 + this.trim.x2),
      w: n.w - (this.trim.y1 + this.trim.y2)
    };
  }
  //trim the rectangle
  trimDimensions() {
    var t, n, i, r;
    return this.trimmed ? !1 : (this.trim && Object.values(this.trim).filter((s) => !isNaN(parseFloat(String(s)))).length && (Lt(this.l) && (this.l -= ((t = this == null ? void 0 : this.trim) != null && t.x1 ? this.trim.x1 : 0) + ((n = this == null ? void 0 : this.trim) != null && n.x2 ? this.trim.x2 : 0), this.l <= 0 && (console.error(this), this.issues.push(this.createIssue("Applying trim has produced a negative length")))), Lt(this.w) && (this.w -= ((i = this == null ? void 0 : this.trim) != null && i.y1 ? this.trim.y1 : 0) + ((r = this == null ? void 0 : this.trim) != null && r.y2 ? this.trim.y2 : 0), this.w <= 0 && (console.error(this), this.issues.push(this.createIssue("Applying trim has produced a negative width"))))), this.trimmed = !0, !0);
  }
  /**
   * change the size of the rectangle back to the original size
   */
  removeTrim() {
    var t, n, i, r;
    if (this.trimmed) {
      if (this.l += (typeof ((t = this == null ? void 0 : this.trim) == null ? void 0 : t.x1) == "number" ? this.trim.x1 : 0) + (typeof ((n = this == null ? void 0 : this.trim) == null ? void 0 : n.x2) == "number" ? this.trim.x2 : 0), this.w += (typeof ((i = this == null ? void 0 : this.trim) == null ? void 0 : i.y1) == "number" ? this.trim.y1 : 0) + (typeof ((r = this == null ? void 0 : this.trim) == null ? void 0 : r.y2) == "number" ? this.trim.y2 : 0), this.l <= 0)
        throw new Error(`trimming this ${this.id} has produced a negative length`);
      if (this.w <= 0)
        throw new Error(`trimming this ${this.id} has produced a negative width`);
      this.trimmed = !1;
    }
  }
  getUntrimmedDimensions() {
    var i, r, s, o;
    if (!this.trimmed) return { l: this.l, w: this.w };
    const t = this.getLongSide(), n = this.getShortSide();
    return {
      l: t + (typeof ((i = this == null ? void 0 : this.trim) == null ? void 0 : i.x1) == "number" ? this.trim.x1 : 0) + (typeof ((r = this == null ? void 0 : this.trim) == null ? void 0 : r.x2) == "number" ? this.trim.x2 : 0),
      w: n + (typeof ((s = this == null ? void 0 : this.trim) == null ? void 0 : s.y1) == "number" ? this.trim.y1 : 0) + (typeof ((o = this == null ? void 0 : this.trim) == null ? void 0 : o.y2) == "number" ? this.trim.y2 : 0)
    };
  }
  isIdentical(t, n = !1) {
    if (this.constructor !== t.constructor || this.t !== t.t || this.orientationLock !== t.orientationLock)
      return !1;
    if (Cr(this)) {
      if (t.id === this.id) return !0;
    } else {
      if (t.parentID === this.parentID) return !0;
      if (yr(this) && n && this.parentID !== t.parentID) return !1;
    }
    const { w: i, l: r } = this, { w: s, l: o } = t;
    if (!(i === s && r === o) && !(i === o && r === s))
      return !1;
    const a = this.trim, l = t.trim;
    return !a || !l ? a === l : a.x1 === l.x1 && a.x2 === l.x2 && a.y1 === l.y1 && a.y2 === l.y2;
  }
  /**
   * is this rectangle a square
   */
  isSquare() {
    return this.l === this.w;
  }
  getDistancesToContainerEdges(t) {
    return [
      this.x - t.x,
      t.l - (this.x + this.l),
      t.w - (this.y + this.w),
      this.y - t.y
    ];
  }
  isInsideStock(t) {
    return !(this.x + this.l > t.l || this.y + this.w > t.w || this.x < 0 || this.y < 0);
  }
  /**
  * Creates or retrieves a cached rectangle used for proximity detection.
  * Optimized for frequent calls with the same distance parameter.
  */
  getProximityRectangle(t) {
    if (!t || t < 0) return null;
    const n = this.proximity;
    if ((n == null ? void 0 : n.distance) === t) {
      const r = n.rectangle;
      return this.x === 0 ? (r.x = 0, r.l = this.l + t) : (r.x = this.x - t, r.l = this.l + t * 2), this.y === 0 ? (r.y = 0, r.w = this.w + t) : (r.y = this.y - t, r.w = this.w + t * 2), r;
    }
    const i = new Pl({
      id: `${this.id}-proximity`,
      name: "proximity",
      x: this.x === 0 ? 0 : this.x - t,
      y: this.y === 0 ? 0 : this.y - t,
      l: this.x === 0 ? this.l + t : this.l + t * 2,
      w: this.y === 0 ? this.w + t : this.w + t * 2,
      preventAutoRotation: !0
    });
    return this.proximity = { rectangle: i, distance: t }, i;
  }
  isShape() {
    return yr(this);
  }
  isSegment() {
    return Ub(this);
  }
  isStock() {
    return es(this);
  }
  isGroup() {
    return Cr(this);
  }
  isUserGroup() {
    return bd(this);
  }
}
class yd extends Pl {
  constructor(n) {
    super(n);
    H(this, "type");
    H(this, "saw");
    H(this, "algoBenchmark");
    //used by evo
    H(this, "shapes", []);
    switch (this.shapes = n.shapes, ["sheet", "linear", "roll", null, void 0, ""].includes(n.type) ? this.type = n.type : this.issues.push({ message: `Container type ${n.type ?? "N/A"} is not valid` }), this.type || (this.type = "sheet"), this.setSaw(n), this.cutType) {
      case "beam":
        (!Lt(this.t) || this.t <= 0) && this.issues.push(this.createIssue("Stock for beam saws must have a thickness set"));
        break;
    }
  }
  setSaw(n) {
    var i, r, s, o;
    if (Lt(n) || (this.saw = new Fs(null)), Lt(n == null ? void 0 : n.saw)) {
      if (!((r = n == null ? void 0 : n.saw) != null && r.cutType)) {
        const { cutType: a, cutPreference: l } = Zh(n.saw.cutPreference);
        n.saw.cutType = a, n.saw.cutPreference = l;
      }
    } else {
      n.saw = {};
      const { cutType: a, cutPreference: l } = Zh(n.cutPreference);
      n.saw.cutType = a, n.saw.cutPreference = l, Lt(n == null ? void 0 : n.bladeWidth) && (n.saw.bladeWidth = n.bladeWidth), Lt((i = n == null ? void 0 : n.blade) == null ? void 0 : i.width) && (n.saw.bladeWidth = n.blade.width), Lt(n == null ? void 0 : n.efficiencyOptions) && (n.saw.efficiencyOptions = n.efficiencyOptions), Lt(n == null ? void 0 : n.guillotineOptions) && (n.saw.guillotineOptions = n.guillotineOptions), Lt(n == null ? void 0 : n.stackHeight) && (n.saw.stackHeight = n.stackHeight);
    }
    try {
      Lt(n == null ? void 0 : n.saw) && (Wb(n.saw) ? this.saw = n.saw : this.saw = new Fs(n.saw, this.type)), (o = (s = this.saw) == null ? void 0 : s.issues) != null && o.length && this.issues.push(...this.saw.issues);
    } catch (a) {
      throw new Error("error creating saw", { cause: a });
    }
  }
  get cutType() {
    var n, i, r, s;
    return Lt((n = this == null ? void 0 : this.saw) == null ? void 0 : n.cutType) ? this.saw.cutType : (i = this.stock) != null && i.isStock() ? null : ((s = (r = this == null ? void 0 : this.stock) == null ? void 0 : r.saw) == null ? void 0 : s.cutType) ?? null;
  }
  get cutPreference() {
    var n, i, r, s;
    return Lt((n = this.saw) == null ? void 0 : n.cutPreference) ? this.saw.cutPreference : (i = this.stock) != null && i.isStock() ? null : ((s = (r = this.stock) == null ? void 0 : r.saw) == null ? void 0 : s.cutPreference) ?? null;
  }
  get guillotineOptions() {
    var n, i, r, s;
    return Lt((n = this.saw) == null ? void 0 : n.guillotineOptions) ? this.saw.guillotineOptions : (i = this.stock) != null && i.isStock() ? null : ((s = (r = this == null ? void 0 : this.stock) == null ? void 0 : r.saw) == null ? void 0 : s.guillotineOptions) ?? null;
  }
  get efficiencyOptions() {
    var n, i, r, s;
    return Lt((n = this.saw) == null ? void 0 : n.efficiencyOptions) ? this.saw.efficiencyOptions : (i = this.stock) != null && i.isStock() ? null : ((s = (r = this == null ? void 0 : this.stock) == null ? void 0 : r.saw) == null ? void 0 : s.efficiencyOptions) ?? null;
  }
  get primaryCompression() {
    var n, i;
    if (this.cutType === "efficiency")
      return (i = (n = this.saw) == null ? void 0 : n.efficiencyOptions) != null && i.primaryCompression ? this.efficiencyOptions.primaryCompression : "y";
  }
  getHalfBladeWidth() {
    const n = this.getBladeWidth();
    return n ? n / 2 : 0;
  }
  getBladeWidth() {
    var i, r, s;
    const n = (((i = this == null ? void 0 : this.saw) == null ? void 0 : i.bladeWidth) || ((s = (r = this == null ? void 0 : this.stock) == null ? void 0 : r.saw) == null ? void 0 : s.bladeWidth)) ?? 0;
    return isNaN(n) ? 0 : n;
  }
  getStock() {
    return es(this) ? this : this != null && this.stock ? this.stock : null;
  }
}
class Fs {
  constructor(t, n = "sheet") {
    H(this, "issues");
    H(this, "bladeWidth");
    H(this, "cutType");
    H(this, "cutPreference");
    H(this, "guillotineOptions");
    H(this, "efficiencyOptions");
    H(this, "stackHeight");
    H(this, "stockType");
    H(this, "options");
    switch (t = yo(t), this.options = rl({}, t == null ? void 0 : t.options, {
      stockSelection: "efficiency",
      stackingMode: "dimensions",
      minSpacing: 0,
      minSpacingDimension: {}
    }), this.stackHeight = (t == null ? void 0 : t.stackHeight) ?? null, this.stockType = (t == null ? void 0 : t.stockType) ?? n, this.issues = [], ["sheet", "linear", "roll"].includes(this.stockType) || this.issues.push({ message: `Saw stock type: ${this.stockType} not valid` }), this.stockType || (this.stockType = "sheet"), this.cutType = t == null ? void 0 : t.cutType, this.stockType) {
      case "sheet":
        [
          "efficiency",
          "guillotine",
          "beam",
          null,
          void 0
        ].includes(this.cutType) || this.issues.push({ message: `Saw cut type: ${this.cutType} not valid for stock type: ${this.stockType}` });
        break;
      case "roll":
        ["efficiency", "guillotine", null, void 0].includes(this.cutType) || this.issues.push({ message: `Saw cut type: ${this.cutType} not valid for stock type: ${this.stockType}` });
        break;
      case "linear":
        break;
      default:
        ["none", null, void 0].includes(this.cutType) || this.issues.push({ message: `Saw cut type: ${this.cutType} not valid for stock type: ${this.stockType}` });
        break;
    }
    switch (this.cutPreference = t == null ? void 0 : t.cutPreference, this.cutType) {
      case "guillotine":
        ["l", "w", "flex"].includes(this.cutPreference) || this.issues.push({ message: `Saw cut preference: ${this.cutPreference || "N/A"} not valid for cut type: ${this.cutType || "N/A"}` }), this.cutType === "guillotine" && this.cutPreference === "l" && this.stockType === "roll" && this.issues.push({ message: `Cut preference: ${this.cutPreference || "N/A"} not valid for cut type: ${this.cutType || "N/A"} and stock type: ${this.stockType}` }), this.options.minSpacing = 0;
        break;
      case "beam":
        ["l", null, void 0].includes(this.cutPreference) || this.issues.push({ message: `Saw cut preference: ${this.cutPreference || "N/A"} not valid for cut type: ${this.cutType || "N/A"}` }), this.options.minSpacing = 0;
        break;
    }
    switch (Lt(t == null ? void 0 : t.bladeWidth) ? typeof t.bladeWidth == "string" ? this.bladeWidth = Yt(t.bladeWidth) : this.bladeWidth = t.bladeWidth : this.bladeWidth = 0, (isNaN(this.bladeWidth) || this.bladeWidth < 0) && (this.issues.push({ message: `Blade width: ${this.bladeWidth ?? "N/A"} is not valid` }), this.bladeWidth = 0), this.stockType) {
      case "sheet":
        [
          "efficiency",
          "guillotine",
          "beam",
          null,
          void 0
        ].includes(this.cutType) || this.issues.push({ message: `Invalid cut type: ${this.cutType} for stock type: ${n}, cut preference: ${this.cutPreference}` }), this.cutType === "guillotine" && (["l", "w", "flex"].includes(this.cutPreference) || this.issues.push({ message: `Invalid cut preference: ${this.cutPreference} for stock type: ${n}, cut type: ${this.cutType}` })), this.cutType === "beam" && [null, void 0].includes(this.stackHeight) && this.issues.push({ message: "Beam saws require a stack height to be set" }), this.cutType === "beam" && (this.cutPreference = "l"), this.cutType || (this.cutType = "efficiency");
        break;
      case "linear":
        this.cutType = null, this.cutPreference = null;
        break;
    }
    switch (this.cutType) {
      case "efficiency":
        this.efficiencyOptions = rl({}, t == null ? void 0 : t.efficiencyOptions, { primaryCompression: "y" });
        break;
      case "guillotine":
        this.guillotineOptions = rl({}, t == null ? void 0 : t.guillotineOptions, { strategy: "efficiency", maxPhase: null });
        break;
      case "beam":
        this.guillotineOptions = rl({}, t == null ? void 0 : t.guillotineOptions, { strategy: "efficiency", maxPhase: null }), this.cutPreference = "l", [null, void 0].includes(this.stackHeight) && this.issues.push({ message: "Beam saws require a stack height to be set" });
        break;
    }
  }
  clone() {
    const t = structuredClone(this);
    return new Fs(t);
  }
}
class ns extends yd {
  constructor(n) {
    n = yo(n), n.preventAutoRotation = (n == null ? void 0 : n.type) === "roll", n.autoAdd && !n.q && (n.q = 1);
    super(n);
    H(this, "_id");
    //used for mongo
    H(this, "autoAdd");
    H(this, "allowExactFitShapes");
    H(this, "analysis");
    H(this, "tidy");
    H(this, "used");
    H(this, "stack");
    H(this, "winningStrategy");
    //used for reporting
    H(this, "unusable");
    //used by stock matching
    H(this, "duplicatePattern");
    H(this, "score");
    H(this, "rootSegment");
    delete this.stock, this._id = n == null ? void 0 : n._id, this.autoAdd = Lt(n == null ? void 0 : n.autoAdd) ? n.autoAdd : !1, this.allowExactFitShapes = Lt(n == null ? void 0 : n.allowExactFitShapes) ? n.allowExactFitShapes : !1, this.analysis = Lt(n.analysis) ? n.analysis : null, this.tidy = Lt(n == null ? void 0 : n.tidy) ? n.tidy : !1, this.algoBenchmark = null, this.used = Lt(n == null ? void 0 : n.used) ? n.used : !1, this.stack = Lt(n == null ? void 0 : n.stack) ? n.stack : !1, this.duplicatePattern = (n == null ? void 0 : n.duplicatePattern) ?? null, this.initStock(n);
  }
  initStock(n) {
    switch (this.type) {
      case "linear":
      case "roll":
        this.trim.y1 = 0, this.trim.y2 = 0, this.grain = null;
        break;
    }
    this.validateStock(n), this.issues.length;
  }
  reset() {
    this.used = !1, this.stack = null, this.score = null, this.rootSegment = null, this.tidy = null, this.analysis = null, this.duplicatePattern = null, this.shapes = [];
  }
  validateStock(n) {
    ["grain"].forEach((i) => {
      this.createIssues(si[i](n[i]));
    }), this.createIssues(si.trim(this));
  }
  /**
   * compress for saving / transfer
   */
  save() {
    delete this.tidy, delete this.score, delete this.rootSegment, delete this.shapes, delete this.saw, this == null || delete this.algoBenchmark, this.stack = es(this.stack) ? this.stack.id : this.stack, !this.trim.x1 && !this.trim.x2 && !this.trim.y1 && !this.trim.y2 && (this.trim = null);
  }
  resetStrategies() {
    this.algoBenchmark = null;
  }
  isIdentical(n) {
    let i = !1, r = !1, s = !1, o = !1;
    if (this.material === n.material && (i = !0), this.t === n.t && (r = !0), this.l === n.l && (s = !0), this.w === n.w && (o = !0), i && r && s && o) return !0;
  }
  hasStack() {
    return typeof this.stack == "number";
  }
  isStacked() {
    return es(this.stack) || typeof this.stack == "string";
  }
  clone(n = null) {
    const i = this.id.split(".");
    n ? i.pop() : (n = parseInt(i.pop()), n++), i.push(n.toString());
    const r = i.join("."), s = structuredClone(this);
    return s.id = r, s.used = !1, s.duplicate = !0, s.stack = !1, s.saw = this.saw, new ns(s);
  }
}
class Rb extends Pl {
  constructor(n) {
    super(n);
    H(this, "addToInventory");
    //for front end selection
    H(this, "added");
    //for adding to inputStock
    H(this, "placementOrder");
    H(this, "flex");
    this.cost = this.getCost(), this.addToInventory = (n == null ? void 0 : n.addToInventory) ?? !0, this.added = !1, this.placementOrder = (n == null ? void 0 : n.placementOrder) ?? null, this.offcut = !0;
  }
  compressForSaving() {
    var n;
    this.stockId = (this == null ? void 0 : this.stockId) || ((n = this == null ? void 0 : this.stock) == null ? void 0 : n.id), delete this.stock, delete this._trim, delete this.trimmed;
  }
  getCost() {
    var n;
    return (n = this.stock) != null && n.isStock() && this.stock ? parseFloat((this.getArea() / this.stock.getArea() * this.stock.cost).toFixed(2)) : 0;
  }
}
function Db({
  offcuts: e,
  stockList: t,
  preventAutoRotation: n = !0
}) {
  return !e || !(e != null && e.length) ? [] : e.map((i) => {
    const r = t.find((o) => {
      var a;
      return o.id === (((a = i == null ? void 0 : i.stock) == null ? void 0 : a.id) ?? (i == null ? void 0 : i.stockId));
    });
    return i.stock = r, n && (i.preventAutoRotation = !0), new Rb(i);
  });
}
class is extends Pl {
  constructor(n) {
    n = yo(n);
    super(n);
    H(this, "added");
    H(this, "guillotineData");
    H(this, "stockLock");
    H(this, "score");
    H(this, "bestScore");
    H(this, "placementOrder");
    //groups
    H(this, "groupPlacementOrder");
    H(this, "group");
    H(this, "groupID");
    H(this, "inGroup");
    //is the shape currently part of at least one group
    H(this, "inUserGroup");
    //is the shape currently part of a user group`
    H(this, "addedAsGroup");
    H(this, "isFirstShape");
    H(this, "firstShapeSampleRotations", []);
    //used for setting the rotation of the first shape (guillotine)
    H(this, "index");
    //used for ptx
    H(this, "patternMatch");
    //used for stack detection
    H(this, "stockMatch");
    H(this, "minSpacing");
    H(this, "priority");
    H(this, "weighting", {});
    //objects
    H(this, "machining");
    H(this, "_banding", Object.fromEntries(
      Ps.map((n) => [n, !1])
    ));
    H(this, "_finish", Object.fromEntries(
      pr.map((n) => [n, ""])
    ));
    this.initShape(n);
  }
  initShape(n, i = !1) {
    var r;
    if (!i) {
      if (this.validateShape(n), this.issues.length) throw new Error(this.issues.map((s) => s.message).join(`
`));
      n.orientationLock = (r = n == null ? void 0 : n.orientationLock) == null ? void 0 : r.toLowerCase(), (n == null ? void 0 : n.orientationLock) === " " && (n.orientationLock = ""), this.orientationLock = Lt(n == null ? void 0 : n.orientationLock) && this.l !== this.w ? n.orientationLock : null, Lt(n == null ? void 0 : n.stockLock) ? Array.isArray(n == null ? void 0 : n.stockLock) && (this.stockLock = n.stockLock.map((s) => s.toString())) : this.stockLock = [], this.banding = n == null ? void 0 : n.banding, this.finish = n == null ? void 0 : n.finish, this.machining = Lt(n == null ? void 0 : n.machining) ? new l1(n.machining) : null;
    }
    this.added = Lt(n == null ? void 0 : n.added) ? n.added : !1, this.initGuillotineData(n), this.inGroup = Lt(n == null ? void 0 : n.inGroup) ? n.inGroup : this.inGroup || !1, this.inUserGroup = Lt(n == null ? void 0 : n.inUserGroup) ? n.inUserGroup : this.inUserGroup || !1, this.groupID = Lt(n == null ? void 0 : n.groupID) ? n.groupID : this.groupID || null, this.addedAsGroup = Lt(n == null ? void 0 : n.addedAsGroup) ? n.addedAsGroup : this.addedAsGroup || !1, this.score = Lt(n == null ? void 0 : n.score) ? n.score : this.score || null, this.bestScore = Lt(n == null ? void 0 : n.bestScore) ? n.bestScore : this.bestScore || {
      x: 0,
      y: 0,
      rot: null,
      total: null,
      group: null
    }, this.placementOrder = Lt(n == null ? void 0 : n.placementOrder) ? n.placementOrder : this.placementOrder || null, this.groupPlacementOrder = Lt(n == null ? void 0 : n.groupPlacementOrder) ? n.groupPlacementOrder : this.groupPlacementOrder || null, this.minSpacing = (n == null ? void 0 : n.minSpacing) ?? (this.minSpacing || 0), this.priority = (n == null ? void 0 : n.priority) ?? {};
  }
  initGuillotineData(n) {
    var i, r, s, o, a, l, h, c;
    this.guillotineData = rl({}, n == null ? void 0 : n.guillotineData, {
      firstShape: ((i = this == null ? void 0 : this.guillotineData) == null ? void 0 : i.firstShape) || null,
      myPhase: ((r = this == null ? void 0 : this.guillotineData) == null ? void 0 : r.myPhase) || null,
      myStripParent: ((s = this == null ? void 0 : this.guillotineData) == null ? void 0 : s.myStripParent) || null,
      myStripDirection: ((o = this == null ? void 0 : this.guillotineData) == null ? void 0 : o.myStripDirection) || null,
      stripShapeBatches: {
        subsetUsed: ((l = (a = this == null ? void 0 : this.guillotineData) == null ? void 0 : a.stripShapeBatches) == null ? void 0 : l.subsetUsed) || !1,
        groups: ((c = (h = this == null ? void 0 : this.guillotineData) == null ? void 0 : h.stripShapeBatches) == null ? void 0 : c.groups) || {}
      }
    });
  }
  cloneGuillotineData() {
    var n;
    return (n = this.guillotineData) != null && n.myStripParent && (yr(this.guillotineData.myStripParent) || Cr(this.guillotineData.myStripParent)) && (this.guillotineData.myStripParent = this.guillotineData.myStripParent.compress()), structuredClone(this.guillotineData);
  }
  getCopyNumber() {
    return parseInt(this.id.split(".").pop());
  }
  getMinSpacing(n, i = !1) {
    var o, a;
    if (!n) return 0;
    let r = (this == null ? void 0 : this.minSpacing) || ((a = (o = n.saw) == null ? void 0 : o.options) == null ? void 0 : a.minSpacing) || 0;
    const s = n.getBladeWidth();
    return s > r && (r = s), i && (r -= s), r < 0 && (r = 0), r;
  }
  validateShape(n) {
    ["orientationLock", "banding"].forEach((i) => {
      this.createIssues(si[i](n[i]));
    }), this.machining && this.machining.validateEverything(this);
  }
  //individual shape weighting
  /* calculateWeighting()
  	{
  		// const aspect = this.w / this.l;
  		if ( aspect > 0.5 )
  		{
  			//cater for small parts
  			const area = s.getArea();
  			const areaPercentage = area / maxArea;
  
  			if ( areaPercentage <= 0.1 )
  			{
  				s.weighting.edge = areaPercentage;
  			}
  		}
  		//the closer to zero, the higher the edge weighting
  		this.weighting.edge = 1 - aspect;
  		this.weighting.edge *= 2;
  	} */
  update(n) {
    n = yo(n), this.initShape(n, !0), this.updateRectangle(n);
  }
  //banding
  set banding(n) {
    if (this._banding = Object.fromEntries(
      Ps.map((i) => [i, !1])
    ), !!bo(n))
      for (const i of Ps)
        this._banding[i] = Lt(n == null ? void 0 : n[i]) ? n[i] : !1;
  }
  get banding() {
    return this._banding;
  }
  //get an array of banding in the order L1, L2, W1, W2
  get bandingArray() {
    return Tb(this._banding);
  }
  get finish() {
    return this._finish;
  }
  get FacesArray() {
    return pr.map((n) => {
      var i;
      return (i = this.finish) == null ? void 0 : i[n];
    });
  }
  set finish(n) {
    if (this._finish = Object.fromEntries(
      pr.map((i) => [i, ""])
    ), !!bo(n))
      for (const i of pr)
        this._finish[i] = Lt(n == null ? void 0 : n[i]) ? n[i] : "";
  }
  //compress for saving / transfer
  save() {
    var n, i, r;
    delete this.group, (n = this == null ? void 0 : this.guillotineData) == null || delete n.stripShapeBatches, this.stockId = (i = this == null ? void 0 : this.stock) == null ? void 0 : i.id, delete this.stock, delete this.score, delete this.bestScore, Ps.every((s) => {
      var o;
      return !((o = this._banding) != null && o[s]);
    }) && (this._banding = null), pr.every((s) => {
      var o;
      return !((o = this._finish) != null && o[s]);
    }) && (this._finish = null), Pb(this), (r = this.guillotineData) == null || delete r.myStripParent, delete this.score, delete this.inGroup, delete this.groupID, delete this.addedAsGroup, delete this.proximity;
  }
  isExactFit(n) {
    return this.orientationLock === "w" && this.w === n.w || this.orientationLock === "l" && this.l === n.l || !this.orientationLock && this.w === n.w && this.l === n.l;
  }
  addToStock(n) {
    this.stock = n, this.stockId = n.id, this.added = !0, this.inGroup = !1, n.used = !0, this.grain = n.grain, n != null && n.grain && this.rot && (this.grain = go(n.grain)), $0([
      () => Is(this.isInsideStock(n), `shape ${this.id} is not inside stock`).to.be.true
    ]);
  }
  removeFromStock() {
    this.placementOrder = null, this.stock = null, this.stockId = null, this.added = !1, this.addedAsGroup = !1, this == null || delete this.isFirstShape, Cr(this) && this.shapes.forEach((n) => n.removeFromStock());
  }
  setBestScore(n, i = null) {
    const r = {
      x: n.x,
      y: n.y,
      rot: n.rot,
      total: n.score.total,
      score: n.score,
      group: n.group,
      weighting: null,
      point: i
    };
    this.bestScore = r;
  }
  resetBestScore() {
    const n = {
      x: 0,
      y: 0,
      rot: null,
      total: null,
      group: null
    };
    this.bestScore = n, this.resetGuillotineData(!0);
  }
  resetScore() {
    this.score = null, this.resetGuillotineData(!0);
  }
  resetBothScores() {
    this.resetBestScore(), this.resetScore();
  }
  resetPosition() {
    this.x = 0, this.y = 0, this.placementOrder = null, this.resetGuillotineData(!0);
  }
  resetGroupData() {
    this.inGroup = !1, this.group = null, this.groupID = null, this.groupPlacementOrder = null, this.grain = null;
  }
  resetGuillotineData(n = !1) {
    var r, s;
    const i = {
      firstShape: !1,
      myPhase: null,
      myStripDirection: null,
      stripShapeBatches: {
        subsetUsed: !1,
        groups: {}
      }
    };
    n && (i.stripShapeBatches.groups = (s = (r = this.guillotineData) == null ? void 0 : r.stripShapeBatches) == null ? void 0 : s.groups), this.guillotineData = i;
  }
  reset(n = !1, i = !0, r = !1) {
    this.removeFromStock(), this.resetPosition(), this.setRotation(0), this.placementOrder = null, this == null || delete this.isFirstShape, this.patternMatch = !1, n || this.resetBothScores(), r || this.resetGroupData(), this.resetGuillotineData(i);
  }
  round() {
    return {
      x: Math.round(this.x),
      y: Math.round(this.y),
      l: Math.round(this.l),
      w: Math.round(this.w)
    };
  }
  //get an array of allowed rotations for this container
  getAllowedRotations(n) {
    const i = [];
    for (let r = 0; r <= 1; r++)
      this.canRotate(r, n) && this.willItFit(n, r) && i.push(r);
    return i;
  }
  /**
   * checks if a shape can rotate
   * checks for fit and grain
   * does not change the shape's rotation during the checks
   * @returns false if cannot rotate or can rotate but won't fit
   */
  canRotate(n = null, i = null) {
    if (!Lt(n))
      throw new Error("no rotation provided to canRotate");
    if (n === !0 && (n = 1), n === !1 && (n = 0), this.isSquare() && n || i && !this.willItFit(i, n))
      return !1;
    const r = this.getNecessaryOrientation(i);
    return !(r === "l" && n === 1 || r === "w" && n === 0);
  }
  /**
   * can a shape rotate to produce the specified dimensions on a specific side
   * @todo tests
   */
  canRotateToDimension(n, i, r = null) {
    if (!i) throw new Error("requiredSide not supplied to canRotateToDimension");
    if (this.l !== n && this.w !== n) return !1;
    if (this.l === this.w) return !0;
    const s = this.getLongSide(), o = this.getShortSide();
    if (r) {
      if (i === "l") {
        if (s === n && this.canRotate(0, r) || o === n && this.canRotate(1, r)) return !0;
      } else if (i === "w" && (o === n && this.canRotate(0, r) || s === n && this.canRotate(1, r)))
        return !0;
    } else if (this.orientationLock) {
      if (this.orientationLock === "l")
        return i === "l" && n === s;
      if (this.orientationLock === "w")
        return i === "l" && n === o;
    }
    return !1;
  }
  canRotateToDimensionRange(n, i, r, s = null) {
    if (!r) throw new Error("requiredSide not supplied to canRotateToDimensionRange");
    if (this.l >= n && this.l <= i || this.w >= n && this.w <= i) {
      if (this.l === this.w) return !0;
      const o = this.getLongSide(), a = this.getShortSide();
      if (s) {
        if (r === "l") {
          if (o >= n && o <= i && this.canRotate(0, s) || a >= n && a <= i && this.canRotate(1, s)) return !0;
        } else if (r === "w" && (a >= n && a <= i && this.canRotate(0, s) || o >= n && o <= i && this.canRotate(1, s)))
          return !0;
      } else if (this.orientationLock) {
        if (this.orientationLock === "l")
          return r === "l" && o >= n && o <= i;
        if (this.orientationLock === "w")
          return r === "l" && a >= n && a <= i;
      }
    }
    return !1;
  }
  rotateToDimension(n, i, r) {
    if (!i) throw new Error("requiredSide not supplied to rotateToDimension");
    if (this.l !== n && this.w !== n) return !1;
    if (this.l === this.w) return !0;
    const s = this.getLongSide(), o = this.getShortSide();
    if (i === "l") {
      if (s === n && this.canRotate(0, r)) return this.setRotation(0);
      if (o === n && this.canRotate(1, r)) return this.setRotation(1);
    } else if (i === "w") {
      if (o === n && this.canRotate(0, r)) return this.setRotation(0);
      if (s === n && this.canRotate(1, r)) return this.setRotation(1);
    }
    return !1;
  }
  //get the orientation lock catering for container grain
  convertShapeGrainToOrientationLock(n) {
    if (!n) throw new Error("container not supplied to convertShapeGrainToOrientationLock");
    if (!ef(n)) throw new Error("container is not a container");
    if (Cr(this)) return this.orientationLock;
    if (!Lt(this.orientationLock)) return null;
    const i = n.getStock();
    return Lt(i.grain) ? this.orientationLock === i.grain ? "l" : "w" : this.orientationLock;
  }
  /**
   * get the orientation lock catering for container grain
   */
  getNecessaryOrientation(n) {
    if (!n) return this.orientationLock;
    if (Cr(this)) return this.orientationLock;
    if (!Lt(this.orientationLock)) return null;
    if (ef(n))
      return this.convertShapeGrainToOrientationLock(n);
    if (Cr(this) || bd(this))
      return Lt(this.orientationLock) ? this.orientationLock : null;
  }
  /**
   * get the required grain rotation
   * checks for stock grain and part orientationLock
   * does not check for fit
   */
  getGrainRotation(n) {
    if (Cr(this)) return this.rot;
    if (!Lt(this.orientationLock)) return null;
    const i = n.getStock();
    return !this.orientationLock || !Lt(i == null ? void 0 : i.grain) ? null : this.isGroup() ? this.orientationLock === "l" ? 0 : 1 : this.orientationLock === (i == null ? void 0 : i.grain) ? 0 : 1;
  }
  /**
   * rotates the shape if allowed
   * checks for fit and grain
   * @returns false if cannot rotate or can rotate but won't fit
   */
  rotate(n = null, i = null) {
    return n === null && (n = this.rot === 0 ? 1 : 0), this.canRotate(n, i) ? (this.rot === n || this.swapDimensions(), !0) : !1;
  }
  swapDimensions() {
    [this.l, this.w] = [this.w, this.l];
  }
  forceRotate(n) {
    return n === null && (n = this.rot === 0 ? 1 : 0), this.rot === n || this.swapDimensions(), !0;
  }
  /**
   * rotates the shape if allowed
   * checks for fit and grain
   * @returns false if cannot rotate or can rotate but won't fit
   */
  setRotation(n = null, i = null) {
    return n ? n = 1 : n = 0, i && n && !this.willItFit(i, n) ? !1 : this.rotate(n, i);
  }
  /**
   * rotates the shape if allowed
   * checks for fit and grain
   * @returns false if cannot rotate or can rotate but won't fit
   */
  setRotationToOrientationLock(n) {
    if (!n)
      throw new Error("container not supplied to setRotationToOrientationLock");
    const i = this.getNecessaryOrientation(n);
    if (i === "l") return this.setRotation(0);
    if (i === "w") return this.setRotation(1);
  }
  setRotationToOrientationLockWithoutContainer() {
    if (this.orientationLock === "l") return this.setRotation(0);
    if (this.orientationLock === "w") return this.setRotation(1);
  }
  getBandingLength(n) {
    return !Cb(n) || !this.banding[n] ? 0 : n === "x1" || n === "x2" ? this.getShortSide() : n === "y1" || n === "y2" ? this.getLongSide() : c1(n) ? o1(this, n) : 0;
  }
  getPriority(n) {
    var r;
    if (!n) return 0;
    const i = n.parentID;
    return (r = this.priority) != null && r[i] ? this.priority[i] : 0;
  }
  clearPriority() {
    this.priority = {};
  }
  getPerimeterCutVectors() {
    var r;
    const n = (r = this.stock) != null && r.isStock() ? this.stock.getBladeWidth() / 2 : null;
    return [
      //bottom
      {
        x1: this.x - n,
        x2: this.x + this.l + n,
        y1: this.y - n,
        y2: this.y - n,
        type: "bottom"
      },
      //right
      {
        x1: this.x + this.l + n,
        x2: this.x + this.l + n,
        y1: this.y - n,
        y2: this.y + this.w + n,
        type: "right"
      },
      //top
      {
        x1: this.x - n,
        x2: this.x + this.l + n,
        y1: this.y + this.w + n,
        y2: this.y + this.w + n,
        type: "top"
      },
      //left
      {
        x1: this.x - n,
        x2: this.x - n,
        y1: this.y - n,
        y2: this.y + this.w + n,
        type: "left"
      }
    ];
  }
  /* getTrimmedDimensions()
  	{
  		if ( this.trimmed )
  			return {
  				l: this.l,
  				w: this.w
  			};
  
  		return {
  			l: this.l - this.trim.x1 - this.trim.x2,
  			w: this.w - this.trim.y1 - this.trim.y2
  		};
  	} */
  /**
   * create cuts around the perimeter of a shape
   * @param {Stock} stock
   * @returns {Array} cuts
   */
  createPerimeterCuts(n = null) {
    let i = [];
    if (n = n || this.stock, !n) throw new Error("stock is required to create a cut");
    return this.getPerimeterCutVectors().forEach((s) => {
      var o;
      return i.push(new Pc({
        stock: (o = this.stock) != null && o.isStock() ? this.stock : n,
        x1: s.x1,
        x2: s.x2,
        y1: s.y1,
        y2: s.y2,
        type: s.type
      }));
    }), i = i.filter((s) => s.isInsideStock()), i;
  }
  createOffset(n) {
    if (!this.stock) throw new Error("createOffset - stock not defined");
    const i = {
      x: this.x - n,
      y: this.y - n,
      l: this.l + n * 2,
      w: this.w + n * 2
    };
    return i.x < 0 && (i.x = 0, i.l -= n), i.y < 0 && (i.y = 0, i.w -= n), i.x + i.l > this.stock.l && (i.l = this.stock.l - i.x), i.y + i.w > this.stock.w && (i.w = this.stock.w - i.y), i;
  }
  setPositionToBestScore() {
    this.setRotation(this.bestScore.rot), this.x = this.bestScore.x, this.y = this.bestScore.y;
  }
  /**
   * will this shape fit in a container
   */
  willItFit(n, i = null) {
    return h1(n, this, i);
  }
  clone(n = null) {
    const i = this.id.split(".");
    n ? i.pop() : (n = i.pop(), n++), i.push(n);
    const r = i.join("."), s = this.stock;
    this.stock = null;
    const o = structuredClone(this);
    return o.stock = s, o.id = r, o.added = !1, o.duplicate = !0, delete o.score, delete o.bestScore, delete o.stock, delete o.placementOrder, delete o.inGroup, delete o.addedAsGroup, delete o.groupID, delete o.isFirstShape, new is(o);
  }
  //this is a compressed version of the shape to help with memory management
  compress() {
    const n = this.cloneGuillotineData();
    return n.myStripParent = zb(this.guillotineData.myStripParent) ? this.guillotineData.myStripParent.id : this.guillotineData.myStripParent, {
      id: this.id,
      x: this.added ? this.x : 0,
      y: this.added ? this.y : 0,
      l: this.l,
      w: this.w,
      added: this.added,
      guillotineData: n,
      placementOrder: this.placementOrder,
      bestScore: this.bestScore,
      inGroup: this.inGroup,
      groupID: this.groupID,
      addedAsGroup: this.addedAsGroup,
      groupPlacementOrder: this.groupPlacementOrder,
      minSpacing: this.minSpacing,
      cloneType: "shape",
      priority: Object.assign({}, this.priority)
    };
  }
  isTooCloseToEdges(n) {
    var r, s;
    const i = ((s = (r = n.saw) == null ? void 0 : r.options) == null ? void 0 : s.minSpacing) || this.minSpacing;
    return i ? this.getDistancesToContainerEdges(n).some((o) => o > 0 && o <= i) : !1;
  }
  validateStripShapeBatches() {
    const n = Object.values(this.guillotineData.stripShapeBatches.groups);
    for (let i = 0; i < n.length; i++) {
      const r = n[i];
      if (r.id !== this.id)
        throw new Error(`strip shape group id does not match shape id ${this.id} ${r.id} ${i}`);
      if (![this.l, this.w].includes(r.dimension))
        throw new Error(`strip shape group dimension does not match shape dimensions ${this.id} ${r.id} ${i} ${this.l} ${this.w} ${r.dimension}`);
    }
  }
  getStripShapeBatchData(n) {
    var i;
    return typeof n != "number" || !((i = this == null ? void 0 : this.guillotineData) != null && i.stripShapeBatches) || !this.guillotineData.stripShapeBatches.groups || !(n in this.guillotineData.stripShapeBatches.groups) ? !1 : this.guillotineData.stripShapeBatches.groups[n];
  }
  isInStripShapeBatch(n) {
    return !!this.getStripShapeBatchData(n);
  }
  isStacked() {
    return this.added && this.stock && this.stock.isStacked();
  }
}
class d1 extends yd {
  constructor(n) {
    var t = (...Mk) => (super(...Mk), H(this, "firstShape"), H(this, "cuts"), H(this, "phase"), H(this, "merged"), H(this, "children"), H(this, "siblings"), //used by vis only
    H(this, "parent"), H(this, "segmentType"), H(this, "completed"), //used by vis only
    H(this, "rowSegment"), //used by cuts
    H(this, "placementOrder"), H(this, "hasBeamTrim"), H(this, "cutDirection"), this);
    if (n) {
      if (n.preventAutoRotation = !0, t(n), this.validateSegment(n), this.issues.length)
        throw new Error(`Segment validation failed - ${this.issues.join(" ")}`);
      delete this.trim, delete this.trimmed, this.shapes = Lt(n == null ? void 0 : n.shapes) ? n.shapes : [], this.firstShape = Lt(n == null ? void 0 : n.firstShape) ? n.firstShape : null, this.cuts = [], this.phase = Lt(n == null ? void 0 : n.phase) ? n.phase : null, this.merged = Lt(n == null ? void 0 : n.merged) ? n.merged : !1, this.parent = Lt(n == null ? void 0 : n.parent) ? n.parent : null, this.children = Lt(n == null ? void 0 : n.children) ? n.children : [], this.siblings = Lt(n == null ? void 0 : n.siblings) ? n.siblings : [], this.offcut = Lt(n == null ? void 0 : n.offcut) ? n.offcut : !1, this.segmentType = Lt(n == null ? void 0 : n.segmentType) ? n.segmentType : null, this.placementOrder = null, this.cutDirection = Lt(n == null ? void 0 : n.cutDirection) ? n.cutDirection : "l", this.hasBeamTrim = Lt(n == null ? void 0 : n.hasBeamTrim) ? n.hasBeamTrim : !1;
    }
  }
  validateSegment(n) {
    var i, r;
    (Ue.lessThanOrEqualTo(n.w, 0) || Ue.lessThanOrEqualTo(n.l, 0)) && this.issues.push({ message: `Zero / negative dimension - l: ${n.l}, w: ${n.w}.` }), (Ue.lessThan(n.x, 0) || Ue.lessThan(n.y, 0)) && this.issues.push({ message: `Negative position - x: ${n == null ? void 0 : n.x}, y: ${n == null ? void 0 : n.y}.` }), n != null && n.stock && (Ue.greaterThan(n.x + n.l, n.stock.l) || Ue.greaterThan(n.y + n.w, n.stock.w)) && this.issues.push({ message: `Outside of stock ${n.stock.id} - x: ${n.x}, y: ${n.y}, l: ${n.l}, w: ${n.w}, sl: ${(i = n == null ? void 0 : n.stock) == null ? void 0 : i.l}, sw: ${(r = n == null ? void 0 : n.stock) == null ? void 0 : r.w}.` });
  }
  //compress for saving / transfer
  save() {
    var n;
    this.children = this.children.map((i) => ({
      id: i.id,
      x: i.x,
      y: i.y,
      l: i.l,
      w: i.w,
      offcut: i.offcut
    })), this.stockId = (this == null ? void 0 : this.stockId) ?? ((n = this == null ? void 0 : this.stock) == null ? void 0 : n.id), delete this.stock, delete this.shapes, delete this.saw, delete this.siblings, delete this.parent, delete this.trim, this.algoBenchmark = null;
  }
  getBladeWidth() {
    return this.stock.getBladeWidth();
  }
  /**
   * create a normalised shape list to allow searching for duplicates
   */
  getNormalisedShapes(n) {
    return n.map((i) => ({
      x: i.x - this.x,
      y: i.y - this.y,
      l: i.l,
      w: i.w
    }));
  }
  reset() {
    this.stock.used = !1, this.children = [], this.siblings = [], this.parent = null, this.cuts = [], this.phase = null;
  }
}
class js extends is {
  //used for sorting
  constructor(n) {
    var i, r;
    if (n = yo(n), !((i = n == null ? void 0 : n.shapes) != null && i.length))
      throw new Error("attempting to create a group with no shapes");
    n.preventAutoRotation = !0;
    super(n);
    H(this, "shapes");
    H(this, "positions");
    H(this, "direction");
    H(this, "container");
    H(this, "outOfBounds");
    H(this, "collision");
    H(this, "counter", 0);
    H(this, "type");
    H(this, "efficiency");
    this.q = 1, delete this._banding, delete this._finish, delete this._trim, this.shapes = n.shapes, this.positions = (r = n == null ? void 0 : n.positions) != null && r.length ? n.positions : [], this.direction = n.direction, this.container = n.container, this.type = (n == null ? void 0 : n.type) ?? "auto", this.initGroup();
  }
  initGroup() {
    var n;
    (n = this == null ? void 0 : this.shapes) != null && n.length && (this.setShapePositions(), this.w > this.l ? this.orientationLock = "w" : this.orientationLock = "l", this.container && (this.efficiency = this[this.direction] / this.container[this.direction]));
  }
  setShapePositions() {
    if (!this.container) return;
    this.positions = [], this.type !== "user" && this.sortShapes();
    let n = 0;
    const i = q2(this.direction);
    this.shapes.forEach((o, a) => {
      this.positions.push({
        shape: o.id,
        [i]: n,
        [$2(i)]: 0,
        rot: o.rot.valueOf()
      }), o.inGroup = !0, n += a === this.shapes.length - 1 ? o[this.direction] : o[this.direction] + o.getMinSpacing(this.container);
    }), this[this.direction] = n;
    const r = go(this.direction), s = this.shapes.reduce((o, a) => a[r] > o ? a[r] : o, 0);
    if (this[r] = s, q0()) {
      const o = this.shapes.slice(0, -1).reduce((h, c) => h + c.getMinSpacing(this.container), 0), l = this.shapes.reduce((h, c) => h + c[this.direction], 0) + o;
      $0([
        () => Is(Ue.equalTo(l, this[this.direction]), "group dimension is incorrect in direction").to.be.true,
        () => Is(n, "currentPosition is incorrect in direction").to.equal(this[this.direction]),
        () => Is(s, "group dimension in other direction is not correct").to.equal(this[r])
      ]);
    }
    if (this.w > this.container.w || this.l > this.container.l)
      throw new Error(`group ${this.id} is bigger than container - group ${this.l}x${this.w}, container ${this.container.l}x${this.container.w}`);
  }
  //update the shape spacing and overall group dimensions to account for min spacing
  updateShapeSpacing(n) {
    this.container = n, this.setShapePositions(), this.w > this.l ? this.orientationLock = "w" : this.orientationLock = "l", this.container && (this.efficiency = this[this.direction] / this.container[this.direction]);
  }
  //get the area of the shapes (does not include blade width) - overwrites the rectangle method
  getArea() {
    return this.shapes.reduce((n, i) => n + i.getArea(), 0);
  }
  destroy() {
    super.reset();
    for (const n of this.shapes) n.reset(!1, !1, !1);
  }
  reset() {
    super.reset();
    for (const n of this.shapes) n.reset(!1, !1, !0);
  }
  /**
   * orientate all the shapes correctly to fit in the group
   */
  orientateShapes(n) {
    this.shapes.forEach((i) => {
      const r = this.positions.find((o) => o.shape === i.id);
      if (!r) throw new Error("position not found for shape in group");
      if (!i.rotate(r.rot, n)) throw new Error("orientateShapes - unable to rotate shape in group");
    });
  }
  /**
   * sort the shapes by size
   */
  sortShapes() {
    const n = go(this.direction);
    this.shapes.sort((i, r) => r[n] === i[n] ? r[this.direction] === i[this.direction] ? i.id.localeCompare(r.id, void 0, { numeric: !0 }) : r[this.direction] - i[this.direction] : r[n] - i[n]);
  }
  /**
   * place the group shapes on the stock
   */
  placeMyShapes(n) {
    if (!n) throw new Error("placeShapes requires stock");
    this.addToStock(n);
    for (let i = 0; i < this.shapes.length; i++) {
      const r = this.shapes[i];
      r.addToStock(n);
      const s = this.positions.find((l) => l.shape === r.id);
      if (!s) throw new Error("position not found for shape in group");
      if (r.x = this.x + s.x, r.y = this.y + s.y, !r.rotate(s.rot, n)) throw new Error("placeMyShapes - unable to rotate shape in group");
      i === 0 && this.x === 0 && this.y === 0 && (r.isFirstShape = !0), r.addedAsGroup = this.id, r.inGroup = !1, r.score = this.score;
      const a = r.guillotineData.stripShapeBatches;
      r.guillotineData = this.cloneGuillotineData(), r.guillotineData.stripShapeBatches = a, r.bestScore = this.bestScore, typeof this.placementOrder == "number" && (r.groupPlacementOrder = i, r.placementOrder = this.placementOrder + i / 1e6);
    }
  }
  //this is for groups which are created once and reused between stock e.g. user groups
  orientateCorrectly(n) {
    this.orientateShapes(n), this.setRotationToOrientationLock(n);
  }
  clone(n = []) {
    const r = `g${parseInt(this.id.split("g")[1]) + 1}`, s = this.shapes, o = this.container, a = this.stock;
    this.shapes = [], this.container = null, this.stock = null;
    const l = structuredClone(this);
    return this.shapes = s, this.container = o, this.stock = a, l.container = this.container, l.shapes = n, l.id = r, new js(l);
  }
  compress() {
    const n = super.compress.call(this);
    return n.direction = this.direction, n.positions = structuredClone(this.positions), n.shapes = this.shapes.map((i) => i.compress()), n.type = this.type, n.cloneType = "group", n;
  }
}
function jb(e, t, n, i) {
  return t.filter((r, s) => {
    var o, a;
    return e.stockMatch.material[s] = null, e.stockMatch.thickness[s] = null, e.stockMatch.width[s] = null, e.stockMatch.fit[s] = null, (yr(e) || bd(e)) && (h1(r, e) ? e.stockMatch.fit[s] = !0 : e.stockMatch.fit[s] = !1), n ? !(r != null && r.material) && !(e != null && e.material) || ((o = r == null ? void 0 : r.material) == null ? void 0 : o.toLowerCase()) === ((a = e == null ? void 0 : e.material) == null ? void 0 : a.toLowerCase()) ? e.stockMatch.material[s] = !0 : e.stockMatch.material[s] = !1 : e.stockMatch.material[s] = !0, i ? Lt(e.t) && Lt(r.t) ? (yr(e) && Ue.equalTo(e.t, r.t) || e.t === r.t) && (e.stockMatch.thickness[s] = !0) : e.stockMatch.thickness[s] = !1 : e.stockMatch.thickness[s] = !0, r.type === "linear" ? yr(e) && (e.canRotate(0, r) && Ue.equalTo(e.w, r.w) || e.canRotate(1, r) && Ue.equalTo(e.l, r.w) ? e.stockMatch.width[s] = !0 : e.stockMatch.width[s] = !1) : e.stockMatch.width[s] = !0, e.stockMatch.fit[s] && e.stockMatch.material[s] && e.stockMatch.thickness[s] && e.stockMatch.width[s];
  });
}
function Bb(e, t, n) {
  const i = fr(e[0]);
  if (i && (t = t.map((c) => {
    const d = new ns(c);
    return d.trimDimensions(), d;
  }), e = e.map((c) => {
    const d = new is(c);
    return d.trimDimensions(), d;
  })), Du(t[0]) && (t = t.map((c, d) => (c.id = `${d.toString()}.0`, new ns(c)))), e.some((c) => Lt(c.stockLock) && c.stockLock.length)) return;
  t = t.filter((c) => c.autoAdd === !0 || Lt(c.q) && c.q > 0);
  const s = t.some((c) => Lt(c.material)), o = t.some((c) => Lt(c.t)), a = /* @__PURE__ */ new Set();
  for (const c of e) {
    c.stockMatch = {
      material: [],
      thickness: [],
      width: [],
      fit: []
    };
    const d = jb(c, t, s, o);
    if (c.stockMatch.fit = !c.stockMatch.fit.every((g) => g === !1), c.stockMatch.material = !c.stockMatch.material.every((g) => g === !1), c.stockMatch.thickness = !c.stockMatch.thickness.every((g) => g === !1), c.stockMatch.width = !c.stockMatch.width.every((g) => g === !1), !i) {
      if (d.length) {
        const g = d.map((p) => p.getParentID());
        c.stockLock = g, g.forEach((p) => a.add(p));
      } else if (c.stockMatch.fit)
        c.stockMatch.material || c.issues.push({ message: `materials must match - could not find any stock with ${c.material ? c.material + " material" : "no material set"}` }), c.stockMatch.thickness || c.issues.push({ message: `thicknesses must match - could not find any stock with ${c.t ? "thickness " + c.t : "no thickness set"}` }), n === "linear" && !c.stockMatch.width && c.issues.push({ message: `widths must match for linear calculations - could not find any stock with ${c.w ? "width " + c.w : "no width set"}` });
      else {
        const g = c.getTrimmedDimensions();
        c.issues.push({ message: `${g.l.toFixed()}x${g.w.toFixed()} will not fit on any stock - check dimensions, min spacing, trim & orientation lock` });
      }
      c.stockMatch = null;
    }
  }
  const l = e.filter((c) => !c.stockLock || !c.stockLock.length).sort(Hu.ID), h = t.filter((c) => !a.has(c.parentID)).sort(Hu.ID);
  return t = t.filter((c) => es(c)).filter((c) => a.has(c.parentID)), (s || o) && (e = e.filter((c) => {
    var d;
    return (d = c == null ? void 0 : c.stockLock) == null ? void 0 : d.length;
  })), {
    stockList: t,
    unusableStock: h,
    shapeList: e,
    unusableShapes: l
  };
}
function qb(e) {
  if (!e.length) return "n";
  const t = e.map((n) => n.grain).filter((n) => n);
  return t.length ? t.every((n) => n === "l") ? "l" : t.every((n) => n === "w") ? "w" : t.some((n) => n === "l" || n === "w") ? "y" : "n" : "n";
}
function $b(e) {
  return e.shapes !== void 0;
}
function Cr(e) {
  return e instanceof js && e.type !== "user";
}
function bd(e) {
  return e instanceof js && e.type === "user";
}
function io(e) {
  return e instanceof Lb;
}
function Du(e) {
  return e instanceof f1;
}
function fr(e) {
  return e instanceof md;
}
function es(e) {
  return e instanceof ns;
}
function ef(e) {
  return e instanceof yd;
}
function yr(e) {
  return e instanceof is && !(e instanceof js);
}
function zb(e) {
  return e instanceof is || e instanceof js;
}
function Ub(e) {
  return e instanceof d1;
}
function Wb(e) {
  return e instanceof Fs;
}
function Hb(e) {
  return !e || typeof e != "string" ? "" : e.toUpperCase();
}
function ec(e, t) {
  return t.reduce((n, i) => n && n[i] !== void 0 ? n[i] : void 0, e) !== void 0;
}
function vn(e, t) {
  return t.reduce((n, i) => n && n[i] !== void 0 ? n[i] : void 0, e);
}
function Lt(e) {
  return !(e === void 0 || e === null || e === "" || typeof e == "object" && !Object.values(e).length);
}
function bo(e, t = !0) {
  return !Lt(e) || typeof e != "object" ? !1 : !!Object.values(e).some((i) => !(!Lt(i) || t && !i));
}
function Gb(e) {
  return e != null && e.length ? e.filter((t) => t.used && (t.stack === !1 || typeof t.stack == "number")) : [];
}
function Vb() {
  const e = document.documentElement;
  return "requestFullscreen" in e || "webkitRequestFullscreen" in e || "mozRequestFullScreen" in e || "msRequestFullscreen" in e;
}
function Ll(e) {
  return e ? (e = e.normalize("NFKD").replace(/[\u0300-\u036f]/g, "").replace(/[^ a-z0-9._\-|]/gim, ""), e.trim()) : null;
}
function p1(e, t = 100) {
  return e ? (e = e.trim(), e = e.substring(0, t), e) : "";
}
function en(e) {
  "@babel/helpers - typeof";
  return en = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(t) {
    return typeof t;
  } : function(t) {
    return t && typeof Symbol == "function" && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t;
  }, en(e);
}
var oi = Uint8Array, Di = Uint16Array, vd = Int32Array, Cc = new oi([
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  1,
  1,
  1,
  1,
  2,
  2,
  2,
  2,
  3,
  3,
  3,
  3,
  4,
  4,
  4,
  4,
  5,
  5,
  5,
  5,
  0,
  /* unused */
  0,
  0,
  /* impossible */
  0
]), Tc = new oi([
  0,
  0,
  0,
  0,
  1,
  1,
  2,
  2,
  3,
  3,
  4,
  4,
  5,
  5,
  6,
  6,
  7,
  7,
  8,
  8,
  9,
  9,
  10,
  10,
  11,
  11,
  12,
  12,
  13,
  13,
  /* unused */
  0,
  0
]), nf = new oi([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]), g1 = function(e, t) {
  for (var n = new Di(31), i = 0; i < 31; ++i)
    n[i] = t += 1 << e[i - 1];
  for (var r = new vd(n[30]), i = 1; i < 30; ++i)
    for (var s = n[i]; s < n[i + 1]; ++s)
      r[s] = s - n[i] << 5 | i;
  return { b: n, r };
}, m1 = g1(Cc, 2), y1 = m1.b, rf = m1.r;
y1[28] = 258, rf[258] = 28;
var b1 = g1(Tc, 0), Yb = b1.b, $p = b1.r, sf = new Di(32768);
for (var pn = 0; pn < 32768; ++pn) {
  var As = (pn & 43690) >> 1 | (pn & 21845) << 1;
  As = (As & 52428) >> 2 | (As & 13107) << 2, As = (As & 61680) >> 4 | (As & 3855) << 4, sf[pn] = ((As & 65280) >> 8 | (As & 255) << 8) >> 1;
}
var Er = function(e, t, n) {
  for (var i = e.length, r = 0, s = new Di(t); r < i; ++r)
    e[r] && ++s[e[r] - 1];
  var o = new Di(t);
  for (r = 1; r < t; ++r)
    o[r] = o[r - 1] + s[r - 1] << 1;
  var a;
  if (n) {
    a = new Di(1 << t);
    var l = 15 - t;
    for (r = 0; r < i; ++r)
      if (e[r])
        for (var h = r << 4 | e[r], c = t - e[r], d = o[e[r] - 1]++ << c, g = d | (1 << c) - 1; d <= g; ++d)
          a[sf[d] >> l] = h;
  } else
    for (a = new Di(i), r = 0; r < i; ++r)
      e[r] && (a[r] = sf[o[e[r] - 1]++] >> 15 - e[r]);
  return a;
}, Ms = new oi(288);
for (var pn = 0; pn < 144; ++pn)
  Ms[pn] = 8;
for (var pn = 144; pn < 256; ++pn)
  Ms[pn] = 9;
for (var pn = 256; pn < 280; ++pn)
  Ms[pn] = 7;
for (var pn = 280; pn < 288; ++pn)
  Ms[pn] = 8;
var gl = new oi(32);
for (var pn = 0; pn < 32; ++pn)
  gl[pn] = 5;
var Kb = /* @__PURE__ */ Er(Ms, 9, 0), Jb = /* @__PURE__ */ Er(Ms, 9, 1), Xb = /* @__PURE__ */ Er(gl, 5, 0), Zb = /* @__PURE__ */ Er(gl, 5, 1), bh = function(e) {
  for (var t = e[0], n = 1; n < e.length; ++n)
    e[n] > t && (t = e[n]);
  return t;
}, lr = function(e, t, n) {
  var i = t / 8 | 0;
  return (e[i] | e[i + 1] << 8) >> (t & 7) & n;
}, vh = function(e, t) {
  var n = t / 8 | 0;
  return (e[n] | e[n + 1] << 8 | e[n + 2] << 16) >> (t & 7);
}, wd = function(e) {
  return (e + 7) / 8 | 0;
}, v1 = function(e, t, n) {
  return (n == null || n > e.length) && (n = e.length), new oi(e.subarray(t, n));
}, Qb = [
  "unexpected EOF",
  "invalid block type",
  "invalid length/literal",
  "invalid distance",
  "stream finished",
  "no stream handler",
  ,
  "no callback",
  "invalid UTF-8 data",
  "extra field too long",
  "date not in range 1980-2099",
  "filename too long",
  "stream finishing",
  "invalid zip data"
  // determined by unknown compression method
], cr = function(e, t, n) {
  var i = new Error(t || Qb[e]);
  if (i.code = e, Error.captureStackTrace && Error.captureStackTrace(i, cr), !n)
    throw i;
  return i;
}, tv = function(e, t, n, i) {
  var r = e.length, s = 0;
  if (!r || t.f && !t.l)
    return n || new oi(0);
  var o = !n, a = o || t.i != 2, l = t.i;
  o && (n = new oi(r * 3));
  var h = function(Dt) {
    var Ut = n.length;
    if (Dt > Ut) {
      var Wt = new oi(Math.max(Ut * 2, Dt));
      Wt.set(n), n = Wt;
    }
  }, c = t.f || 0, d = t.p || 0, g = t.b || 0, p = t.l, b = t.d, x = t.m, N = t.n, v = r * 8;
  do {
    if (!p) {
      c = lr(e, d, 1);
      var w = lr(e, d + 1, 3);
      if (d += 3, w)
        if (w == 1)
          p = Jb, b = Zb, x = 9, N = 5;
        else if (w == 2) {
          var G = lr(e, d, 31) + 257, R = lr(e, d + 10, 15) + 4, O = G + lr(e, d + 5, 31) + 1;
          d += 14;
          for (var $ = new oi(O), z = new oi(19), A = 0; A < R; ++A)
            z[nf[A]] = lr(e, d + A * 3, 7);
          d += R * 3;
          for (var _ = bh(z), I = (1 << _) - 1, M = Er(z, _, 1), A = 0; A < O; ) {
            var st = M[lr(e, d, I)];
            d += st & 15;
            var k = st >> 4;
            if (k < 16)
              $[A++] = k;
            else {
              var W = 0, U = 0;
              for (k == 16 ? (U = 3 + lr(e, d, 3), d += 2, W = $[A - 1]) : k == 17 ? (U = 3 + lr(e, d, 7), d += 3) : k == 18 && (U = 11 + lr(e, d, 127), d += 7); U--; )
                $[A++] = W;
            }
          }
          var Q = $.subarray(0, G), Z = $.subarray(G);
          x = bh(Q), N = bh(Z), p = Er(Q, x, 1), b = Er(Z, N, 1);
        } else
          cr(1);
      else {
        var k = wd(d) + 4, T = e[k - 4] | e[k - 3] << 8, D = k + T;
        if (D > r) {
          l && cr(0);
          break;
        }
        a && h(g + T), n.set(e.subarray(k, D), g), t.b = g += T, t.p = d = D * 8, t.f = c;
        continue;
      }
      if (d > v) {
        l && cr(0);
        break;
      }
    }
    a && h(g + 131072);
    for (var ct = (1 << x) - 1, St = (1 << N) - 1, P = d; ; P = d) {
      var W = p[vh(e, d) & ct], B = W >> 4;
      if (d += W & 15, d > v) {
        l && cr(0);
        break;
      }
      if (W || cr(2), B < 256)
        n[g++] = B;
      else if (B == 256) {
        P = d, p = null;
        break;
      } else {
        var V = B - 254;
        if (B > 264) {
          var A = B - 257, J = Cc[A];
          V = lr(e, d, (1 << J) - 1) + y1[A], d += J;
        }
        var nt = b[vh(e, d) & St], gt = nt >> 4;
        nt || cr(3), d += nt & 15;
        var Z = Yb[gt];
        if (gt > 3) {
          var J = Tc[gt];
          Z += vh(e, d) & (1 << J) - 1, d += J;
        }
        if (d > v) {
          l && cr(0);
          break;
        }
        a && h(g + 131072);
        var yt = g + V;
        if (g < Z) {
          var vt = s - Z, Rt = Math.min(Z, yt);
          for (vt + g < 0 && cr(3); g < Rt; ++g)
            n[g] = i[vt + g];
        }
        for (; g < yt; ++g)
          n[g] = n[g - Z];
      }
    }
    t.l = p, t.p = P, t.b = g, t.f = c, p && (c = 1, t.m = x, t.d = b, t.n = N);
  } while (!c);
  return g != n.length && o ? v1(n, 0, g) : n.subarray(0, g);
}, Zr = function(e, t, n) {
  n <<= t & 7;
  var i = t / 8 | 0;
  e[i] |= n, e[i + 1] |= n >> 8;
}, Qa = function(e, t, n) {
  n <<= t & 7;
  var i = t / 8 | 0;
  e[i] |= n, e[i + 1] |= n >> 8, e[i + 2] |= n >> 16;
}, wh = function(e, t) {
  for (var n = [], i = 0; i < e.length; ++i)
    e[i] && n.push({ s: i, f: e[i] });
  var r = n.length, s = n.slice();
  if (!r)
    return { t: x1, l: 0 };
  if (r == 1) {
    var o = new oi(n[0].s + 1);
    return o[n[0].s] = 1, { t: o, l: 1 };
  }
  n.sort(function(D, G) {
    return D.f - G.f;
  }), n.push({ s: -1, f: 25001 });
  var a = n[0], l = n[1], h = 0, c = 1, d = 2;
  for (n[0] = { s: -1, f: a.f + l.f, l: a, r: l }; c != r - 1; )
    a = n[n[h].f < n[d].f ? h++ : d++], l = n[h != c && n[h].f < n[d].f ? h++ : d++], n[c++] = { s: -1, f: a.f + l.f, l: a, r: l };
  for (var g = s[0].s, i = 1; i < r; ++i)
    s[i].s > g && (g = s[i].s);
  var p = new Di(g + 1), b = of(n[c - 1], p, 0);
  if (b > t) {
    var i = 0, x = 0, N = b - t, v = 1 << N;
    for (s.sort(function(G, R) {
      return p[R.s] - p[G.s] || G.f - R.f;
    }); i < r; ++i) {
      var w = s[i].s;
      if (p[w] > t)
        x += v - (1 << b - p[w]), p[w] = t;
      else
        break;
    }
    for (x >>= N; x > 0; ) {
      var k = s[i].s;
      p[k] < t ? x -= 1 << t - p[k]++ - 1 : ++i;
    }
    for (; i >= 0 && x; --i) {
      var T = s[i].s;
      p[T] == t && (--p[T], ++x);
    }
    b = t;
  }
  return { t: new oi(p), l: b };
}, of = function(e, t, n) {
  return e.s == -1 ? Math.max(of(e.l, t, n + 1), of(e.r, t, n + 1)) : t[e.s] = n;
}, zp = function(e) {
  for (var t = e.length; t && !e[--t]; )
    ;
  for (var n = new Di(++t), i = 0, r = e[0], s = 1, o = function(l) {
    n[i++] = l;
  }, a = 1; a <= t; ++a)
    if (e[a] == r && a != t)
      ++s;
    else {
      if (!r && s > 2) {
        for (; s > 138; s -= 138)
          o(32754);
        s > 2 && (o(s > 10 ? s - 11 << 5 | 28690 : s - 3 << 5 | 12305), s = 0);
      } else if (s > 3) {
        for (o(r), --s; s > 6; s -= 6)
          o(8304);
        s > 2 && (o(s - 3 << 5 | 8208), s = 0);
      }
      for (; s--; )
        o(r);
      s = 1, r = e[a];
    }
  return { c: n.subarray(0, i), n: t };
}, tl = function(e, t) {
  for (var n = 0, i = 0; i < t.length; ++i)
    n += e[i] * t[i];
  return n;
}, w1 = function(e, t, n) {
  var i = n.length, r = wd(t + 2);
  e[r] = i & 255, e[r + 1] = i >> 8, e[r + 2] = e[r] ^ 255, e[r + 3] = e[r + 1] ^ 255;
  for (var s = 0; s < i; ++s)
    e[r + s + 4] = n[s];
  return (r + 4 + i) * 8;
}, Up = function(e, t, n, i, r, s, o, a, l, h, c) {
  Zr(t, c++, n), ++r[256];
  for (var d = wh(r, 15), g = d.t, p = d.l, b = wh(s, 15), x = b.t, N = b.l, v = zp(g), w = v.c, k = v.n, T = zp(x), D = T.c, G = T.n, R = new Di(19), O = 0; O < w.length; ++O)
    ++R[w[O] & 31];
  for (var O = 0; O < D.length; ++O)
    ++R[D[O] & 31];
  for (var $ = wh(R, 7), z = $.t, A = $.l, _ = 19; _ > 4 && !z[nf[_ - 1]]; --_)
    ;
  var I = h + 5 << 3, M = tl(r, Ms) + tl(s, gl) + o, st = tl(r, g) + tl(s, x) + o + 14 + 3 * _ + tl(R, z) + 2 * R[16] + 3 * R[17] + 7 * R[18];
  if (l >= 0 && I <= M && I <= st)
    return w1(t, c, e.subarray(l, l + h));
  var W, U, Q, Z;
  if (Zr(t, c, 1 + (st < M)), c += 2, st < M) {
    W = Er(g, p, 0), U = g, Q = Er(x, N, 0), Z = x;
    var ct = Er(z, A, 0);
    Zr(t, c, k - 257), Zr(t, c + 5, G - 1), Zr(t, c + 10, _ - 4), c += 14;
    for (var O = 0; O < _; ++O)
      Zr(t, c + 3 * O, z[nf[O]]);
    c += 3 * _;
    for (var St = [w, D], P = 0; P < 2; ++P)
      for (var B = St[P], O = 0; O < B.length; ++O) {
        var V = B[O] & 31;
        Zr(t, c, ct[V]), c += z[V], V > 15 && (Zr(t, c, B[O] >> 5 & 127), c += B[O] >> 12);
      }
  } else
    W = Kb, U = Ms, Q = Xb, Z = gl;
  for (var O = 0; O < a; ++O) {
    var J = i[O];
    if (J > 255) {
      var V = J >> 18 & 31;
      Qa(t, c, W[V + 257]), c += U[V + 257], V > 7 && (Zr(t, c, J >> 23 & 31), c += Cc[V]);
      var nt = J & 31;
      Qa(t, c, Q[nt]), c += Z[nt], nt > 3 && (Qa(t, c, J >> 5 & 8191), c += Tc[nt]);
    } else
      Qa(t, c, W[J]), c += U[J];
  }
  return Qa(t, c, W[256]), c + U[256];
}, ev = /* @__PURE__ */ new vd([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]), x1 = /* @__PURE__ */ new oi(0), nv = function(e, t, n, i, r, s) {
  var o = s.z || e.length, a = new oi(i + o + 5 * (1 + Math.ceil(o / 7e3)) + r), l = a.subarray(i, a.length - r), h = s.l, c = (s.r || 0) & 7;
  if (t) {
    c && (l[0] = s.r >> 3);
    for (var d = ev[t - 1], g = d >> 13, p = d & 8191, b = (1 << n) - 1, x = s.p || new Di(32768), N = s.h || new Di(b + 1), v = Math.ceil(n / 3), w = 2 * v, k = function(he) {
      return (e[he] ^ e[he + 1] << v ^ e[he + 2] << w) & b;
    }, T = new vd(25e3), D = new Di(288), G = new Di(32), R = 0, O = 0, $ = s.i || 0, z = 0, A = s.w || 0, _ = 0; $ + 2 < o; ++$) {
      var I = k($), M = $ & 32767, st = N[I];
      if (x[M] = st, N[I] = M, A <= $) {
        var W = o - $;
        if ((R > 7e3 || z > 24576) && (W > 423 || !h)) {
          c = Up(e, l, 0, T, D, G, O, z, _, $ - _, c), z = R = O = 0, _ = $;
          for (var U = 0; U < 286; ++U)
            D[U] = 0;
          for (var U = 0; U < 30; ++U)
            G[U] = 0;
        }
        var Q = 2, Z = 0, ct = p, St = M - st & 32767;
        if (W > 2 && I == k($ - St))
          for (var P = Math.min(g, W) - 1, B = Math.min(32767, $), V = Math.min(258, W); St <= B && --ct && M != st; ) {
            if (e[$ + Q] == e[$ + Q - St]) {
              for (var J = 0; J < V && e[$ + J] == e[$ + J - St]; ++J)
                ;
              if (J > Q) {
                if (Q = J, Z = St, J > P)
                  break;
                for (var nt = Math.min(St, J - 2), gt = 0, U = 0; U < nt; ++U) {
                  var yt = $ - St + U & 32767, vt = x[yt], Rt = yt - vt & 32767;
                  Rt > gt && (gt = Rt, st = yt);
                }
              }
            }
            M = st, st = x[M], St += M - st & 32767;
          }
        if (Z) {
          T[z++] = 268435456 | rf[Q] << 18 | $p[Z];
          var Dt = rf[Q] & 31, Ut = $p[Z] & 31;
          O += Cc[Dt] + Tc[Ut], ++D[257 + Dt], ++G[Ut], A = $ + Q, ++R;
        } else
          T[z++] = e[$], ++D[e[$]];
      }
    }
    for ($ = Math.max($, A); $ < o; ++$)
      T[z++] = e[$], ++D[e[$]];
    c = Up(e, l, h, T, D, G, O, z, _, $ - _, c), h || (s.r = c & 7 | l[c / 8 | 0] << 3, c -= 7, s.h = N, s.p = x, s.i = $, s.w = A);
  } else {
    for (var $ = s.w || 0; $ < o + h; $ += 65535) {
      var Wt = $ + 65535;
      Wt >= o && (l[c / 8 | 0] = h, Wt = o), c = w1(l, c + 1, e.subarray($, Wt));
    }
    s.i = o;
  }
  return v1(a, 0, i + wd(c) + r);
}, S1 = function() {
  var e = 1, t = 0;
  return {
    p: function(n) {
      for (var i = e, r = t, s = n.length | 0, o = 0; o != s; ) {
        for (var a = Math.min(o + 2655, s); o < a; ++o)
          r += i += n[o];
        i = (i & 65535) + 15 * (i >> 16), r = (r & 65535) + 15 * (r >> 16);
      }
      e = i, t = r;
    },
    d: function() {
      return e %= 65521, t %= 65521, (e & 255) << 24 | (e & 65280) << 8 | (t & 255) << 8 | t >> 8;
    }
  };
}, iv = function(e, t, n, i, r) {
  if (!r && (r = { l: 1 }, t.dictionary)) {
    var s = t.dictionary.subarray(-32768), o = new oi(s.length + e.length);
    o.set(s), o.set(e, s.length), e = o, r.w = s.length;
  }
  return nv(e, t.level == null ? 6 : t.level, t.mem == null ? r.l ? Math.ceil(Math.max(8, Math.min(13, Math.log(e.length))) * 1.5) : 20 : 12 + t.mem, n, i, r);
}, A1 = function(e, t, n) {
  for (; n; ++t)
    e[t] = n, n >>>= 8;
}, rv = function(e, t) {
  var n = t.level, i = n == 0 ? 0 : n < 6 ? 1 : n == 9 ? 3 : 2;
  if (e[0] = 120, e[1] = i << 6 | (t.dictionary && 32), e[1] |= 31 - (e[0] << 8 | e[1]) % 31, t.dictionary) {
    var r = S1();
    r.p(t.dictionary), A1(e, 2, r.d());
  }
}, sv = function(e, t) {
  return ((e[0] & 15) != 8 || e[0] >> 4 > 7 || (e[0] << 8 | e[1]) % 31) && cr(6, "invalid zlib data"), (e[1] >> 5 & 1) == +!t && cr(6, "invalid zlib data: " + (e[1] & 32 ? "need" : "unexpected") + " dictionary"), (e[1] >> 3 & 4) + 2;
};
function af(e, t) {
  t || (t = {});
  var n = S1();
  n.p(e);
  var i = iv(e, t, t.dictionary ? 6 : 2, 4);
  return rv(i, t), A1(i, i.length - 4, n.d()), i;
}
function ov(e, t) {
  return tv(e.subarray(sv(e, t), -4), { i: 2 }, t, t);
}
var av = typeof TextDecoder < "u" && /* @__PURE__ */ new TextDecoder(), lv = 0;
try {
  av.decode(x1, { stream: !0 }), lv = 1;
} catch {
}
/** @license
*
* jsPDF - PDF Document creation from JavaScript
* Version 2.5.2 Built on 2024-09-17T13:29:57.859Z
*                      CommitID 00000000
*
* Copyright (c) 2010-2021 James Hall <james@parall.ax>, https://github.com/MrRio/jsPDF
*               2015-2021 yWorks GmbH, http://www.yworks.com
*               2015-2021 Lukas Holländer <lukas.hollaender@yworks.com>, https://github.com/HackbrettXXX
*               2016-2018 Aras Abbasi <aras.abbasi@gmail.com>
*               2010 Aaron Spike, https://github.com/acspike
*               2012 Willow Systems Corporation, https://github.com/willowsystems
*               2012 Pablo Hess, https://github.com/pablohess
*               2012 Florian Jenett, https://github.com/fjenett
*               2013 Warren Weckesser, https://github.com/warrenweckesser
*               2013 Youssef Beddad, https://github.com/lifof
*               2013 Lee Driscoll, https://github.com/lsdriscoll
*               2013 Stefan Slonevskiy, https://github.com/stefslon
*               2013 Jeremy Morel, https://github.com/jmorel
*               2013 Christoph Hartmann, https://github.com/chris-rock
*               2014 Juan Pablo Gaviria, https://github.com/juanpgaviria
*               2014 James Makes, https://github.com/dollaruw
*               2014 Diego Casorran, https://github.com/diegocr
*               2014 Steven Spungin, https://github.com/Flamenco
*               2014 Kenneth Glassey, https://github.com/Gavvers
*
* Permission is hereby granted, free of charge, to any person obtaining
* a copy of this software and associated documentation files (the
* "Software"), to deal in the Software without restriction, including
* without limitation the rights to use, copy, modify, merge, publish,
* distribute, sublicense, and/or sell copies of the Software, and to
* permit persons to whom the Software is furnished to do so, subject to
* the following conditions:
*
* The above copyright notice and this permission notice shall be
* included in all copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
* MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
* LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
* OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
* WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*
* Contributor(s):
*    siefkenj, ahwolf, rickygu, Midnith, saintclair, eaparango,
*    kim3er, mfo, alnorth, Flamenco
*/
var Se = /* @__PURE__ */ function() {
  return typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : this;
}();
function xh() {
  Se.console && typeof Se.console.log == "function" && Se.console.log.apply(Se.console, arguments);
}
var un = { log: xh, warn: function(e) {
  Se.console && (typeof Se.console.warn == "function" ? Se.console.warn.apply(Se.console, arguments) : xh.call(null, arguments));
}, error: function(e) {
  Se.console && (typeof Se.console.error == "function" ? Se.console.error.apply(Se.console, arguments) : xh(e));
} };
function Sh(e, t, n) {
  var i = new XMLHttpRequest();
  i.open("GET", e), i.responseType = "blob", i.onload = function() {
    to(i.response, t, n);
  }, i.onerror = function() {
    un.error("could not download file");
  }, i.send();
}
function Wp(e) {
  var t = new XMLHttpRequest();
  t.open("HEAD", e, !1);
  try {
    t.send();
  } catch {
  }
  return t.status >= 200 && t.status <= 299;
}
function gu(e) {
  try {
    e.dispatchEvent(new MouseEvent("click"));
  } catch {
    var t = document.createEvent("MouseEvents");
    t.initMouseEvent("click", !0, !0, window, 0, 0, 0, 80, 20, !1, !1, !1, !1, 0, null), e.dispatchEvent(t);
  }
}
var cl, lf, to = Se.saveAs || ((typeof window > "u" ? "undefined" : en(window)) !== "object" || window !== Se ? function() {
} : typeof HTMLAnchorElement < "u" && "download" in HTMLAnchorElement.prototype ? function(e, t, n) {
  var i = Se.URL || Se.webkitURL, r = document.createElement("a");
  t = t || e.name || "download", r.download = t, r.rel = "noopener", typeof e == "string" ? (r.href = e, r.origin !== location.origin ? Wp(r.href) ? Sh(e, t, n) : gu(r, r.target = "_blank") : gu(r)) : (r.href = i.createObjectURL(e), setTimeout(function() {
    i.revokeObjectURL(r.href);
  }, 4e4), setTimeout(function() {
    gu(r);
  }, 0));
} : "msSaveOrOpenBlob" in navigator ? function(e, t, n) {
  if (t = t || e.name || "download", typeof e == "string") if (Wp(e)) Sh(e, t, n);
  else {
    var i = document.createElement("a");
    i.href = e, i.target = "_blank", setTimeout(function() {
      gu(i);
    });
  }
  else navigator.msSaveOrOpenBlob(function(r, s) {
    return s === void 0 ? s = { autoBom: !1 } : en(s) !== "object" && (un.warn("Deprecated: Expected third argument to be a object"), s = { autoBom: !s }), s.autoBom && /^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type) ? new Blob(["\uFEFF", r], { type: r.type }) : r;
  }(e, n), t);
} : function(e, t, n, i) {
  if ((i = i || open("", "_blank")) && (i.document.title = i.document.body.innerText = "downloading..."), typeof e == "string") return Sh(e, t, n);
  var r = e.type === "application/octet-stream", s = /constructor/i.test(Se.HTMLElement) || Se.safari, o = /CriOS\/[\d]+/.test(navigator.userAgent);
  if ((o || r && s) && (typeof FileReader > "u" ? "undefined" : en(FileReader)) === "object") {
    var a = new FileReader();
    a.onloadend = function() {
      var c = a.result;
      c = o ? c : c.replace(/^data:[^;]*;/, "data:attachment/file;"), i ? i.location.href = c : location = c, i = null;
    }, a.readAsDataURL(e);
  } else {
    var l = Se.URL || Se.webkitURL, h = l.createObjectURL(e);
    i ? i.location = h : location.href = h, i = null, setTimeout(function() {
      l.revokeObjectURL(h);
    }, 4e4);
  }
});
/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */
function k1(e) {
  var t;
  e = e || "", this.ok = !1, e.charAt(0) == "#" && (e = e.substr(1, 6)), e = { aliceblue: "f0f8ff", antiquewhite: "faebd7", aqua: "00ffff", aquamarine: "7fffd4", azure: "f0ffff", beige: "f5f5dc", bisque: "ffe4c4", black: "000000", blanchedalmond: "ffebcd", blue: "0000ff", blueviolet: "8a2be2", brown: "a52a2a", burlywood: "deb887", cadetblue: "5f9ea0", chartreuse: "7fff00", chocolate: "d2691e", coral: "ff7f50", cornflowerblue: "6495ed", cornsilk: "fff8dc", crimson: "dc143c", cyan: "00ffff", darkblue: "00008b", darkcyan: "008b8b", darkgoldenrod: "b8860b", darkgray: "a9a9a9", darkgreen: "006400", darkkhaki: "bdb76b", darkmagenta: "8b008b", darkolivegreen: "556b2f", darkorange: "ff8c00", darkorchid: "9932cc", darkred: "8b0000", darksalmon: "e9967a", darkseagreen: "8fbc8f", darkslateblue: "483d8b", darkslategray: "2f4f4f", darkturquoise: "00ced1", darkviolet: "9400d3", deeppink: "ff1493", deepskyblue: "00bfff", dimgray: "696969", dodgerblue: "1e90ff", feldspar: "d19275", firebrick: "b22222", floralwhite: "fffaf0", forestgreen: "228b22", fuchsia: "ff00ff", gainsboro: "dcdcdc", ghostwhite: "f8f8ff", gold: "ffd700", goldenrod: "daa520", gray: "808080", green: "008000", greenyellow: "adff2f", honeydew: "f0fff0", hotpink: "ff69b4", indianred: "cd5c5c", indigo: "4b0082", ivory: "fffff0", khaki: "f0e68c", lavender: "e6e6fa", lavenderblush: "fff0f5", lawngreen: "7cfc00", lemonchiffon: "fffacd", lightblue: "add8e6", lightcoral: "f08080", lightcyan: "e0ffff", lightgoldenrodyellow: "fafad2", lightgrey: "d3d3d3", lightgreen: "90ee90", lightpink: "ffb6c1", lightsalmon: "ffa07a", lightseagreen: "20b2aa", lightskyblue: "87cefa", lightslateblue: "8470ff", lightslategray: "778899", lightsteelblue: "b0c4de", lightyellow: "ffffe0", lime: "00ff00", limegreen: "32cd32", linen: "faf0e6", magenta: "ff00ff", maroon: "800000", mediumaquamarine: "66cdaa", mediumblue: "0000cd", mediumorchid: "ba55d3", mediumpurple: "9370d8", mediumseagreen: "3cb371", mediumslateblue: "7b68ee", mediumspringgreen: "00fa9a", mediumturquoise: "48d1cc", mediumvioletred: "c71585", midnightblue: "191970", mintcream: "f5fffa", mistyrose: "ffe4e1", moccasin: "ffe4b5", navajowhite: "ffdead", navy: "000080", oldlace: "fdf5e6", olive: "808000", olivedrab: "6b8e23", orange: "ffa500", orangered: "ff4500", orchid: "da70d6", palegoldenrod: "eee8aa", palegreen: "98fb98", paleturquoise: "afeeee", palevioletred: "d87093", papayawhip: "ffefd5", peachpuff: "ffdab9", peru: "cd853f", pink: "ffc0cb", plum: "dda0dd", powderblue: "b0e0e6", purple: "800080", red: "ff0000", rosybrown: "bc8f8f", royalblue: "4169e1", saddlebrown: "8b4513", salmon: "fa8072", sandybrown: "f4a460", seagreen: "2e8b57", seashell: "fff5ee", sienna: "a0522d", silver: "c0c0c0", skyblue: "87ceeb", slateblue: "6a5acd", slategray: "708090", snow: "fffafa", springgreen: "00ff7f", steelblue: "4682b4", tan: "d2b48c", teal: "008080", thistle: "d8bfd8", tomato: "ff6347", turquoise: "40e0d0", violet: "ee82ee", violetred: "d02090", wheat: "f5deb3", white: "ffffff", whitesmoke: "f5f5f5", yellow: "ffff00", yellowgreen: "9acd32" }[e = (e = e.replace(/ /g, "")).toLowerCase()] || e;
  for (var n = [{ re: /^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/, example: ["rgb(123, 234, 45)", "rgb(255,234,245)"], process: function(a) {
    return [parseInt(a[1]), parseInt(a[2]), parseInt(a[3])];
  } }, { re: /^(\w{2})(\w{2})(\w{2})$/, example: ["#00ff00", "336699"], process: function(a) {
    return [parseInt(a[1], 16), parseInt(a[2], 16), parseInt(a[3], 16)];
  } }, { re: /^(\w{1})(\w{1})(\w{1})$/, example: ["#fb0", "f0f"], process: function(a) {
    return [parseInt(a[1] + a[1], 16), parseInt(a[2] + a[2], 16), parseInt(a[3] + a[3], 16)];
  } }], i = 0; i < n.length; i++) {
    var r = n[i].re, s = n[i].process, o = r.exec(e);
    o && (t = s(o), this.r = t[0], this.g = t[1], this.b = t[2], this.ok = !0);
  }
  this.r = this.r < 0 || isNaN(this.r) ? 0 : this.r > 255 ? 255 : this.r, this.g = this.g < 0 || isNaN(this.g) ? 0 : this.g > 255 ? 255 : this.g, this.b = this.b < 0 || isNaN(this.b) ? 0 : this.b > 255 ? 255 : this.b, this.toRGB = function() {
    return "rgb(" + this.r + ", " + this.g + ", " + this.b + ")";
  }, this.toHex = function() {
    var a = this.r.toString(16), l = this.g.toString(16), h = this.b.toString(16);
    return a.length == 1 && (a = "0" + a), l.length == 1 && (l = "0" + l), h.length == 1 && (h = "0" + h), "#" + a + l + h;
  };
}
/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */
function Ah(e, t) {
  var n = e[0], i = e[1], r = e[2], s = e[3];
  n = Zn(n, i, r, s, t[0], 7, -680876936), s = Zn(s, n, i, r, t[1], 12, -389564586), r = Zn(r, s, n, i, t[2], 17, 606105819), i = Zn(i, r, s, n, t[3], 22, -1044525330), n = Zn(n, i, r, s, t[4], 7, -176418897), s = Zn(s, n, i, r, t[5], 12, 1200080426), r = Zn(r, s, n, i, t[6], 17, -1473231341), i = Zn(i, r, s, n, t[7], 22, -45705983), n = Zn(n, i, r, s, t[8], 7, 1770035416), s = Zn(s, n, i, r, t[9], 12, -1958414417), r = Zn(r, s, n, i, t[10], 17, -42063), i = Zn(i, r, s, n, t[11], 22, -1990404162), n = Zn(n, i, r, s, t[12], 7, 1804603682), s = Zn(s, n, i, r, t[13], 12, -40341101), r = Zn(r, s, n, i, t[14], 17, -1502002290), n = Qn(n, i = Zn(i, r, s, n, t[15], 22, 1236535329), r, s, t[1], 5, -165796510), s = Qn(s, n, i, r, t[6], 9, -1069501632), r = Qn(r, s, n, i, t[11], 14, 643717713), i = Qn(i, r, s, n, t[0], 20, -373897302), n = Qn(n, i, r, s, t[5], 5, -701558691), s = Qn(s, n, i, r, t[10], 9, 38016083), r = Qn(r, s, n, i, t[15], 14, -660478335), i = Qn(i, r, s, n, t[4], 20, -405537848), n = Qn(n, i, r, s, t[9], 5, 568446438), s = Qn(s, n, i, r, t[14], 9, -1019803690), r = Qn(r, s, n, i, t[3], 14, -187363961), i = Qn(i, r, s, n, t[8], 20, 1163531501), n = Qn(n, i, r, s, t[13], 5, -1444681467), s = Qn(s, n, i, r, t[2], 9, -51403784), r = Qn(r, s, n, i, t[7], 14, 1735328473), n = ti(n, i = Qn(i, r, s, n, t[12], 20, -1926607734), r, s, t[5], 4, -378558), s = ti(s, n, i, r, t[8], 11, -2022574463), r = ti(r, s, n, i, t[11], 16, 1839030562), i = ti(i, r, s, n, t[14], 23, -35309556), n = ti(n, i, r, s, t[1], 4, -1530992060), s = ti(s, n, i, r, t[4], 11, 1272893353), r = ti(r, s, n, i, t[7], 16, -155497632), i = ti(i, r, s, n, t[10], 23, -1094730640), n = ti(n, i, r, s, t[13], 4, 681279174), s = ti(s, n, i, r, t[0], 11, -358537222), r = ti(r, s, n, i, t[3], 16, -722521979), i = ti(i, r, s, n, t[6], 23, 76029189), n = ti(n, i, r, s, t[9], 4, -640364487), s = ti(s, n, i, r, t[12], 11, -421815835), r = ti(r, s, n, i, t[15], 16, 530742520), n = ei(n, i = ti(i, r, s, n, t[2], 23, -995338651), r, s, t[0], 6, -198630844), s = ei(s, n, i, r, t[7], 10, 1126891415), r = ei(r, s, n, i, t[14], 15, -1416354905), i = ei(i, r, s, n, t[5], 21, -57434055), n = ei(n, i, r, s, t[12], 6, 1700485571), s = ei(s, n, i, r, t[3], 10, -1894986606), r = ei(r, s, n, i, t[10], 15, -1051523), i = ei(i, r, s, n, t[1], 21, -2054922799), n = ei(n, i, r, s, t[8], 6, 1873313359), s = ei(s, n, i, r, t[15], 10, -30611744), r = ei(r, s, n, i, t[6], 15, -1560198380), i = ei(i, r, s, n, t[13], 21, 1309151649), n = ei(n, i, r, s, t[4], 6, -145523070), s = ei(s, n, i, r, t[11], 10, -1120210379), r = ei(r, s, n, i, t[2], 15, 718787259), i = ei(i, r, s, n, t[9], 21, -343485551), e[0] = Ls(n, e[0]), e[1] = Ls(i, e[1]), e[2] = Ls(r, e[2]), e[3] = Ls(s, e[3]);
}
function Ic(e, t, n, i, r, s) {
  return t = Ls(Ls(t, e), Ls(i, s)), Ls(t << r | t >>> 32 - r, n);
}
function Zn(e, t, n, i, r, s, o) {
  return Ic(t & n | ~t & i, e, t, r, s, o);
}
function Qn(e, t, n, i, r, s, o) {
  return Ic(t & i | n & ~i, e, t, r, s, o);
}
function ti(e, t, n, i, r, s, o) {
  return Ic(t ^ n ^ i, e, t, r, s, o);
}
function ei(e, t, n, i, r, s, o) {
  return Ic(n ^ (t | ~i), e, t, r, s, o);
}
function _1(e) {
  var t, n = e.length, i = [1732584193, -271733879, -1732584194, 271733878];
  for (t = 64; t <= e.length; t += 64) Ah(i, uv(e.substring(t - 64, t)));
  e = e.substring(t - 64);
  var r = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
  for (t = 0; t < e.length; t++) r[t >> 2] |= e.charCodeAt(t) << (t % 4 << 3);
  if (r[t >> 2] |= 128 << (t % 4 << 3), t > 55) for (Ah(i, r), t = 0; t < 16; t++) r[t] = 0;
  return r[14] = 8 * n, Ah(i, r), i;
}
function uv(e) {
  var t, n = [];
  for (t = 0; t < 64; t += 4) n[t >> 2] = e.charCodeAt(t) + (e.charCodeAt(t + 1) << 8) + (e.charCodeAt(t + 2) << 16) + (e.charCodeAt(t + 3) << 24);
  return n;
}
cl = Se.atob.bind(Se), lf = Se.btoa.bind(Se);
var Hp = "0123456789abcdef".split("");
function cv(e) {
  for (var t = "", n = 0; n < 4; n++) t += Hp[e >> 8 * n + 4 & 15] + Hp[e >> 8 * n & 15];
  return t;
}
function hv(e) {
  return String.fromCharCode((255 & e) >> 0, (65280 & e) >> 8, (16711680 & e) >> 16, (4278190080 & e) >> 24);
}
function uf(e) {
  return _1(e).map(hv).join("");
}
var fv = function(e) {
  for (var t = 0; t < e.length; t++) e[t] = cv(e[t]);
  return e.join("");
}(_1("hello")) != "5d41402abc4b2a76b9719d911017c592";
function Ls(e, t) {
  if (fv) {
    var n = (65535 & e) + (65535 & t);
    return (e >> 16) + (t >> 16) + (n >> 16) << 16 | 65535 & n;
  }
  return e + t & 4294967295;
}
/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */
function cf(e, t) {
  var n, i, r, s;
  if (e !== n) {
    for (var o = (r = e, s = 1 + (256 / e.length >> 0), new Array(s + 1).join(r)), a = [], l = 0; l < 256; l++) a[l] = l;
    var h = 0;
    for (l = 0; l < 256; l++) {
      var c = a[l];
      h = (h + c + o.charCodeAt(l)) % 256, a[l] = a[h], a[h] = c;
    }
    n = e, i = a;
  } else a = i;
  var d = t.length, g = 0, p = 0, b = "";
  for (l = 0; l < d; l++) p = (p + (c = a[g = (g + 1) % 256])) % 256, a[g] = a[p], a[p] = c, o = a[(a[g] + a[p]) % 256], b += String.fromCharCode(t.charCodeAt(l) ^ o);
  return b;
}
/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */
var Gp = { print: 4, modify: 8, copy: 16, "annot-forms": 32 };
function Zo(e, t, n, i) {
  this.v = 1, this.r = 2;
  var r = 192;
  e.forEach(function(a) {
    if (Gp.perm !== void 0) throw new Error("Invalid permission: " + a);
    r += Gp[a];
  }), this.padding = "(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";
  var s = (t + this.padding).substr(0, 32), o = (n + this.padding).substr(0, 32);
  this.O = this.processOwnerPassword(s, o), this.P = -(1 + (255 ^ r)), this.encryptionKey = uf(s + this.O + this.lsbFirstWord(this.P) + this.hexToBytes(i)).substr(0, 5), this.U = cf(this.encryptionKey, this.padding);
}
function Qo(e) {
  if (/[^\u0000-\u00ff]/.test(e)) throw new Error("Invalid PDF Name Object: " + e + ", Only accept ASCII characters.");
  for (var t = "", n = e.length, i = 0; i < n; i++) {
    var r = e.charCodeAt(i);
    r < 33 || r === 35 || r === 37 || r === 40 || r === 41 || r === 47 || r === 60 || r === 62 || r === 91 || r === 93 || r === 123 || r === 125 || r > 126 ? t += "#" + ("0" + r.toString(16)).slice(-2) : t += e[i];
  }
  return t;
}
function Vp(e) {
  if (en(e) !== "object") throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");
  var t = {};
  this.subscribe = function(n, i, r) {
    if (r = r || !1, typeof n != "string" || typeof i != "function" || typeof r != "boolean") throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");
    t.hasOwnProperty(n) || (t[n] = {});
    var s = Math.random().toString(35);
    return t[n][s] = [i, !!r], s;
  }, this.unsubscribe = function(n) {
    for (var i in t) if (t[i][n]) return delete t[i][n], Object.keys(t[i]).length === 0 && delete t[i], !0;
    return !1;
  }, this.publish = function(n) {
    if (t.hasOwnProperty(n)) {
      var i = Array.prototype.slice.call(arguments, 1), r = [];
      for (var s in t[n]) {
        var o = t[n][s];
        try {
          o[0].apply(e, i);
        } catch (a) {
          Se.console && un.error("jsPDF PubSub Error", a.message, a);
        }
        o[1] && r.push(s);
      }
      r.length && r.forEach(this.unsubscribe);
    }
  }, this.getTopics = function() {
    return t;
  };
}
function ml(e) {
  if (!(this instanceof ml)) return new ml(e);
  var t = "opacity,stroke-opacity".split(",");
  for (var n in e) e.hasOwnProperty(n) && t.indexOf(n) >= 0 && (this[n] = e[n]);
  this.id = "", this.objectNumber = -1;
}
function N1(e, t) {
  this.gState = e, this.matrix = t, this.id = "", this.objectNumber = -1;
}
function Ns(e, t, n, i, r) {
  if (!(this instanceof Ns)) return new Ns(e, t, n, i, r);
  this.type = e === "axial" ? 2 : 3, this.coords = t, this.colors = n, N1.call(this, i, r);
}
function ro(e, t, n, i, r) {
  if (!(this instanceof ro)) return new ro(e, t, n, i, r);
  this.boundingBox = e, this.xStep = t, this.yStep = n, this.stream = "", this.cloneIndex = 0, N1.call(this, i, r);
}
function ye(e) {
  var t, n = typeof arguments[0] == "string" ? arguments[0] : "p", i = arguments[1], r = arguments[2], s = arguments[3], o = [], a = 1, l = 16, h = "S", c = null;
  en(e = e || {}) === "object" && (n = e.orientation, i = e.unit || i, r = e.format || r, s = e.compress || e.compressPdf || s, (c = e.encryption || null) !== null && (c.userPassword = c.userPassword || "", c.ownerPassword = c.ownerPassword || "", c.userPermissions = c.userPermissions || []), a = typeof e.userUnit == "number" ? Math.abs(e.userUnit) : 1, e.precision !== void 0 && (t = e.precision), e.floatPrecision !== void 0 && (l = e.floatPrecision), h = e.defaultPathOperation || "S"), o = e.filters || (s === !0 ? ["FlateEncode"] : o), i = i || "mm", n = ("" + (n || "P")).toLowerCase();
  var d = e.putOnlyUsedFonts || !1, g = {}, p = { internal: {}, __private__: {} };
  p.__private__.PubSub = Vp;
  var b = "1.3", x = p.__private__.getPdfVersion = function() {
    return b;
  };
  p.__private__.setPdfVersion = function(m) {
    b = m;
  };
  var N = { a0: [2383.94, 3370.39], a1: [1683.78, 2383.94], a2: [1190.55, 1683.78], a3: [841.89, 1190.55], a4: [595.28, 841.89], a5: [419.53, 595.28], a6: [297.64, 419.53], a7: [209.76, 297.64], a8: [147.4, 209.76], a9: [104.88, 147.4], a10: [73.7, 104.88], b0: [2834.65, 4008.19], b1: [2004.09, 2834.65], b2: [1417.32, 2004.09], b3: [1000.63, 1417.32], b4: [708.66, 1000.63], b5: [498.9, 708.66], b6: [354.33, 498.9], b7: [249.45, 354.33], b8: [175.75, 249.45], b9: [124.72, 175.75], b10: [87.87, 124.72], c0: [2599.37, 3676.54], c1: [1836.85, 2599.37], c2: [1298.27, 1836.85], c3: [918.43, 1298.27], c4: [649.13, 918.43], c5: [459.21, 649.13], c6: [323.15, 459.21], c7: [229.61, 323.15], c8: [161.57, 229.61], c9: [113.39, 161.57], c10: [79.37, 113.39], dl: [311.81, 623.62], letter: [612, 792], "government-letter": [576, 756], legal: [612, 1008], "junior-legal": [576, 360], ledger: [1224, 792], tabloid: [792, 1224], "credit-card": [153, 243] };
  p.__private__.getPageFormats = function() {
    return N;
  };
  var v = p.__private__.getPageFormat = function(m) {
    return N[m];
  };
  r = r || "a4";
  var w = { COMPAT: "compat", ADVANCED: "advanced" }, k = w.COMPAT;
  function T() {
    this.saveGraphicsState(), it(new ge(mt, 0, 0, -mt, 0, cs() * mt).toString() + " cm"), this.setFontSize(this.getFontSize() / mt), h = "n", k = w.ADVANCED;
  }
  function D() {
    this.restoreGraphicsState(), h = "S", k = w.COMPAT;
  }
  var G = p.__private__.combineFontStyleAndFontWeight = function(m, C) {
    if (m == "bold" && C == "normal" || m == "bold" && C == 400 || m == "normal" && C == "italic" || m == "bold" && C == "italic") throw new Error("Invalid Combination of fontweight and fontstyle");
    return C && (m = C == 400 || C === "normal" ? m === "italic" ? "italic" : "normal" : C != 700 && C !== "bold" || m !== "normal" ? (C == 700 ? "bold" : C) + "" + m : "bold"), m;
  };
  p.advancedAPI = function(m) {
    var C = k === w.COMPAT;
    return C && T.call(this), typeof m != "function" || (m(this), C && D.call(this)), this;
  }, p.compatAPI = function(m) {
    var C = k === w.ADVANCED;
    return C && D.call(this), typeof m != "function" || (m(this), C && T.call(this)), this;
  }, p.isAdvancedAPI = function() {
    return k === w.ADVANCED;
  };
  var R, O = function(m) {
    if (k !== w.ADVANCED) throw new Error(m + " is only available in 'advanced' API mode. You need to call advancedAPI() first.");
  }, $ = p.roundToPrecision = p.__private__.roundToPrecision = function(m, C) {
    var tt = t || C;
    if (isNaN(m) || isNaN(tt)) throw new Error("Invalid argument passed to jsPDF.roundToPrecision");
    return m.toFixed(tt).replace(/0+$/, "");
  };
  R = p.hpf = p.__private__.hpf = typeof l == "number" ? function(m) {
    if (isNaN(m)) throw new Error("Invalid argument passed to jsPDF.hpf");
    return $(m, l);
  } : l === "smart" ? function(m) {
    if (isNaN(m)) throw new Error("Invalid argument passed to jsPDF.hpf");
    return $(m, m > -1 && m < 1 ? 16 : 5);
  } : function(m) {
    if (isNaN(m)) throw new Error("Invalid argument passed to jsPDF.hpf");
    return $(m, 16);
  };
  var z = p.f2 = p.__private__.f2 = function(m) {
    if (isNaN(m)) throw new Error("Invalid argument passed to jsPDF.f2");
    return $(m, 2);
  }, A = p.__private__.f3 = function(m) {
    if (isNaN(m)) throw new Error("Invalid argument passed to jsPDF.f3");
    return $(m, 3);
  }, _ = p.scale = p.__private__.scale = function(m) {
    if (isNaN(m)) throw new Error("Invalid argument passed to jsPDF.scale");
    return k === w.COMPAT ? m * mt : k === w.ADVANCED ? m : void 0;
  }, I = function(m) {
    return k === w.COMPAT ? cs() - m : k === w.ADVANCED ? m : void 0;
  }, M = function(m) {
    return _(I(m));
  };
  p.__private__.setPrecision = p.setPrecision = function(m) {
    typeof parseInt(m, 10) == "number" && (t = parseInt(m, 10));
  };
  var st, W = "00000000000000000000000000000000", U = p.__private__.getFileId = function() {
    return W;
  }, Q = p.__private__.setFileId = function(m) {
    return W = m !== void 0 && /^[a-fA-F0-9]{32}$/.test(m) ? m.toUpperCase() : W.split("").map(function() {
      return "ABCDEF0123456789".charAt(Math.floor(16 * Math.random()));
    }).join(""), c !== null && (fn = new Zo(c.userPermissions, c.userPassword, c.ownerPassword, W)), W;
  };
  p.setFileId = function(m) {
    return Q(m), this;
  }, p.getFileId = function() {
    return U();
  };
  var Z = p.__private__.convertDateToPDFDate = function(m) {
    var C = m.getTimezoneOffset(), tt = C < 0 ? "+" : "-", ot = Math.floor(Math.abs(C / 60)), bt = Math.abs(C % 60), Pt = [tt, V(ot), "'", V(bt), "'"].join("");
    return ["D:", m.getFullYear(), V(m.getMonth() + 1), V(m.getDate()), V(m.getHours()), V(m.getMinutes()), V(m.getSeconds()), Pt].join("");
  }, ct = p.__private__.convertPDFDateToDate = function(m) {
    var C = parseInt(m.substr(2, 4), 10), tt = parseInt(m.substr(6, 2), 10) - 1, ot = parseInt(m.substr(8, 2), 10), bt = parseInt(m.substr(10, 2), 10), Pt = parseInt(m.substr(12, 2), 10), Bt = parseInt(m.substr(14, 2), 10);
    return new Date(C, tt, ot, bt, Pt, Bt, 0);
  }, St = p.__private__.setCreationDate = function(m) {
    var C;
    if (m === void 0 && (m = /* @__PURE__ */ new Date()), m instanceof Date) C = Z(m);
    else {
      if (!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(m)) throw new Error("Invalid argument passed to jsPDF.setCreationDate");
      C = m;
    }
    return st = C;
  }, P = p.__private__.getCreationDate = function(m) {
    var C = st;
    return m === "jsDate" && (C = ct(st)), C;
  };
  p.setCreationDate = function(m) {
    return St(m), this;
  }, p.getCreationDate = function(m) {
    return P(m);
  };
  var B, V = p.__private__.padd2 = function(m) {
    return ("0" + parseInt(m)).slice(-2);
  }, J = p.__private__.padd2Hex = function(m) {
    return ("00" + (m = m.toString())).substr(m.length);
  }, nt = 0, gt = [], yt = [], vt = 0, Rt = [], Dt = [], Ut = !1, Wt = yt, he = function() {
    nt = 0, vt = 0, yt = [], gt = [], Rt = [], er = wn(), Pi = wn();
  };
  p.__private__.setCustomOutputDestination = function(m) {
    Ut = !0, Wt = m;
  };
  var Nt = function(m) {
    Ut || (Wt = m);
  };
  p.__private__.resetCustomOutputDestination = function() {
    Ut = !1, Wt = yt;
  };
  var it = p.__private__.out = function(m) {
    return m = m.toString(), vt += m.length + 1, Wt.push(m), Wt;
  }, de = p.__private__.write = function(m) {
    return it(arguments.length === 1 ? m.toString() : Array.prototype.join.call(arguments, " "));
  }, Xt = p.__private__.getArrayBuffer = function(m) {
    for (var C = m.length, tt = new ArrayBuffer(C), ot = new Uint8Array(tt); C--; ) ot[C] = m.charCodeAt(C);
    return tt;
  }, Mt = [["Helvetica", "helvetica", "normal", "WinAnsiEncoding"], ["Helvetica-Bold", "helvetica", "bold", "WinAnsiEncoding"], ["Helvetica-Oblique", "helvetica", "italic", "WinAnsiEncoding"], ["Helvetica-BoldOblique", "helvetica", "bolditalic", "WinAnsiEncoding"], ["Courier", "courier", "normal", "WinAnsiEncoding"], ["Courier-Bold", "courier", "bold", "WinAnsiEncoding"], ["Courier-Oblique", "courier", "italic", "WinAnsiEncoding"], ["Courier-BoldOblique", "courier", "bolditalic", "WinAnsiEncoding"], ["Times-Roman", "times", "normal", "WinAnsiEncoding"], ["Times-Bold", "times", "bold", "WinAnsiEncoding"], ["Times-Italic", "times", "italic", "WinAnsiEncoding"], ["Times-BoldItalic", "times", "bolditalic", "WinAnsiEncoding"], ["ZapfDingbats", "zapfdingbats", "normal", null], ["Symbol", "symbol", "normal", null]];
  p.__private__.getStandardFonts = function() {
    return Mt;
  };
  var qt = e.fontSize || 16;
  p.__private__.setFontSize = p.setFontSize = function(m) {
    return qt = k === w.ADVANCED ? m / mt : m, this;
  };
  var Gt, Ht = p.__private__.getFontSize = p.getFontSize = function() {
    return k === w.COMPAT ? qt : qt * mt;
  }, ee = e.R2L || !1;
  p.__private__.setR2L = p.setR2L = function(m) {
    return ee = m, this;
  }, p.__private__.getR2L = p.getR2L = function() {
    return ee;
  };
  var Qt, oe = p.__private__.setZoomMode = function(m) {
    var C = [void 0, null, "fullwidth", "fullheight", "fullpage", "original"];
    if (/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(m)) Gt = m;
    else if (isNaN(m)) {
      if (C.indexOf(m) === -1) throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "' + m + '" is not recognized.');
      Gt = m;
    } else Gt = parseInt(m, 10);
  };
  p.__private__.getZoomMode = function() {
    return Gt;
  };
  var xe, ke = p.__private__.setPageMode = function(m) {
    if ([void 0, null, "UseNone", "UseOutlines", "UseThumbs", "FullScreen"].indexOf(m) == -1) throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "' + m + '" is not recognized.');
    Qt = m;
  };
  p.__private__.getPageMode = function() {
    return Qt;
  };
  var Fe = p.__private__.setLayoutMode = function(m) {
    if ([void 0, null, "continuous", "single", "twoleft", "tworight", "two"].indexOf(m) == -1) throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "' + m + '" is not recognized.');
    xe = m;
  };
  p.__private__.getLayoutMode = function() {
    return xe;
  }, p.__private__.setDisplayMode = p.setDisplayMode = function(m, C, tt) {
    return oe(m), Fe(C), ke(tt), this;
  };
  var ue = { title: "", subject: "", author: "", keywords: "", creator: "" };
  p.__private__.getDocumentProperty = function(m) {
    if (Object.keys(ue).indexOf(m) === -1) throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");
    return ue[m];
  }, p.__private__.getDocumentProperties = function() {
    return ue;
  }, p.__private__.setDocumentProperties = p.setProperties = p.setDocumentProperties = function(m) {
    for (var C in ue) ue.hasOwnProperty(C) && m[C] && (ue[C] = m[C]);
    return this;
  }, p.__private__.setDocumentProperty = function(m, C) {
    if (Object.keys(ue).indexOf(m) === -1) throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");
    return ue[m] = C;
  };
  var rt, mt, zt, It, be, $t = {}, Ft = {}, pe = [], Me = {}, ji = {}, on = {}, Yn = {}, Dn = null, an = 0, ve = [], qe = new Vp(p), Dr = e.hotfixes || [], Ze = {}, ki = {}, Bi = [], ge = function m(C, tt, ot, bt, Pt, Bt) {
    if (!(this instanceof m)) return new m(C, tt, ot, bt, Pt, Bt);
    isNaN(C) && (C = 1), isNaN(tt) && (tt = 0), isNaN(ot) && (ot = 0), isNaN(bt) && (bt = 1), isNaN(Pt) && (Pt = 0), isNaN(Bt) && (Bt = 0), this._matrix = [C, tt, ot, bt, Pt, Bt];
  };
  Object.defineProperty(ge.prototype, "sx", { get: function() {
    return this._matrix[0];
  }, set: function(m) {
    this._matrix[0] = m;
  } }), Object.defineProperty(ge.prototype, "shy", { get: function() {
    return this._matrix[1];
  }, set: function(m) {
    this._matrix[1] = m;
  } }), Object.defineProperty(ge.prototype, "shx", { get: function() {
    return this._matrix[2];
  }, set: function(m) {
    this._matrix[2] = m;
  } }), Object.defineProperty(ge.prototype, "sy", { get: function() {
    return this._matrix[3];
  }, set: function(m) {
    this._matrix[3] = m;
  } }), Object.defineProperty(ge.prototype, "tx", { get: function() {
    return this._matrix[4];
  }, set: function(m) {
    this._matrix[4] = m;
  } }), Object.defineProperty(ge.prototype, "ty", { get: function() {
    return this._matrix[5];
  }, set: function(m) {
    this._matrix[5] = m;
  } }), Object.defineProperty(ge.prototype, "a", { get: function() {
    return this._matrix[0];
  }, set: function(m) {
    this._matrix[0] = m;
  } }), Object.defineProperty(ge.prototype, "b", { get: function() {
    return this._matrix[1];
  }, set: function(m) {
    this._matrix[1] = m;
  } }), Object.defineProperty(ge.prototype, "c", { get: function() {
    return this._matrix[2];
  }, set: function(m) {
    this._matrix[2] = m;
  } }), Object.defineProperty(ge.prototype, "d", { get: function() {
    return this._matrix[3];
  }, set: function(m) {
    this._matrix[3] = m;
  } }), Object.defineProperty(ge.prototype, "e", { get: function() {
    return this._matrix[4];
  }, set: function(m) {
    this._matrix[4] = m;
  } }), Object.defineProperty(ge.prototype, "f", { get: function() {
    return this._matrix[5];
  }, set: function(m) {
    this._matrix[5] = m;
  } }), Object.defineProperty(ge.prototype, "rotation", { get: function() {
    return Math.atan2(this.shx, this.sx);
  } }), Object.defineProperty(ge.prototype, "scaleX", { get: function() {
    return this.decompose().scale.sx;
  } }), Object.defineProperty(ge.prototype, "scaleY", { get: function() {
    return this.decompose().scale.sy;
  } }), Object.defineProperty(ge.prototype, "isIdentity", { get: function() {
    return this.sx === 1 && this.shy === 0 && this.shx === 0 && this.sy === 1 && this.tx === 0 && this.ty === 0;
  } }), ge.prototype.join = function(m) {
    return [this.sx, this.shy, this.shx, this.sy, this.tx, this.ty].map(R).join(m);
  }, ge.prototype.multiply = function(m) {
    var C = m.sx * this.sx + m.shy * this.shx, tt = m.sx * this.shy + m.shy * this.sy, ot = m.shx * this.sx + m.sy * this.shx, bt = m.shx * this.shy + m.sy * this.sy, Pt = m.tx * this.sx + m.ty * this.shx + this.tx, Bt = m.tx * this.shy + m.ty * this.sy + this.ty;
    return new ge(C, tt, ot, bt, Pt, Bt);
  }, ge.prototype.decompose = function() {
    var m = this.sx, C = this.shy, tt = this.shx, ot = this.sy, bt = this.tx, Pt = this.ty, Bt = Math.sqrt(m * m + C * C), Zt = (m /= Bt) * tt + (C /= Bt) * ot;
    tt -= m * Zt, ot -= C * Zt;
    var ce = Math.sqrt(tt * tt + ot * ot);
    return Zt /= ce, m * (ot /= ce) < C * (tt /= ce) && (m = -m, C = -C, Zt = -Zt, Bt = -Bt), { scale: new ge(Bt, 0, 0, ce, 0, 0), translate: new ge(1, 0, 0, 1, bt, Pt), rotate: new ge(m, C, -C, m, 0, 0), skew: new ge(1, 0, Zt, 1, 0, 0) };
  }, ge.prototype.toString = function(m) {
    return this.join(" ");
  }, ge.prototype.inversed = function() {
    var m = this.sx, C = this.shy, tt = this.shx, ot = this.sy, bt = this.tx, Pt = this.ty, Bt = 1 / (m * ot - C * tt), Zt = ot * Bt, ce = -C * Bt, Te = -tt * Bt, Le = m * Bt;
    return new ge(Zt, ce, Te, Le, -Zt * bt - Te * Pt, -ce * bt - Le * Pt);
  }, ge.prototype.applyToPoint = function(m) {
    var C = m.x * this.sx + m.y * this.shx + this.tx, tt = m.x * this.shy + m.y * this.sy + this.ty;
    return new Eo(C, tt);
  }, ge.prototype.applyToRectangle = function(m) {
    var C = this.applyToPoint(m), tt = this.applyToPoint(new Eo(m.x + m.w, m.y + m.h));
    return new Ta(C.x, C.y, tt.x - C.x, tt.y - C.y);
  }, ge.prototype.clone = function() {
    var m = this.sx, C = this.shy, tt = this.shx, ot = this.sy, bt = this.tx, Pt = this.ty;
    return new ge(m, C, tt, ot, bt, Pt);
  }, p.Matrix = ge;
  var _i = p.matrixMult = function(m, C) {
    return C.multiply(m);
  }, Ni = new ge(1, 0, 0, 1, 0, 0);
  p.unitMatrix = p.identityMatrix = Ni;
  var Kn = function(m, C) {
    if (!ji[m]) {
      var tt = (C instanceof Ns ? "Sh" : "P") + (Object.keys(Me).length + 1).toString(10);
      C.id = tt, ji[m] = tt, Me[tt] = C, qe.publish("addPattern", C);
    }
  };
  p.ShadingPattern = Ns, p.TilingPattern = ro, p.addShadingPattern = function(m, C) {
    return O("addShadingPattern()"), Kn(m, C), this;
  }, p.beginTilingPattern = function(m) {
    O("beginTilingPattern()"), jl(m.boundingBox[0], m.boundingBox[1], m.boundingBox[2] - m.boundingBox[0], m.boundingBox[3] - m.boundingBox[1], m.matrix);
  }, p.endTilingPattern = function(m, C) {
    O("endTilingPattern()"), C.stream = Dt[B].join(`
`), Kn(m, C), qe.publish("endTilingPattern", C), Bi.pop().restore();
  };
  var kn = p.__private__.newObject = function() {
    var m = wn();
    return ai(m, !0), m;
  }, wn = p.__private__.newObjectDeferred = function() {
    return nt++, gt[nt] = function() {
      return vt;
    }, nt;
  }, ai = function(m, C) {
    return C = typeof C == "boolean" && C, gt[m] = vt, C && it(m + " 0 obj"), m;
  }, jr = p.__private__.newAdditionalObject = function() {
    var m = { objId: wn(), content: "" };
    return Rt.push(m), m;
  }, er = wn(), Pi = wn(), Li = p.__private__.decodeColorString = function(m) {
    var C = m.split(" ");
    if (C.length !== 2 || C[1] !== "g" && C[1] !== "G")
      C.length === 5 && (C[4] === "k" || C[4] === "K") && (C = [(1 - C[0]) * (1 - C[3]), (1 - C[1]) * (1 - C[3]), (1 - C[2]) * (1 - C[3]), "r"]);
    else {
      var tt = parseFloat(C[0]);
      C = [tt, tt, tt, "r"];
    }
    for (var ot = "#", bt = 0; bt < 3; bt++) ot += ("0" + Math.floor(255 * parseFloat(C[bt])).toString(16)).slice(-2);
    return ot;
  }, qi = p.__private__.encodeColorString = function(m) {
    var C;
    typeof m == "string" && (m = { ch1: m });
    var tt = m.ch1, ot = m.ch2, bt = m.ch3, Pt = m.ch4, Bt = m.pdfColorType === "draw" ? ["G", "RG", "K"] : ["g", "rg", "k"];
    if (typeof tt == "string" && tt.charAt(0) !== "#") {
      var Zt = new k1(tt);
      if (Zt.ok) tt = Zt.toHex();
      else if (!/^\d*\.?\d*$/.test(tt)) throw new Error('Invalid color "' + tt + '" passed to jsPDF.encodeColorString.');
    }
    if (typeof tt == "string" && /^#[0-9A-Fa-f]{3}$/.test(tt) && (tt = "#" + tt[1] + tt[1] + tt[2] + tt[2] + tt[3] + tt[3]), typeof tt == "string" && /^#[0-9A-Fa-f]{6}$/.test(tt)) {
      var ce = parseInt(tt.substr(1), 16);
      tt = ce >> 16 & 255, ot = ce >> 8 & 255, bt = 255 & ce;
    }
    if (ot === void 0 || Pt === void 0 && tt === ot && ot === bt) if (typeof tt == "string") C = tt + " " + Bt[0];
    else switch (m.precision) {
      case 2:
        C = z(tt / 255) + " " + Bt[0];
        break;
      case 3:
      default:
        C = A(tt / 255) + " " + Bt[0];
    }
    else if (Pt === void 0 || en(Pt) === "object") {
      if (Pt && !isNaN(Pt.a) && Pt.a === 0) return C = ["1.", "1.", "1.", Bt[1]].join(" ");
      if (typeof tt == "string") C = [tt, ot, bt, Bt[1]].join(" ");
      else switch (m.precision) {
        case 2:
          C = [z(tt / 255), z(ot / 255), z(bt / 255), Bt[1]].join(" ");
          break;
        default:
        case 3:
          C = [A(tt / 255), A(ot / 255), A(bt / 255), Bt[1]].join(" ");
      }
    } else if (typeof tt == "string") C = [tt, ot, bt, Pt, Bt[2]].join(" ");
    else switch (m.precision) {
      case 2:
        C = [z(tt), z(ot), z(bt), z(Pt), Bt[2]].join(" ");
        break;
      case 3:
      default:
        C = [A(tt), A(ot), A(bt), A(Pt), Bt[2]].join(" ");
    }
    return C;
  }, $i = p.__private__.getFilters = function() {
    return o;
  }, li = p.__private__.putStream = function(m) {
    var C = (m = m || {}).data || "", tt = m.filters || $i(), ot = m.alreadyAppliedFilters || [], bt = m.addLength1 || !1, Pt = C.length, Bt = m.objectId, Zt = function(Xn) {
      return Xn;
    };
    if (c !== null && Bt === void 0) throw new Error("ObjectId must be passed to putStream for file encryption");
    c !== null && (Zt = fn.encryptor(Bt, 0));
    var ce = {};
    tt === !0 && (tt = ["FlateEncode"]);
    var Te = m.additionalKeyValues || [], Le = (ce = ye.API.processDataByFilters !== void 0 ? ye.API.processDataByFilters(C, tt) : { data: C, reverseChain: [] }).reverseChain + (Array.isArray(ot) ? ot.join(" ") : ot.toString());
    if (ce.data.length !== 0 && (Te.push({ key: "Length", value: ce.data.length }), bt === !0 && Te.push({ key: "Length1", value: Pt })), Le.length != 0) if (Le.split("/").length - 1 == 1) Te.push({ key: "Filter", value: Le });
    else {
      Te.push({ key: "Filter", value: "[" + Le + "]" });
      for (var Be = 0; Be < Te.length; Be += 1) if (Te[Be].key === "DecodeParms") {
        for (var yn = [], xn = 0; xn < ce.reverseChain.split("/").length - 1; xn += 1) yn.push("null");
        yn.push(Te[Be].value), Te[Be].value = "[" + yn.join(" ") + "]";
      }
    }
    it("<<");
    for (var In = 0; In < Te.length; In++) it("/" + Te[In].key + " " + Te[In].value);
    it(">>"), ce.data.length !== 0 && (it("stream"), it(Zt(ce.data)), it("endstream"));
  }, Ci = p.__private__.putPage = function(m) {
    var C = m.number, tt = m.data, ot = m.objId, bt = m.contentsObjId;
    ai(ot, !0), it("<</Type /Page"), it("/Parent " + m.rootDictionaryObjId + " 0 R"), it("/Resources " + m.resourceDictionaryObjId + " 0 R"), it("/MediaBox [" + parseFloat(R(m.mediaBox.bottomLeftX)) + " " + parseFloat(R(m.mediaBox.bottomLeftY)) + " " + R(m.mediaBox.topRightX) + " " + R(m.mediaBox.topRightY) + "]"), m.cropBox !== null && it("/CropBox [" + R(m.cropBox.bottomLeftX) + " " + R(m.cropBox.bottomLeftY) + " " + R(m.cropBox.topRightX) + " " + R(m.cropBox.topRightY) + "]"), m.bleedBox !== null && it("/BleedBox [" + R(m.bleedBox.bottomLeftX) + " " + R(m.bleedBox.bottomLeftY) + " " + R(m.bleedBox.topRightX) + " " + R(m.bleedBox.topRightY) + "]"), m.trimBox !== null && it("/TrimBox [" + R(m.trimBox.bottomLeftX) + " " + R(m.trimBox.bottomLeftY) + " " + R(m.trimBox.topRightX) + " " + R(m.trimBox.topRightY) + "]"), m.artBox !== null && it("/ArtBox [" + R(m.artBox.bottomLeftX) + " " + R(m.artBox.bottomLeftY) + " " + R(m.artBox.topRightX) + " " + R(m.artBox.topRightY) + "]"), typeof m.userUnit == "number" && m.userUnit !== 1 && it("/UserUnit " + m.userUnit), qe.publish("putPage", { objId: ot, pageContext: ve[C], pageNumber: C, page: tt }), it("/Contents " + bt + " 0 R"), it(">>"), it("endobj");
    var Pt = tt.join(`
`);
    return k === w.ADVANCED && (Pt += `
Q`), ai(bt, !0), li({ data: Pt, filters: $i(), objectId: bt }), it("endobj"), ot;
  }, zi = p.__private__.putPages = function() {
    var m, C, tt = [];
    for (m = 1; m <= an; m++) ve[m].objId = wn(), ve[m].contentsObjId = wn();
    for (m = 1; m <= an; m++) tt.push(Ci({ number: m, data: Dt[m], objId: ve[m].objId, contentsObjId: ve[m].contentsObjId, mediaBox: ve[m].mediaBox, cropBox: ve[m].cropBox, bleedBox: ve[m].bleedBox, trimBox: ve[m].trimBox, artBox: ve[m].artBox, userUnit: ve[m].userUnit, rootDictionaryObjId: er, resourceDictionaryObjId: Pi }));
    ai(er, !0), it("<</Type /Pages");
    var ot = "/Kids [";
    for (C = 0; C < an; C++) ot += tt[C] + " 0 R ";
    it(ot + "]"), it("/Count " + an), it(">>"), it("endobj"), qe.publish("postPutPages");
  }, Br = function(m) {
    qe.publish("putFont", { font: m, out: it, newObject: kn, putStream: li }), m.isAlreadyPutted !== !0 && (m.objectNumber = kn(), it("<<"), it("/Type /Font"), it("/BaseFont /" + Qo(m.postScriptName)), it("/Subtype /Type1"), typeof m.encoding == "string" && it("/Encoding /" + m.encoding), it("/FirstChar 32"), it("/LastChar 255"), it(">>"), it("endobj"));
  }, qr = function() {
    for (var m in $t) $t.hasOwnProperty(m) && (d === !1 || d === !0 && g.hasOwnProperty(m)) && Br($t[m]);
  }, nr = function(m) {
    m.objectNumber = kn();
    var C = [];
    C.push({ key: "Type", value: "/XObject" }), C.push({ key: "Subtype", value: "/Form" }), C.push({ key: "BBox", value: "[" + [R(m.x), R(m.y), R(m.x + m.width), R(m.y + m.height)].join(" ") + "]" }), C.push({ key: "Matrix", value: "[" + m.matrix.toString() + "]" });
    var tt = m.pages[1].join(`
`);
    li({ data: tt, additionalKeyValues: C, objectId: m.objectNumber }), it("endobj");
  }, ir = function() {
    for (var m in Ze) Ze.hasOwnProperty(m) && nr(Ze[m]);
  }, Bs = function(m, C) {
    var tt, ot = [], bt = 1 / (C - 1);
    for (tt = 0; tt < 1; tt += bt) ot.push(tt);
    if (ot.push(1), m[0].offset != 0) {
      var Pt = { offset: 0, color: m[0].color };
      m.unshift(Pt);
    }
    if (m[m.length - 1].offset != 1) {
      var Bt = { offset: 1, color: m[m.length - 1].color };
      m.push(Bt);
    }
    for (var Zt = "", ce = 0, Te = 0; Te < ot.length; Te++) {
      for (tt = ot[Te]; tt > m[ce + 1].offset; ) ce++;
      var Le = m[ce].offset, Be = (tt - Le) / (m[ce + 1].offset - Le), yn = m[ce].color, xn = m[ce + 1].color;
      Zt += J(Math.round((1 - Be) * yn[0] + Be * xn[0]).toString(16)) + J(Math.round((1 - Be) * yn[1] + Be * xn[1]).toString(16)) + J(Math.round((1 - Be) * yn[2] + Be * xn[2]).toString(16));
    }
    return Zt.trim();
  }, ss = function(m, C) {
    C || (C = 21);
    var tt = kn(), ot = Bs(m.colors, C), bt = [];
    bt.push({ key: "FunctionType", value: "0" }), bt.push({ key: "Domain", value: "[0.0 1.0]" }), bt.push({ key: "Size", value: "[" + C + "]" }), bt.push({ key: "BitsPerSample", value: "8" }), bt.push({ key: "Range", value: "[0.0 1.0 0.0 1.0 0.0 1.0]" }), bt.push({ key: "Decode", value: "[0.0 1.0 0.0 1.0 0.0 1.0]" }), li({ data: ot, additionalKeyValues: bt, alreadyAppliedFilters: ["/ASCIIHexDecode"], objectId: tt }), it("endobj"), m.objectNumber = kn(), it("<< /ShadingType " + m.type), it("/ColorSpace /DeviceRGB");
    var Pt = "/Coords [" + R(parseFloat(m.coords[0])) + " " + R(parseFloat(m.coords[1])) + " ";
    m.type === 2 ? Pt += R(parseFloat(m.coords[2])) + " " + R(parseFloat(m.coords[3])) : Pt += R(parseFloat(m.coords[2])) + " " + R(parseFloat(m.coords[3])) + " " + R(parseFloat(m.coords[4])) + " " + R(parseFloat(m.coords[5])), it(Pt += "]"), m.matrix && it("/Matrix [" + m.matrix.toString() + "]"), it("/Function " + tt + " 0 R"), it("/Extend [true true]"), it(">>"), it("endobj");
  }, ba = function(m, C) {
    var tt = wn(), ot = kn();
    C.push({ resourcesOid: tt, objectOid: ot }), m.objectNumber = ot;
    var bt = [];
    bt.push({ key: "Type", value: "/Pattern" }), bt.push({ key: "PatternType", value: "1" }), bt.push({ key: "PaintType", value: "1" }), bt.push({ key: "TilingType", value: "1" }), bt.push({ key: "BBox", value: "[" + m.boundingBox.map(R).join(" ") + "]" }), bt.push({ key: "XStep", value: R(m.xStep) }), bt.push({ key: "YStep", value: R(m.yStep) }), bt.push({ key: "Resources", value: tt + " 0 R" }), m.matrix && bt.push({ key: "Matrix", value: "[" + m.matrix.toString() + "]" }), li({ data: m.stream, additionalKeyValues: bt, objectId: m.objectNumber }), it("endobj");
  }, Ui = function(m) {
    var C;
    for (C in Me) Me.hasOwnProperty(C) && (Me[C] instanceof Ns ? ss(Me[C]) : Me[C] instanceof ro && ba(Me[C], m));
  }, Ao = function(m) {
    for (var C in m.objectNumber = kn(), it("<<"), m) switch (C) {
      case "opacity":
        it("/ca " + z(m[C]));
        break;
      case "stroke-opacity":
        it("/CA " + z(m[C]));
    }
    it(">>"), it("endobj");
  }, va = function() {
    var m;
    for (m in on) on.hasOwnProperty(m) && Ao(on[m]);
  }, qs = function() {
    for (var m in it("/XObject <<"), Ze) Ze.hasOwnProperty(m) && Ze[m].objectNumber >= 0 && it("/" + m + " " + Ze[m].objectNumber + " 0 R");
    qe.publish("putXobjectDict"), it(">>");
  }, wa = function() {
    fn.oid = kn(), it("<<"), it("/Filter /Standard"), it("/V " + fn.v), it("/R " + fn.r), it("/U <" + fn.toHexString(fn.U) + ">"), it("/O <" + fn.toHexString(fn.O) + ">"), it("/P " + fn.P), it(">>"), it("endobj");
  }, $s = function() {
    for (var m in it("/Font <<"), $t) $t.hasOwnProperty(m) && (d === !1 || d === !0 && g.hasOwnProperty(m)) && it("/" + m + " " + $t[m].objectNumber + " 0 R");
    it(">>");
  }, xa = function() {
    if (Object.keys(Me).length > 0) {
      for (var m in it("/Shading <<"), Me) Me.hasOwnProperty(m) && Me[m] instanceof Ns && Me[m].objectNumber >= 0 && it("/" + m + " " + Me[m].objectNumber + " 0 R");
      qe.publish("putShadingPatternDict"), it(">>");
    }
  }, $r = function(m) {
    if (Object.keys(Me).length > 0) {
      for (var C in it("/Pattern <<"), Me) Me.hasOwnProperty(C) && Me[C] instanceof p.TilingPattern && Me[C].objectNumber >= 0 && Me[C].objectNumber < m && it("/" + C + " " + Me[C].objectNumber + " 0 R");
      qe.publish("putTilingPatternDict"), it(">>");
    }
  }, Sa = function() {
    if (Object.keys(on).length > 0) {
      var m;
      for (m in it("/ExtGState <<"), on) on.hasOwnProperty(m) && on[m].objectNumber >= 0 && it("/" + m + " " + on[m].objectNumber + " 0 R");
      qe.publish("putGStateDict"), it(">>");
    }
  }, mn = function(m) {
    ai(m.resourcesOid, !0), it("<<"), it("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"), $s(), xa(), $r(m.objectOid), Sa(), qs(), it(">>"), it("endobj");
  }, Ti = function() {
    var m = [];
    qr(), va(), ir(), Ui(m), qe.publish("putResources"), m.forEach(mn), mn({ resourcesOid: Pi, objectOid: Number.MAX_SAFE_INTEGER }), qe.publish("postPutResources");
  }, ko = function() {
    qe.publish("putAdditionalObjects");
    for (var m = 0; m < Rt.length; m++) {
      var C = Rt[m];
      ai(C.objId, !0), it(C.content), it("endobj");
    }
    qe.publish("postPutAdditionalObjects");
  }, _o = function(m) {
    Ft[m.fontName] = Ft[m.fontName] || {}, Ft[m.fontName][m.fontStyle] = m.id;
  }, os = function(m, C, tt, ot, bt) {
    var Pt = { id: "F" + (Object.keys($t).length + 1).toString(10), postScriptName: m, fontName: C, fontStyle: tt, encoding: ot, isStandardFont: bt || !1, metadata: {} };
    return qe.publish("addFont", { font: Pt, instance: this }), $t[Pt.id] = Pt, _o(Pt), Pt.id;
  }, No = function(m) {
    for (var C = 0, tt = Mt.length; C < tt; C++) {
      var ot = os.call(this, m[C][0], m[C][1], m[C][2], Mt[C][3], !0);
      d === !1 && (g[ot] = !0);
      var bt = m[C][0].split("-");
      _o({ id: ot, fontName: bt[0], fontStyle: bt[1] || "" });
    }
    qe.publish("addFonts", { fonts: $t, dictionary: Ft });
  }, ui = function(m) {
    return m.foo = function() {
      try {
        return m.apply(this, arguments);
      } catch (ot) {
        var C = ot.stack || "";
        ~C.indexOf(" at ") && (C = C.split(" at ")[1]);
        var tt = "Error in function " + C.split(`
`)[0].split("<")[0] + ": " + ot.message;
        if (!Se.console) throw new Error(tt);
        Se.console.error(tt, ot), Se.alert && alert(tt);
      }
    }, m.foo.bar = m, m.foo;
  }, zr = function(m, C) {
    var tt, ot, bt, Pt, Bt, Zt, ce, Te, Le;
    if (bt = (C = C || {}).sourceEncoding || "Unicode", Bt = C.outputEncoding, (C.autoencode || Bt) && $t[rt].metadata && $t[rt].metadata[bt] && $t[rt].metadata[bt].encoding && (Pt = $t[rt].metadata[bt].encoding, !Bt && $t[rt].encoding && (Bt = $t[rt].encoding), !Bt && Pt.codePages && (Bt = Pt.codePages[0]), typeof Bt == "string" && (Bt = Pt[Bt]), Bt)) {
      for (ce = !1, Zt = [], tt = 0, ot = m.length; tt < ot; tt++) (Te = Bt[m.charCodeAt(tt)]) ? Zt.push(String.fromCharCode(Te)) : Zt.push(m[tt]), Zt[tt].charCodeAt(0) >> 8 && (ce = !0);
      m = Zt.join("");
    }
    for (tt = m.length; ce === void 0 && tt !== 0; ) m.charCodeAt(tt - 1) >> 8 && (ce = !0), tt--;
    if (!ce) return m;
    for (Zt = C.noBOM ? [] : [254, 255], tt = 0, ot = m.length; tt < ot; tt++) {
      if ((Le = (Te = m.charCodeAt(tt)) >> 8) >> 8) throw new Error("Character at position " + tt + " of string '" + m + "' exceeds 16bits. Cannot be encoded into UCS-2 BE");
      Zt.push(Le), Zt.push(Te - (Le << 8));
    }
    return String.fromCharCode.apply(void 0, Zt);
  }, Jn = p.__private__.pdfEscape = p.pdfEscape = function(m, C) {
    return zr(m, C).replace(/\\/g, "\\\\").replace(/\(/g, "\\(").replace(/\)/g, "\\)");
  }, zs = p.__private__.beginPage = function(m) {
    Dt[++an] = [], ve[an] = { objId: 0, contentsObjId: 0, userUnit: Number(a), artBox: null, bleedBox: null, cropBox: null, trimBox: null, mediaBox: { bottomLeftX: 0, bottomLeftY: 0, topRightX: Number(m[0]), topRightY: Number(m[1]) } }, at(an), Nt(Dt[B]);
  }, Po = function(m, C) {
    var tt, ot, bt;
    switch (n = C || n, typeof m == "string" && (tt = v(m.toLowerCase()), Array.isArray(tt) && (ot = tt[0], bt = tt[1])), Array.isArray(m) && (ot = m[0] * mt, bt = m[1] * mt), isNaN(ot) && (ot = r[0], bt = r[1]), (ot > 14400 || bt > 14400) && (un.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"), ot = Math.min(14400, ot), bt = Math.min(14400, bt)), r = [ot, bt], n.substr(0, 1)) {
      case "l":
        bt > ot && (r = [bt, ot]);
        break;
      case "p":
        ot > bt && (r = [bt, ot]);
    }
    zs(r), Ol(Na), it(rr), La !== 0 && it(La + " J"), Ca !== 0 && it(Ca + " j"), qe.publish("addPage", { pageNumber: an });
  }, et = function(m) {
    m > 0 && m <= an && (Dt.splice(m, 1), ve.splice(m, 1), an--, B > an && (B = an), this.setPage(B));
  }, at = function(m) {
    m > 0 && m <= an && (B = m);
  }, ft = p.__private__.getNumberOfPages = p.getNumberOfPages = function() {
    return Dt.length - 1;
  }, Ct = function(m, C, tt) {
    var ot, bt = void 0;
    return tt = tt || {}, m = m !== void 0 ? m : $t[rt].fontName, C = C !== void 0 ? C : $t[rt].fontStyle, ot = m.toLowerCase(), Ft[ot] !== void 0 && Ft[ot][C] !== void 0 ? bt = Ft[ot][C] : Ft[m] !== void 0 && Ft[m][C] !== void 0 ? bt = Ft[m][C] : tt.disableWarning === !1 && un.warn("Unable to look up font label for font '" + m + "', '" + C + "'. Refer to getFontList() for available fonts."), bt || tt.noFallback || (bt = Ft.times[C]) == null && (bt = Ft.times.normal), bt;
  }, kt = p.__private__.putInfo = function() {
    var m = kn(), C = function(ot) {
      return ot;
    };
    for (var tt in c !== null && (C = fn.encryptor(m, 0)), it("<<"), it("/Producer (" + Jn(C("jsPDF " + ye.version)) + ")"), ue) ue.hasOwnProperty(tt) && ue[tt] && it("/" + tt.substr(0, 1).toUpperCase() + tt.substr(1) + " (" + Jn(C(ue[tt])) + ")");
    it("/CreationDate (" + Jn(C(st)) + ")"), it(">>"), it("endobj");
  }, ae = p.__private__.putCatalog = function(m) {
    var C = (m = m || {}).rootDictionaryObjId || er;
    switch (kn(), it("<<"), it("/Type /Catalog"), it("/Pages " + C + " 0 R"), Gt || (Gt = "fullwidth"), Gt) {
      case "fullwidth":
        it("/OpenAction [3 0 R /FitH null]");
        break;
      case "fullheight":
        it("/OpenAction [3 0 R /FitV null]");
        break;
      case "fullpage":
        it("/OpenAction [3 0 R /Fit]");
        break;
      case "original":
        it("/OpenAction [3 0 R /XYZ null null 1]");
        break;
      default:
        var tt = "" + Gt;
        tt.substr(tt.length - 1) === "%" && (Gt = parseInt(Gt) / 100), typeof Gt == "number" && it("/OpenAction [3 0 R /XYZ null null " + z(Gt) + "]");
    }
    switch (xe || (xe = "continuous"), xe) {
      case "continuous":
        it("/PageLayout /OneColumn");
        break;
      case "single":
        it("/PageLayout /SinglePage");
        break;
      case "two":
      case "twoleft":
        it("/PageLayout /TwoColumnLeft");
        break;
      case "tworight":
        it("/PageLayout /TwoColumnRight");
    }
    Qt && it("/PageMode /" + Qt), qe.publish("putCatalog"), it(">>"), it("endobj");
  }, ne = p.__private__.putTrailer = function() {
    it("trailer"), it("<<"), it("/Size " + (nt + 1)), it("/Root " + nt + " 0 R"), it("/Info " + (nt - 1) + " 0 R"), c !== null && it("/Encrypt " + fn.oid + " 0 R"), it("/ID [ <" + W + "> <" + W + "> ]"), it(">>");
  }, we = p.__private__.putHeader = function() {
    it("%PDF-" + b), it("%ºß¬à");
  }, Ye = p.__private__.putXRef = function() {
    var m = "0000000000";
    it("xref"), it("0 " + (nt + 1)), it("0000000000 65535 f ");
    for (var C = 1; C <= nt; C++)
      typeof gt[C] == "function" ? it((m + gt[C]()).slice(-10) + " 00000 n ") : gt[C] !== void 0 ? it((m + gt[C]).slice(-10) + " 00000 n ") : it("0000000000 00000 n ");
  }, We = p.__private__.buildDocument = function() {
    he(), Nt(yt), qe.publish("buildDocument"), we(), zi(), ko(), Ti(), c !== null && wa(), kt(), ae();
    var m = vt;
    return Ye(), ne(), it("startxref"), it("" + m), it("%%EOF"), Nt(Dt[B]), yt.join(`
`);
  }, _e = p.__private__.getBlob = function(m) {
    return new Blob([Xt(m)], { type: "application/pdf" });
  }, He = p.output = p.__private__.output = ui(function(m, C) {
    switch (typeof (C = C || {}) == "string" ? C = { filename: C } : C.filename = C.filename || "generated.pdf", m) {
      case void 0:
        return We();
      case "save":
        p.save(C.filename);
        break;
      case "arraybuffer":
        return Xt(We());
      case "blob":
        return _e(We());
      case "bloburi":
      case "bloburl":
        if (Se.URL !== void 0 && typeof Se.URL.createObjectURL == "function") return Se.URL && Se.URL.createObjectURL(_e(We())) || void 0;
        un.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");
        break;
      case "datauristring":
      case "dataurlstring":
        var tt = "", ot = We();
        try {
          tt = lf(ot);
        } catch {
          tt = lf(unescape(encodeURIComponent(ot)));
        }
        return "data:application/pdf;filename=" + C.filename + ";base64," + tt;
      case "pdfobjectnewwindow":
        if (Object.prototype.toString.call(Se) === "[object Window]") {
          var bt = "https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js", Pt = ' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';
          C.pdfObjectUrl && (bt = C.pdfObjectUrl, Pt = "");
          var Bt = '<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="' + bt + '"' + Pt + '><\/script><script >PDFObject.embed("' + this.output("dataurlstring") + '", ' + JSON.stringify(C) + ");<\/script></body></html>", Zt = Se.open();
          return Zt !== null && Zt.document.write(Bt), Zt;
        }
        throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");
      case "pdfjsnewwindow":
        if (Object.prototype.toString.call(Se) === "[object Window]") {
          var ce = '<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="' + (C.pdfJsUrl || "examples/PDF.js/web/viewer.html") + "?file=&downloadName=" + C.filename + '" width="500px" height="400px" /></body></html>', Te = Se.open();
          if (Te !== null) {
            Te.document.write(ce);
            var Le = this;
            Te.document.documentElement.querySelector("#pdfViewer").onload = function() {
              Te.document.title = C.filename, Te.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Le.output("bloburl"));
            };
          }
          return Te;
        }
        throw new Error("The option pdfjsnewwindow just works in a browser-environment.");
      case "dataurlnewwindow":
        if (Object.prototype.toString.call(Se) !== "[object Window]") throw new Error("The option dataurlnewwindow just works in a browser-environment.");
        var Be = '<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="' + this.output("datauristring", C) + '"></iframe></body></html>', yn = Se.open();
        if (yn !== null && (yn.document.write(Be), yn.document.title = C.filename), yn || typeof safari > "u") return yn;
        break;
      case "datauri":
      case "dataurl":
        return Se.document.location.href = this.output("datauristring", C);
      default:
        return null;
    }
  }), le = function(m) {
    return Array.isArray(Dr) === !0 && Dr.indexOf(m) > -1;
  };
  switch (i) {
    case "pt":
      mt = 1;
      break;
    case "mm":
      mt = 72 / 25.4;
      break;
    case "cm":
      mt = 72 / 2.54;
      break;
    case "in":
      mt = 72;
      break;
    case "px":
      mt = le("px_scaling") == 1 ? 0.75 : 96 / 72;
      break;
    case "pc":
    case "em":
      mt = 12;
      break;
    case "ex":
      mt = 6;
      break;
    default:
      if (typeof i != "number") throw new Error("Invalid unit: " + i);
      mt = i;
  }
  var fn = null;
  St(), Q();
  var Aa = function(m) {
    return c !== null ? fn.encryptor(m, 0) : function(C) {
      return C;
    };
  }, as = p.__private__.getPageInfo = p.getPageInfo = function(m) {
    if (isNaN(m) || m % 1 != 0) throw new Error("Invalid argument passed to jsPDF.getPageInfo");
    return { objId: ve[m].objId, pageNumber: m, pageContext: ve[m] };
  }, Ae = p.__private__.getPageInfoByObjId = function(m) {
    if (isNaN(m) || m % 1 != 0) throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");
    for (var C in ve) if (ve[C].objId === m) break;
    return as(C);
  }, Lo = p.__private__.getCurrentPageInfo = p.getCurrentPageInfo = function() {
    return { objId: ve[B].objId, pageNumber: B, pageContext: ve[B] };
  };
  p.addPage = function() {
    return Po.apply(this, arguments), this;
  }, p.setPage = function() {
    return at.apply(this, arguments), Nt.call(this, Dt[B]), this;
  }, p.insertPage = function(m) {
    return this.addPage(), this.movePage(B, m), this;
  }, p.movePage = function(m, C) {
    var tt, ot;
    if (m > C) {
      tt = Dt[m], ot = ve[m];
      for (var bt = m; bt > C; bt--) Dt[bt] = Dt[bt - 1], ve[bt] = ve[bt - 1];
      Dt[C] = tt, ve[C] = ot, this.setPage(C);
    } else if (m < C) {
      tt = Dt[m], ot = ve[m];
      for (var Pt = m; Pt < C; Pt++) Dt[Pt] = Dt[Pt + 1], ve[Pt] = ve[Pt + 1];
      Dt[C] = tt, ve[C] = ot, this.setPage(C);
    }
    return this;
  }, p.deletePage = function() {
    return et.apply(this, arguments), this;
  }, p.__private__.text = p.text = function(m, C, tt, ot, bt) {
    var Pt, Bt, Zt, ce, Te, Le, Be, yn, xn, In = (ot = ot || {}).scope || this;
    if (typeof m == "number" && typeof C == "number" && (typeof tt == "string" || Array.isArray(tt))) {
      var Xn = tt;
      tt = C, C = m, m = Xn;
    }
    if (arguments[3] instanceof ge ? (O("The transform parameter of text() with a Matrix value"), xn = bt) : (Zt = arguments[4], ce = arguments[5], en(Be = arguments[3]) === "object" && Be !== null || (typeof Zt == "string" && (ce = Zt, Zt = null), typeof Be == "string" && (ce = Be, Be = null), typeof Be == "number" && (Zt = Be, Be = null), ot = { flags: Be, angle: Zt, align: ce })), isNaN(C) || isNaN(tt) || m == null) throw new Error("Invalid arguments passed to jsPDF.text");
    if (m.length === 0) return In;
    var jn = "", sr = !1, Ii = typeof ot.lineHeightFactor == "number" ? ot.lineHeightFactor : Ws, Ar = In.internal.scaleFactor;
    function Bl(cn) {
      return cn = cn.split("	").join(Array(ot.TabLen || 9).join(" ")), Jn(cn, Be);
    }
    function Fa(cn) {
      for (var hn, Nn = cn.concat(), Mn = [], Vr = Nn.length; Vr--; ) typeof (hn = Nn.shift()) == "string" ? Mn.push(hn) : Array.isArray(cn) && (hn.length === 1 || hn[1] === void 0 && hn[2] === void 0) ? Mn.push(hn[0]) : Mn.push([hn[0], hn[1], hn[2]]);
      return Mn;
    }
    function Ma(cn, hn) {
      var Nn;
      if (typeof cn == "string") Nn = hn(cn)[0];
      else if (Array.isArray(cn)) {
        for (var Mn, Vr, Ua = cn.concat(), Uo = [], Wl = Ua.length; Wl--; ) typeof (Mn = Ua.shift()) == "string" ? Uo.push(hn(Mn)[0]) : Array.isArray(Mn) && typeof Mn[0] == "string" && (Vr = hn(Mn[0], Mn[1], Mn[2]), Uo.push([Vr[0], Vr[1], Vr[2]]));
        Nn = Uo;
      }
      return Nn;
    }
    var Fo = !1, Ra = !0;
    if (typeof m == "string") Fo = !0;
    else if (Array.isArray(m)) {
      var Da = m.concat();
      Bt = [];
      for (var Mo, Wn = Da.length; Wn--; ) (typeof (Mo = Da.shift()) != "string" || Array.isArray(Mo) && typeof Mo[0] != "string") && (Ra = !1);
      Fo = Ra;
    }
    if (Fo === !1) throw new Error('Type of text must be string or Array. "' + m + '" is not recognized.');
    typeof m == "string" && (m = m.match(/[\r?\n]/) ? m.split(/\r\n|\r|\n/g) : [m]);
    var Ro = qt / In.internal.scaleFactor, Do = Ro * (Ii - 1);
    switch (ot.baseline) {
      case "bottom":
        tt -= Do;
        break;
      case "top":
        tt += Ro - Do;
        break;
      case "hanging":
        tt += Ro - 2 * Do;
        break;
      case "middle":
        tt += Ro / 2 - Do;
    }
    if ((Le = ot.maxWidth || 0) > 0 && (typeof m == "string" ? m = In.splitTextToSize(m, Le) : Object.prototype.toString.call(m) === "[object Array]" && (m = m.reduce(function(cn, hn) {
      return cn.concat(In.splitTextToSize(hn, Le));
    }, []))), Pt = { text: m, x: C, y: tt, options: ot, mutex: { pdfEscape: Jn, activeFontKey: rt, fonts: $t, activeFontSize: qt } }, qe.publish("preProcessText", Pt), m = Pt.text, Zt = (ot = Pt.options).angle, !(xn instanceof ge) && Zt && typeof Zt == "number") {
      Zt *= Math.PI / 180, ot.rotationDirection === 0 && (Zt = -Zt), k === w.ADVANCED && (Zt = -Zt);
      var jo = Math.cos(Zt), ja = Math.sin(Zt);
      xn = new ge(jo, ja, -ja, jo, 0, 0);
    } else Zt && Zt instanceof ge && (xn = Zt);
    k !== w.ADVANCED || xn || (xn = Ni), (Te = ot.charSpace || Io) !== void 0 && (jn += R(_(Te)) + ` Tc
`, this.setCharSpace(this.getCharSpace() || 0)), (yn = ot.horizontalScale) !== void 0 && (jn += R(100 * yn) + ` Tz
`), ot.lang;
    var pi = -1, Vc = ot.renderingMode !== void 0 ? ot.renderingMode : ot.stroke, Ba = In.internal.getCurrentPageInfo().pageContext;
    switch (Vc) {
      case 0:
      case !1:
      case "fill":
        pi = 0;
        break;
      case 1:
      case !0:
      case "stroke":
        pi = 1;
        break;
      case 2:
      case "fillThenStroke":
        pi = 2;
        break;
      case 3:
      case "invisible":
        pi = 3;
        break;
      case 4:
      case "fillAndAddForClipping":
        pi = 4;
        break;
      case 5:
      case "strokeAndAddPathForClipping":
        pi = 5;
        break;
      case 6:
      case "fillThenStrokeAndAddToPathForClipping":
        pi = 6;
        break;
      case 7:
      case "addToPathForClipping":
        pi = 7;
    }
    var ql = Ba.usedRenderingMode !== void 0 ? Ba.usedRenderingMode : -1;
    pi !== -1 ? jn += pi + ` Tr
` : ql !== -1 && (jn += `0 Tr
`), pi !== -1 && (Ba.usedRenderingMode = pi), ce = ot.align || "left";
    var Wi, Bo = qt * Ii, $l = In.internal.pageSize.getWidth(), zl = $t[rt];
    Te = ot.charSpace || Io, Le = ot.maxWidth || 0, Be = Object.assign({ autoencode: !0, noBOM: !0 }, ot.flags);
    var hs = [], Vs = function(cn) {
      return In.getStringUnitWidth(cn, { font: zl, charSpace: Te, fontSize: qt, doKerning: !1 }) * qt / Ar;
    };
    if (Object.prototype.toString.call(m) === "[object Array]") {
      var gi;
      Bt = Fa(m), ce !== "left" && (Wi = Bt.map(Vs));
      var ci, fs = 0;
      if (ce === "right") {
        C -= Wi[0], m = [], Wn = Bt.length;
        for (var Wr = 0; Wr < Wn; Wr++) Wr === 0 ? (ci = Sr(C), gi = Ur(tt)) : (ci = _(fs - Wi[Wr]), gi = -Bo), m.push([Bt[Wr], ci, gi]), fs = Wi[Wr];
      } else if (ce === "center") {
        C -= Wi[0] / 2, m = [], Wn = Bt.length;
        for (var Hr = 0; Hr < Wn; Hr++) Hr === 0 ? (ci = Sr(C), gi = Ur(tt)) : (ci = _((fs - Wi[Hr]) / 2), gi = -Bo), m.push([Bt[Hr], ci, gi]), fs = Wi[Hr];
      } else if (ce === "left") {
        m = [], Wn = Bt.length;
        for (var qo = 0; qo < Wn; qo++) m.push(Bt[qo]);
      } else if (ce === "justify" && zl.encoding === "Identity-H") {
        m = [], Wn = Bt.length, Le = Le !== 0 ? Le : $l;
        for (var Gr = 0, _n = 0; _n < Wn; _n++) if (gi = _n === 0 ? Ur(tt) : -Bo, ci = _n === 0 ? Sr(C) : Gr, _n < Wn - 1) {
          var qa = _((Le - Wi[_n]) / (Bt[_n].split(" ").length - 1)), hi = Bt[_n].split(" ");
          m.push([hi[0] + " ", ci, gi]), Gr = 0;
          for (var Hi = 1; Hi < hi.length; Hi++) {
            var $o = (Vs(hi[Hi - 1] + " " + hi[Hi]) - Vs(hi[Hi])) * Ar + qa;
            Hi == hi.length - 1 ? m.push([hi[Hi], $o, 0]) : m.push([hi[Hi] + " ", $o, 0]), Gr -= $o;
          }
        } else m.push([Bt[_n], ci, gi]);
        m.push(["", Gr, 0]);
      } else {
        if (ce !== "justify") throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');
        for (m = [], Wn = Bt.length, Le = Le !== 0 ? Le : $l, _n = 0; _n < Wn; _n++) gi = _n === 0 ? Ur(tt) : -Bo, ci = _n === 0 ? Sr(C) : 0, _n < Wn - 1 ? hs.push(R(_((Le - Wi[_n]) / (Bt[_n].split(" ").length - 1)))) : hs.push(0), m.push([Bt[_n], ci, gi]);
      }
    }
    var Ul = typeof ot.R2L == "boolean" ? ot.R2L : ee;
    Ul === !0 && (m = Ma(m, function(cn, hn, Nn) {
      return [cn.split("").reverse().join(""), hn, Nn];
    })), Pt = { text: m, x: C, y: tt, options: ot, mutex: { pdfEscape: Jn, activeFontKey: rt, fonts: $t, activeFontSize: qt } }, qe.publish("postProcessText", Pt), m = Pt.text, sr = Pt.mutex.isHex || !1;
    var $a = $t[rt].encoding;
    $a !== "WinAnsiEncoding" && $a !== "StandardEncoding" || (m = Ma(m, function(cn, hn, Nn) {
      return [Bl(cn), hn, Nn];
    })), Bt = Fa(m), m = [];
    for (var Ys, Ks, ds, Js = 0, zo = 1, Xs = Array.isArray(Bt[0]) ? zo : Js, ps = "", za = function(cn, hn, Nn) {
      var Mn = "";
      return Nn instanceof ge ? (Nn = typeof ot.angle == "number" ? _i(Nn, new ge(1, 0, 0, 1, cn, hn)) : _i(new ge(1, 0, 0, 1, cn, hn), Nn), k === w.ADVANCED && (Nn = _i(new ge(1, 0, 0, -1, 0, 0), Nn)), Mn = Nn.join(" ") + ` Tm
`) : Mn = R(cn) + " " + R(hn) + ` Td
`, Mn;
    }, Gi = 0; Gi < Bt.length; Gi++) {
      switch (ps = "", Xs) {
        case zo:
          ds = (sr ? "<" : "(") + Bt[Gi][0] + (sr ? ">" : ")"), Ys = parseFloat(Bt[Gi][1]), Ks = parseFloat(Bt[Gi][2]);
          break;
        case Js:
          ds = (sr ? "<" : "(") + Bt[Gi] + (sr ? ">" : ")"), Ys = Sr(C), Ks = Ur(tt);
      }
      hs !== void 0 && hs[Gi] !== void 0 && (ps = hs[Gi] + ` Tw
`), Gi === 0 ? m.push(ps + za(Ys, Ks, xn) + ds) : Xs === Js ? m.push(ps + ds) : Xs === zo && m.push(ps + za(Ys, Ks, xn) + ds);
    }
    m = Xs === Js ? m.join(` Tj
T* `) : m.join(` Tj
`), m += ` Tj
`;
    var Vi = `BT
/`;
    return Vi += rt + " " + qt + ` Tf
`, Vi += R(qt * Ii) + ` TL
`, Vi += Hs + `
`, Vi += jn, Vi += m, it(Vi += "ET"), g[rt] = !0, In;
  };
  var jc = p.__private__.clip = p.clip = function(m) {
    return it(m === "evenodd" ? "W*" : "W"), this;
  };
  p.clipEvenOdd = function() {
    return jc("evenodd");
  }, p.__private__.discardPath = p.discardPath = function() {
    return it("n"), this;
  };
  var xr = p.__private__.isValidStyle = function(m) {
    var C = !1;
    return [void 0, null, "S", "D", "F", "DF", "FD", "f", "f*", "B", "B*", "n"].indexOf(m) !== -1 && (C = !0), C;
  };
  p.__private__.setDefaultPathOperation = p.setDefaultPathOperation = function(m) {
    return xr(m) && (h = m), this;
  };
  var Il = p.__private__.getStyle = p.getStyle = function(m) {
    var C = h;
    switch (m) {
      case "D":
      case "S":
        C = "S";
        break;
      case "F":
        C = "f";
        break;
      case "FD":
      case "DF":
        C = "B";
        break;
      case "f":
      case "f*":
      case "B":
      case "B*":
        C = m;
    }
    return C;
  }, El = p.close = function() {
    return it("h"), this;
  };
  p.stroke = function() {
    return it("S"), this;
  }, p.fill = function(m) {
    return Co("f", m), this;
  }, p.fillEvenOdd = function(m) {
    return Co("f*", m), this;
  }, p.fillStroke = function(m) {
    return Co("B", m), this;
  }, p.fillStrokeEvenOdd = function(m) {
    return Co("B*", m), this;
  };
  var Co = function(m, C) {
    en(C) === "object" ? qc(C, m) : it(m);
  }, ka = function(m) {
    m === null || k === w.ADVANCED && m === void 0 || (m = Il(m), it(m));
  };
  function Bc(m, C, tt, ot, bt) {
    var Pt = new ro(C || this.boundingBox, tt || this.xStep, ot || this.yStep, this.gState, bt || this.matrix);
    Pt.stream = this.stream;
    var Bt = m + "$$" + this.cloneIndex++ + "$$";
    return Kn(Bt, Pt), Pt;
  }
  var qc = function(m, C) {
    var tt = ji[m.key], ot = Me[tt];
    if (ot instanceof Ns) it("q"), it($c(C)), ot.gState && p.setGState(ot.gState), it(m.matrix.toString() + " cm"), it("/" + tt + " sh"), it("Q");
    else if (ot instanceof ro) {
      var bt = new ge(1, 0, 0, -1, 0, cs());
      m.matrix && (bt = bt.multiply(m.matrix || Ni), tt = Bc.call(ot, m.key, m.boundingBox, m.xStep, m.yStep, bt).id), it("q"), it("/Pattern cs"), it("/" + tt + " scn"), ot.gState && p.setGState(ot.gState), it(C), it("Q");
    }
  }, $c = function(m) {
    switch (m) {
      case "f":
      case "F":
        return "W n";
      case "f*":
        return "W* n";
      case "B":
        return "W S";
      case "B*":
        return "W* S";
      case "S":
        return "W S";
      case "n":
        return "W n";
    }
  }, _a = p.moveTo = function(m, C) {
    return it(R(_(m)) + " " + R(M(C)) + " m"), this;
  }, Us = p.lineTo = function(m, C) {
    return it(R(_(m)) + " " + R(M(C)) + " l"), this;
  }, ls = p.curveTo = function(m, C, tt, ot, bt, Pt) {
    return it([R(_(m)), R(M(C)), R(_(tt)), R(M(ot)), R(_(bt)), R(M(Pt)), "c"].join(" ")), this;
  };
  p.__private__.line = p.line = function(m, C, tt, ot, bt) {
    if (isNaN(m) || isNaN(C) || isNaN(tt) || isNaN(ot) || !xr(bt)) throw new Error("Invalid arguments passed to jsPDF.line");
    return k === w.COMPAT ? this.lines([[tt - m, ot - C]], m, C, [1, 1], bt || "S") : this.lines([[tt - m, ot - C]], m, C, [1, 1]).stroke();
  }, p.__private__.lines = p.lines = function(m, C, tt, ot, bt, Pt) {
    var Bt, Zt, ce, Te, Le, Be, yn, xn, In, Xn, jn, sr;
    if (typeof m == "number" && (sr = tt, tt = C, C = m, m = sr), ot = ot || [1, 1], Pt = Pt || !1, isNaN(C) || isNaN(tt) || !Array.isArray(m) || !Array.isArray(ot) || !xr(bt) || typeof Pt != "boolean") throw new Error("Invalid arguments passed to jsPDF.lines");
    for (_a(C, tt), Bt = ot[0], Zt = ot[1], Te = m.length, Xn = C, jn = tt, ce = 0; ce < Te; ce++) (Le = m[ce]).length === 2 ? (Xn = Le[0] * Bt + Xn, jn = Le[1] * Zt + jn, Us(Xn, jn)) : (Be = Le[0] * Bt + Xn, yn = Le[1] * Zt + jn, xn = Le[2] * Bt + Xn, In = Le[3] * Zt + jn, Xn = Le[4] * Bt + Xn, jn = Le[5] * Zt + jn, ls(Be, yn, xn, In, Xn, jn));
    return Pt && El(), ka(bt), this;
  }, p.path = function(m) {
    for (var C = 0; C < m.length; C++) {
      var tt = m[C], ot = tt.c;
      switch (tt.op) {
        case "m":
          _a(ot[0], ot[1]);
          break;
        case "l":
          Us(ot[0], ot[1]);
          break;
        case "c":
          ls.apply(this, ot);
          break;
        case "h":
          El();
      }
    }
    return this;
  }, p.__private__.rect = p.rect = function(m, C, tt, ot, bt) {
    if (isNaN(m) || isNaN(C) || isNaN(tt) || isNaN(ot) || !xr(bt)) throw new Error("Invalid arguments passed to jsPDF.rect");
    return k === w.COMPAT && (ot = -ot), it([R(_(m)), R(M(C)), R(_(tt)), R(_(ot)), "re"].join(" ")), ka(bt), this;
  }, p.__private__.triangle = p.triangle = function(m, C, tt, ot, bt, Pt, Bt) {
    if (isNaN(m) || isNaN(C) || isNaN(tt) || isNaN(ot) || isNaN(bt) || isNaN(Pt) || !xr(Bt)) throw new Error("Invalid arguments passed to jsPDF.triangle");
    return this.lines([[tt - m, ot - C], [bt - tt, Pt - ot], [m - bt, C - Pt]], m, C, [1, 1], Bt, !0), this;
  }, p.__private__.roundedRect = p.roundedRect = function(m, C, tt, ot, bt, Pt, Bt) {
    if (isNaN(m) || isNaN(C) || isNaN(tt) || isNaN(ot) || isNaN(bt) || isNaN(Pt) || !xr(Bt)) throw new Error("Invalid arguments passed to jsPDF.roundedRect");
    var Zt = 4 / 3 * (Math.SQRT2 - 1);
    return bt = Math.min(bt, 0.5 * tt), Pt = Math.min(Pt, 0.5 * ot), this.lines([[tt - 2 * bt, 0], [bt * Zt, 0, bt, Pt - Pt * Zt, bt, Pt], [0, ot - 2 * Pt], [0, Pt * Zt, -bt * Zt, Pt, -bt, Pt], [2 * bt - tt, 0], [-bt * Zt, 0, -bt, -Pt * Zt, -bt, -Pt], [0, 2 * Pt - ot], [0, -Pt * Zt, bt * Zt, -Pt, bt, -Pt]], m + bt, C, [1, 1], Bt, !0), this;
  }, p.__private__.ellipse = p.ellipse = function(m, C, tt, ot, bt) {
    if (isNaN(m) || isNaN(C) || isNaN(tt) || isNaN(ot) || !xr(bt)) throw new Error("Invalid arguments passed to jsPDF.ellipse");
    var Pt = 4 / 3 * (Math.SQRT2 - 1) * tt, Bt = 4 / 3 * (Math.SQRT2 - 1) * ot;
    return _a(m + tt, C), ls(m + tt, C - Bt, m + Pt, C - ot, m, C - ot), ls(m - Pt, C - ot, m - tt, C - Bt, m - tt, C), ls(m - tt, C + Bt, m - Pt, C + ot, m, C + ot), ls(m + Pt, C + ot, m + tt, C + Bt, m + tt, C), ka(bt), this;
  }, p.__private__.circle = p.circle = function(m, C, tt, ot) {
    if (isNaN(m) || isNaN(C) || isNaN(tt) || !xr(ot)) throw new Error("Invalid arguments passed to jsPDF.circle");
    return this.ellipse(m, C, tt, tt, ot);
  }, p.setFont = function(m, C, tt) {
    return tt && (C = G(C, tt)), rt = Ct(m, C, { disableWarning: !1 }), this;
  };
  var zc = p.__private__.getFont = p.getFont = function() {
    return $t[Ct.apply(p, arguments)];
  };
  p.__private__.getFontList = p.getFontList = function() {
    var m, C, tt = {};
    for (m in Ft) if (Ft.hasOwnProperty(m)) for (C in tt[m] = [], Ft[m]) Ft[m].hasOwnProperty(C) && tt[m].push(C);
    return tt;
  }, p.addFont = function(m, C, tt, ot, bt) {
    var Pt = ["StandardEncoding", "MacRomanEncoding", "Identity-H", "WinAnsiEncoding"];
    return arguments[3] && Pt.indexOf(arguments[3]) !== -1 ? bt = arguments[3] : arguments[3] && Pt.indexOf(arguments[3]) == -1 && (tt = G(tt, ot)), bt = bt || "Identity-H", os.call(this, m, C, tt, bt);
  };
  var Ws, Na = e.lineWidth || 0.200025, To = p.__private__.getLineWidth = p.getLineWidth = function() {
    return Na;
  }, Ol = p.__private__.setLineWidth = p.setLineWidth = function(m) {
    return Na = m, it(R(_(m)) + " w"), this;
  };
  p.__private__.setLineDash = ye.API.setLineDash = ye.API.setLineDashPattern = function(m, C) {
    if (m = m || [], C = C || 0, isNaN(C) || !Array.isArray(m)) throw new Error("Invalid arguments passed to jsPDF.setLineDash");
    return m = m.map(function(tt) {
      return R(_(tt));
    }).join(" "), C = R(_(C)), it("[" + m + "] " + C + " d"), this;
  };
  var Fl = p.__private__.getLineHeight = p.getLineHeight = function() {
    return qt * Ws;
  };
  p.__private__.getLineHeight = p.getLineHeight = function() {
    return qt * Ws;
  };
  var Ml = p.__private__.setLineHeightFactor = p.setLineHeightFactor = function(m) {
    return typeof (m = m || 1.15) == "number" && (Ws = m), this;
  }, Rl = p.__private__.getLineHeightFactor = p.getLineHeightFactor = function() {
    return Ws;
  };
  Ml(e.lineHeight);
  var Sr = p.__private__.getHorizontalCoordinate = function(m) {
    return _(m);
  }, Ur = p.__private__.getVerticalCoordinate = function(m) {
    return k === w.ADVANCED ? m : ve[B].mediaBox.topRightY - ve[B].mediaBox.bottomLeftY - _(m);
  }, Uc = p.__private__.getHorizontalCoordinateString = p.getHorizontalCoordinateString = function(m) {
    return R(Sr(m));
  }, us = p.__private__.getVerticalCoordinateString = p.getVerticalCoordinateString = function(m) {
    return R(Ur(m));
  }, rr = e.strokeColor || "0 G";
  p.__private__.getStrokeColor = p.getDrawColor = function() {
    return Li(rr);
  }, p.__private__.setStrokeColor = p.setDrawColor = function(m, C, tt, ot) {
    return rr = qi({ ch1: m, ch2: C, ch3: tt, ch4: ot, pdfColorType: "draw", precision: 2 }), it(rr), this;
  };
  var Pa = e.fillColor || "0 g";
  p.__private__.getFillColor = p.getFillColor = function() {
    return Li(Pa);
  }, p.__private__.setFillColor = p.setFillColor = function(m, C, tt, ot) {
    return Pa = qi({ ch1: m, ch2: C, ch3: tt, ch4: ot, pdfColorType: "fill", precision: 2 }), it(Pa), this;
  };
  var Hs = e.textColor || "0 g", Wc = p.__private__.getTextColor = p.getTextColor = function() {
    return Li(Hs);
  };
  p.__private__.setTextColor = p.setTextColor = function(m, C, tt, ot) {
    return Hs = qi({ ch1: m, ch2: C, ch3: tt, ch4: ot, pdfColorType: "text", precision: 3 }), this;
  };
  var Io = e.charSpace, Hc = p.__private__.getCharSpace = p.getCharSpace = function() {
    return parseFloat(Io || 0);
  };
  p.__private__.setCharSpace = p.setCharSpace = function(m) {
    if (isNaN(m)) throw new Error("Invalid argument passed to jsPDF.setCharSpace");
    return Io = m, this;
  };
  var La = 0;
  p.CapJoinStyles = { 0: 0, butt: 0, but: 0, miter: 0, 1: 1, round: 1, rounded: 1, circle: 1, 2: 2, projecting: 2, project: 2, square: 2, bevel: 2 }, p.__private__.setLineCap = p.setLineCap = function(m) {
    var C = p.CapJoinStyles[m];
    if (C === void 0) throw new Error("Line cap style of '" + m + "' is not recognized. See or extend .CapJoinStyles property for valid styles");
    return La = C, it(C + " J"), this;
  };
  var Ca = 0;
  p.__private__.setLineJoin = p.setLineJoin = function(m) {
    var C = p.CapJoinStyles[m];
    if (C === void 0) throw new Error("Line join style of '" + m + "' is not recognized. See or extend .CapJoinStyles property for valid styles");
    return Ca = C, it(C + " j"), this;
  }, p.__private__.setLineMiterLimit = p.__private__.setMiterLimit = p.setLineMiterLimit = p.setMiterLimit = function(m) {
    if (m = m || 0, isNaN(m)) throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");
    return it(R(_(m)) + " M"), this;
  }, p.GState = ml, p.setGState = function(m) {
    (m = typeof m == "string" ? on[Yn[m]] : Dl(null, m)).equals(Dn) || (it("/" + m.id + " gs"), Dn = m);
  };
  var Dl = function(m, C) {
    if (!m || !Yn[m]) {
      var tt = !1;
      for (var ot in on) if (on.hasOwnProperty(ot) && on[ot].equals(C)) {
        tt = !0;
        break;
      }
      if (tt) C = on[ot];
      else {
        var bt = "GS" + (Object.keys(on).length + 1).toString(10);
        on[bt] = C, C.id = bt;
      }
      return m && (Yn[m] = C.id), qe.publish("addGState", C), C;
    }
  };
  p.addGState = function(m, C) {
    return Dl(m, C), this;
  }, p.saveGraphicsState = function() {
    return it("q"), pe.push({ key: rt, size: qt, color: Hs }), this;
  }, p.restoreGraphicsState = function() {
    it("Q");
    var m = pe.pop();
    return rt = m.key, qt = m.size, Hs = m.color, Dn = null, this;
  }, p.setCurrentTransformationMatrix = function(m) {
    return it(m.toString() + " cm"), this;
  }, p.comment = function(m) {
    return it("#" + m), this;
  };
  var Eo = function(m, C) {
    var tt = m || 0;
    Object.defineProperty(this, "x", { enumerable: !0, get: function() {
      return tt;
    }, set: function(Pt) {
      isNaN(Pt) || (tt = parseFloat(Pt));
    } });
    var ot = C || 0;
    Object.defineProperty(this, "y", { enumerable: !0, get: function() {
      return ot;
    }, set: function(Pt) {
      isNaN(Pt) || (ot = parseFloat(Pt));
    } });
    var bt = "pt";
    return Object.defineProperty(this, "type", { enumerable: !0, get: function() {
      return bt;
    }, set: function(Pt) {
      bt = Pt.toString();
    } }), this;
  }, Ta = function(m, C, tt, ot) {
    Eo.call(this, m, C), this.type = "rect";
    var bt = tt || 0;
    Object.defineProperty(this, "w", { enumerable: !0, get: function() {
      return bt;
    }, set: function(Bt) {
      isNaN(Bt) || (bt = parseFloat(Bt));
    } });
    var Pt = ot || 0;
    return Object.defineProperty(this, "h", { enumerable: !0, get: function() {
      return Pt;
    }, set: function(Bt) {
      isNaN(Bt) || (Pt = parseFloat(Bt));
    } }), this;
  }, Ia = function() {
    this.page = an, this.currentPage = B, this.pages = Dt.slice(0), this.pagesContext = ve.slice(0), this.x = zt, this.y = It, this.matrix = be, this.width = Gs(B), this.height = cs(B), this.outputDestination = Wt, this.id = "", this.objectNumber = -1;
  };
  Ia.prototype.restore = function() {
    an = this.page, B = this.currentPage, ve = this.pagesContext, Dt = this.pages, zt = this.x, It = this.y, be = this.matrix, Ea(B, this.width), Oa(B, this.height), Wt = this.outputDestination;
  };
  var jl = function(m, C, tt, ot, bt) {
    Bi.push(new Ia()), an = B = 0, Dt = [], zt = m, It = C, be = bt, zs([tt, ot]);
  }, Gc = function(m) {
    if (ki[m]) Bi.pop().restore();
    else {
      var C = new Ia(), tt = "Xo" + (Object.keys(Ze).length + 1).toString(10);
      C.id = tt, ki[m] = tt, Ze[tt] = C, qe.publish("addFormObject", C), Bi.pop().restore();
    }
  };
  for (var Oo in p.beginFormObject = function(m, C, tt, ot, bt) {
    return jl(m, C, tt, ot, bt), this;
  }, p.endFormObject = function(m) {
    return Gc(m), this;
  }, p.doFormObject = function(m, C) {
    var tt = Ze[ki[m]];
    return it("q"), it(C.toString() + " cm"), it("/" + tt.id + " Do"), it("Q"), this;
  }, p.getFormObject = function(m) {
    var C = Ze[ki[m]];
    return { x: C.x, y: C.y, width: C.width, height: C.height, matrix: C.matrix };
  }, p.save = function(m, C) {
    return m = m || "generated.pdf", (C = C || {}).returnPromise = C.returnPromise || !1, C.returnPromise === !1 ? (to(_e(We()), m), typeof to.unload == "function" && Se.setTimeout && setTimeout(to.unload, 911), this) : new Promise(function(tt, ot) {
      try {
        var bt = to(_e(We()), m);
        typeof to.unload == "function" && Se.setTimeout && setTimeout(to.unload, 911), tt(bt);
      } catch (Pt) {
        ot(Pt.message);
      }
    });
  }, ye.API) ye.API.hasOwnProperty(Oo) && (Oo === "events" && ye.API.events.length ? function(m, C) {
    var tt, ot, bt;
    for (bt = C.length - 1; bt !== -1; bt--) tt = C[bt][0], ot = C[bt][1], m.subscribe.apply(m, [tt].concat(typeof ot == "function" ? [ot] : ot));
  }(qe, ye.API.events) : p[Oo] = ye.API[Oo]);
  var Gs = p.getPageWidth = function(m) {
    return (ve[m = m || B].mediaBox.topRightX - ve[m].mediaBox.bottomLeftX) / mt;
  }, Ea = p.setPageWidth = function(m, C) {
    ve[m].mediaBox.topRightX = C * mt + ve[m].mediaBox.bottomLeftX;
  }, cs = p.getPageHeight = function(m) {
    return (ve[m = m || B].mediaBox.topRightY - ve[m].mediaBox.bottomLeftY) / mt;
  }, Oa = p.setPageHeight = function(m, C) {
    ve[m].mediaBox.topRightY = C * mt + ve[m].mediaBox.bottomLeftY;
  };
  return p.internal = { pdfEscape: Jn, getStyle: Il, getFont: zc, getFontSize: Ht, getCharSpace: Hc, getTextColor: Wc, getLineHeight: Fl, getLineHeightFactor: Rl, getLineWidth: To, write: de, getHorizontalCoordinate: Sr, getVerticalCoordinate: Ur, getCoordinateString: Uc, getVerticalCoordinateString: us, collections: {}, newObject: kn, newAdditionalObject: jr, newObjectDeferred: wn, newObjectDeferredBegin: ai, getFilters: $i, putStream: li, events: qe, scaleFactor: mt, pageSize: { getWidth: function() {
    return Gs(B);
  }, setWidth: function(m) {
    Ea(B, m);
  }, getHeight: function() {
    return cs(B);
  }, setHeight: function(m) {
    Oa(B, m);
  } }, encryptionOptions: c, encryption: fn, getEncryptor: Aa, output: He, getNumberOfPages: ft, pages: Dt, out: it, f2: z, f3: A, getPageInfo: as, getPageInfoByObjId: Ae, getCurrentPageInfo: Lo, getPDFVersion: x, Point: Eo, Rectangle: Ta, Matrix: ge, hasHotfix: le }, Object.defineProperty(p.internal.pageSize, "width", { get: function() {
    return Gs(B);
  }, set: function(m) {
    Ea(B, m);
  }, enumerable: !0, configurable: !0 }), Object.defineProperty(p.internal.pageSize, "height", { get: function() {
    return cs(B);
  }, set: function(m) {
    Oa(B, m);
  }, enumerable: !0, configurable: !0 }), No.call(p, Mt), rt = "F1", Po(r, n), qe.publish("initialized"), p;
}
Zo.prototype.lsbFirstWord = function(e) {
  return String.fromCharCode(e >> 0 & 255, e >> 8 & 255, e >> 16 & 255, e >> 24 & 255);
}, Zo.prototype.toHexString = function(e) {
  return e.split("").map(function(t) {
    return ("0" + (255 & t.charCodeAt(0)).toString(16)).slice(-2);
  }).join("");
}, Zo.prototype.hexToBytes = function(e) {
  for (var t = [], n = 0; n < e.length; n += 2) t.push(String.fromCharCode(parseInt(e.substr(n, 2), 16)));
  return t.join("");
}, Zo.prototype.processOwnerPassword = function(e, t) {
  return cf(uf(t).substr(0, 5), e);
}, Zo.prototype.encryptor = function(e, t) {
  var n = uf(this.encryptionKey + String.fromCharCode(255 & e, e >> 8 & 255, e >> 16 & 255, 255 & t, t >> 8 & 255)).substr(0, 10);
  return function(i) {
    return cf(n, i);
  };
}, ml.prototype.equals = function(e) {
  var t, n = "id,objectNumber,equals";
  if (!e || en(e) !== en(this)) return !1;
  var i = 0;
  for (t in this) if (!(n.indexOf(t) >= 0)) {
    if (this.hasOwnProperty(t) && !e.hasOwnProperty(t) || this[t] !== e[t]) return !1;
    i++;
  }
  for (t in e) e.hasOwnProperty(t) && n.indexOf(t) < 0 && i--;
  return i === 0;
}, ye.API = { events: [] }, ye.version = "2.5.2";
var An = ye.API, xd = 1, xo = function(e) {
  return e.replace(/\\/g, "\\\\").replace(/\(/g, "\\(").replace(/\)/g, "\\)");
}, Yo = function(e) {
  return e.replace(/\\\\/g, "\\").replace(/\\\(/g, "(").replace(/\\\)/g, ")");
}, Ce = function(e) {
  return e.toFixed(2);
}, ks = function(e) {
  return e.toFixed(5);
};
An.__acroform__ = {};
var Ai = function(e, t) {
  e.prototype = Object.create(t.prototype), e.prototype.constructor = e;
}, Yp = function(e) {
  return e * xd;
}, Lr = function(e) {
  var t = new L1(), n = ie.internal.getHeight(e) || 0, i = ie.internal.getWidth(e) || 0;
  return t.BBox = [0, 0, Number(Ce(i)), Number(Ce(n))], t;
}, dv = An.__acroform__.setBit = function(e, t) {
  if (e = e || 0, t = t || 0, isNaN(e) || isNaN(t)) throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");
  return e |= 1 << t;
}, pv = An.__acroform__.clearBit = function(e, t) {
  if (e = e || 0, t = t || 0, isNaN(e) || isNaN(t)) throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");
  return e &= ~(1 << t);
}, gv = An.__acroform__.getBit = function(e, t) {
  if (isNaN(e) || isNaN(t)) throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");
  return e & 1 << t ? 1 : 0;
}, Ln = An.__acroform__.getBitForPdf = function(e, t) {
  if (isNaN(e) || isNaN(t)) throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");
  return gv(e, t - 1);
}, Cn = An.__acroform__.setBitForPdf = function(e, t) {
  if (isNaN(e) || isNaN(t)) throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");
  return dv(e, t - 1);
}, Tn = An.__acroform__.clearBitForPdf = function(e, t) {
  if (isNaN(e) || isNaN(t)) throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");
  return pv(e, t - 1);
}, mv = An.__acroform__.calculateCoordinates = function(e, t) {
  var n = t.internal.getHorizontalCoordinate, i = t.internal.getVerticalCoordinate, r = e[0], s = e[1], o = e[2], a = e[3], l = {};
  return l.lowerLeft_X = n(r) || 0, l.lowerLeft_Y = i(s + a) || 0, l.upperRight_X = n(r + o) || 0, l.upperRight_Y = i(s) || 0, [Number(Ce(l.lowerLeft_X)), Number(Ce(l.lowerLeft_Y)), Number(Ce(l.upperRight_X)), Number(Ce(l.upperRight_Y))];
}, yv = function(e) {
  if (e.appearanceStreamContent) return e.appearanceStreamContent;
  if (e.V || e.DV) {
    var t = [], n = e._V || e.DV, i = hf(e, n), r = e.scope.internal.getFont(e.fontName, e.fontStyle).id;
    t.push("/Tx BMC"), t.push("q"), t.push("BT"), t.push(e.scope.__private__.encodeColorString(e.color)), t.push("/" + r + " " + Ce(i.fontSize) + " Tf"), t.push("1 0 0 1 0 0 Tm"), t.push(i.text), t.push("ET"), t.push("Q"), t.push("EMC");
    var s = Lr(e);
    return s.scope = e.scope, s.stream = t.join(`
`), s;
  }
}, hf = function(e, t) {
  var n = e.fontSize === 0 ? e.maxFontSize : e.fontSize, i = { text: "", fontSize: "" }, r = (t = (t = t.substr(0, 1) == "(" ? t.substr(1) : t).substr(t.length - 1) == ")" ? t.substr(0, t.length - 1) : t).split(" ");
  r = e.multiline ? r.map(function(A) {
    return A.split(`
`);
  }) : r.map(function(A) {
    return [A];
  });
  var s = n, o = ie.internal.getHeight(e) || 0;
  o = o < 0 ? -o : o;
  var a = ie.internal.getWidth(e) || 0;
  a = a < 0 ? -a : a;
  var l = function(A, _, I) {
    if (A + 1 < r.length) {
      var M = _ + " " + r[A + 1][0];
      return mu(M, e, I).width <= a - 4;
    }
    return !1;
  };
  s++;
  t: for (; s > 0; ) {
    t = "", s--;
    var h, c, d = mu("3", e, s).height, g = e.multiline ? o - s : (o - d) / 2, p = g += 2, b = 0, x = 0, N = 0;
    if (s <= 0) {
      t = `(...) Tj
`, t += "% Width of Text: " + mu(t, e, s = 12).width + ", FieldWidth:" + a + `
`;
      break;
    }
    for (var v = "", w = 0, k = 0; k < r.length; k++) if (r.hasOwnProperty(k)) {
      var T = !1;
      if (r[k].length !== 1 && N !== r[k].length - 1) {
        if ((d + 2) * (w + 2) + 2 > o) continue t;
        v += r[k][N], T = !0, x = k, k--;
      } else {
        v = (v += r[k][N] + " ").substr(v.length - 1) == " " ? v.substr(0, v.length - 1) : v;
        var D = parseInt(k), G = l(D, v, s), R = k >= r.length - 1;
        if (G && !R) {
          v += " ", N = 0;
          continue;
        }
        if (G || R) {
          if (R) x = D;
          else if (e.multiline && (d + 2) * (w + 2) + 2 > o) continue t;
        } else {
          if (!e.multiline || (d + 2) * (w + 2) + 2 > o) continue t;
          x = D;
        }
      }
      for (var O = "", $ = b; $ <= x; $++) {
        var z = r[$];
        if (e.multiline) {
          if ($ === x) {
            O += z[N] + " ", N = (N + 1) % z.length;
            continue;
          }
          if ($ === b) {
            O += z[z.length - 1] + " ";
            continue;
          }
        }
        O += z[0] + " ";
      }
      switch (O = O.substr(O.length - 1) == " " ? O.substr(0, O.length - 1) : O, c = mu(O, e, s).width, e.textAlign) {
        case "right":
          h = a - c - 2;
          break;
        case "center":
          h = (a - c) / 2;
          break;
        case "left":
        default:
          h = 2;
      }
      t += Ce(h) + " " + Ce(p) + ` Td
`, t += "(" + xo(O) + `) Tj
`, t += -Ce(h) + ` 0 Td
`, p = -(s + 2), c = 0, b = T ? x : x + 1, w++, v = "";
    }
    break;
  }
  return i.text = t, i.fontSize = s, i;
}, mu = function(e, t, n) {
  var i = t.scope.internal.getFont(t.fontName, t.fontStyle), r = t.scope.getStringUnitWidth(e, { font: i, fontSize: parseFloat(n), charSpace: 0 }) * parseFloat(n);
  return { height: t.scope.getStringUnitWidth("3", { font: i, fontSize: parseFloat(n), charSpace: 0 }) * parseFloat(n) * 1.5, width: r };
}, bv = { fields: [], xForms: [], acroFormDictionaryRoot: null, printedOut: !1, internal: null, isInitialized: !1 }, vv = function(e, t) {
  var n = { type: "reference", object: e };
  t.internal.getPageInfo(e.page).pageContext.annotations.find(function(i) {
    return i.type === n.type && i.object === n.object;
  }) === void 0 && t.internal.getPageInfo(e.page).pageContext.annotations.push(n);
}, wv = function(e, t) {
  for (var n in e) if (e.hasOwnProperty(n)) {
    var i = n, r = e[n];
    t.internal.newObjectDeferredBegin(r.objId, !0), en(r) === "object" && typeof r.putStream == "function" && r.putStream(), delete e[i];
  }
}, xv = function(e, t) {
  if (t.scope = e, e.internal !== void 0 && (e.internal.acroformPlugin === void 0 || e.internal.acroformPlugin.isInitialized === !1)) {
    if (vr.FieldNum = 0, e.internal.acroformPlugin = JSON.parse(JSON.stringify(bv)), e.internal.acroformPlugin.acroFormDictionaryRoot) throw new Error("Exception while creating AcroformDictionary");
    xd = e.internal.scaleFactor, e.internal.acroformPlugin.acroFormDictionaryRoot = new C1(), e.internal.acroformPlugin.acroFormDictionaryRoot.scope = e, e.internal.acroformPlugin.acroFormDictionaryRoot._eventID = e.internal.events.subscribe("postPutResources", function() {
      (function(n) {
        n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID), delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID, n.internal.acroformPlugin.printedOut = !0;
      })(e);
    }), e.internal.events.subscribe("buildDocument", function() {
      (function(n) {
        n.internal.acroformPlugin.acroFormDictionaryRoot.objId = void 0;
        var i = n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;
        for (var r in i) if (i.hasOwnProperty(r)) {
          var s = i[r];
          s.objId = void 0, s.hasAnnotation && vv(s, n);
        }
      })(e);
    }), e.internal.events.subscribe("putCatalog", function() {
      (function(n) {
        if (n.internal.acroformPlugin.acroFormDictionaryRoot === void 0) throw new Error("putCatalogCallback: Root missing.");
        n.internal.write("/AcroForm " + n.internal.acroformPlugin.acroFormDictionaryRoot.objId + " 0 R");
      })(e);
    }), e.internal.events.subscribe("postPutPages", function(n) {
      (function(i, r) {
        var s = !i;
        for (var o in i || (r.internal.newObjectDeferredBegin(r.internal.acroformPlugin.acroFormDictionaryRoot.objId, !0), r.internal.acroformPlugin.acroFormDictionaryRoot.putStream()), i = i || r.internal.acroformPlugin.acroFormDictionaryRoot.Kids) if (i.hasOwnProperty(o)) {
          var a = i[o], l = [], h = a.Rect;
          if (a.Rect && (a.Rect = mv(a.Rect, r)), r.internal.newObjectDeferredBegin(a.objId, !0), a.DA = ie.createDefaultAppearanceStream(a), en(a) === "object" && typeof a.getKeyValueListForStream == "function" && (l = a.getKeyValueListForStream()), a.Rect = h, a.hasAppearanceStream && !a.appearanceStreamContent) {
            var c = yv(a);
            l.push({ key: "AP", value: "<</N " + c + ">>" }), r.internal.acroformPlugin.xForms.push(c);
          }
          if (a.appearanceStreamContent) {
            var d = "";
            for (var g in a.appearanceStreamContent) if (a.appearanceStreamContent.hasOwnProperty(g)) {
              var p = a.appearanceStreamContent[g];
              if (d += "/" + g + " ", d += "<<", Object.keys(p).length >= 1 || Array.isArray(p)) {
                for (var o in p) if (p.hasOwnProperty(o)) {
                  var b = p[o];
                  typeof b == "function" && (b = b.call(r, a)), d += "/" + o + " " + b + " ", r.internal.acroformPlugin.xForms.indexOf(b) >= 0 || r.internal.acroformPlugin.xForms.push(b);
                }
              } else typeof (b = p) == "function" && (b = b.call(r, a)), d += "/" + o + " " + b, r.internal.acroformPlugin.xForms.indexOf(b) >= 0 || r.internal.acroformPlugin.xForms.push(b);
              d += ">>";
            }
            l.push({ key: "AP", value: `<<
` + d + ">>" });
          }
          r.internal.putStream({ additionalKeyValues: l, objectId: a.objId }), r.internal.out("endobj");
        }
        s && wv(r.internal.acroformPlugin.xForms, r);
      })(n, e);
    }), e.internal.acroformPlugin.isInitialized = !0;
  }
}, P1 = An.__acroform__.arrayToPdfArray = function(e, t, n) {
  var i = function(o) {
    return o;
  };
  if (Array.isArray(e)) {
    for (var r = "[", s = 0; s < e.length; s++) switch (s !== 0 && (r += " "), en(e[s])) {
      case "boolean":
      case "number":
      case "object":
        r += e[s].toString();
        break;
      case "string":
        e[s].substr(0, 1) !== "/" ? (t !== void 0 && n && (i = n.internal.getEncryptor(t)), r += "(" + xo(i(e[s].toString())) + ")") : r += e[s].toString();
    }
    return r += "]";
  }
  throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray");
}, kh = function(e, t, n) {
  var i = function(r) {
    return r;
  };
  return t !== void 0 && n && (i = n.internal.getEncryptor(t)), (e = e || "").toString(), e = "(" + xo(i(e)) + ")";
}, Tr = function() {
  this._objId = void 0, this._scope = void 0, Object.defineProperty(this, "objId", { get: function() {
    if (this._objId === void 0) {
      if (this.scope === void 0) return;
      this._objId = this.scope.internal.newObjectDeferred();
    }
    return this._objId;
  }, set: function(e) {
    this._objId = e;
  } }), Object.defineProperty(this, "scope", { value: this._scope, writable: !0 });
};
Tr.prototype.toString = function() {
  return this.objId + " 0 R";
}, Tr.prototype.putStream = function() {
  var e = this.getKeyValueListForStream();
  this.scope.internal.putStream({ data: this.stream, additionalKeyValues: e, objectId: this.objId }), this.scope.internal.out("endobj");
}, Tr.prototype.getKeyValueListForStream = function() {
  var e = [], t = Object.getOwnPropertyNames(this).filter(function(s) {
    return s != "content" && s != "appearanceStreamContent" && s != "scope" && s != "objId" && s.substring(0, 1) != "_";
  });
  for (var n in t) if (Object.getOwnPropertyDescriptor(this, t[n]).configurable === !1) {
    var i = t[n], r = this[i];
    r && (Array.isArray(r) ? e.push({ key: i, value: P1(r, this.objId, this.scope) }) : r instanceof Tr ? (r.scope = this.scope, e.push({ key: i, value: r.objId + " 0 R" })) : typeof r != "function" && e.push({ key: i, value: r }));
  }
  return e;
};
var L1 = function() {
  Tr.call(this), Object.defineProperty(this, "Type", { value: "/XObject", configurable: !1, writable: !0 }), Object.defineProperty(this, "Subtype", { value: "/Form", configurable: !1, writable: !0 }), Object.defineProperty(this, "FormType", { value: 1, configurable: !1, writable: !0 });
  var e, t = [];
  Object.defineProperty(this, "BBox", { configurable: !1, get: function() {
    return t;
  }, set: function(n) {
    t = n;
  } }), Object.defineProperty(this, "Resources", { value: "2 0 R", configurable: !1, writable: !0 }), Object.defineProperty(this, "stream", { enumerable: !1, configurable: !0, set: function(n) {
    e = n.trim();
  }, get: function() {
    return e || null;
  } });
};
Ai(L1, Tr);
var C1 = function() {
  Tr.call(this);
  var e, t = [];
  Object.defineProperty(this, "Kids", { enumerable: !1, configurable: !0, get: function() {
    return t.length > 0 ? t : void 0;
  } }), Object.defineProperty(this, "Fields", { enumerable: !1, configurable: !1, get: function() {
    return t;
  } }), Object.defineProperty(this, "DA", { enumerable: !1, configurable: !1, get: function() {
    if (e) {
      var n = function(i) {
        return i;
      };
      return this.scope && (n = this.scope.internal.getEncryptor(this.objId)), "(" + xo(n(e)) + ")";
    }
  }, set: function(n) {
    e = n;
  } });
};
Ai(C1, Tr);
var vr = function e() {
  Tr.call(this);
  var t = 4;
  Object.defineProperty(this, "F", { enumerable: !1, configurable: !1, get: function() {
    return t;
  }, set: function(v) {
    if (isNaN(v)) throw new Error('Invalid value "' + v + '" for attribute F supplied.');
    t = v;
  } }), Object.defineProperty(this, "showWhenPrinted", { enumerable: !0, configurable: !0, get: function() {
    return !!Ln(t, 3);
  }, set: function(v) {
    v ? this.F = Cn(t, 3) : this.F = Tn(t, 3);
  } });
  var n = 0;
  Object.defineProperty(this, "Ff", { enumerable: !1, configurable: !1, get: function() {
    return n;
  }, set: function(v) {
    if (isNaN(v)) throw new Error('Invalid value "' + v + '" for attribute Ff supplied.');
    n = v;
  } });
  var i = [];
  Object.defineProperty(this, "Rect", { enumerable: !1, configurable: !1, get: function() {
    if (i.length !== 0) return i;
  }, set: function(v) {
    i = v !== void 0 ? v : [];
  } }), Object.defineProperty(this, "x", { enumerable: !0, configurable: !0, get: function() {
    return !i || isNaN(i[0]) ? 0 : i[0];
  }, set: function(v) {
    i[0] = v;
  } }), Object.defineProperty(this, "y", { enumerable: !0, configurable: !0, get: function() {
    return !i || isNaN(i[1]) ? 0 : i[1];
  }, set: function(v) {
    i[1] = v;
  } }), Object.defineProperty(this, "width", { enumerable: !0, configurable: !0, get: function() {
    return !i || isNaN(i[2]) ? 0 : i[2];
  }, set: function(v) {
    i[2] = v;
  } }), Object.defineProperty(this, "height", { enumerable: !0, configurable: !0, get: function() {
    return !i || isNaN(i[3]) ? 0 : i[3];
  }, set: function(v) {
    i[3] = v;
  } });
  var r = "";
  Object.defineProperty(this, "FT", { enumerable: !0, configurable: !1, get: function() {
    return r;
  }, set: function(v) {
    switch (v) {
      case "/Btn":
      case "/Tx":
      case "/Ch":
      case "/Sig":
        r = v;
        break;
      default:
        throw new Error('Invalid value "' + v + '" for attribute FT supplied.');
    }
  } });
  var s = null;
  Object.defineProperty(this, "T", { enumerable: !0, configurable: !1, get: function() {
    if (!s || s.length < 1) {
      if (this instanceof nc) return;
      s = "FieldObject" + e.FieldNum++;
    }
    var v = function(w) {
      return w;
    };
    return this.scope && (v = this.scope.internal.getEncryptor(this.objId)), "(" + xo(v(s)) + ")";
  }, set: function(v) {
    s = v.toString();
  } }), Object.defineProperty(this, "fieldName", { configurable: !0, enumerable: !0, get: function() {
    return s;
  }, set: function(v) {
    s = v;
  } });
  var o = "helvetica";
  Object.defineProperty(this, "fontName", { enumerable: !0, configurable: !0, get: function() {
    return o;
  }, set: function(v) {
    o = v;
  } });
  var a = "normal";
  Object.defineProperty(this, "fontStyle", { enumerable: !0, configurable: !0, get: function() {
    return a;
  }, set: function(v) {
    a = v;
  } });
  var l = 0;
  Object.defineProperty(this, "fontSize", { enumerable: !0, configurable: !0, get: function() {
    return l;
  }, set: function(v) {
    l = v;
  } });
  var h = void 0;
  Object.defineProperty(this, "maxFontSize", { enumerable: !0, configurable: !0, get: function() {
    return h === void 0 ? 50 / xd : h;
  }, set: function(v) {
    h = v;
  } });
  var c = "black";
  Object.defineProperty(this, "color", { enumerable: !0, configurable: !0, get: function() {
    return c;
  }, set: function(v) {
    c = v;
  } });
  var d = "/F1 0 Tf 0 g";
  Object.defineProperty(this, "DA", { enumerable: !0, configurable: !1, get: function() {
    if (!(!d || this instanceof nc || this instanceof Es)) return kh(d, this.objId, this.scope);
  }, set: function(v) {
    v = v.toString(), d = v;
  } });
  var g = null;
  Object.defineProperty(this, "DV", { enumerable: !1, configurable: !1, get: function() {
    if (g) return this instanceof Rn ? g : kh(g, this.objId, this.scope);
  }, set: function(v) {
    v = v.toString(), g = this instanceof Rn ? v : v.substr(0, 1) === "(" ? Yo(v.substr(1, v.length - 2)) : Yo(v);
  } }), Object.defineProperty(this, "defaultValue", { enumerable: !0, configurable: !0, get: function() {
    return this instanceof Rn ? Yo(g.substr(1, g.length - 1)) : g;
  }, set: function(v) {
    v = v.toString(), g = this instanceof Rn ? "/" + v : v;
  } });
  var p = null;
  Object.defineProperty(this, "_V", { enumerable: !1, configurable: !1, get: function() {
    if (p) return p;
  }, set: function(v) {
    this.V = v;
  } }), Object.defineProperty(this, "V", { enumerable: !1, configurable: !1, get: function() {
    if (p) return this instanceof Rn ? p : kh(p, this.objId, this.scope);
  }, set: function(v) {
    v = v.toString(), p = this instanceof Rn ? v : v.substr(0, 1) === "(" ? Yo(v.substr(1, v.length - 2)) : Yo(v);
  } }), Object.defineProperty(this, "value", { enumerable: !0, configurable: !0, get: function() {
    return this instanceof Rn ? Yo(p.substr(1, p.length - 1)) : p;
  }, set: function(v) {
    v = v.toString(), p = this instanceof Rn ? "/" + v : v;
  } }), Object.defineProperty(this, "hasAnnotation", { enumerable: !0, configurable: !0, get: function() {
    return this.Rect;
  } }), Object.defineProperty(this, "Type", { enumerable: !0, configurable: !1, get: function() {
    return this.hasAnnotation ? "/Annot" : null;
  } }), Object.defineProperty(this, "Subtype", { enumerable: !0, configurable: !1, get: function() {
    return this.hasAnnotation ? "/Widget" : null;
  } });
  var b, x = !1;
  Object.defineProperty(this, "hasAppearanceStream", { enumerable: !0, configurable: !0, get: function() {
    return x;
  }, set: function(v) {
    v = !!v, x = v;
  } }), Object.defineProperty(this, "page", { enumerable: !0, configurable: !0, get: function() {
    if (b) return b;
  }, set: function(v) {
    b = v;
  } }), Object.defineProperty(this, "readOnly", { enumerable: !0, configurable: !0, get: function() {
    return !!Ln(this.Ff, 1);
  }, set: function(v) {
    v ? this.Ff = Cn(this.Ff, 1) : this.Ff = Tn(this.Ff, 1);
  } }), Object.defineProperty(this, "required", { enumerable: !0, configurable: !0, get: function() {
    return !!Ln(this.Ff, 2);
  }, set: function(v) {
    v ? this.Ff = Cn(this.Ff, 2) : this.Ff = Tn(this.Ff, 2);
  } }), Object.defineProperty(this, "noExport", { enumerable: !0, configurable: !0, get: function() {
    return !!Ln(this.Ff, 3);
  }, set: function(v) {
    v ? this.Ff = Cn(this.Ff, 3) : this.Ff = Tn(this.Ff, 3);
  } });
  var N = null;
  Object.defineProperty(this, "Q", { enumerable: !0, configurable: !1, get: function() {
    if (N !== null) return N;
  }, set: function(v) {
    if ([0, 1, 2].indexOf(v) === -1) throw new Error('Invalid value "' + v + '" for attribute Q supplied.');
    N = v;
  } }), Object.defineProperty(this, "textAlign", { get: function() {
    var v;
    switch (N) {
      case 0:
      default:
        v = "left";
        break;
      case 1:
        v = "center";
        break;
      case 2:
        v = "right";
    }
    return v;
  }, configurable: !0, enumerable: !0, set: function(v) {
    switch (v) {
      case "right":
      case 2:
        N = 2;
        break;
      case "center":
      case 1:
        N = 1;
        break;
      case "left":
      case 0:
      default:
        N = 0;
    }
  } });
};
Ai(vr, Tr);
var ao = function() {
  vr.call(this), this.FT = "/Ch", this.V = "()", this.fontName = "zapfdingbats";
  var e = 0;
  Object.defineProperty(this, "TI", { enumerable: !0, configurable: !1, get: function() {
    return e;
  }, set: function(n) {
    e = n;
  } }), Object.defineProperty(this, "topIndex", { enumerable: !0, configurable: !0, get: function() {
    return e;
  }, set: function(n) {
    e = n;
  } });
  var t = [];
  Object.defineProperty(this, "Opt", { enumerable: !0, configurable: !1, get: function() {
    return P1(t, this.objId, this.scope);
  }, set: function(n) {
    var i, r;
    r = [], typeof (i = n) == "string" && (r = function(s, o, a) {
      a || (a = 1);
      for (var l, h = []; l = o.exec(s); ) h.push(l[a]);
      return h;
    }(i, /\((.*?)\)/g)), t = r;
  } }), this.getOptions = function() {
    return t;
  }, this.setOptions = function(n) {
    t = n, this.sort && t.sort();
  }, this.addOption = function(n) {
    n = (n = n || "").toString(), t.push(n), this.sort && t.sort();
  }, this.removeOption = function(n, i) {
    for (i = i || !1, n = (n = n || "").toString(); t.indexOf(n) !== -1 && (t.splice(t.indexOf(n), 1), i !== !1); ) ;
  }, Object.defineProperty(this, "combo", { enumerable: !0, configurable: !0, get: function() {
    return !!Ln(this.Ff, 18);
  }, set: function(n) {
    n ? this.Ff = Cn(this.Ff, 18) : this.Ff = Tn(this.Ff, 18);
  } }), Object.defineProperty(this, "edit", { enumerable: !0, configurable: !0, get: function() {
    return !!Ln(this.Ff, 19);
  }, set: function(n) {
    this.combo === !0 && (n ? this.Ff = Cn(this.Ff, 19) : this.Ff = Tn(this.Ff, 19));
  } }), Object.defineProperty(this, "sort", { enumerable: !0, configurable: !0, get: function() {
    return !!Ln(this.Ff, 20);
  }, set: function(n) {
    n ? (this.Ff = Cn(this.Ff, 20), t.sort()) : this.Ff = Tn(this.Ff, 20);
  } }), Object.defineProperty(this, "multiSelect", { enumerable: !0, configurable: !0, get: function() {
    return !!Ln(this.Ff, 22);
  }, set: function(n) {
    n ? this.Ff = Cn(this.Ff, 22) : this.Ff = Tn(this.Ff, 22);
  } }), Object.defineProperty(this, "doNotSpellCheck", { enumerable: !0, configurable: !0, get: function() {
    return !!Ln(this.Ff, 23);
  }, set: function(n) {
    n ? this.Ff = Cn(this.Ff, 23) : this.Ff = Tn(this.Ff, 23);
  } }), Object.defineProperty(this, "commitOnSelChange", { enumerable: !0, configurable: !0, get: function() {
    return !!Ln(this.Ff, 27);
  }, set: function(n) {
    n ? this.Ff = Cn(this.Ff, 27) : this.Ff = Tn(this.Ff, 27);
  } }), this.hasAppearanceStream = !1;
};
Ai(ao, vr);
var lo = function() {
  ao.call(this), this.fontName = "helvetica", this.combo = !1;
};
Ai(lo, ao);
var uo = function() {
  lo.call(this), this.combo = !0;
};
Ai(uo, lo);
var hl = function() {
  uo.call(this), this.edit = !0;
};
Ai(hl, uo);
var Rn = function() {
  vr.call(this), this.FT = "/Btn", Object.defineProperty(this, "noToggleToOff", { enumerable: !0, configurable: !0, get: function() {
    return !!Ln(this.Ff, 15);
  }, set: function(n) {
    n ? this.Ff = Cn(this.Ff, 15) : this.Ff = Tn(this.Ff, 15);
  } }), Object.defineProperty(this, "radio", { enumerable: !0, configurable: !0, get: function() {
    return !!Ln(this.Ff, 16);
  }, set: function(n) {
    n ? this.Ff = Cn(this.Ff, 16) : this.Ff = Tn(this.Ff, 16);
  } }), Object.defineProperty(this, "pushButton", { enumerable: !0, configurable: !0, get: function() {
    return !!Ln(this.Ff, 17);
  }, set: function(n) {
    n ? this.Ff = Cn(this.Ff, 17) : this.Ff = Tn(this.Ff, 17);
  } }), Object.defineProperty(this, "radioIsUnison", { enumerable: !0, configurable: !0, get: function() {
    return !!Ln(this.Ff, 26);
  }, set: function(n) {
    n ? this.Ff = Cn(this.Ff, 26) : this.Ff = Tn(this.Ff, 26);
  } });
  var e, t = {};
  Object.defineProperty(this, "MK", { enumerable: !1, configurable: !1, get: function() {
    var n = function(s) {
      return s;
    };
    if (this.scope && (n = this.scope.internal.getEncryptor(this.objId)), Object.keys(t).length !== 0) {
      var i, r = [];
      for (i in r.push("<<"), t) r.push("/" + i + " (" + xo(n(t[i])) + ")");
      return r.push(">>"), r.join(`
`);
    }
  }, set: function(n) {
    en(n) === "object" && (t = n);
  } }), Object.defineProperty(this, "caption", { enumerable: !0, configurable: !0, get: function() {
    return t.CA || "";
  }, set: function(n) {
    typeof n == "string" && (t.CA = n);
  } }), Object.defineProperty(this, "AS", { enumerable: !1, configurable: !1, get: function() {
    return e;
  }, set: function(n) {
    e = n;
  } }), Object.defineProperty(this, "appearanceState", { enumerable: !0, configurable: !0, get: function() {
    return e.substr(1, e.length - 1);
  }, set: function(n) {
    e = "/" + n;
  } });
};
Ai(Rn, vr);
var fl = function() {
  Rn.call(this), this.pushButton = !0;
};
Ai(fl, Rn);
var co = function() {
  Rn.call(this), this.radio = !0, this.pushButton = !1;
  var e = [];
  Object.defineProperty(this, "Kids", { enumerable: !0, configurable: !1, get: function() {
    return e;
  }, set: function(t) {
    e = t !== void 0 ? t : [];
  } });
};
Ai(co, Rn);
var nc = function() {
  var e, t;
  vr.call(this), Object.defineProperty(this, "Parent", { enumerable: !1, configurable: !1, get: function() {
    return e;
  }, set: function(r) {
    e = r;
  } }), Object.defineProperty(this, "optionName", { enumerable: !1, configurable: !0, get: function() {
    return t;
  }, set: function(r) {
    t = r;
  } });
  var n, i = {};
  Object.defineProperty(this, "MK", { enumerable: !1, configurable: !1, get: function() {
    var r = function(a) {
      return a;
    };
    this.scope && (r = this.scope.internal.getEncryptor(this.objId));
    var s, o = [];
    for (s in o.push("<<"), i) o.push("/" + s + " (" + xo(r(i[s])) + ")");
    return o.push(">>"), o.join(`
`);
  }, set: function(r) {
    en(r) === "object" && (i = r);
  } }), Object.defineProperty(this, "caption", { enumerable: !0, configurable: !0, get: function() {
    return i.CA || "";
  }, set: function(r) {
    typeof r == "string" && (i.CA = r);
  } }), Object.defineProperty(this, "AS", { enumerable: !1, configurable: !1, get: function() {
    return n;
  }, set: function(r) {
    n = r;
  } }), Object.defineProperty(this, "appearanceState", { enumerable: !0, configurable: !0, get: function() {
    return n.substr(1, n.length - 1);
  }, set: function(r) {
    n = "/" + r;
  } }), this.caption = "l", this.appearanceState = "Off", this._AppearanceType = ie.RadioButton.Circle, this.appearanceStreamContent = this._AppearanceType.createAppearanceStream(this.optionName);
};
Ai(nc, vr), co.prototype.setAppearance = function(e) {
  if (!("createAppearanceStream" in e) || !("getCA" in e)) throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");
  for (var t in this.Kids) if (this.Kids.hasOwnProperty(t)) {
    var n = this.Kids[t];
    n.appearanceStreamContent = e.createAppearanceStream(n.optionName), n.caption = e.getCA();
  }
}, co.prototype.createOption = function(e) {
  var t = new nc();
  return t.Parent = this, t.optionName = e, this.Kids.push(t), Sv.call(this.scope, t), t;
};
var dl = function() {
  Rn.call(this), this.fontName = "zapfdingbats", this.caption = "3", this.appearanceState = "On", this.value = "On", this.textAlign = "center", this.appearanceStreamContent = ie.CheckBox.createAppearanceStream();
};
Ai(dl, Rn);
var Es = function() {
  vr.call(this), this.FT = "/Tx", Object.defineProperty(this, "multiline", { enumerable: !0, configurable: !0, get: function() {
    return !!Ln(this.Ff, 13);
  }, set: function(t) {
    t ? this.Ff = Cn(this.Ff, 13) : this.Ff = Tn(this.Ff, 13);
  } }), Object.defineProperty(this, "fileSelect", { enumerable: !0, configurable: !0, get: function() {
    return !!Ln(this.Ff, 21);
  }, set: function(t) {
    t ? this.Ff = Cn(this.Ff, 21) : this.Ff = Tn(this.Ff, 21);
  } }), Object.defineProperty(this, "doNotSpellCheck", { enumerable: !0, configurable: !0, get: function() {
    return !!Ln(this.Ff, 23);
  }, set: function(t) {
    t ? this.Ff = Cn(this.Ff, 23) : this.Ff = Tn(this.Ff, 23);
  } }), Object.defineProperty(this, "doNotScroll", { enumerable: !0, configurable: !0, get: function() {
    return !!Ln(this.Ff, 24);
  }, set: function(t) {
    t ? this.Ff = Cn(this.Ff, 24) : this.Ff = Tn(this.Ff, 24);
  } }), Object.defineProperty(this, "comb", { enumerable: !0, configurable: !0, get: function() {
    return !!Ln(this.Ff, 25);
  }, set: function(t) {
    t ? this.Ff = Cn(this.Ff, 25) : this.Ff = Tn(this.Ff, 25);
  } }), Object.defineProperty(this, "richText", { enumerable: !0, configurable: !0, get: function() {
    return !!Ln(this.Ff, 26);
  }, set: function(t) {
    t ? this.Ff = Cn(this.Ff, 26) : this.Ff = Tn(this.Ff, 26);
  } });
  var e = null;
  Object.defineProperty(this, "MaxLen", { enumerable: !0, configurable: !1, get: function() {
    return e;
  }, set: function(t) {
    e = t;
  } }), Object.defineProperty(this, "maxLength", { enumerable: !0, configurable: !0, get: function() {
    return e;
  }, set: function(t) {
    Number.isInteger(t) && (e = t);
  } }), Object.defineProperty(this, "hasAppearanceStream", { enumerable: !0, configurable: !0, get: function() {
    return this.V || this.DV;
  } });
};
Ai(Es, vr);
var pl = function() {
  Es.call(this), Object.defineProperty(this, "password", { enumerable: !0, configurable: !0, get: function() {
    return !!Ln(this.Ff, 14);
  }, set: function(e) {
    e ? this.Ff = Cn(this.Ff, 14) : this.Ff = Tn(this.Ff, 14);
  } }), this.password = !0;
};
Ai(pl, Es);
var ie = { CheckBox: { createAppearanceStream: function() {
  return { N: { On: ie.CheckBox.YesNormal }, D: { On: ie.CheckBox.YesPushDown, Off: ie.CheckBox.OffPushDown } };
}, YesPushDown: function(e) {
  var t = Lr(e);
  t.scope = e.scope;
  var n = [], i = e.scope.internal.getFont(e.fontName, e.fontStyle).id, r = e.scope.__private__.encodeColorString(e.color), s = hf(e, e.caption);
  return n.push("0.749023 g"), n.push("0 0 " + Ce(ie.internal.getWidth(e)) + " " + Ce(ie.internal.getHeight(e)) + " re"), n.push("f"), n.push("BMC"), n.push("q"), n.push("0 0 1 rg"), n.push("/" + i + " " + Ce(s.fontSize) + " Tf " + r), n.push("BT"), n.push(s.text), n.push("ET"), n.push("Q"), n.push("EMC"), t.stream = n.join(`
`), t;
}, YesNormal: function(e) {
  var t = Lr(e);
  t.scope = e.scope;
  var n = e.scope.internal.getFont(e.fontName, e.fontStyle).id, i = e.scope.__private__.encodeColorString(e.color), r = [], s = ie.internal.getHeight(e), o = ie.internal.getWidth(e), a = hf(e, e.caption);
  return r.push("1 g"), r.push("0 0 " + Ce(o) + " " + Ce(s) + " re"), r.push("f"), r.push("q"), r.push("0 0 1 rg"), r.push("0 0 " + Ce(o - 1) + " " + Ce(s - 1) + " re"), r.push("W"), r.push("n"), r.push("0 g"), r.push("BT"), r.push("/" + n + " " + Ce(a.fontSize) + " Tf " + i), r.push(a.text), r.push("ET"), r.push("Q"), t.stream = r.join(`
`), t;
}, OffPushDown: function(e) {
  var t = Lr(e);
  t.scope = e.scope;
  var n = [];
  return n.push("0.749023 g"), n.push("0 0 " + Ce(ie.internal.getWidth(e)) + " " + Ce(ie.internal.getHeight(e)) + " re"), n.push("f"), t.stream = n.join(`
`), t;
} }, RadioButton: { Circle: { createAppearanceStream: function(e) {
  var t = { D: { Off: ie.RadioButton.Circle.OffPushDown }, N: {} };
  return t.N[e] = ie.RadioButton.Circle.YesNormal, t.D[e] = ie.RadioButton.Circle.YesPushDown, t;
}, getCA: function() {
  return "l";
}, YesNormal: function(e) {
  var t = Lr(e);
  t.scope = e.scope;
  var n = [], i = ie.internal.getWidth(e) <= ie.internal.getHeight(e) ? ie.internal.getWidth(e) / 4 : ie.internal.getHeight(e) / 4;
  i = Number((0.9 * i).toFixed(5));
  var r = ie.internal.Bezier_C, s = Number((i * r).toFixed(5));
  return n.push("q"), n.push("1 0 0 1 " + ks(ie.internal.getWidth(e) / 2) + " " + ks(ie.internal.getHeight(e) / 2) + " cm"), n.push(i + " 0 m"), n.push(i + " " + s + " " + s + " " + i + " 0 " + i + " c"), n.push("-" + s + " " + i + " -" + i + " " + s + " -" + i + " 0 c"), n.push("-" + i + " -" + s + " -" + s + " -" + i + " 0 -" + i + " c"), n.push(s + " -" + i + " " + i + " -" + s + " " + i + " 0 c"), n.push("f"), n.push("Q"), t.stream = n.join(`
`), t;
}, YesPushDown: function(e) {
  var t = Lr(e);
  t.scope = e.scope;
  var n = [], i = ie.internal.getWidth(e) <= ie.internal.getHeight(e) ? ie.internal.getWidth(e) / 4 : ie.internal.getHeight(e) / 4;
  i = Number((0.9 * i).toFixed(5));
  var r = Number((2 * i).toFixed(5)), s = Number((r * ie.internal.Bezier_C).toFixed(5)), o = Number((i * ie.internal.Bezier_C).toFixed(5));
  return n.push("0.749023 g"), n.push("q"), n.push("1 0 0 1 " + ks(ie.internal.getWidth(e) / 2) + " " + ks(ie.internal.getHeight(e) / 2) + " cm"), n.push(r + " 0 m"), n.push(r + " " + s + " " + s + " " + r + " 0 " + r + " c"), n.push("-" + s + " " + r + " -" + r + " " + s + " -" + r + " 0 c"), n.push("-" + r + " -" + s + " -" + s + " -" + r + " 0 -" + r + " c"), n.push(s + " -" + r + " " + r + " -" + s + " " + r + " 0 c"), n.push("f"), n.push("Q"), n.push("0 g"), n.push("q"), n.push("1 0 0 1 " + ks(ie.internal.getWidth(e) / 2) + " " + ks(ie.internal.getHeight(e) / 2) + " cm"), n.push(i + " 0 m"), n.push(i + " " + o + " " + o + " " + i + " 0 " + i + " c"), n.push("-" + o + " " + i + " -" + i + " " + o + " -" + i + " 0 c"), n.push("-" + i + " -" + o + " -" + o + " -" + i + " 0 -" + i + " c"), n.push(o + " -" + i + " " + i + " -" + o + " " + i + " 0 c"), n.push("f"), n.push("Q"), t.stream = n.join(`
`), t;
}, OffPushDown: function(e) {
  var t = Lr(e);
  t.scope = e.scope;
  var n = [], i = ie.internal.getWidth(e) <= ie.internal.getHeight(e) ? ie.internal.getWidth(e) / 4 : ie.internal.getHeight(e) / 4;
  i = Number((0.9 * i).toFixed(5));
  var r = Number((2 * i).toFixed(5)), s = Number((r * ie.internal.Bezier_C).toFixed(5));
  return n.push("0.749023 g"), n.push("q"), n.push("1 0 0 1 " + ks(ie.internal.getWidth(e) / 2) + " " + ks(ie.internal.getHeight(e) / 2) + " cm"), n.push(r + " 0 m"), n.push(r + " " + s + " " + s + " " + r + " 0 " + r + " c"), n.push("-" + s + " " + r + " -" + r + " " + s + " -" + r + " 0 c"), n.push("-" + r + " -" + s + " -" + s + " -" + r + " 0 -" + r + " c"), n.push(s + " -" + r + " " + r + " -" + s + " " + r + " 0 c"), n.push("f"), n.push("Q"), t.stream = n.join(`
`), t;
} }, Cross: { createAppearanceStream: function(e) {
  var t = { D: { Off: ie.RadioButton.Cross.OffPushDown }, N: {} };
  return t.N[e] = ie.RadioButton.Cross.YesNormal, t.D[e] = ie.RadioButton.Cross.YesPushDown, t;
}, getCA: function() {
  return "8";
}, YesNormal: function(e) {
  var t = Lr(e);
  t.scope = e.scope;
  var n = [], i = ie.internal.calculateCross(e);
  return n.push("q"), n.push("1 1 " + Ce(ie.internal.getWidth(e) - 2) + " " + Ce(ie.internal.getHeight(e) - 2) + " re"), n.push("W"), n.push("n"), n.push(Ce(i.x1.x) + " " + Ce(i.x1.y) + " m"), n.push(Ce(i.x2.x) + " " + Ce(i.x2.y) + " l"), n.push(Ce(i.x4.x) + " " + Ce(i.x4.y) + " m"), n.push(Ce(i.x3.x) + " " + Ce(i.x3.y) + " l"), n.push("s"), n.push("Q"), t.stream = n.join(`
`), t;
}, YesPushDown: function(e) {
  var t = Lr(e);
  t.scope = e.scope;
  var n = ie.internal.calculateCross(e), i = [];
  return i.push("0.749023 g"), i.push("0 0 " + Ce(ie.internal.getWidth(e)) + " " + Ce(ie.internal.getHeight(e)) + " re"), i.push("f"), i.push("q"), i.push("1 1 " + Ce(ie.internal.getWidth(e) - 2) + " " + Ce(ie.internal.getHeight(e) - 2) + " re"), i.push("W"), i.push("n"), i.push(Ce(n.x1.x) + " " + Ce(n.x1.y) + " m"), i.push(Ce(n.x2.x) + " " + Ce(n.x2.y) + " l"), i.push(Ce(n.x4.x) + " " + Ce(n.x4.y) + " m"), i.push(Ce(n.x3.x) + " " + Ce(n.x3.y) + " l"), i.push("s"), i.push("Q"), t.stream = i.join(`
`), t;
}, OffPushDown: function(e) {
  var t = Lr(e);
  t.scope = e.scope;
  var n = [];
  return n.push("0.749023 g"), n.push("0 0 " + Ce(ie.internal.getWidth(e)) + " " + Ce(ie.internal.getHeight(e)) + " re"), n.push("f"), t.stream = n.join(`
`), t;
} } }, createDefaultAppearanceStream: function(e) {
  var t = e.scope.internal.getFont(e.fontName, e.fontStyle).id, n = e.scope.__private__.encodeColorString(e.color);
  return "/" + t + " " + e.fontSize + " Tf " + n;
} };
ie.internal = { Bezier_C: 0.551915024494, calculateCross: function(e) {
  var t = ie.internal.getWidth(e), n = ie.internal.getHeight(e), i = Math.min(t, n);
  return { x1: { x: (t - i) / 2, y: (n - i) / 2 + i }, x2: { x: (t - i) / 2 + i, y: (n - i) / 2 }, x3: { x: (t - i) / 2, y: (n - i) / 2 }, x4: { x: (t - i) / 2 + i, y: (n - i) / 2 + i } };
} }, ie.internal.getWidth = function(e) {
  var t = 0;
  return en(e) === "object" && (t = Yp(e.Rect[2])), t;
}, ie.internal.getHeight = function(e) {
  var t = 0;
  return en(e) === "object" && (t = Yp(e.Rect[3])), t;
};
var Sv = An.addField = function(e) {
  if (xv(this, e), !(e instanceof vr)) throw new Error("Invalid argument passed to jsPDF.addField.");
  var t;
  return (t = e).scope.internal.acroformPlugin.printedOut && (t.scope.internal.acroformPlugin.printedOut = !1, t.scope.internal.acroformPlugin.acroFormDictionaryRoot = null), t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t), e.page = e.scope.internal.getCurrentPageInfo().pageNumber, this;
};
An.AcroFormChoiceField = ao, An.AcroFormListBox = lo, An.AcroFormComboBox = uo, An.AcroFormEditBox = hl, An.AcroFormButton = Rn, An.AcroFormPushButton = fl, An.AcroFormRadioButton = co, An.AcroFormCheckBox = dl, An.AcroFormTextField = Es, An.AcroFormPasswordField = pl, An.AcroFormAppearance = ie, An.AcroForm = { ChoiceField: ao, ListBox: lo, ComboBox: uo, EditBox: hl, Button: Rn, PushButton: fl, RadioButton: co, CheckBox: dl, TextField: Es, PasswordField: pl, Appearance: ie }, ye.AcroForm = { ChoiceField: ao, ListBox: lo, ComboBox: uo, EditBox: hl, Button: Rn, PushButton: fl, RadioButton: co, CheckBox: dl, TextField: Es, PasswordField: pl, Appearance: ie };
var Av = ye.AcroForm;
function T1(e) {
  return e.reduce(function(t, n, i) {
    return t[n] = i, t;
  }, {});
}
(function(e) {
  e.__addimage__ = {};
  var t = "UNKNOWN", n = { PNG: [[137, 80, 78, 71]], TIFF: [[77, 77, 0, 42], [73, 73, 42, 0]], JPEG: [[255, 216, 255, 224, void 0, void 0, 74, 70, 73, 70, 0], [255, 216, 255, 225, void 0, void 0, 69, 120, 105, 102, 0, 0], [255, 216, 255, 219], [255, 216, 255, 238]], JPEG2000: [[0, 0, 0, 12, 106, 80, 32, 32]], GIF87a: [[71, 73, 70, 56, 55, 97]], GIF89a: [[71, 73, 70, 56, 57, 97]], WEBP: [[82, 73, 70, 70, void 0, void 0, void 0, void 0, 87, 69, 66, 80]], BMP: [[66, 77], [66, 65], [67, 73], [67, 80], [73, 67], [80, 84]] }, i = e.__addimage__.getImageFileTypeByImageData = function(A, _) {
    var I, M, st, W, U, Q = t;
    if ((_ = _ || t) === "RGBA" || A.data !== void 0 && A.data instanceof Uint8ClampedArray && "height" in A && "width" in A) return "RGBA";
    if (G(A)) for (U in n) for (st = n[U], I = 0; I < st.length; I += 1) {
      for (W = !0, M = 0; M < st[I].length; M += 1) if (st[I][M] !== void 0 && st[I][M] !== A[M]) {
        W = !1;
        break;
      }
      if (W === !0) {
        Q = U;
        break;
      }
    }
    else for (U in n) for (st = n[U], I = 0; I < st.length; I += 1) {
      for (W = !0, M = 0; M < st[I].length; M += 1) if (st[I][M] !== void 0 && st[I][M] !== A.charCodeAt(M)) {
        W = !1;
        break;
      }
      if (W === !0) {
        Q = U;
        break;
      }
    }
    return Q === t && _ !== t && (Q = _), Q;
  }, r = function A(_) {
    for (var I = this.internal.write, M = this.internal.putStream, st = (0, this.internal.getFilters)(); st.indexOf("FlateEncode") !== -1; ) st.splice(st.indexOf("FlateEncode"), 1);
    _.objectId = this.internal.newObject();
    var W = [];
    if (W.push({ key: "Type", value: "/XObject" }), W.push({ key: "Subtype", value: "/Image" }), W.push({ key: "Width", value: _.width }), W.push({ key: "Height", value: _.height }), _.colorSpace === N.INDEXED ? W.push({ key: "ColorSpace", value: "[/Indexed /DeviceRGB " + (_.palette.length / 3 - 1) + " " + ("sMask" in _ && _.sMask !== void 0 ? _.objectId + 2 : _.objectId + 1) + " 0 R]" }) : (W.push({ key: "ColorSpace", value: "/" + _.colorSpace }), _.colorSpace === N.DEVICE_CMYK && W.push({ key: "Decode", value: "[1 0 1 0 1 0 1 0]" })), W.push({ key: "BitsPerComponent", value: _.bitsPerComponent }), "decodeParameters" in _ && _.decodeParameters !== void 0 && W.push({ key: "DecodeParms", value: "<<" + _.decodeParameters + ">>" }), "transparency" in _ && Array.isArray(_.transparency)) {
      for (var U = "", Q = 0, Z = _.transparency.length; Q < Z; Q++) U += _.transparency[Q] + " " + _.transparency[Q] + " ";
      W.push({ key: "Mask", value: "[" + U + "]" });
    }
    _.sMask !== void 0 && W.push({ key: "SMask", value: _.objectId + 1 + " 0 R" });
    var ct = _.filter !== void 0 ? ["/" + _.filter] : void 0;
    if (M({ data: _.data, additionalKeyValues: W, alreadyAppliedFilters: ct, objectId: _.objectId }), I("endobj"), "sMask" in _ && _.sMask !== void 0) {
      var St = "/Predictor " + _.predictor + " /Colors 1 /BitsPerComponent " + _.bitsPerComponent + " /Columns " + _.width, P = { width: _.width, height: _.height, colorSpace: "DeviceGray", bitsPerComponent: _.bitsPerComponent, decodeParameters: St, data: _.sMask };
      "filter" in _ && (P.filter = _.filter), A.call(this, P);
    }
    if (_.colorSpace === N.INDEXED) {
      var B = this.internal.newObject();
      M({ data: O(new Uint8Array(_.palette)), objectId: B }), I("endobj");
    }
  }, s = function() {
    var A = this.internal.collections.addImage_images;
    for (var _ in A) r.call(this, A[_]);
  }, o = function() {
    var A, _ = this.internal.collections.addImage_images, I = this.internal.write;
    for (var M in _) I("/I" + (A = _[M]).index, A.objectId, "0", "R");
  }, a = function() {
    this.internal.collections.addImage_images || (this.internal.collections.addImage_images = {}, this.internal.events.subscribe("putResources", s), this.internal.events.subscribe("putXobjectDict", o));
  }, l = function() {
    var A = this.internal.collections.addImage_images;
    return a.call(this), A;
  }, h = function() {
    return Object.keys(this.internal.collections.addImage_images).length;
  }, c = function(A) {
    return typeof e["process" + A.toUpperCase()] == "function";
  }, d = function(A) {
    return en(A) === "object" && A.nodeType === 1;
  }, g = function(A, _) {
    if (A.nodeName === "IMG" && A.hasAttribute("src")) {
      var I = "" + A.getAttribute("src");
      if (I.indexOf("data:image/") === 0) return cl(unescape(I).split("base64,").pop());
      var M = e.loadFile(I, !0);
      if (M !== void 0) return M;
    }
    if (A.nodeName === "CANVAS") {
      if (A.width === 0 || A.height === 0) throw new Error("Given canvas must have data. Canvas width: " + A.width + ", height: " + A.height);
      var st;
      switch (_) {
        case "PNG":
          st = "image/png";
          break;
        case "WEBP":
          st = "image/webp";
          break;
        case "JPEG":
        case "JPG":
        default:
          st = "image/jpeg";
      }
      return cl(A.toDataURL(st, 1).split("base64,").pop());
    }
  }, p = function(A) {
    var _ = this.internal.collections.addImage_images;
    if (_) {
      for (var I in _) if (A === _[I].alias) return _[I];
    }
  }, b = function(A, _, I) {
    return A || _ || (A = -96, _ = -96), A < 0 && (A = -1 * I.width * 72 / A / this.internal.scaleFactor), _ < 0 && (_ = -1 * I.height * 72 / _ / this.internal.scaleFactor), A === 0 && (A = _ * I.width / I.height), _ === 0 && (_ = A * I.height / I.width), [A, _];
  }, x = function(A, _, I, M, st, W) {
    var U = b.call(this, I, M, st), Q = this.internal.getCoordinateString, Z = this.internal.getVerticalCoordinateString, ct = l.call(this);
    if (I = U[0], M = U[1], ct[st.index] = st, W) {
      W *= Math.PI / 180;
      var St = Math.cos(W), P = Math.sin(W), B = function(J) {
        return J.toFixed(4);
      }, V = [B(St), B(P), B(-1 * P), B(St), 0, 0, "cm"];
    }
    this.internal.write("q"), W ? (this.internal.write([1, "0", "0", 1, Q(A), Z(_ + M), "cm"].join(" ")), this.internal.write(V.join(" ")), this.internal.write([Q(I), "0", "0", Q(M), "0", "0", "cm"].join(" "))) : this.internal.write([Q(I), "0", "0", Q(M), Q(A), Z(_ + M), "cm"].join(" ")), this.isAdvancedAPI() && this.internal.write([1, 0, 0, -1, 0, 0, "cm"].join(" ")), this.internal.write("/I" + st.index + " Do"), this.internal.write("Q");
  }, N = e.color_spaces = { DEVICE_RGB: "DeviceRGB", DEVICE_GRAY: "DeviceGray", DEVICE_CMYK: "DeviceCMYK", CAL_GREY: "CalGray", CAL_RGB: "CalRGB", LAB: "Lab", ICC_BASED: "ICCBased", INDEXED: "Indexed", PATTERN: "Pattern", SEPARATION: "Separation", DEVICE_N: "DeviceN" };
  e.decode = { DCT_DECODE: "DCTDecode", FLATE_DECODE: "FlateDecode", LZW_DECODE: "LZWDecode", JPX_DECODE: "JPXDecode", JBIG2_DECODE: "JBIG2Decode", ASCII85_DECODE: "ASCII85Decode", ASCII_HEX_DECODE: "ASCIIHexDecode", RUN_LENGTH_DECODE: "RunLengthDecode", CCITT_FAX_DECODE: "CCITTFaxDecode" };
  var v = e.image_compression = { NONE: "NONE", FAST: "FAST", MEDIUM: "MEDIUM", SLOW: "SLOW" }, w = e.__addimage__.sHashCode = function(A) {
    var _, I, M = 0;
    if (typeof A == "string") for (I = A.length, _ = 0; _ < I; _++) M = (M << 5) - M + A.charCodeAt(_), M |= 0;
    else if (G(A)) for (I = A.byteLength / 2, _ = 0; _ < I; _++) M = (M << 5) - M + A[_], M |= 0;
    return M;
  }, k = e.__addimage__.validateStringAsBase64 = function(A) {
    (A = A || "").toString().trim();
    var _ = !0;
    return A.length === 0 && (_ = !1), A.length % 4 != 0 && (_ = !1), /^[A-Za-z0-9+/]+$/.test(A.substr(0, A.length - 2)) === !1 && (_ = !1), /^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(A.substr(-2)) === !1 && (_ = !1), _;
  }, T = e.__addimage__.extractImageFromDataUrl = function(A) {
    var _ = (A = A || "").split("base64,"), I = null;
    if (_.length === 2) {
      var M = /^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(_[0]);
      Array.isArray(M) && (I = { mimeType: M[1], charset: M[2], data: _[1] });
    }
    return I;
  }, D = e.__addimage__.supportsArrayBuffer = function() {
    return typeof ArrayBuffer < "u" && typeof Uint8Array < "u";
  };
  e.__addimage__.isArrayBuffer = function(A) {
    return D() && A instanceof ArrayBuffer;
  };
  var G = e.__addimage__.isArrayBufferView = function(A) {
    return D() && typeof Uint32Array < "u" && (A instanceof Int8Array || A instanceof Uint8Array || typeof Uint8ClampedArray < "u" && A instanceof Uint8ClampedArray || A instanceof Int16Array || A instanceof Uint16Array || A instanceof Int32Array || A instanceof Uint32Array || A instanceof Float32Array || A instanceof Float64Array);
  }, R = e.__addimage__.binaryStringToUint8Array = function(A) {
    for (var _ = A.length, I = new Uint8Array(_), M = 0; M < _; M++) I[M] = A.charCodeAt(M);
    return I;
  }, O = e.__addimage__.arrayBufferToBinaryString = function(A) {
    for (var _ = "", I = G(A) ? A : new Uint8Array(A), M = 0; M < I.length; M += 8192) _ += String.fromCharCode.apply(null, I.subarray(M, M + 8192));
    return _;
  };
  e.addImage = function() {
    var A, _, I, M, st, W, U, Q, Z;
    if (typeof arguments[1] == "number" ? (_ = t, I = arguments[1], M = arguments[2], st = arguments[3], W = arguments[4], U = arguments[5], Q = arguments[6], Z = arguments[7]) : (_ = arguments[1], I = arguments[2], M = arguments[3], st = arguments[4], W = arguments[5], U = arguments[6], Q = arguments[7], Z = arguments[8]), en(A = arguments[0]) === "object" && !d(A) && "imageData" in A) {
      var ct = A;
      A = ct.imageData, _ = ct.format || _ || t, I = ct.x || I || 0, M = ct.y || M || 0, st = ct.w || ct.width || st, W = ct.h || ct.height || W, U = ct.alias || U, Q = ct.compression || Q, Z = ct.rotation || ct.angle || Z;
    }
    var St = this.internal.getFilters();
    if (Q === void 0 && St.indexOf("FlateEncode") !== -1 && (Q = "SLOW"), isNaN(I) || isNaN(M)) throw new Error("Invalid coordinates passed to jsPDF.addImage");
    a.call(this);
    var P = $.call(this, A, _, U, Q);
    return x.call(this, I, M, st, W, P, Z), this;
  };
  var $ = function(A, _, I, M) {
    var st, W, U;
    if (typeof A == "string" && i(A) === t) {
      A = unescape(A);
      var Q = z(A, !1);
      (Q !== "" || (Q = e.loadFile(A, !0)) !== void 0) && (A = Q);
    }
    if (d(A) && (A = g(A, _)), _ = i(A, _), !c(_)) throw new Error("addImage does not support files of type '" + _ + "', please ensure that a plugin for '" + _ + "' support is added.");
    if (((U = I) == null || U.length === 0) && (I = function(Z) {
      return typeof Z == "string" || G(Z) ? w(Z) : G(Z.data) ? w(Z.data) : null;
    }(A)), (st = p.call(this, I)) || (D() && (A instanceof Uint8Array || _ === "RGBA" || (W = A, A = R(A))), st = this["process" + _.toUpperCase()](A, h.call(this), I, function(Z) {
      return Z && typeof Z == "string" && (Z = Z.toUpperCase()), Z in e.image_compression ? Z : v.NONE;
    }(M), W)), !st) throw new Error("An unknown error occurred whilst processing the image.");
    return st;
  }, z = e.__addimage__.convertBase64ToBinaryString = function(A, _) {
    var I;
    _ = typeof _ != "boolean" || _;
    var M, st = "";
    if (typeof A == "string") {
      M = (I = T(A)) !== null ? I.data : A;
      try {
        st = cl(M);
      } catch (W) {
        if (_) throw k(M) ? new Error("atob-Error in jsPDF.convertBase64ToBinaryString " + W.message) : new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ");
      }
    }
    return st;
  };
  e.getImageProperties = function(A) {
    var _, I, M = "";
    if (d(A) && (A = g(A)), typeof A == "string" && i(A) === t && ((M = z(A, !1)) === "" && (M = e.loadFile(A) || ""), A = M), I = i(A), !c(I)) throw new Error("addImage does not support files of type '" + I + "', please ensure that a plugin for '" + I + "' support is added.");
    if (!D() || A instanceof Uint8Array || (A = R(A)), !(_ = this["process" + I.toUpperCase()](A))) throw new Error("An unknown error occurred whilst processing the image");
    return _.fileType = I, _;
  };
})(ye.API), /**
 * @license
 * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(e) {
  var t = function(n) {
    if (n !== void 0 && n != "") return !0;
  };
  ye.API.events.push(["addPage", function(n) {
    this.internal.getPageInfo(n.pageNumber).pageContext.annotations = [];
  }]), e.events.push(["putPage", function(n) {
    for (var i, r, s, o = this.internal.getCoordinateString, a = this.internal.getVerticalCoordinateString, l = this.internal.getPageInfoByObjId(n.objId), h = n.pageContext.annotations, c = !1, d = 0; d < h.length && !c; d++) switch ((i = h[d]).type) {
      case "link":
        (t(i.options.url) || t(i.options.pageNumber)) && (c = !0);
        break;
      case "reference":
      case "text":
      case "freetext":
        c = !0;
    }
    if (c != 0) {
      this.internal.write("/Annots [");
      for (var g = 0; g < h.length; g++) {
        i = h[g];
        var p = this.internal.pdfEscape, b = this.internal.getEncryptor(n.objId);
        switch (i.type) {
          case "reference":
            this.internal.write(" " + i.object.objId + " 0 R ");
            break;
          case "text":
            var x = this.internal.newAdditionalObject(), N = this.internal.newAdditionalObject(), v = this.internal.getEncryptor(x.objId), w = i.title || "Note";
            s = "<</Type /Annot /Subtype /Text " + (r = "/Rect [" + o(i.bounds.x) + " " + a(i.bounds.y + i.bounds.h) + " " + o(i.bounds.x + i.bounds.w) + " " + a(i.bounds.y) + "] ") + "/Contents (" + p(v(i.contents)) + ")", s += " /Popup " + N.objId + " 0 R", s += " /P " + l.objId + " 0 R", s += " /T (" + p(v(w)) + ") >>", x.content = s;
            var k = x.objId + " 0 R";
            s = "<</Type /Annot /Subtype /Popup " + (r = "/Rect [" + o(i.bounds.x + 30) + " " + a(i.bounds.y + i.bounds.h) + " " + o(i.bounds.x + i.bounds.w + 30) + " " + a(i.bounds.y) + "] ") + " /Parent " + k, i.open && (s += " /Open true"), s += " >>", N.content = s, this.internal.write(x.objId, "0 R", N.objId, "0 R");
            break;
          case "freetext":
            r = "/Rect [" + o(i.bounds.x) + " " + a(i.bounds.y) + " " + o(i.bounds.x + i.bounds.w) + " " + a(i.bounds.y + i.bounds.h) + "] ";
            var T = i.color || "#000000";
            s = "<</Type /Annot /Subtype /FreeText " + r + "/Contents (" + p(b(i.contents)) + ")", s += " /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#" + T + ")", s += " /Border [0 0 0]", s += " >>", this.internal.write(s);
            break;
          case "link":
            if (i.options.name) {
              var D = this.annotations._nameMap[i.options.name];
              i.options.pageNumber = D.page, i.options.top = D.y;
            } else i.options.top || (i.options.top = 0);
            if (r = "/Rect [" + i.finalBounds.x + " " + i.finalBounds.y + " " + i.finalBounds.w + " " + i.finalBounds.h + "] ", s = "", i.options.url) s = "<</Type /Annot /Subtype /Link " + r + "/Border [0 0 0] /A <</S /URI /URI (" + p(b(i.options.url)) + ") >>";
            else if (i.options.pageNumber)
              switch (s = "<</Type /Annot /Subtype /Link " + r + "/Border [0 0 0] /Dest [" + this.internal.getPageInfo(i.options.pageNumber).objId + " 0 R", i.options.magFactor = i.options.magFactor || "XYZ", i.options.magFactor) {
                case "Fit":
                  s += " /Fit]";
                  break;
                case "FitH":
                  s += " /FitH " + i.options.top + "]";
                  break;
                case "FitV":
                  i.options.left = i.options.left || 0, s += " /FitV " + i.options.left + "]";
                  break;
                case "XYZ":
                default:
                  var G = a(i.options.top);
                  i.options.left = i.options.left || 0, i.options.zoom === void 0 && (i.options.zoom = 0), s += " /XYZ " + i.options.left + " " + G + " " + i.options.zoom + "]";
              }
            s != "" && (s += " >>", this.internal.write(s));
        }
      }
      this.internal.write("]");
    }
  }]), e.createAnnotation = function(n) {
    var i = this.internal.getCurrentPageInfo();
    switch (n.type) {
      case "link":
        this.link(n.bounds.x, n.bounds.y, n.bounds.w, n.bounds.h, n);
        break;
      case "text":
      case "freetext":
        i.pageContext.annotations.push(n);
    }
  }, e.link = function(n, i, r, s, o) {
    var a = this.internal.getCurrentPageInfo(), l = this.internal.getCoordinateString, h = this.internal.getVerticalCoordinateString;
    a.pageContext.annotations.push({ finalBounds: { x: l(n), y: h(i), w: l(n + r), h: h(i + s) }, options: o, type: "link" });
  }, e.textWithLink = function(n, i, r, s) {
    var o, a, l = this.getTextWidth(n), h = this.internal.getLineHeight() / this.internal.scaleFactor;
    if (s.maxWidth !== void 0) {
      a = s.maxWidth;
      var c = this.splitTextToSize(n, a).length;
      o = Math.ceil(h * c);
    } else a = l, o = h;
    return this.text(n, i, r, s), r += 0.2 * h, s.align === "center" && (i -= l / 2), s.align === "right" && (i -= l), this.link(i, r - h, a, o, s), l;
  }, e.getTextWidth = function(n) {
    var i = this.internal.getFontSize();
    return this.getStringUnitWidth(n) * i / this.internal.scaleFactor;
  };
}(ye.API), /**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(e) {
  var t = { 1569: [65152], 1570: [65153, 65154], 1571: [65155, 65156], 1572: [65157, 65158], 1573: [65159, 65160], 1574: [65161, 65162, 65163, 65164], 1575: [65165, 65166], 1576: [65167, 65168, 65169, 65170], 1577: [65171, 65172], 1578: [65173, 65174, 65175, 65176], 1579: [65177, 65178, 65179, 65180], 1580: [65181, 65182, 65183, 65184], 1581: [65185, 65186, 65187, 65188], 1582: [65189, 65190, 65191, 65192], 1583: [65193, 65194], 1584: [65195, 65196], 1585: [65197, 65198], 1586: [65199, 65200], 1587: [65201, 65202, 65203, 65204], 1588: [65205, 65206, 65207, 65208], 1589: [65209, 65210, 65211, 65212], 1590: [65213, 65214, 65215, 65216], 1591: [65217, 65218, 65219, 65220], 1592: [65221, 65222, 65223, 65224], 1593: [65225, 65226, 65227, 65228], 1594: [65229, 65230, 65231, 65232], 1601: [65233, 65234, 65235, 65236], 1602: [65237, 65238, 65239, 65240], 1603: [65241, 65242, 65243, 65244], 1604: [65245, 65246, 65247, 65248], 1605: [65249, 65250, 65251, 65252], 1606: [65253, 65254, 65255, 65256], 1607: [65257, 65258, 65259, 65260], 1608: [65261, 65262], 1609: [65263, 65264, 64488, 64489], 1610: [65265, 65266, 65267, 65268], 1649: [64336, 64337], 1655: [64477], 1657: [64358, 64359, 64360, 64361], 1658: [64350, 64351, 64352, 64353], 1659: [64338, 64339, 64340, 64341], 1662: [64342, 64343, 64344, 64345], 1663: [64354, 64355, 64356, 64357], 1664: [64346, 64347, 64348, 64349], 1667: [64374, 64375, 64376, 64377], 1668: [64370, 64371, 64372, 64373], 1670: [64378, 64379, 64380, 64381], 1671: [64382, 64383, 64384, 64385], 1672: [64392, 64393], 1676: [64388, 64389], 1677: [64386, 64387], 1678: [64390, 64391], 1681: [64396, 64397], 1688: [64394, 64395], 1700: [64362, 64363, 64364, 64365], 1702: [64366, 64367, 64368, 64369], 1705: [64398, 64399, 64400, 64401], 1709: [64467, 64468, 64469, 64470], 1711: [64402, 64403, 64404, 64405], 1713: [64410, 64411, 64412, 64413], 1715: [64406, 64407, 64408, 64409], 1722: [64414, 64415], 1723: [64416, 64417, 64418, 64419], 1726: [64426, 64427, 64428, 64429], 1728: [64420, 64421], 1729: [64422, 64423, 64424, 64425], 1733: [64480, 64481], 1734: [64473, 64474], 1735: [64471, 64472], 1736: [64475, 64476], 1737: [64482, 64483], 1739: [64478, 64479], 1740: [64508, 64509, 64510, 64511], 1744: [64484, 64485, 64486, 64487], 1746: [64430, 64431], 1747: [64432, 64433] }, n = { 65247: { 65154: 65269, 65156: 65271, 65160: 65273, 65166: 65275 }, 65248: { 65154: 65270, 65156: 65272, 65160: 65274, 65166: 65276 }, 65165: { 65247: { 65248: { 65258: 65010 } } }, 1617: { 1612: 64606, 1613: 64607, 1614: 64608, 1615: 64609, 1616: 64610 } }, i = { 1612: 64606, 1613: 64607, 1614: 64608, 1615: 64609, 1616: 64610 }, r = [1570, 1571, 1573, 1575];
  e.__arabicParser__ = {};
  var s = e.__arabicParser__.isInArabicSubstitutionA = function(x) {
    return t[x.charCodeAt(0)] !== void 0;
  }, o = e.__arabicParser__.isArabicLetter = function(x) {
    return typeof x == "string" && /^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x);
  }, a = e.__arabicParser__.isArabicEndLetter = function(x) {
    return o(x) && s(x) && t[x.charCodeAt(0)].length <= 2;
  }, l = e.__arabicParser__.isArabicAlfLetter = function(x) {
    return o(x) && r.indexOf(x.charCodeAt(0)) >= 0;
  };
  e.__arabicParser__.arabicLetterHasIsolatedForm = function(x) {
    return o(x) && s(x) && t[x.charCodeAt(0)].length >= 1;
  };
  var h = e.__arabicParser__.arabicLetterHasFinalForm = function(x) {
    return o(x) && s(x) && t[x.charCodeAt(0)].length >= 2;
  };
  e.__arabicParser__.arabicLetterHasInitialForm = function(x) {
    return o(x) && s(x) && t[x.charCodeAt(0)].length >= 3;
  };
  var c = e.__arabicParser__.arabicLetterHasMedialForm = function(x) {
    return o(x) && s(x) && t[x.charCodeAt(0)].length == 4;
  }, d = e.__arabicParser__.resolveLigatures = function(x) {
    var N = 0, v = n, w = "", k = 0;
    for (N = 0; N < x.length; N += 1) v[x.charCodeAt(N)] !== void 0 ? (k++, typeof (v = v[x.charCodeAt(N)]) == "number" && (w += String.fromCharCode(v), v = n, k = 0), N === x.length - 1 && (v = n, w += x.charAt(N - (k - 1)), N -= k - 1, k = 0)) : (v = n, w += x.charAt(N - k), N -= k, k = 0);
    return w;
  };
  e.__arabicParser__.isArabicDiacritic = function(x) {
    return x !== void 0 && i[x.charCodeAt(0)] !== void 0;
  };
  var g = e.__arabicParser__.getCorrectForm = function(x, N, v) {
    return o(x) ? s(x) === !1 ? -1 : !h(x) || !o(N) && !o(v) || !o(v) && a(N) || a(x) && !o(N) || a(x) && l(N) || a(x) && a(N) ? 0 : c(x) && o(N) && !a(N) && o(v) && h(v) ? 3 : a(x) || !o(v) ? 1 : 2 : -1;
  }, p = function(x) {
    var N = 0, v = 0, w = 0, k = "", T = "", D = "", G = (x = x || "").split("\\s+"), R = [];
    for (N = 0; N < G.length; N += 1) {
      for (R.push(""), v = 0; v < G[N].length; v += 1) k = G[N][v], T = G[N][v - 1], D = G[N][v + 1], o(k) ? (w = g(k, T, D), R[N] += w !== -1 ? String.fromCharCode(t[k.charCodeAt(0)][w]) : k) : R[N] += k;
      R[N] = d(R[N]);
    }
    return R.join(" ");
  }, b = e.__arabicParser__.processArabic = e.processArabic = function() {
    var x, N = typeof arguments[0] == "string" ? arguments[0] : arguments[0].text, v = [];
    if (Array.isArray(N)) {
      var w = 0;
      for (v = [], w = 0; w < N.length; w += 1) Array.isArray(N[w]) ? v.push([p(N[w][0]), N[w][1], N[w][2]]) : v.push([p(N[w])]);
      x = v;
    } else x = p(N);
    return typeof arguments[0] == "string" ? x : (arguments[0].text = x, arguments[0]);
  };
  e.events.push(["preProcessText", b]);
}(ye.API), ye.API.autoPrint = function(e) {
  var t;
  switch ((e = e || {}).variant = e.variant || "non-conform", e.variant) {
    case "javascript":
      this.addJS("print({});");
      break;
    case "non-conform":
    default:
      this.internal.events.subscribe("postPutResources", function() {
        t = this.internal.newObject(), this.internal.out("<<"), this.internal.out("/S /Named"), this.internal.out("/Type /Action"), this.internal.out("/N /Print"), this.internal.out(">>"), this.internal.out("endobj");
      }), this.internal.events.subscribe("putCatalog", function() {
        this.internal.out("/OpenAction " + t + " 0 R");
      });
  }
  return this;
}, /**
 * @license
 * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(e) {
  var t = function() {
    var n = void 0;
    Object.defineProperty(this, "pdf", { get: function() {
      return n;
    }, set: function(a) {
      n = a;
    } });
    var i = 150;
    Object.defineProperty(this, "width", { get: function() {
      return i;
    }, set: function(a) {
      i = isNaN(a) || Number.isInteger(a) === !1 || a < 0 ? 150 : a, this.getContext("2d").pageWrapXEnabled && (this.getContext("2d").pageWrapX = i + 1);
    } });
    var r = 300;
    Object.defineProperty(this, "height", { get: function() {
      return r;
    }, set: function(a) {
      r = isNaN(a) || Number.isInteger(a) === !1 || a < 0 ? 300 : a, this.getContext("2d").pageWrapYEnabled && (this.getContext("2d").pageWrapY = r + 1);
    } });
    var s = [];
    Object.defineProperty(this, "childNodes", { get: function() {
      return s;
    }, set: function(a) {
      s = a;
    } });
    var o = {};
    Object.defineProperty(this, "style", { get: function() {
      return o;
    }, set: function(a) {
      o = a;
    } }), Object.defineProperty(this, "parentNode", {});
  };
  t.prototype.getContext = function(n, i) {
    var r;
    if ((n = n || "2d") !== "2d") return null;
    for (r in i) this.pdf.context2d.hasOwnProperty(r) && (this.pdf.context2d[r] = i[r]);
    return this.pdf.context2d._canvas = this, this.pdf.context2d;
  }, t.prototype.toDataURL = function() {
    throw new Error("toDataURL is not implemented.");
  }, e.events.push(["initialized", function() {
    this.canvas = new t(), this.canvas.pdf = this;
  }]);
}(ye.API), function(e) {
  var t = { left: 0, top: 0, bottom: 0, right: 0 }, n = !1, i = function() {
    this.internal.__cell__ === void 0 && (this.internal.__cell__ = {}, this.internal.__cell__.padding = 3, this.internal.__cell__.headerFunction = void 0, this.internal.__cell__.margins = Object.assign({}, t), this.internal.__cell__.margins.width = this.getPageWidth(), r.call(this));
  }, r = function() {
    this.internal.__cell__.lastCell = new s(), this.internal.__cell__.pages = 1;
  }, s = function() {
    var l = arguments[0];
    Object.defineProperty(this, "x", { enumerable: !0, get: function() {
      return l;
    }, set: function(x) {
      l = x;
    } });
    var h = arguments[1];
    Object.defineProperty(this, "y", { enumerable: !0, get: function() {
      return h;
    }, set: function(x) {
      h = x;
    } });
    var c = arguments[2];
    Object.defineProperty(this, "width", { enumerable: !0, get: function() {
      return c;
    }, set: function(x) {
      c = x;
    } });
    var d = arguments[3];
    Object.defineProperty(this, "height", { enumerable: !0, get: function() {
      return d;
    }, set: function(x) {
      d = x;
    } });
    var g = arguments[4];
    Object.defineProperty(this, "text", { enumerable: !0, get: function() {
      return g;
    }, set: function(x) {
      g = x;
    } });
    var p = arguments[5];
    Object.defineProperty(this, "lineNumber", { enumerable: !0, get: function() {
      return p;
    }, set: function(x) {
      p = x;
    } });
    var b = arguments[6];
    return Object.defineProperty(this, "align", { enumerable: !0, get: function() {
      return b;
    }, set: function(x) {
      b = x;
    } }), this;
  };
  s.prototype.clone = function() {
    return new s(this.x, this.y, this.width, this.height, this.text, this.lineNumber, this.align);
  }, s.prototype.toArray = function() {
    return [this.x, this.y, this.width, this.height, this.text, this.lineNumber, this.align];
  }, e.setHeaderFunction = function(l) {
    return i.call(this), this.internal.__cell__.headerFunction = typeof l == "function" ? l : void 0, this;
  }, e.getTextDimensions = function(l, h) {
    i.call(this);
    var c = (h = h || {}).fontSize || this.getFontSize(), d = h.font || this.getFont(), g = h.scaleFactor || this.internal.scaleFactor, p = 0, b = 0, x = 0, N = this;
    if (!Array.isArray(l) && typeof l != "string") {
      if (typeof l != "number") throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");
      l = String(l);
    }
    var v = h.maxWidth;
    v > 0 ? typeof l == "string" ? l = this.splitTextToSize(l, v) : Object.prototype.toString.call(l) === "[object Array]" && (l = l.reduce(function(k, T) {
      return k.concat(N.splitTextToSize(T, v));
    }, [])) : l = Array.isArray(l) ? l : [l];
    for (var w = 0; w < l.length; w++) p < (x = this.getStringUnitWidth(l[w], { font: d }) * c) && (p = x);
    return p !== 0 && (b = l.length), { w: p /= g, h: Math.max((b * c * this.getLineHeightFactor() - c * (this.getLineHeightFactor() - 1)) / g, 0) };
  }, e.cellAddPage = function() {
    i.call(this), this.addPage();
    var l = this.internal.__cell__.margins || t;
    return this.internal.__cell__.lastCell = new s(l.left, l.top, void 0, void 0), this.internal.__cell__.pages += 1, this;
  };
  var o = e.cell = function() {
    var l;
    l = arguments[0] instanceof s ? arguments[0] : new s(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4], arguments[5]), i.call(this);
    var h = this.internal.__cell__.lastCell, c = this.internal.__cell__.padding, d = this.internal.__cell__.margins || t, g = this.internal.__cell__.tableHeaderRow, p = this.internal.__cell__.printHeaders;
    return h.lineNumber !== void 0 && (h.lineNumber === l.lineNumber ? (l.x = (h.x || 0) + (h.width || 0), l.y = h.y || 0) : h.y + h.height + l.height + d.bottom > this.getPageHeight() ? (this.cellAddPage(), l.y = d.top, p && g && (this.printHeaderRow(l.lineNumber, !0), l.y += g[0].height)) : l.y = h.y + h.height || l.y), l.text[0] !== void 0 && (this.rect(l.x, l.y, l.width, l.height, n === !0 ? "FD" : void 0), l.align === "right" ? this.text(l.text, l.x + l.width - c, l.y + c, { align: "right", baseline: "top" }) : l.align === "center" ? this.text(l.text, l.x + l.width / 2, l.y + c, { align: "center", baseline: "top", maxWidth: l.width - c - c }) : this.text(l.text, l.x + c, l.y + c, { align: "left", baseline: "top", maxWidth: l.width - c - c })), this.internal.__cell__.lastCell = l, this;
  };
  e.table = function(l, h, c, d, g) {
    if (i.call(this), !c) throw new Error("No data for PDF table.");
    var p, b, x, N, v = [], w = [], k = [], T = {}, D = {}, G = [], R = [], O = (g = g || {}).autoSize || !1, $ = g.printHeaders !== !1, z = g.css && g.css["font-size"] !== void 0 ? 16 * g.css["font-size"] : g.fontSize || 12, A = g.margins || Object.assign({ width: this.getPageWidth() }, t), _ = typeof g.padding == "number" ? g.padding : 3, I = g.headerBackgroundColor || "#c8c8c8", M = g.headerTextColor || "#000";
    if (r.call(this), this.internal.__cell__.printHeaders = $, this.internal.__cell__.margins = A, this.internal.__cell__.table_font_size = z, this.internal.__cell__.padding = _, this.internal.__cell__.headerBackgroundColor = I, this.internal.__cell__.headerTextColor = M, this.setFontSize(z), d == null) w = v = Object.keys(c[0]), k = v.map(function() {
      return "left";
    });
    else if (Array.isArray(d) && en(d[0]) === "object") for (v = d.map(function(ct) {
      return ct.name;
    }), w = d.map(function(ct) {
      return ct.prompt || ct.name || "";
    }), k = d.map(function(ct) {
      return ct.align || "left";
    }), p = 0; p < d.length; p += 1) D[d[p].name] = d[p].width * (19.049976 / 25.4);
    else Array.isArray(d) && typeof d[0] == "string" && (w = v = d, k = v.map(function() {
      return "left";
    }));
    if (O || Array.isArray(d) && typeof d[0] == "string") for (p = 0; p < v.length; p += 1) {
      for (T[N = v[p]] = c.map(function(ct) {
        return ct[N];
      }), this.setFont(void 0, "bold"), G.push(this.getTextDimensions(w[p], { fontSize: this.internal.__cell__.table_font_size, scaleFactor: this.internal.scaleFactor }).w), b = T[N], this.setFont(void 0, "normal"), x = 0; x < b.length; x += 1) G.push(this.getTextDimensions(b[x], { fontSize: this.internal.__cell__.table_font_size, scaleFactor: this.internal.scaleFactor }).w);
      D[N] = Math.max.apply(null, G) + _ + _, G = [];
    }
    if ($) {
      var st = {};
      for (p = 0; p < v.length; p += 1) st[v[p]] = {}, st[v[p]].text = w[p], st[v[p]].align = k[p];
      var W = a.call(this, st, D);
      R = v.map(function(ct) {
        return new s(l, h, D[ct], W, st[ct].text, void 0, st[ct].align);
      }), this.setTableHeaderRow(R), this.printHeaderRow(1, !1);
    }
    var U = d.reduce(function(ct, St) {
      return ct[St.name] = St.align, ct;
    }, {});
    for (p = 0; p < c.length; p += 1) {
      "rowStart" in g && g.rowStart instanceof Function && g.rowStart({ row: p, data: c[p] }, this);
      var Q = a.call(this, c[p], D);
      for (x = 0; x < v.length; x += 1) {
        var Z = c[p][v[x]];
        "cellStart" in g && g.cellStart instanceof Function && g.cellStart({ row: p, col: x, data: Z }, this), o.call(this, new s(l, h, D[v[x]], Q, Z, p + 2, U[v[x]]));
      }
    }
    return this.internal.__cell__.table_x = l, this.internal.__cell__.table_y = h, this;
  };
  var a = function(l, h) {
    var c = this.internal.__cell__.padding, d = this.internal.__cell__.table_font_size, g = this.internal.scaleFactor;
    return Object.keys(l).map(function(p) {
      var b = l[p];
      return this.splitTextToSize(b.hasOwnProperty("text") ? b.text : b, h[p] - c - c);
    }, this).map(function(p) {
      return this.getLineHeightFactor() * p.length * d / g + c + c;
    }, this).reduce(function(p, b) {
      return Math.max(p, b);
    }, 0);
  };
  e.setTableHeaderRow = function(l) {
    i.call(this), this.internal.__cell__.tableHeaderRow = l;
  }, e.printHeaderRow = function(l, h) {
    if (i.call(this), !this.internal.__cell__.tableHeaderRow) throw new Error("Property tableHeaderRow does not exist.");
    var c;
    if (n = !0, typeof this.internal.__cell__.headerFunction == "function") {
      var d = this.internal.__cell__.headerFunction(this, this.internal.__cell__.pages);
      this.internal.__cell__.lastCell = new s(d[0], d[1], d[2], d[3], void 0, -1);
    }
    this.setFont(void 0, "bold");
    for (var g = [], p = 0; p < this.internal.__cell__.tableHeaderRow.length; p += 1) {
      c = this.internal.__cell__.tableHeaderRow[p].clone(), h && (c.y = this.internal.__cell__.margins.top || 0, g.push(c)), c.lineNumber = l;
      var b = this.getTextColor();
      this.setTextColor(this.internal.__cell__.headerTextColor), this.setFillColor(this.internal.__cell__.headerBackgroundColor), o.call(this, c), this.setTextColor(b);
    }
    g.length > 0 && this.setTableHeaderRow(g), this.setFont(void 0, "normal"), n = !1;
  };
}(ye.API);
var I1 = { italic: ["italic", "oblique", "normal"], oblique: ["oblique", "italic", "normal"], normal: ["normal", "oblique", "italic"] }, E1 = ["ultra-condensed", "extra-condensed", "condensed", "semi-condensed", "normal", "semi-expanded", "expanded", "extra-expanded", "ultra-expanded"], ff = T1(E1), O1 = [100, 200, 300, 400, 500, 600, 700, 800, 900], kv = T1(O1);
function df(e) {
  var t = e.family.replace(/"|'/g, "").toLowerCase(), n = function(s) {
    return I1[s = s || "normal"] ? s : "normal";
  }(e.style), i = function(s) {
    if (!s) return 400;
    if (typeof s == "number") return s >= 100 && s <= 900 && s % 100 == 0 ? s : 400;
    if (/^\d00$/.test(s)) return parseInt(s);
    switch (s) {
      case "bold":
        return 700;
      case "normal":
      default:
        return 400;
    }
  }(e.weight), r = function(s) {
    return typeof ff[s = s || "normal"] == "number" ? s : "normal";
  }(e.stretch);
  return { family: t, style: n, weight: i, stretch: r, src: e.src || [], ref: e.ref || { name: t, style: [r, n, i].join(" ") } };
}
function Kp(e, t, n, i) {
  var r;
  for (r = n; r >= 0 && r < t.length; r += i) if (e[t[r]]) return e[t[r]];
  for (r = n; r >= 0 && r < t.length; r -= i) if (e[t[r]]) return e[t[r]];
}
var _v = { "sans-serif": "helvetica", fixed: "courier", monospace: "courier", terminal: "courier", cursive: "times", fantasy: "times", serif: "times" }, Jp = { caption: "times", icon: "times", menu: "times", "message-box": "times", "small-caption": "times", "status-bar": "times" };
function Xp(e) {
  return [e.stretch, e.style, e.weight, e.family].join(" ");
}
function Nv(e, t, n) {
  for (var i = (n = n || {}).defaultFontFamily || "times", r = Object.assign({}, _v, n.genericFontFamilies || {}), s = null, o = null, a = 0; a < t.length; ++a) if (r[(s = df(t[a])).family] && (s.family = r[s.family]), e.hasOwnProperty(s.family)) {
    o = e[s.family];
    break;
  }
  if (!(o = o || e[i])) throw new Error("Could not find a font-family for the rule '" + Xp(s) + "' and default family '" + i + "'.");
  if (o = function(l, h) {
    if (h[l]) return h[l];
    var c = ff[l], d = c <= ff.normal ? -1 : 1, g = Kp(h, E1, c, d);
    if (!g) throw new Error("Could not find a matching font-stretch value for " + l);
    return g;
  }(s.stretch, o), o = function(l, h) {
    if (h[l]) return h[l];
    for (var c = I1[l], d = 0; d < c.length; ++d) if (h[c[d]]) return h[c[d]];
    throw new Error("Could not find a matching font-style for " + l);
  }(s.style, o), !(o = function(l, h) {
    if (h[l]) return h[l];
    if (l === 400 && h[500]) return h[500];
    if (l === 500 && h[400]) return h[400];
    var c = kv[l], d = Kp(h, O1, c, l < 400 ? -1 : 1);
    if (!d) throw new Error("Could not find a matching font-weight for value " + l);
    return d;
  }(s.weight, o))) throw new Error("Failed to resolve a font for the rule '" + Xp(s) + "'.");
  return o;
}
function Zp(e) {
  return e.trimLeft();
}
function Pv(e, t) {
  for (var n = 0; n < e.length; ) {
    if (e.charAt(n) === t) return [e.substring(0, n), e.substring(n + 1)];
    n += 1;
  }
  return null;
}
function Lv(e) {
  var t = e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);
  return t === null ? null : [t[0], e.substring(t[0].length)];
}
var yu, Qp, tg, _h = ["times"];
(function(e) {
  var t, n, i, r, s, o, a, l, h, c = function(P) {
    return P = P || {}, this.isStrokeTransparent = P.isStrokeTransparent || !1, this.strokeOpacity = P.strokeOpacity || 1, this.strokeStyle = P.strokeStyle || "#000000", this.fillStyle = P.fillStyle || "#000000", this.isFillTransparent = P.isFillTransparent || !1, this.fillOpacity = P.fillOpacity || 1, this.font = P.font || "10px sans-serif", this.textBaseline = P.textBaseline || "alphabetic", this.textAlign = P.textAlign || "left", this.lineWidth = P.lineWidth || 1, this.lineJoin = P.lineJoin || "miter", this.lineCap = P.lineCap || "butt", this.path = P.path || [], this.transform = P.transform !== void 0 ? P.transform.clone() : new l(), this.globalCompositeOperation = P.globalCompositeOperation || "normal", this.globalAlpha = P.globalAlpha || 1, this.clip_path = P.clip_path || [], this.currentPoint = P.currentPoint || new o(), this.miterLimit = P.miterLimit || 10, this.lastPoint = P.lastPoint || new o(), this.lineDashOffset = P.lineDashOffset || 0, this.lineDash = P.lineDash || [], this.margin = P.margin || [0, 0, 0, 0], this.prevPageLastElemOffset = P.prevPageLastElemOffset || 0, this.ignoreClearRect = typeof P.ignoreClearRect != "boolean" || P.ignoreClearRect, this;
  };
  e.events.push(["initialized", function() {
    this.context2d = new d(this), t = this.internal.f2, n = this.internal.getCoordinateString, i = this.internal.getVerticalCoordinateString, r = this.internal.getHorizontalCoordinate, s = this.internal.getVerticalCoordinate, o = this.internal.Point, a = this.internal.Rectangle, l = this.internal.Matrix, h = new c();
  }]);
  var d = function(P) {
    Object.defineProperty(this, "canvas", { get: function() {
      return { parentNode: !1, style: !1 };
    } });
    var B = P;
    Object.defineProperty(this, "pdf", { get: function() {
      return B;
    } });
    var V = !1;
    Object.defineProperty(this, "pageWrapXEnabled", { get: function() {
      return V;
    }, set: function(Nt) {
      V = !!Nt;
    } });
    var J = !1;
    Object.defineProperty(this, "pageWrapYEnabled", { get: function() {
      return J;
    }, set: function(Nt) {
      J = !!Nt;
    } });
    var nt = 0;
    Object.defineProperty(this, "posX", { get: function() {
      return nt;
    }, set: function(Nt) {
      isNaN(Nt) || (nt = Nt);
    } });
    var gt = 0;
    Object.defineProperty(this, "posY", { get: function() {
      return gt;
    }, set: function(Nt) {
      isNaN(Nt) || (gt = Nt);
    } }), Object.defineProperty(this, "margin", { get: function() {
      return h.margin;
    }, set: function(Nt) {
      var it;
      typeof Nt == "number" ? it = [Nt, Nt, Nt, Nt] : ((it = new Array(4))[0] = Nt[0], it[1] = Nt.length >= 2 ? Nt[1] : it[0], it[2] = Nt.length >= 3 ? Nt[2] : it[0], it[3] = Nt.length >= 4 ? Nt[3] : it[1]), h.margin = it;
    } });
    var yt = !1;
    Object.defineProperty(this, "autoPaging", { get: function() {
      return yt;
    }, set: function(Nt) {
      yt = Nt;
    } });
    var vt = 0;
    Object.defineProperty(this, "lastBreak", { get: function() {
      return vt;
    }, set: function(Nt) {
      vt = Nt;
    } });
    var Rt = [];
    Object.defineProperty(this, "pageBreaks", { get: function() {
      return Rt;
    }, set: function(Nt) {
      Rt = Nt;
    } }), Object.defineProperty(this, "ctx", { get: function() {
      return h;
    }, set: function(Nt) {
      Nt instanceof c && (h = Nt);
    } }), Object.defineProperty(this, "path", { get: function() {
      return h.path;
    }, set: function(Nt) {
      h.path = Nt;
    } });
    var Dt = [];
    Object.defineProperty(this, "ctxStack", { get: function() {
      return Dt;
    }, set: function(Nt) {
      Dt = Nt;
    } }), Object.defineProperty(this, "fillStyle", { get: function() {
      return this.ctx.fillStyle;
    }, set: function(Nt) {
      var it;
      it = g(Nt), this.ctx.fillStyle = it.style, this.ctx.isFillTransparent = it.a === 0, this.ctx.fillOpacity = it.a, this.pdf.setFillColor(it.r, it.g, it.b, { a: it.a }), this.pdf.setTextColor(it.r, it.g, it.b, { a: it.a });
    } }), Object.defineProperty(this, "strokeStyle", { get: function() {
      return this.ctx.strokeStyle;
    }, set: function(Nt) {
      var it = g(Nt);
      this.ctx.strokeStyle = it.style, this.ctx.isStrokeTransparent = it.a === 0, this.ctx.strokeOpacity = it.a, it.a === 0 ? this.pdf.setDrawColor(255, 255, 255) : (it.a, this.pdf.setDrawColor(it.r, it.g, it.b));
    } }), Object.defineProperty(this, "lineCap", { get: function() {
      return this.ctx.lineCap;
    }, set: function(Nt) {
      ["butt", "round", "square"].indexOf(Nt) !== -1 && (this.ctx.lineCap = Nt, this.pdf.setLineCap(Nt));
    } }), Object.defineProperty(this, "lineWidth", { get: function() {
      return this.ctx.lineWidth;
    }, set: function(Nt) {
      isNaN(Nt) || (this.ctx.lineWidth = Nt, this.pdf.setLineWidth(Nt));
    } }), Object.defineProperty(this, "lineJoin", { get: function() {
      return this.ctx.lineJoin;
    }, set: function(Nt) {
      ["bevel", "round", "miter"].indexOf(Nt) !== -1 && (this.ctx.lineJoin = Nt, this.pdf.setLineJoin(Nt));
    } }), Object.defineProperty(this, "miterLimit", { get: function() {
      return this.ctx.miterLimit;
    }, set: function(Nt) {
      isNaN(Nt) || (this.ctx.miterLimit = Nt, this.pdf.setMiterLimit(Nt));
    } }), Object.defineProperty(this, "textBaseline", { get: function() {
      return this.ctx.textBaseline;
    }, set: function(Nt) {
      this.ctx.textBaseline = Nt;
    } }), Object.defineProperty(this, "textAlign", { get: function() {
      return this.ctx.textAlign;
    }, set: function(Nt) {
      ["right", "end", "center", "left", "start"].indexOf(Nt) !== -1 && (this.ctx.textAlign = Nt);
    } });
    var Ut = null;
    function Wt(Nt, it) {
      if (Ut === null) {
        var de = function(Xt) {
          var Mt = [];
          return Object.keys(Xt).forEach(function(qt) {
            Xt[qt].forEach(function(Gt) {
              var Ht = null;
              switch (Gt) {
                case "bold":
                  Ht = { family: qt, weight: "bold" };
                  break;
                case "italic":
                  Ht = { family: qt, style: "italic" };
                  break;
                case "bolditalic":
                  Ht = { family: qt, weight: "bold", style: "italic" };
                  break;
                case "":
                case "normal":
                  Ht = { family: qt };
              }
              Ht !== null && (Ht.ref = { name: qt, style: Gt }, Mt.push(Ht));
            });
          }), Mt;
        }(Nt.getFontList());
        Ut = function(Xt) {
          for (var Mt = {}, qt = 0; qt < Xt.length; ++qt) {
            var Gt = df(Xt[qt]), Ht = Gt.family, ee = Gt.stretch, Qt = Gt.style, oe = Gt.weight;
            Mt[Ht] = Mt[Ht] || {}, Mt[Ht][ee] = Mt[Ht][ee] || {}, Mt[Ht][ee][Qt] = Mt[Ht][ee][Qt] || {}, Mt[Ht][ee][Qt][oe] = Gt;
          }
          return Mt;
        }(de.concat(it));
      }
      return Ut;
    }
    var he = null;
    Object.defineProperty(this, "fontFaces", { get: function() {
      return he;
    }, set: function(Nt) {
      Ut = null, he = Nt;
    } }), Object.defineProperty(this, "font", { get: function() {
      return this.ctx.font;
    }, set: function(Nt) {
      var it;
      if (this.ctx.font = Nt, (it = /^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Nt)) !== null) {
        var de = it[1], Xt = (it[2], it[3]), Mt = it[4], qt = (it[5], it[6]), Gt = /^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Mt)[2];
        Mt = Math.floor(Gt === "px" ? parseFloat(Mt) * this.pdf.internal.scaleFactor : Gt === "em" ? parseFloat(Mt) * this.pdf.getFontSize() : parseFloat(Mt) * this.pdf.internal.scaleFactor), this.pdf.setFontSize(Mt);
        var Ht = function(ue) {
          var rt, mt, zt = [], It = ue.trim();
          if (It === "") return _h;
          if (It in Jp) return [Jp[It]];
          for (; It !== ""; ) {
            switch (mt = null, rt = (It = Zp(It)).charAt(0)) {
              case '"':
              case "'":
                mt = Pv(It.substring(1), rt);
                break;
              default:
                mt = Lv(It);
            }
            if (mt === null || (zt.push(mt[0]), (It = Zp(mt[1])) !== "" && It.charAt(0) !== ",")) return _h;
            It = It.replace(/^,/, "");
          }
          return zt;
        }(qt);
        if (this.fontFaces) {
          var ee = Nv(Wt(this.pdf, this.fontFaces), Ht.map(function(ue) {
            return { family: ue, stretch: "normal", weight: Xt, style: de };
          }));
          this.pdf.setFont(ee.ref.name, ee.ref.style);
        } else {
          var Qt = "";
          (Xt === "bold" || parseInt(Xt, 10) >= 700 || de === "bold") && (Qt = "bold"), de === "italic" && (Qt += "italic"), Qt.length === 0 && (Qt = "normal");
          for (var oe = "", xe = { arial: "Helvetica", Arial: "Helvetica", verdana: "Helvetica", Verdana: "Helvetica", helvetica: "Helvetica", Helvetica: "Helvetica", "sans-serif": "Helvetica", fixed: "Courier", monospace: "Courier", terminal: "Courier", cursive: "Times", fantasy: "Times", serif: "Times" }, ke = 0; ke < Ht.length; ke++) {
            if (this.pdf.internal.getFont(Ht[ke], Qt, { noFallback: !0, disableWarning: !0 }) !== void 0) {
              oe = Ht[ke];
              break;
            }
            if (Qt === "bolditalic" && this.pdf.internal.getFont(Ht[ke], "bold", { noFallback: !0, disableWarning: !0 }) !== void 0) oe = Ht[ke], Qt = "bold";
            else if (this.pdf.internal.getFont(Ht[ke], "normal", { noFallback: !0, disableWarning: !0 }) !== void 0) {
              oe = Ht[ke], Qt = "normal";
              break;
            }
          }
          if (oe === "") {
            for (var Fe = 0; Fe < Ht.length; Fe++) if (xe[Ht[Fe]]) {
              oe = xe[Ht[Fe]];
              break;
            }
          }
          oe = oe === "" ? "Times" : oe, this.pdf.setFont(oe, Qt);
        }
      }
    } }), Object.defineProperty(this, "globalCompositeOperation", { get: function() {
      return this.ctx.globalCompositeOperation;
    }, set: function(Nt) {
      this.ctx.globalCompositeOperation = Nt;
    } }), Object.defineProperty(this, "globalAlpha", { get: function() {
      return this.ctx.globalAlpha;
    }, set: function(Nt) {
      this.ctx.globalAlpha = Nt;
    } }), Object.defineProperty(this, "lineDashOffset", { get: function() {
      return this.ctx.lineDashOffset;
    }, set: function(Nt) {
      this.ctx.lineDashOffset = Nt, St.call(this);
    } }), Object.defineProperty(this, "lineDash", { get: function() {
      return this.ctx.lineDash;
    }, set: function(Nt) {
      this.ctx.lineDash = Nt, St.call(this);
    } }), Object.defineProperty(this, "ignoreClearRect", { get: function() {
      return this.ctx.ignoreClearRect;
    }, set: function(Nt) {
      this.ctx.ignoreClearRect = !!Nt;
    } });
  };
  d.prototype.setLineDash = function(P) {
    this.lineDash = P;
  }, d.prototype.getLineDash = function() {
    return this.lineDash.length % 2 ? this.lineDash.concat(this.lineDash) : this.lineDash.slice();
  }, d.prototype.fill = function() {
    T.call(this, "fill", !1);
  }, d.prototype.stroke = function() {
    T.call(this, "stroke", !1);
  }, d.prototype.beginPath = function() {
    this.path = [{ type: "begin" }];
  }, d.prototype.moveTo = function(P, B) {
    if (isNaN(P) || isNaN(B)) throw un.error("jsPDF.context2d.moveTo: Invalid arguments", arguments), new Error("Invalid arguments passed to jsPDF.context2d.moveTo");
    var V = this.ctx.transform.applyToPoint(new o(P, B));
    this.path.push({ type: "mt", x: V.x, y: V.y }), this.ctx.lastPoint = new o(P, B);
  }, d.prototype.closePath = function() {
    var P = new o(0, 0), B = 0;
    for (B = this.path.length - 1; B !== -1; B--) if (this.path[B].type === "begin" && en(this.path[B + 1]) === "object" && typeof this.path[B + 1].x == "number") {
      P = new o(this.path[B + 1].x, this.path[B + 1].y);
      break;
    }
    this.path.push({ type: "close" }), this.ctx.lastPoint = new o(P.x, P.y);
  }, d.prototype.lineTo = function(P, B) {
    if (isNaN(P) || isNaN(B)) throw un.error("jsPDF.context2d.lineTo: Invalid arguments", arguments), new Error("Invalid arguments passed to jsPDF.context2d.lineTo");
    var V = this.ctx.transform.applyToPoint(new o(P, B));
    this.path.push({ type: "lt", x: V.x, y: V.y }), this.ctx.lastPoint = new o(V.x, V.y);
  }, d.prototype.clip = function() {
    this.ctx.clip_path = JSON.parse(JSON.stringify(this.path)), T.call(this, null, !0);
  }, d.prototype.quadraticCurveTo = function(P, B, V, J) {
    if (isNaN(V) || isNaN(J) || isNaN(P) || isNaN(B)) throw un.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments", arguments), new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");
    var nt = this.ctx.transform.applyToPoint(new o(V, J)), gt = this.ctx.transform.applyToPoint(new o(P, B));
    this.path.push({ type: "qct", x1: gt.x, y1: gt.y, x: nt.x, y: nt.y }), this.ctx.lastPoint = new o(nt.x, nt.y);
  }, d.prototype.bezierCurveTo = function(P, B, V, J, nt, gt) {
    if (isNaN(nt) || isNaN(gt) || isNaN(P) || isNaN(B) || isNaN(V) || isNaN(J)) throw un.error("jsPDF.context2d.bezierCurveTo: Invalid arguments", arguments), new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");
    var yt = this.ctx.transform.applyToPoint(new o(nt, gt)), vt = this.ctx.transform.applyToPoint(new o(P, B)), Rt = this.ctx.transform.applyToPoint(new o(V, J));
    this.path.push({ type: "bct", x1: vt.x, y1: vt.y, x2: Rt.x, y2: Rt.y, x: yt.x, y: yt.y }), this.ctx.lastPoint = new o(yt.x, yt.y);
  }, d.prototype.arc = function(P, B, V, J, nt, gt) {
    if (isNaN(P) || isNaN(B) || isNaN(V) || isNaN(J) || isNaN(nt)) throw un.error("jsPDF.context2d.arc: Invalid arguments", arguments), new Error("Invalid arguments passed to jsPDF.context2d.arc");
    if (gt = !!gt, !this.ctx.transform.isIdentity) {
      var yt = this.ctx.transform.applyToPoint(new o(P, B));
      P = yt.x, B = yt.y;
      var vt = this.ctx.transform.applyToPoint(new o(0, V)), Rt = this.ctx.transform.applyToPoint(new o(0, 0));
      V = Math.sqrt(Math.pow(vt.x - Rt.x, 2) + Math.pow(vt.y - Rt.y, 2));
    }
    Math.abs(nt - J) >= 2 * Math.PI && (J = 0, nt = 2 * Math.PI), this.path.push({ type: "arc", x: P, y: B, radius: V, startAngle: J, endAngle: nt, counterclockwise: gt });
  }, d.prototype.arcTo = function(P, B, V, J, nt) {
    throw new Error("arcTo not implemented.");
  }, d.prototype.rect = function(P, B, V, J) {
    if (isNaN(P) || isNaN(B) || isNaN(V) || isNaN(J)) throw un.error("jsPDF.context2d.rect: Invalid arguments", arguments), new Error("Invalid arguments passed to jsPDF.context2d.rect");
    this.moveTo(P, B), this.lineTo(P + V, B), this.lineTo(P + V, B + J), this.lineTo(P, B + J), this.lineTo(P, B), this.lineTo(P + V, B), this.lineTo(P, B);
  }, d.prototype.fillRect = function(P, B, V, J) {
    if (isNaN(P) || isNaN(B) || isNaN(V) || isNaN(J)) throw un.error("jsPDF.context2d.fillRect: Invalid arguments", arguments), new Error("Invalid arguments passed to jsPDF.context2d.fillRect");
    if (!p.call(this)) {
      var nt = {};
      this.lineCap !== "butt" && (nt.lineCap = this.lineCap, this.lineCap = "butt"), this.lineJoin !== "miter" && (nt.lineJoin = this.lineJoin, this.lineJoin = "miter"), this.beginPath(), this.rect(P, B, V, J), this.fill(), nt.hasOwnProperty("lineCap") && (this.lineCap = nt.lineCap), nt.hasOwnProperty("lineJoin") && (this.lineJoin = nt.lineJoin);
    }
  }, d.prototype.strokeRect = function(P, B, V, J) {
    if (isNaN(P) || isNaN(B) || isNaN(V) || isNaN(J)) throw un.error("jsPDF.context2d.strokeRect: Invalid arguments", arguments), new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");
    b.call(this) || (this.beginPath(), this.rect(P, B, V, J), this.stroke());
  }, d.prototype.clearRect = function(P, B, V, J) {
    if (isNaN(P) || isNaN(B) || isNaN(V) || isNaN(J)) throw un.error("jsPDF.context2d.clearRect: Invalid arguments", arguments), new Error("Invalid arguments passed to jsPDF.context2d.clearRect");
    this.ignoreClearRect || (this.fillStyle = "#ffffff", this.fillRect(P, B, V, J));
  }, d.prototype.save = function(P) {
    P = typeof P != "boolean" || P;
    for (var B = this.pdf.internal.getCurrentPageInfo().pageNumber, V = 0; V < this.pdf.internal.getNumberOfPages(); V++) this.pdf.setPage(V + 1), this.pdf.internal.out("q");
    if (this.pdf.setPage(B), P) {
      this.ctx.fontSize = this.pdf.internal.getFontSize();
      var J = new c(this.ctx);
      this.ctxStack.push(this.ctx), this.ctx = J;
    }
  }, d.prototype.restore = function(P) {
    P = typeof P != "boolean" || P;
    for (var B = this.pdf.internal.getCurrentPageInfo().pageNumber, V = 0; V < this.pdf.internal.getNumberOfPages(); V++) this.pdf.setPage(V + 1), this.pdf.internal.out("Q");
    this.pdf.setPage(B), P && this.ctxStack.length !== 0 && (this.ctx = this.ctxStack.pop(), this.fillStyle = this.ctx.fillStyle, this.strokeStyle = this.ctx.strokeStyle, this.font = this.ctx.font, this.lineCap = this.ctx.lineCap, this.lineWidth = this.ctx.lineWidth, this.lineJoin = this.ctx.lineJoin, this.lineDash = this.ctx.lineDash, this.lineDashOffset = this.ctx.lineDashOffset);
  }, d.prototype.toDataURL = function() {
    throw new Error("toDataUrl not implemented.");
  };
  var g = function(P) {
    var B, V, J, nt;
    if (P.isCanvasGradient === !0 && (P = P.getColor()), !P) return { r: 0, g: 0, b: 0, a: 0, style: P };
    if (/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P)) B = 0, V = 0, J = 0, nt = 0;
    else {
      var gt = /rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);
      if (gt !== null) B = parseInt(gt[1]), V = parseInt(gt[2]), J = parseInt(gt[3]), nt = 1;
      else if ((gt = /rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P)) !== null) B = parseInt(gt[1]), V = parseInt(gt[2]), J = parseInt(gt[3]), nt = parseFloat(gt[4]);
      else {
        if (nt = 1, typeof P == "string" && P.charAt(0) !== "#") {
          var yt = new k1(P);
          P = yt.ok ? yt.toHex() : "#000000";
        }
        P.length === 4 ? (B = P.substring(1, 2), B += B, V = P.substring(2, 3), V += V, J = P.substring(3, 4), J += J) : (B = P.substring(1, 3), V = P.substring(3, 5), J = P.substring(5, 7)), B = parseInt(B, 16), V = parseInt(V, 16), J = parseInt(J, 16);
      }
    }
    return { r: B, g: V, b: J, a: nt, style: P };
  }, p = function() {
    return this.ctx.isFillTransparent || this.globalAlpha == 0;
  }, b = function() {
    return !!(this.ctx.isStrokeTransparent || this.globalAlpha == 0);
  };
  d.prototype.fillText = function(P, B, V, J) {
    if (isNaN(B) || isNaN(V) || typeof P != "string") throw un.error("jsPDF.context2d.fillText: Invalid arguments", arguments), new Error("Invalid arguments passed to jsPDF.context2d.fillText");
    if (J = isNaN(J) ? void 0 : J, !p.call(this)) {
      var nt = Q(this.ctx.transform.rotation), gt = this.ctx.transform.scaleX;
      _.call(this, { text: P, x: B, y: V, scale: gt, angle: nt, align: this.textAlign, maxWidth: J });
    }
  }, d.prototype.strokeText = function(P, B, V, J) {
    if (isNaN(B) || isNaN(V) || typeof P != "string") throw un.error("jsPDF.context2d.strokeText: Invalid arguments", arguments), new Error("Invalid arguments passed to jsPDF.context2d.strokeText");
    if (!b.call(this)) {
      J = isNaN(J) ? void 0 : J;
      var nt = Q(this.ctx.transform.rotation), gt = this.ctx.transform.scaleX;
      _.call(this, { text: P, x: B, y: V, scale: gt, renderingMode: "stroke", angle: nt, align: this.textAlign, maxWidth: J });
    }
  }, d.prototype.measureText = function(P) {
    if (typeof P != "string") throw un.error("jsPDF.context2d.measureText: Invalid arguments", arguments), new Error("Invalid arguments passed to jsPDF.context2d.measureText");
    var B = this.pdf, V = this.pdf.internal.scaleFactor, J = B.internal.getFontSize(), nt = B.getStringUnitWidth(P) * J / B.internal.scaleFactor, gt = function(yt) {
      var vt = (yt = yt || {}).width || 0;
      return Object.defineProperty(this, "width", { get: function() {
        return vt;
      } }), this;
    };
    return new gt({ width: nt *= Math.round(96 * V / 72 * 1e4) / 1e4 });
  }, d.prototype.scale = function(P, B) {
    if (isNaN(P) || isNaN(B)) throw un.error("jsPDF.context2d.scale: Invalid arguments", arguments), new Error("Invalid arguments passed to jsPDF.context2d.scale");
    var V = new l(P, 0, 0, B, 0, 0);
    this.ctx.transform = this.ctx.transform.multiply(V);
  }, d.prototype.rotate = function(P) {
    if (isNaN(P)) throw un.error("jsPDF.context2d.rotate: Invalid arguments", arguments), new Error("Invalid arguments passed to jsPDF.context2d.rotate");
    var B = new l(Math.cos(P), Math.sin(P), -Math.sin(P), Math.cos(P), 0, 0);
    this.ctx.transform = this.ctx.transform.multiply(B);
  }, d.prototype.translate = function(P, B) {
    if (isNaN(P) || isNaN(B)) throw un.error("jsPDF.context2d.translate: Invalid arguments", arguments), new Error("Invalid arguments passed to jsPDF.context2d.translate");
    var V = new l(1, 0, 0, 1, P, B);
    this.ctx.transform = this.ctx.transform.multiply(V);
  }, d.prototype.transform = function(P, B, V, J, nt, gt) {
    if (isNaN(P) || isNaN(B) || isNaN(V) || isNaN(J) || isNaN(nt) || isNaN(gt)) throw un.error("jsPDF.context2d.transform: Invalid arguments", arguments), new Error("Invalid arguments passed to jsPDF.context2d.transform");
    var yt = new l(P, B, V, J, nt, gt);
    this.ctx.transform = this.ctx.transform.multiply(yt);
  }, d.prototype.setTransform = function(P, B, V, J, nt, gt) {
    P = isNaN(P) ? 1 : P, B = isNaN(B) ? 0 : B, V = isNaN(V) ? 0 : V, J = isNaN(J) ? 1 : J, nt = isNaN(nt) ? 0 : nt, gt = isNaN(gt) ? 0 : gt, this.ctx.transform = new l(P, B, V, J, nt, gt);
  };
  var x = function() {
    return this.margin[0] > 0 || this.margin[1] > 0 || this.margin[2] > 0 || this.margin[3] > 0;
  };
  d.prototype.drawImage = function(P, B, V, J, nt, gt, yt, vt, Rt) {
    var Dt = this.pdf.getImageProperties(P), Ut = 1, Wt = 1, he = 1, Nt = 1;
    J !== void 0 && vt !== void 0 && (he = vt / J, Nt = Rt / nt, Ut = Dt.width / J * vt / J, Wt = Dt.height / nt * Rt / nt), gt === void 0 && (gt = B, yt = V, B = 0, V = 0), J !== void 0 && vt === void 0 && (vt = J, Rt = nt), J === void 0 && vt === void 0 && (vt = Dt.width, Rt = Dt.height);
    for (var it, de = this.ctx.transform.decompose(), Xt = Q(de.rotate.shx), Mt = new l(), qt = (Mt = (Mt = (Mt = Mt.multiply(de.translate)).multiply(de.skew)).multiply(de.scale)).applyToRectangle(new a(gt - B * he, yt - V * Nt, J * Ut, nt * Wt)), Gt = N.call(this, qt), Ht = [], ee = 0; ee < Gt.length; ee += 1) Ht.indexOf(Gt[ee]) === -1 && Ht.push(Gt[ee]);
    if (k(Ht), this.autoPaging) for (var Qt = Ht[0], oe = Ht[Ht.length - 1], xe = Qt; xe < oe + 1; xe++) {
      this.pdf.setPage(xe);
      var ke = this.pdf.internal.pageSize.width - this.margin[3] - this.margin[1], Fe = xe === 1 ? this.posY + this.margin[0] : this.margin[0], ue = this.pdf.internal.pageSize.height - this.posY - this.margin[0] - this.margin[2], rt = this.pdf.internal.pageSize.height - this.margin[0] - this.margin[2], mt = xe === 1 ? 0 : ue + (xe - 2) * rt;
      if (this.ctx.clip_path.length !== 0) {
        var zt = this.path;
        it = JSON.parse(JSON.stringify(this.ctx.clip_path)), this.path = w(it, this.posX + this.margin[3], -mt + Fe + this.ctx.prevPageLastElemOffset), D.call(this, "fill", !0), this.path = zt;
      }
      var It = JSON.parse(JSON.stringify(qt));
      It = w([It], this.posX + this.margin[3], -mt + Fe + this.ctx.prevPageLastElemOffset)[0];
      var be = (xe > Qt || xe < oe) && x.call(this);
      be && (this.pdf.saveGraphicsState(), this.pdf.rect(this.margin[3], this.margin[0], ke, rt, null).clip().discardPath()), this.pdf.addImage(P, "JPEG", It.x, It.y, It.w, It.h, null, null, Xt), be && this.pdf.restoreGraphicsState();
    }
    else this.pdf.addImage(P, "JPEG", qt.x, qt.y, qt.w, qt.h, null, null, Xt);
  };
  var N = function(P, B, V) {
    var J = [];
    B = B || this.pdf.internal.pageSize.width, V = V || this.pdf.internal.pageSize.height - this.margin[0] - this.margin[2];
    var nt = this.posY + this.ctx.prevPageLastElemOffset;
    switch (P.type) {
      default:
      case "mt":
      case "lt":
        J.push(Math.floor((P.y + nt) / V) + 1);
        break;
      case "arc":
        J.push(Math.floor((P.y + nt - P.radius) / V) + 1), J.push(Math.floor((P.y + nt + P.radius) / V) + 1);
        break;
      case "qct":
        var gt = Z(this.ctx.lastPoint.x, this.ctx.lastPoint.y, P.x1, P.y1, P.x, P.y);
        J.push(Math.floor((gt.y + nt) / V) + 1), J.push(Math.floor((gt.y + gt.h + nt) / V) + 1);
        break;
      case "bct":
        var yt = ct(this.ctx.lastPoint.x, this.ctx.lastPoint.y, P.x1, P.y1, P.x2, P.y2, P.x, P.y);
        J.push(Math.floor((yt.y + nt) / V) + 1), J.push(Math.floor((yt.y + yt.h + nt) / V) + 1);
        break;
      case "rect":
        J.push(Math.floor((P.y + nt) / V) + 1), J.push(Math.floor((P.y + P.h + nt) / V) + 1);
    }
    for (var vt = 0; vt < J.length; vt += 1) for (; this.pdf.internal.getNumberOfPages() < J[vt]; ) v.call(this);
    return J;
  }, v = function() {
    var P = this.fillStyle, B = this.strokeStyle, V = this.font, J = this.lineCap, nt = this.lineWidth, gt = this.lineJoin;
    this.pdf.addPage(), this.fillStyle = P, this.strokeStyle = B, this.font = V, this.lineCap = J, this.lineWidth = nt, this.lineJoin = gt;
  }, w = function(P, B, V) {
    for (var J = 0; J < P.length; J++) switch (P[J].type) {
      case "bct":
        P[J].x2 += B, P[J].y2 += V;
      case "qct":
        P[J].x1 += B, P[J].y1 += V;
      case "mt":
      case "lt":
      case "arc":
      default:
        P[J].x += B, P[J].y += V;
    }
    return P;
  }, k = function(P) {
    return P.sort(function(B, V) {
      return B - V;
    });
  }, T = function(P, B) {
    for (var V, J, nt = this.fillStyle, gt = this.strokeStyle, yt = this.lineCap, vt = this.lineWidth, Rt = Math.abs(vt * this.ctx.transform.scaleX), Dt = this.lineJoin, Ut = JSON.parse(JSON.stringify(this.path)), Wt = JSON.parse(JSON.stringify(this.path)), he = [], Nt = 0; Nt < Wt.length; Nt++) if (Wt[Nt].x !== void 0) for (var it = N.call(this, Wt[Nt]), de = 0; de < it.length; de += 1) he.indexOf(it[de]) === -1 && he.push(it[de]);
    for (var Xt = 0; Xt < he.length; Xt++) for (; this.pdf.internal.getNumberOfPages() < he[Xt]; ) v.call(this);
    if (k(he), this.autoPaging) for (var Mt = he[0], qt = he[he.length - 1], Gt = Mt; Gt < qt + 1; Gt++) {
      this.pdf.setPage(Gt), this.fillStyle = nt, this.strokeStyle = gt, this.lineCap = yt, this.lineWidth = Rt, this.lineJoin = Dt;
      var Ht = this.pdf.internal.pageSize.width - this.margin[3] - this.margin[1], ee = Gt === 1 ? this.posY + this.margin[0] : this.margin[0], Qt = this.pdf.internal.pageSize.height - this.posY - this.margin[0] - this.margin[2], oe = this.pdf.internal.pageSize.height - this.margin[0] - this.margin[2], xe = Gt === 1 ? 0 : Qt + (Gt - 2) * oe;
      if (this.ctx.clip_path.length !== 0) {
        var ke = this.path;
        V = JSON.parse(JSON.stringify(this.ctx.clip_path)), this.path = w(V, this.posX + this.margin[3], -xe + ee + this.ctx.prevPageLastElemOffset), D.call(this, P, !0), this.path = ke;
      }
      if (J = JSON.parse(JSON.stringify(Ut)), this.path = w(J, this.posX + this.margin[3], -xe + ee + this.ctx.prevPageLastElemOffset), B === !1 || Gt === 0) {
        var Fe = (Gt > Mt || Gt < qt) && x.call(this);
        Fe && (this.pdf.saveGraphicsState(), this.pdf.rect(this.margin[3], this.margin[0], Ht, oe, null).clip().discardPath()), D.call(this, P, B), Fe && this.pdf.restoreGraphicsState();
      }
      this.lineWidth = vt;
    }
    else this.lineWidth = Rt, D.call(this, P, B), this.lineWidth = vt;
    this.path = Ut;
  }, D = function(P, B) {
    if ((P !== "stroke" || B || !b.call(this)) && (P === "stroke" || B || !p.call(this))) {
      for (var V, J, nt = [], gt = this.path, yt = 0; yt < gt.length; yt++) {
        var vt = gt[yt];
        switch (vt.type) {
          case "begin":
            nt.push({ begin: !0 });
            break;
          case "close":
            nt.push({ close: !0 });
            break;
          case "mt":
            nt.push({ start: vt, deltas: [], abs: [] });
            break;
          case "lt":
            var Rt = nt.length;
            if (gt[yt - 1] && !isNaN(gt[yt - 1].x) && (V = [vt.x - gt[yt - 1].x, vt.y - gt[yt - 1].y], Rt > 0)) {
              for (; Rt >= 0; Rt--) if (nt[Rt - 1].close !== !0 && nt[Rt - 1].begin !== !0) {
                nt[Rt - 1].deltas.push(V), nt[Rt - 1].abs.push(vt);
                break;
              }
            }
            break;
          case "bct":
            V = [vt.x1 - gt[yt - 1].x, vt.y1 - gt[yt - 1].y, vt.x2 - gt[yt - 1].x, vt.y2 - gt[yt - 1].y, vt.x - gt[yt - 1].x, vt.y - gt[yt - 1].y], nt[nt.length - 1].deltas.push(V);
            break;
          case "qct":
            var Dt = gt[yt - 1].x + 2 / 3 * (vt.x1 - gt[yt - 1].x), Ut = gt[yt - 1].y + 2 / 3 * (vt.y1 - gt[yt - 1].y), Wt = vt.x + 2 / 3 * (vt.x1 - vt.x), he = vt.y + 2 / 3 * (vt.y1 - vt.y), Nt = vt.x, it = vt.y;
            V = [Dt - gt[yt - 1].x, Ut - gt[yt - 1].y, Wt - gt[yt - 1].x, he - gt[yt - 1].y, Nt - gt[yt - 1].x, it - gt[yt - 1].y], nt[nt.length - 1].deltas.push(V);
            break;
          case "arc":
            nt.push({ deltas: [], abs: [], arc: !0 }), Array.isArray(nt[nt.length - 1].abs) && nt[nt.length - 1].abs.push(vt);
        }
      }
      J = B ? null : P === "stroke" ? "stroke" : "fill";
      for (var de = !1, Xt = 0; Xt < nt.length; Xt++) if (nt[Xt].arc) for (var Mt = nt[Xt].abs, qt = 0; qt < Mt.length; qt++) {
        var Gt = Mt[qt];
        Gt.type === "arc" ? O.call(this, Gt.x, Gt.y, Gt.radius, Gt.startAngle, Gt.endAngle, Gt.counterclockwise, void 0, B, !de) : I.call(this, Gt.x, Gt.y), de = !0;
      }
      else if (nt[Xt].close === !0) this.pdf.internal.out("h"), de = !1;
      else if (nt[Xt].begin !== !0) {
        var Ht = nt[Xt].start.x, ee = nt[Xt].start.y;
        M.call(this, nt[Xt].deltas, Ht, ee), de = !0;
      }
      J && $.call(this, J), B && z.call(this);
    }
  }, G = function(P) {
    var B = this.pdf.internal.getFontSize() / this.pdf.internal.scaleFactor, V = B * (this.pdf.internal.getLineHeightFactor() - 1);
    switch (this.ctx.textBaseline) {
      case "bottom":
        return P - V;
      case "top":
        return P + B - V;
      case "hanging":
        return P + B - 2 * V;
      case "middle":
        return P + B / 2 - V;
      case "ideographic":
        return P;
      case "alphabetic":
      default:
        return P;
    }
  }, R = function(P) {
    return P + this.pdf.internal.getFontSize() / this.pdf.internal.scaleFactor * (this.pdf.internal.getLineHeightFactor() - 1);
  };
  d.prototype.createLinearGradient = function() {
    var P = function() {
    };
    return P.colorStops = [], P.addColorStop = function(B, V) {
      this.colorStops.push([B, V]);
    }, P.getColor = function() {
      return this.colorStops.length === 0 ? "#000000" : this.colorStops[0][1];
    }, P.isCanvasGradient = !0, P;
  }, d.prototype.createPattern = function() {
    return this.createLinearGradient();
  }, d.prototype.createRadialGradient = function() {
    return this.createLinearGradient();
  };
  var O = function(P, B, V, J, nt, gt, yt, vt, Rt) {
    for (var Dt = W.call(this, V, J, nt, gt), Ut = 0; Ut < Dt.length; Ut++) {
      var Wt = Dt[Ut];
      Ut === 0 && (Rt ? A.call(this, Wt.x1 + P, Wt.y1 + B) : I.call(this, Wt.x1 + P, Wt.y1 + B)), st.call(this, P, B, Wt.x2, Wt.y2, Wt.x3, Wt.y3, Wt.x4, Wt.y4);
    }
    vt ? z.call(this) : $.call(this, yt);
  }, $ = function(P) {
    switch (P) {
      case "stroke":
        this.pdf.internal.out("S");
        break;
      case "fill":
        this.pdf.internal.out("f");
    }
  }, z = function() {
    this.pdf.clip(), this.pdf.discardPath();
  }, A = function(P, B) {
    this.pdf.internal.out(n(P) + " " + i(B) + " m");
  }, _ = function(P) {
    var B;
    switch (P.align) {
      case "right":
      case "end":
        B = "right";
        break;
      case "center":
        B = "center";
        break;
      case "left":
      case "start":
      default:
        B = "left";
    }
    var V = this.pdf.getTextDimensions(P.text), J = G.call(this, P.y), nt = R.call(this, J) - V.h, gt = this.ctx.transform.applyToPoint(new o(P.x, J)), yt = this.ctx.transform.decompose(), vt = new l();
    vt = (vt = (vt = vt.multiply(yt.translate)).multiply(yt.skew)).multiply(yt.scale);
    for (var Rt, Dt, Ut, Wt = this.ctx.transform.applyToRectangle(new a(P.x, J, V.w, V.h)), he = vt.applyToRectangle(new a(P.x, nt, V.w, V.h)), Nt = N.call(this, he), it = [], de = 0; de < Nt.length; de += 1) it.indexOf(Nt[de]) === -1 && it.push(Nt[de]);
    if (k(it), this.autoPaging) for (var Xt = it[0], Mt = it[it.length - 1], qt = Xt; qt < Mt + 1; qt++) {
      this.pdf.setPage(qt);
      var Gt = qt === 1 ? this.posY + this.margin[0] : this.margin[0], Ht = this.pdf.internal.pageSize.height - this.posY - this.margin[0] - this.margin[2], ee = this.pdf.internal.pageSize.height - this.margin[2], Qt = ee - this.margin[0], oe = this.pdf.internal.pageSize.width - this.margin[1], xe = oe - this.margin[3], ke = qt === 1 ? 0 : Ht + (qt - 2) * Qt;
      if (this.ctx.clip_path.length !== 0) {
        var Fe = this.path;
        Rt = JSON.parse(JSON.stringify(this.ctx.clip_path)), this.path = w(Rt, this.posX + this.margin[3], -1 * ke + Gt), D.call(this, "fill", !0), this.path = Fe;
      }
      var ue = w([JSON.parse(JSON.stringify(he))], this.posX + this.margin[3], -ke + Gt + this.ctx.prevPageLastElemOffset)[0];
      P.scale >= 0.01 && (Dt = this.pdf.internal.getFontSize(), this.pdf.setFontSize(Dt * P.scale), Ut = this.lineWidth, this.lineWidth = Ut * P.scale);
      var rt = this.autoPaging !== "text";
      if (rt || ue.y + ue.h <= ee) {
        if (rt || ue.y >= Gt && ue.x <= oe) {
          var mt = rt ? P.text : this.pdf.splitTextToSize(P.text, P.maxWidth || oe - ue.x)[0], zt = w([JSON.parse(JSON.stringify(Wt))], this.posX + this.margin[3], -ke + Gt + this.ctx.prevPageLastElemOffset)[0], It = rt && (qt > Xt || qt < Mt) && x.call(this);
          It && (this.pdf.saveGraphicsState(), this.pdf.rect(this.margin[3], this.margin[0], xe, Qt, null).clip().discardPath()), this.pdf.text(mt, zt.x, zt.y, { angle: P.angle, align: B, renderingMode: P.renderingMode }), It && this.pdf.restoreGraphicsState();
        }
      } else ue.y < ee && (this.ctx.prevPageLastElemOffset += ee - ue.y);
      P.scale >= 0.01 && (this.pdf.setFontSize(Dt), this.lineWidth = Ut);
    }
    else P.scale >= 0.01 && (Dt = this.pdf.internal.getFontSize(), this.pdf.setFontSize(Dt * P.scale), Ut = this.lineWidth, this.lineWidth = Ut * P.scale), this.pdf.text(P.text, gt.x + this.posX, gt.y + this.posY, { angle: P.angle, align: B, renderingMode: P.renderingMode, maxWidth: P.maxWidth }), P.scale >= 0.01 && (this.pdf.setFontSize(Dt), this.lineWidth = Ut);
  }, I = function(P, B, V, J) {
    V = V || 0, J = J || 0, this.pdf.internal.out(n(P + V) + " " + i(B + J) + " l");
  }, M = function(P, B, V) {
    return this.pdf.lines(P, B, V, null, null);
  }, st = function(P, B, V, J, nt, gt, yt, vt) {
    this.pdf.internal.out([t(r(V + P)), t(s(J + B)), t(r(nt + P)), t(s(gt + B)), t(r(yt + P)), t(s(vt + B)), "c"].join(" "));
  }, W = function(P, B, V, J) {
    for (var nt = 2 * Math.PI, gt = Math.PI / 2; B > V; ) B -= nt;
    var yt = Math.abs(V - B);
    yt < nt && J && (yt = nt - yt);
    for (var vt = [], Rt = J ? -1 : 1, Dt = B; yt > 1e-5; ) {
      var Ut = Dt + Rt * Math.min(yt, gt);
      vt.push(U.call(this, P, Dt, Ut)), yt -= Math.abs(Ut - Dt), Dt = Ut;
    }
    return vt;
  }, U = function(P, B, V) {
    var J = (V - B) / 2, nt = P * Math.cos(J), gt = P * Math.sin(J), yt = nt, vt = -gt, Rt = yt * yt + vt * vt, Dt = Rt + yt * nt + vt * gt, Ut = 4 / 3 * (Math.sqrt(2 * Rt * Dt) - Dt) / (yt * gt - vt * nt), Wt = yt - Ut * vt, he = vt + Ut * yt, Nt = Wt, it = -he, de = J + B, Xt = Math.cos(de), Mt = Math.sin(de);
    return { x1: P * Math.cos(B), y1: P * Math.sin(B), x2: Wt * Xt - he * Mt, y2: Wt * Mt + he * Xt, x3: Nt * Xt - it * Mt, y3: Nt * Mt + it * Xt, x4: P * Math.cos(V), y4: P * Math.sin(V) };
  }, Q = function(P) {
    return 180 * P / Math.PI;
  }, Z = function(P, B, V, J, nt, gt) {
    var yt = P + 0.5 * (V - P), vt = B + 0.5 * (J - B), Rt = nt + 0.5 * (V - nt), Dt = gt + 0.5 * (J - gt), Ut = Math.min(P, nt, yt, Rt), Wt = Math.max(P, nt, yt, Rt), he = Math.min(B, gt, vt, Dt), Nt = Math.max(B, gt, vt, Dt);
    return new a(Ut, he, Wt - Ut, Nt - he);
  }, ct = function(P, B, V, J, nt, gt, yt, vt) {
    var Rt, Dt, Ut, Wt, he, Nt, it, de, Xt, Mt, qt, Gt, Ht, ee, Qt = V - P, oe = J - B, xe = nt - V, ke = gt - J, Fe = yt - nt, ue = vt - gt;
    for (Dt = 0; Dt < 41; Dt++) Xt = (it = (Ut = P + (Rt = Dt / 40) * Qt) + Rt * ((he = V + Rt * xe) - Ut)) + Rt * (he + Rt * (nt + Rt * Fe - he) - it), Mt = (de = (Wt = B + Rt * oe) + Rt * ((Nt = J + Rt * ke) - Wt)) + Rt * (Nt + Rt * (gt + Rt * ue - Nt) - de), Dt == 0 ? (qt = Xt, Gt = Mt, Ht = Xt, ee = Mt) : (qt = Math.min(qt, Xt), Gt = Math.min(Gt, Mt), Ht = Math.max(Ht, Xt), ee = Math.max(ee, Mt));
    return new a(Math.round(qt), Math.round(Gt), Math.round(Ht - qt), Math.round(ee - Gt));
  }, St = function() {
    if (this.prevLineDash || this.ctx.lineDash.length || this.ctx.lineDashOffset) {
      var P, B, V = (P = this.ctx.lineDash, B = this.ctx.lineDashOffset, JSON.stringify({ lineDash: P, lineDashOffset: B }));
      this.prevLineDash !== V && (this.pdf.setLineDash(this.ctx.lineDash, this.ctx.lineDashOffset), this.prevLineDash = V);
    }
  };
})(ye.API), /**
 * @license
 * jsPDF filters PlugIn
 * Copyright (c) 2014 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(e) {
  var t = function(s) {
    var o, a, l, h, c, d, g, p, b, x;
    for (a = [], l = 0, h = (s += o = "\0\0\0\0".slice(s.length % 4 || 4)).length; h > l; l += 4) (c = (s.charCodeAt(l) << 24) + (s.charCodeAt(l + 1) << 16) + (s.charCodeAt(l + 2) << 8) + s.charCodeAt(l + 3)) !== 0 ? (d = (c = ((c = ((c = ((c = (c - (x = c % 85)) / 85) - (b = c % 85)) / 85) - (p = c % 85)) / 85) - (g = c % 85)) / 85) % 85, a.push(d + 33, g + 33, p + 33, b + 33, x + 33)) : a.push(122);
    return function(N, v) {
      for (var w = v; w > 0; w--) N.pop();
    }(a, o.length), String.fromCharCode.apply(String, a) + "~>";
  }, n = function(s) {
    var o, a, l, h, c, d = String, g = "length", p = 255, b = "charCodeAt", x = "slice", N = "replace";
    for (s[x](-2), s = s[x](0, -2)[N](/\s/g, "")[N]("z", "!!!!!"), l = [], h = 0, c = (s += o = "uuuuu"[x](s[g] % 5 || 5))[g]; c > h; h += 5) a = 52200625 * (s[b](h) - 33) + 614125 * (s[b](h + 1) - 33) + 7225 * (s[b](h + 2) - 33) + 85 * (s[b](h + 3) - 33) + (s[b](h + 4) - 33), l.push(p & a >> 24, p & a >> 16, p & a >> 8, p & a);
    return function(v, w) {
      for (var k = w; k > 0; k--) v.pop();
    }(l, o[g]), d.fromCharCode.apply(d, l);
  }, i = function(s) {
    var o = new RegExp(/^([0-9A-Fa-f]{2})+$/);
    if ((s = s.replace(/\s/g, "")).indexOf(">") !== -1 && (s = s.substr(0, s.indexOf(">"))), s.length % 2 && (s += "0"), o.test(s) === !1) return "";
    for (var a = "", l = 0; l < s.length; l += 2) a += String.fromCharCode("0x" + (s[l] + s[l + 1]));
    return a;
  }, r = function(s) {
    for (var o = new Uint8Array(s.length), a = s.length; a--; ) o[a] = s.charCodeAt(a);
    return s = (o = af(o)).reduce(function(l, h) {
      return l + String.fromCharCode(h);
    }, "");
  };
  e.processDataByFilters = function(s, o) {
    var a = 0, l = s || "", h = [];
    for (typeof (o = o || []) == "string" && (o = [o]), a = 0; a < o.length; a += 1) switch (o[a]) {
      case "ASCII85Decode":
      case "/ASCII85Decode":
        l = n(l), h.push("/ASCII85Encode");
        break;
      case "ASCII85Encode":
      case "/ASCII85Encode":
        l = t(l), h.push("/ASCII85Decode");
        break;
      case "ASCIIHexDecode":
      case "/ASCIIHexDecode":
        l = i(l), h.push("/ASCIIHexEncode");
        break;
      case "ASCIIHexEncode":
      case "/ASCIIHexEncode":
        l = l.split("").map(function(c) {
          return ("0" + c.charCodeAt().toString(16)).slice(-2);
        }).join("") + ">", h.push("/ASCIIHexDecode");
        break;
      case "FlateEncode":
      case "/FlateEncode":
        l = r(l), h.push("/FlateDecode");
        break;
      default:
        throw new Error('The filter: "' + o[a] + '" is not implemented');
    }
    return { data: l, reverseChain: h.reverse().join(" ") };
  };
}(ye.API), /**
 * @license
 * jsPDF fileloading PlugIn
 * Copyright (c) 2018 Aras Abbasi (aras.abbasi@gmail.com)
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(e) {
  e.loadFile = function(t, n, i) {
    return function(r, s, o) {
      s = s !== !1, o = typeof o == "function" ? o : function() {
      };
      var a = void 0;
      try {
        a = function(l, h, c) {
          var d = new XMLHttpRequest(), g = 0, p = function(b) {
            var x = b.length, N = [], v = String.fromCharCode;
            for (g = 0; g < x; g += 1) N.push(v(255 & b.charCodeAt(g)));
            return N.join("");
          };
          if (d.open("GET", l, !h), d.overrideMimeType("text/plain; charset=x-user-defined"), h === !1 && (d.onload = function() {
            d.status === 200 ? c(p(this.responseText)) : c(void 0);
          }), d.send(null), h && d.status === 200) return p(d.responseText);
        }(r, s, o);
      } catch {
      }
      return a;
    }(t, n, i);
  }, e.loadImageFile = e.loadFile;
}(ye.API), function(e) {
  function t() {
    return (Se.html2canvas ? Promise.resolve(Se.html2canvas) : import("./html2canvas.esm-d2sM-0Wm.js")).catch(function(o) {
      return Promise.reject(new Error("Could not load html2canvas: " + o));
    }).then(function(o) {
      return o.default ? o.default : o;
    });
  }
  function n() {
    return (Se.DOMPurify ? Promise.resolve(Se.DOMPurify) : import("./purify.es-DD-6ZaCo.js")).catch(function(o) {
      return Promise.reject(new Error("Could not load dompurify: " + o));
    }).then(function(o) {
      return o.default ? o.default : o;
    });
  }
  var i = function(o) {
    var a = en(o);
    return a === "undefined" ? "undefined" : a === "string" || o instanceof String ? "string" : a === "number" || o instanceof Number ? "number" : a === "function" || o instanceof Function ? "function" : o && o.constructor === Array ? "array" : o && o.nodeType === 1 ? "element" : a === "object" ? "object" : "unknown";
  }, r = function(o, a) {
    var l = document.createElement(o);
    for (var h in a.className && (l.className = a.className), a.innerHTML && a.dompurify && (l.innerHTML = a.dompurify.sanitize(a.innerHTML)), a.style) l.style[h] = a.style[h];
    return l;
  }, s = function o(a) {
    var l = Object.assign(o.convert(Promise.resolve()), JSON.parse(JSON.stringify(o.template))), h = o.convert(Promise.resolve(), l);
    return h = (h = h.setProgress(1, o, 1, [o])).set(a);
  };
  (s.prototype = Object.create(Promise.prototype)).constructor = s, s.convert = function(o, a) {
    return o.__proto__ = a || s.prototype, o;
  }, s.template = { prop: { src: null, container: null, overlay: null, canvas: null, img: null, pdf: null, pageSize: null, callback: function() {
  } }, progress: { val: 0, state: null, n: 0, stack: [] }, opt: { filename: "file.pdf", margin: [0, 0, 0, 0], enableLinks: !0, x: 0, y: 0, html2canvas: {}, jsPDF: {}, backgroundColor: "transparent" } }, s.prototype.from = function(o, a) {
    return this.then(function() {
      switch (a = a || function(l) {
        switch (i(l)) {
          case "string":
            return "string";
          case "element":
            return l.nodeName.toLowerCase() === "canvas" ? "canvas" : "element";
          default:
            return "unknown";
        }
      }(o)) {
        case "string":
          return this.then(n).then(function(l) {
            return this.set({ src: r("div", { innerHTML: o, dompurify: l }) });
          });
        case "element":
          return this.set({ src: o });
        case "canvas":
          return this.set({ canvas: o });
        case "img":
          return this.set({ img: o });
        default:
          return this.error("Unknown source type.");
      }
    });
  }, s.prototype.to = function(o) {
    switch (o) {
      case "container":
        return this.toContainer();
      case "canvas":
        return this.toCanvas();
      case "img":
        return this.toImg();
      case "pdf":
        return this.toPdf();
      default:
        return this.error("Invalid target.");
    }
  }, s.prototype.toContainer = function() {
    return this.thenList([function() {
      return this.prop.src || this.error("Cannot duplicate - no source HTML.");
    }, function() {
      return this.prop.pageSize || this.setPageSize();
    }]).then(function() {
      var o = { position: "relative", display: "inline-block", width: (typeof this.opt.width != "number" || isNaN(this.opt.width) || typeof this.opt.windowWidth != "number" || isNaN(this.opt.windowWidth) ? Math.max(this.prop.src.clientWidth, this.prop.src.scrollWidth, this.prop.src.offsetWidth) : this.opt.windowWidth) + "px", left: 0, right: 0, top: 0, margin: "auto", backgroundColor: this.opt.backgroundColor }, a = function l(h, c) {
        for (var d = h.nodeType === 3 ? document.createTextNode(h.nodeValue) : h.cloneNode(!1), g = h.firstChild; g; g = g.nextSibling) c !== !0 && g.nodeType === 1 && g.nodeName === "SCRIPT" || d.appendChild(l(g, c));
        return h.nodeType === 1 && (h.nodeName === "CANVAS" ? (d.width = h.width, d.height = h.height, d.getContext("2d").drawImage(h, 0, 0)) : h.nodeName !== "TEXTAREA" && h.nodeName !== "SELECT" || (d.value = h.value), d.addEventListener("load", function() {
          d.scrollTop = h.scrollTop, d.scrollLeft = h.scrollLeft;
        }, !0)), d;
      }(this.prop.src, this.opt.html2canvas.javascriptEnabled);
      a.tagName === "BODY" && (o.height = Math.max(document.body.scrollHeight, document.body.offsetHeight, document.documentElement.clientHeight, document.documentElement.scrollHeight, document.documentElement.offsetHeight) + "px"), this.prop.overlay = r("div", { className: "html2pdf__overlay", style: { position: "fixed", overflow: "hidden", zIndex: 1e3, left: "-100000px", right: 0, bottom: 0, top: 0 } }), this.prop.container = r("div", { className: "html2pdf__container", style: o }), this.prop.container.appendChild(a), this.prop.container.firstChild.appendChild(r("div", { style: { clear: "both", border: "0 none transparent", margin: 0, padding: 0, height: 0 } })), this.prop.container.style.float = "none", this.prop.overlay.appendChild(this.prop.container), document.body.appendChild(this.prop.overlay), this.prop.container.firstChild.style.position = "relative", this.prop.container.height = Math.max(this.prop.container.firstChild.clientHeight, this.prop.container.firstChild.scrollHeight, this.prop.container.firstChild.offsetHeight) + "px";
    });
  }, s.prototype.toCanvas = function() {
    var o = [function() {
      return document.body.contains(this.prop.container) || this.toContainer();
    }];
    return this.thenList(o).then(t).then(function(a) {
      var l = Object.assign({}, this.opt.html2canvas);
      return delete l.onrendered, a(this.prop.container, l);
    }).then(function(a) {
      (this.opt.html2canvas.onrendered || function() {
      })(a), this.prop.canvas = a, document.body.removeChild(this.prop.overlay);
    });
  }, s.prototype.toContext2d = function() {
    var o = [function() {
      return document.body.contains(this.prop.container) || this.toContainer();
    }];
    return this.thenList(o).then(t).then(function(a) {
      var l = this.opt.jsPDF, h = this.opt.fontFaces, c = typeof this.opt.width != "number" || isNaN(this.opt.width) || typeof this.opt.windowWidth != "number" || isNaN(this.opt.windowWidth) ? 1 : this.opt.width / this.opt.windowWidth, d = Object.assign({ async: !0, allowTaint: !0, scale: c, scrollX: this.opt.scrollX || 0, scrollY: this.opt.scrollY || 0, backgroundColor: "#ffffff", imageTimeout: 15e3, logging: !0, proxy: null, removeContainer: !0, foreignObjectRendering: !1, useCORS: !1 }, this.opt.html2canvas);
      if (delete d.onrendered, l.context2d.autoPaging = this.opt.autoPaging === void 0 || this.opt.autoPaging, l.context2d.posX = this.opt.x, l.context2d.posY = this.opt.y, l.context2d.margin = this.opt.margin, l.context2d.fontFaces = h, h) for (var g = 0; g < h.length; ++g) {
        var p = h[g], b = p.src.find(function(x) {
          return x.format === "truetype";
        });
        b && l.addFont(b.url, p.ref.name, p.ref.style);
      }
      return d.windowHeight = d.windowHeight || 0, d.windowHeight = d.windowHeight == 0 ? Math.max(this.prop.container.clientHeight, this.prop.container.scrollHeight, this.prop.container.offsetHeight) : d.windowHeight, l.context2d.save(!0), a(this.prop.container, d);
    }).then(function(a) {
      this.opt.jsPDF.context2d.restore(!0), (this.opt.html2canvas.onrendered || function() {
      })(a), this.prop.canvas = a, document.body.removeChild(this.prop.overlay);
    });
  }, s.prototype.toImg = function() {
    return this.thenList([function() {
      return this.prop.canvas || this.toCanvas();
    }]).then(function() {
      var o = this.prop.canvas.toDataURL("image/" + this.opt.image.type, this.opt.image.quality);
      this.prop.img = document.createElement("img"), this.prop.img.src = o;
    });
  }, s.prototype.toPdf = function() {
    return this.thenList([function() {
      return this.toContext2d();
    }]).then(function() {
      this.prop.pdf = this.prop.pdf || this.opt.jsPDF;
    });
  }, s.prototype.output = function(o, a, l) {
    return (l = l || "pdf").toLowerCase() === "img" || l.toLowerCase() === "image" ? this.outputImg(o, a) : this.outputPdf(o, a);
  }, s.prototype.outputPdf = function(o, a) {
    return this.thenList([function() {
      return this.prop.pdf || this.toPdf();
    }]).then(function() {
      return this.prop.pdf.output(o, a);
    });
  }, s.prototype.outputImg = function(o) {
    return this.thenList([function() {
      return this.prop.img || this.toImg();
    }]).then(function() {
      switch (o) {
        case void 0:
        case "img":
          return this.prop.img;
        case "datauristring":
        case "dataurlstring":
          return this.prop.img.src;
        case "datauri":
        case "dataurl":
          return document.location.href = this.prop.img.src;
        default:
          throw 'Image output type "' + o + '" is not supported.';
      }
    });
  }, s.prototype.save = function(o) {
    return this.thenList([function() {
      return this.prop.pdf || this.toPdf();
    }]).set(o ? { filename: o } : null).then(function() {
      this.prop.pdf.save(this.opt.filename);
    });
  }, s.prototype.doCallback = function() {
    return this.thenList([function() {
      return this.prop.pdf || this.toPdf();
    }]).then(function() {
      this.prop.callback(this.prop.pdf);
    });
  }, s.prototype.set = function(o) {
    if (i(o) !== "object") return this;
    var a = Object.keys(o || {}).map(function(l) {
      if (l in s.template.prop) return function() {
        this.prop[l] = o[l];
      };
      switch (l) {
        case "margin":
          return this.setMargin.bind(this, o.margin);
        case "jsPDF":
          return function() {
            return this.opt.jsPDF = o.jsPDF, this.setPageSize();
          };
        case "pageSize":
          return this.setPageSize.bind(this, o.pageSize);
        default:
          return function() {
            this.opt[l] = o[l];
          };
      }
    }, this);
    return this.then(function() {
      return this.thenList(a);
    });
  }, s.prototype.get = function(o, a) {
    return this.then(function() {
      var l = o in s.template.prop ? this.prop[o] : this.opt[o];
      return a ? a(l) : l;
    });
  }, s.prototype.setMargin = function(o) {
    return this.then(function() {
      switch (i(o)) {
        case "number":
          o = [o, o, o, o];
        case "array":
          if (o.length === 2 && (o = [o[0], o[1], o[0], o[1]]), o.length === 4) break;
        default:
          return this.error("Invalid margin array.");
      }
      this.opt.margin = o;
    }).then(this.setPageSize);
  }, s.prototype.setPageSize = function(o) {
    function a(l, h) {
      return Math.floor(l * h / 72 * 96);
    }
    return this.then(function() {
      (o = o || ye.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner") || (o.inner = { width: o.width - this.opt.margin[1] - this.opt.margin[3], height: o.height - this.opt.margin[0] - this.opt.margin[2] }, o.inner.px = { width: a(o.inner.width, o.k), height: a(o.inner.height, o.k) }, o.inner.ratio = o.inner.height / o.inner.width), this.prop.pageSize = o;
    });
  }, s.prototype.setProgress = function(o, a, l, h) {
    return o != null && (this.progress.val = o), a != null && (this.progress.state = a), l != null && (this.progress.n = l), h != null && (this.progress.stack = h), this.progress.ratio = this.progress.val / this.progress.state, this;
  }, s.prototype.updateProgress = function(o, a, l, h) {
    return this.setProgress(o ? this.progress.val + o : null, a || null, l ? this.progress.n + l : null, h ? this.progress.stack.concat(h) : null);
  }, s.prototype.then = function(o, a) {
    var l = this;
    return this.thenCore(o, a, function(h, c) {
      return l.updateProgress(null, null, 1, [h]), Promise.prototype.then.call(this, function(d) {
        return l.updateProgress(null, h), d;
      }).then(h, c).then(function(d) {
        return l.updateProgress(1), d;
      });
    });
  }, s.prototype.thenCore = function(o, a, l) {
    l = l || Promise.prototype.then, o && (o = o.bind(this)), a && (a = a.bind(this));
    var h = Promise.toString().indexOf("[native code]") !== -1 && Promise.name === "Promise" ? this : s.convert(Object.assign({}, this), Promise.prototype), c = l.call(h, o, a);
    return s.convert(c, this.__proto__);
  }, s.prototype.thenExternal = function(o, a) {
    return Promise.prototype.then.call(this, o, a);
  }, s.prototype.thenList = function(o) {
    var a = this;
    return o.forEach(function(l) {
      a = a.thenCore(l);
    }), a;
  }, s.prototype.catch = function(o) {
    o && (o = o.bind(this));
    var a = Promise.prototype.catch.call(this, o);
    return s.convert(a, this);
  }, s.prototype.catchExternal = function(o) {
    return Promise.prototype.catch.call(this, o);
  }, s.prototype.error = function(o) {
    return this.then(function() {
      throw new Error(o);
    });
  }, s.prototype.using = s.prototype.set, s.prototype.saveAs = s.prototype.save, s.prototype.export = s.prototype.output, s.prototype.run = s.prototype.then, ye.getPageSize = function(o, a, l) {
    if (en(o) === "object") {
      var h = o;
      o = h.orientation, a = h.unit || a, l = h.format || l;
    }
    a = a || "mm", l = l || "a4", o = ("" + (o || "P")).toLowerCase();
    var c, d = ("" + l).toLowerCase(), g = { a0: [2383.94, 3370.39], a1: [1683.78, 2383.94], a2: [1190.55, 1683.78], a3: [841.89, 1190.55], a4: [595.28, 841.89], a5: [419.53, 595.28], a6: [297.64, 419.53], a7: [209.76, 297.64], a8: [147.4, 209.76], a9: [104.88, 147.4], a10: [73.7, 104.88], b0: [2834.65, 4008.19], b1: [2004.09, 2834.65], b2: [1417.32, 2004.09], b3: [1000.63, 1417.32], b4: [708.66, 1000.63], b5: [498.9, 708.66], b6: [354.33, 498.9], b7: [249.45, 354.33], b8: [175.75, 249.45], b9: [124.72, 175.75], b10: [87.87, 124.72], c0: [2599.37, 3676.54], c1: [1836.85, 2599.37], c2: [1298.27, 1836.85], c3: [918.43, 1298.27], c4: [649.13, 918.43], c5: [459.21, 649.13], c6: [323.15, 459.21], c7: [229.61, 323.15], c8: [161.57, 229.61], c9: [113.39, 161.57], c10: [79.37, 113.39], dl: [311.81, 623.62], letter: [612, 792], "government-letter": [576, 756], legal: [612, 1008], "junior-legal": [576, 360], ledger: [1224, 792], tabloid: [792, 1224], "credit-card": [153, 243] };
    switch (a) {
      case "pt":
        c = 1;
        break;
      case "mm":
        c = 72 / 25.4;
        break;
      case "cm":
        c = 72 / 2.54;
        break;
      case "in":
        c = 72;
        break;
      case "px":
        c = 0.75;
        break;
      case "pc":
      case "em":
        c = 12;
        break;
      case "ex":
        c = 6;
        break;
      default:
        throw "Invalid unit: " + a;
    }
    var p, b = 0, x = 0;
    if (g.hasOwnProperty(d)) b = g[d][1] / c, x = g[d][0] / c;
    else try {
      b = l[1], x = l[0];
    } catch {
      throw new Error("Invalid format: " + l);
    }
    if (o === "p" || o === "portrait") o = "p", x > b && (p = x, x = b, b = p);
    else {
      if (o !== "l" && o !== "landscape") throw "Invalid orientation: " + o;
      o = "l", b > x && (p = x, x = b, b = p);
    }
    return { width: x, height: b, unit: a, k: c, orientation: o };
  }, e.html = function(o, a) {
    (a = a || {}).callback = a.callback || function() {
    }, a.html2canvas = a.html2canvas || {}, a.html2canvas.canvas = a.html2canvas.canvas || this.canvas, a.jsPDF = a.jsPDF || this, a.fontFaces = a.fontFaces ? a.fontFaces.map(df) : null;
    var l = new s(a);
    return a.worker ? l : l.from(o).doCallback();
  };
}(ye.API), ye.API.addJS = function(e) {
  return tg = e, this.internal.events.subscribe("postPutResources", function() {
    yu = this.internal.newObject(), this.internal.out("<<"), this.internal.out("/Names [(EmbeddedJS) " + (yu + 1) + " 0 R]"), this.internal.out(">>"), this.internal.out("endobj"), Qp = this.internal.newObject(), this.internal.out("<<"), this.internal.out("/S /JavaScript"), this.internal.out("/JS (" + tg + ")"), this.internal.out(">>"), this.internal.out("endobj");
  }), this.internal.events.subscribe("putCatalog", function() {
    yu !== void 0 && Qp !== void 0 && this.internal.out("/Names <</JavaScript " + yu + " 0 R>>");
  }), this;
}, /**
 * @license
 * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(e) {
  var t;
  e.events.push(["postPutResources", function() {
    var n = this, i = /^(\d+) 0 obj$/;
    if (this.outline.root.children.length > 0) for (var r = n.outline.render().split(/\r\n/), s = 0; s < r.length; s++) {
      var o = r[s], a = i.exec(o);
      if (a != null) {
        var l = a[1];
        n.internal.newObjectDeferredBegin(l, !1);
      }
      n.internal.write(o);
    }
    if (this.outline.createNamedDestinations) {
      var h = this.internal.pages.length, c = [];
      for (s = 0; s < h; s++) {
        var d = n.internal.newObject();
        c.push(d);
        var g = n.internal.getPageInfo(s + 1);
        n.internal.write("<< /D[" + g.objId + " 0 R /XYZ null null null]>> endobj");
      }
      var p = n.internal.newObject();
      for (n.internal.write("<< /Names [ "), s = 0; s < c.length; s++) n.internal.write("(page_" + (s + 1) + ")" + c[s] + " 0 R");
      n.internal.write(" ] >>", "endobj"), t = n.internal.newObject(), n.internal.write("<< /Dests " + p + " 0 R"), n.internal.write(">>", "endobj");
    }
  }]), e.events.push(["putCatalog", function() {
    this.outline.root.children.length > 0 && (this.internal.write("/Outlines", this.outline.makeRef(this.outline.root)), this.outline.createNamedDestinations && this.internal.write("/Names " + t + " 0 R"));
  }]), e.events.push(["initialized", function() {
    var n = this;
    n.outline = { createNamedDestinations: !1, root: { children: [] } }, n.outline.add = function(i, r, s) {
      var o = { title: r, options: s, children: [] };
      return i == null && (i = this.root), i.children.push(o), o;
    }, n.outline.render = function() {
      return this.ctx = {}, this.ctx.val = "", this.ctx.pdf = n, this.genIds_r(this.root), this.renderRoot(this.root), this.renderItems(this.root), this.ctx.val;
    }, n.outline.genIds_r = function(i) {
      i.id = n.internal.newObjectDeferred();
      for (var r = 0; r < i.children.length; r++) this.genIds_r(i.children[r]);
    }, n.outline.renderRoot = function(i) {
      this.objStart(i), this.line("/Type /Outlines"), i.children.length > 0 && (this.line("/First " + this.makeRef(i.children[0])), this.line("/Last " + this.makeRef(i.children[i.children.length - 1]))), this.line("/Count " + this.count_r({ count: 0 }, i)), this.objEnd();
    }, n.outline.renderItems = function(i) {
      for (var r = this.ctx.pdf.internal.getVerticalCoordinateString, s = 0; s < i.children.length; s++) {
        var o = i.children[s];
        this.objStart(o), this.line("/Title " + this.makeString(o.title)), this.line("/Parent " + this.makeRef(i)), s > 0 && this.line("/Prev " + this.makeRef(i.children[s - 1])), s < i.children.length - 1 && this.line("/Next " + this.makeRef(i.children[s + 1])), o.children.length > 0 && (this.line("/First " + this.makeRef(o.children[0])), this.line("/Last " + this.makeRef(o.children[o.children.length - 1])));
        var a = this.count = this.count_r({ count: 0 }, o);
        if (a > 0 && this.line("/Count " + a), o.options && o.options.pageNumber) {
          var l = n.internal.getPageInfo(o.options.pageNumber);
          this.line("/Dest [" + l.objId + " 0 R /XYZ 0 " + r(0) + " 0]");
        }
        this.objEnd();
      }
      for (var h = 0; h < i.children.length; h++) this.renderItems(i.children[h]);
    }, n.outline.line = function(i) {
      this.ctx.val += i + `\r
`;
    }, n.outline.makeRef = function(i) {
      return i.id + " 0 R";
    }, n.outline.makeString = function(i) {
      return "(" + n.internal.pdfEscape(i) + ")";
    }, n.outline.objStart = function(i) {
      this.ctx.val += `\r
` + i.id + ` 0 obj\r
<<\r
`;
    }, n.outline.objEnd = function() {
      this.ctx.val += `>> \r
endobj\r
`;
    }, n.outline.count_r = function(i, r) {
      for (var s = 0; s < r.children.length; s++) i.count++, this.count_r(i, r.children[s]);
      return i.count;
    };
  }]);
}(ye.API), /**
 * @license
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(e) {
  var t = [192, 193, 194, 195, 196, 197, 198, 199];
  e.processJPEG = function(n, i, r, s, o, a) {
    var l, h = this.decode.DCT_DECODE, c = null;
    if (typeof n == "string" || this.__addimage__.isArrayBuffer(n) || this.__addimage__.isArrayBufferView(n)) {
      switch (n = o || n, n = this.__addimage__.isArrayBuffer(n) ? new Uint8Array(n) : n, (l = function(d) {
        for (var g, p = 256 * d.charCodeAt(4) + d.charCodeAt(5), b = d.length, x = { width: 0, height: 0, numcomponents: 1 }, N = 4; N < b; N += 2) {
          if (N += p, t.indexOf(d.charCodeAt(N + 1)) !== -1) {
            g = 256 * d.charCodeAt(N + 5) + d.charCodeAt(N + 6), x = { width: 256 * d.charCodeAt(N + 7) + d.charCodeAt(N + 8), height: g, numcomponents: d.charCodeAt(N + 9) };
            break;
          }
          p = 256 * d.charCodeAt(N + 2) + d.charCodeAt(N + 3);
        }
        return x;
      }(n = this.__addimage__.isArrayBufferView(n) ? this.__addimage__.arrayBufferToBinaryString(n) : n)).numcomponents) {
        case 1:
          a = this.color_spaces.DEVICE_GRAY;
          break;
        case 4:
          a = this.color_spaces.DEVICE_CMYK;
          break;
        case 3:
          a = this.color_spaces.DEVICE_RGB;
      }
      c = { data: n, width: l.width, height: l.height, colorSpace: a, bitsPerComponent: 8, filter: h, index: i, alias: r };
    }
    return c;
  };
}(ye.API);
var Ko, bu, eg, ng, ig, Cv = function() {
  var e, t, n;
  function i(s) {
    var o, a, l, h, c, d, g, p, b, x, N, v, w, k;
    for (this.data = s, this.pos = 8, this.palette = [], this.imgData = [], this.transparency = {}, this.animation = null, this.text = {}, d = null; ; ) {
      switch (o = this.readUInt32(), b = (function() {
        var T, D;
        for (D = [], T = 0; T < 4; ++T) D.push(String.fromCharCode(this.data[this.pos++]));
        return D;
      }).call(this).join("")) {
        case "IHDR":
          this.width = this.readUInt32(), this.height = this.readUInt32(), this.bits = this.data[this.pos++], this.colorType = this.data[this.pos++], this.compressionMethod = this.data[this.pos++], this.filterMethod = this.data[this.pos++], this.interlaceMethod = this.data[this.pos++];
          break;
        case "acTL":
          this.animation = { numFrames: this.readUInt32(), numPlays: this.readUInt32() || 1 / 0, frames: [] };
          break;
        case "PLTE":
          this.palette = this.read(o);
          break;
        case "fcTL":
          d && this.animation.frames.push(d), this.pos += 4, d = { width: this.readUInt32(), height: this.readUInt32(), xOffset: this.readUInt32(), yOffset: this.readUInt32() }, c = this.readUInt16(), h = this.readUInt16() || 100, d.delay = 1e3 * c / h, d.disposeOp = this.data[this.pos++], d.blendOp = this.data[this.pos++], d.data = [];
          break;
        case "IDAT":
        case "fdAT":
          for (b === "fdAT" && (this.pos += 4, o -= 4), s = (d != null ? d.data : void 0) || this.imgData, v = 0; 0 <= o ? v < o : v > o; 0 <= o ? ++v : --v) s.push(this.data[this.pos++]);
          break;
        case "tRNS":
          switch (this.transparency = {}, this.colorType) {
            case 3:
              if (l = this.palette.length / 3, this.transparency.indexed = this.read(o), this.transparency.indexed.length > l) throw new Error("More transparent colors than palette size");
              if ((x = l - this.transparency.indexed.length) > 0) for (w = 0; 0 <= x ? w < x : w > x; 0 <= x ? ++w : --w) this.transparency.indexed.push(255);
              break;
            case 0:
              this.transparency.grayscale = this.read(o)[0];
              break;
            case 2:
              this.transparency.rgb = this.read(o);
          }
          break;
        case "tEXt":
          g = (N = this.read(o)).indexOf(0), p = String.fromCharCode.apply(String, N.slice(0, g)), this.text[p] = String.fromCharCode.apply(String, N.slice(g + 1));
          break;
        case "IEND":
          return d && this.animation.frames.push(d), this.colors = (function() {
            switch (this.colorType) {
              case 0:
              case 3:
              case 4:
                return 1;
              case 2:
              case 6:
                return 3;
            }
          }).call(this), this.hasAlphaChannel = (k = this.colorType) === 4 || k === 6, a = this.colors + (this.hasAlphaChannel ? 1 : 0), this.pixelBitlength = this.bits * a, this.colorSpace = (function() {
            switch (this.colors) {
              case 1:
                return "DeviceGray";
              case 3:
                return "DeviceRGB";
            }
          }).call(this), void (this.imgData = new Uint8Array(this.imgData));
        default:
          this.pos += o;
      }
      if (this.pos += 4, this.pos > this.data.length) throw new Error("Incomplete or corrupt PNG file");
    }
  }
  i.prototype.read = function(s) {
    var o, a;
    for (a = [], o = 0; 0 <= s ? o < s : o > s; 0 <= s ? ++o : --o) a.push(this.data[this.pos++]);
    return a;
  }, i.prototype.readUInt32 = function() {
    return this.data[this.pos++] << 24 | this.data[this.pos++] << 16 | this.data[this.pos++] << 8 | this.data[this.pos++];
  }, i.prototype.readUInt16 = function() {
    return this.data[this.pos++] << 8 | this.data[this.pos++];
  }, i.prototype.decodePixels = function(s) {
    var o = this.pixelBitlength / 8, a = new Uint8Array(this.width * this.height * o), l = 0, h = this;
    if (s == null && (s = this.imgData), s.length === 0) return new Uint8Array(0);
    function c(d, g, p, b) {
      var x, N, v, w, k, T, D, G, R, O, $, z, A, _, I, M, st, W, U, Q, Z, ct = Math.ceil((h.width - d) / p), St = Math.ceil((h.height - g) / b), P = h.width == ct && h.height == St;
      for (_ = o * ct, z = P ? a : new Uint8Array(_ * St), T = s.length, A = 0, N = 0; A < St && l < T; ) {
        switch (s[l++]) {
          case 0:
            for (w = st = 0; st < _; w = st += 1) z[N++] = s[l++];
            break;
          case 1:
            for (w = W = 0; W < _; w = W += 1) x = s[l++], k = w < o ? 0 : z[N - o], z[N++] = (x + k) % 256;
            break;
          case 2:
            for (w = U = 0; U < _; w = U += 1) x = s[l++], v = (w - w % o) / o, I = A && z[(A - 1) * _ + v * o + w % o], z[N++] = (I + x) % 256;
            break;
          case 3:
            for (w = Q = 0; Q < _; w = Q += 1) x = s[l++], v = (w - w % o) / o, k = w < o ? 0 : z[N - o], I = A && z[(A - 1) * _ + v * o + w % o], z[N++] = (x + Math.floor((k + I) / 2)) % 256;
            break;
          case 4:
            for (w = Z = 0; Z < _; w = Z += 1) x = s[l++], v = (w - w % o) / o, k = w < o ? 0 : z[N - o], A === 0 ? I = M = 0 : (I = z[(A - 1) * _ + v * o + w % o], M = v && z[(A - 1) * _ + (v - 1) * o + w % o]), D = k + I - M, G = Math.abs(D - k), O = Math.abs(D - I), $ = Math.abs(D - M), R = G <= O && G <= $ ? k : O <= $ ? I : M, z[N++] = (x + R) % 256;
            break;
          default:
            throw new Error("Invalid filter algorithm: " + s[l - 1]);
        }
        if (!P) {
          var B = ((g + A * b) * h.width + d) * o, V = A * _;
          for (w = 0; w < ct; w += 1) {
            for (var J = 0; J < o; J += 1) a[B++] = z[V++];
            B += (p - 1) * o;
          }
        }
        A++;
      }
    }
    return s = ov(s), h.interlaceMethod == 1 ? (c(0, 0, 8, 8), c(4, 0, 8, 8), c(0, 4, 4, 8), c(2, 0, 4, 4), c(0, 2, 2, 4), c(1, 0, 2, 2), c(0, 1, 1, 2)) : c(0, 0, 1, 1), a;
  }, i.prototype.decodePalette = function() {
    var s, o, a, l, h, c, d, g, p;
    for (a = this.palette, c = this.transparency.indexed || [], h = new Uint8Array((c.length || 0) + a.length), l = 0, s = 0, o = d = 0, g = a.length; d < g; o = d += 3) h[l++] = a[o], h[l++] = a[o + 1], h[l++] = a[o + 2], h[l++] = (p = c[s++]) != null ? p : 255;
    return h;
  }, i.prototype.copyToImageData = function(s, o) {
    var a, l, h, c, d, g, p, b, x, N, v;
    if (l = this.colors, x = null, a = this.hasAlphaChannel, this.palette.length && (x = (v = this._decodedPalette) != null ? v : this._decodedPalette = this.decodePalette(), l = 4, a = !0), b = (h = s.data || s).length, d = x || o, c = g = 0, l === 1) for (; c < b; ) p = x ? 4 * o[c / 4] : g, N = d[p++], h[c++] = N, h[c++] = N, h[c++] = N, h[c++] = a ? d[p++] : 255, g = p;
    else for (; c < b; ) p = x ? 4 * o[c / 4] : g, h[c++] = d[p++], h[c++] = d[p++], h[c++] = d[p++], h[c++] = a ? d[p++] : 255, g = p;
  }, i.prototype.decode = function() {
    var s;
    return s = new Uint8Array(this.width * this.height * 4), this.copyToImageData(s, this.decodePixels()), s;
  };
  var r = function() {
    if (Object.prototype.toString.call(Se) === "[object Window]") {
      try {
        t = Se.document.createElement("canvas"), n = t.getContext("2d");
      } catch {
        return !1;
      }
      return !0;
    }
    return !1;
  };
  return r(), e = function(s) {
    var o;
    if (r() === !0) return n.width = s.width, n.height = s.height, n.clearRect(0, 0, s.width, s.height), n.putImageData(s, 0, 0), (o = new Image()).src = t.toDataURL(), o;
    throw new Error("This method requires a Browser with Canvas-capability.");
  }, i.prototype.decodeFrames = function(s) {
    var o, a, l, h, c, d, g, p;
    if (this.animation) {
      for (p = [], a = c = 0, d = (g = this.animation.frames).length; c < d; a = ++c) o = g[a], l = s.createImageData(o.width, o.height), h = this.decodePixels(new Uint8Array(o.data)), this.copyToImageData(l, h), o.imageData = l, p.push(o.image = e(l));
      return p;
    }
  }, i.prototype.renderFrame = function(s, o) {
    var a, l, h;
    return a = (l = this.animation.frames)[o], h = l[o - 1], o === 0 && s.clearRect(0, 0, this.width, this.height), (h != null ? h.disposeOp : void 0) === 1 ? s.clearRect(h.xOffset, h.yOffset, h.width, h.height) : (h != null ? h.disposeOp : void 0) === 2 && s.putImageData(h.imageData, h.xOffset, h.yOffset), a.blendOp === 0 && s.clearRect(a.xOffset, a.yOffset, a.width, a.height), s.drawImage(a.image, a.xOffset, a.yOffset);
  }, i.prototype.animate = function(s) {
    var o, a, l, h, c, d, g = this;
    return a = 0, d = this.animation, h = d.numFrames, l = d.frames, c = d.numPlays, (o = function() {
      var p, b;
      if (p = a++ % h, b = l[p], g.renderFrame(s, p), h > 1 && a / h < c) return g.animation._timeout = setTimeout(o, b.delay);
    })();
  }, i.prototype.stopAnimation = function() {
    var s;
    return clearTimeout((s = this.animation) != null ? s._timeout : void 0);
  }, i.prototype.render = function(s) {
    var o, a;
    return s._png && s._png.stopAnimation(), s._png = this, s.width = this.width, s.height = this.height, o = s.getContext("2d"), this.animation ? (this.decodeFrames(o), this.animate(o)) : (a = o.createImageData(this.width, this.height), this.copyToImageData(a, this.decodePixels()), o.putImageData(a, 0, 0));
  }, i;
}();
/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 */
/**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */
function Tv(e) {
  var t = 0;
  if (e[t++] !== 71 || e[t++] !== 73 || e[t++] !== 70 || e[t++] !== 56 || (e[t++] + 1 & 253) != 56 || e[t++] !== 97) throw new Error("Invalid GIF 87a/89a header.");
  var n = e[t++] | e[t++] << 8, i = e[t++] | e[t++] << 8, r = e[t++], s = r >> 7, o = 1 << (7 & r) + 1;
  e[t++], e[t++];
  var a = null, l = null;
  s && (a = t, l = o, t += 3 * o);
  var h = !0, c = [], d = 0, g = null, p = 0, b = null;
  for (this.width = n, this.height = i; h && t < e.length; ) switch (e[t++]) {
    case 33:
      switch (e[t++]) {
        case 255:
          if (e[t] !== 11 || e[t + 1] == 78 && e[t + 2] == 69 && e[t + 3] == 84 && e[t + 4] == 83 && e[t + 5] == 67 && e[t + 6] == 65 && e[t + 7] == 80 && e[t + 8] == 69 && e[t + 9] == 50 && e[t + 10] == 46 && e[t + 11] == 48 && e[t + 12] == 3 && e[t + 13] == 1 && e[t + 16] == 0) t += 14, b = e[t++] | e[t++] << 8, t++;
          else for (t += 12; ; ) {
            if (!((A = e[t++]) >= 0)) throw Error("Invalid block size");
            if (A === 0) break;
            t += A;
          }
          break;
        case 249:
          if (e[t++] !== 4 || e[t + 4] !== 0) throw new Error("Invalid graphics extension block.");
          var x = e[t++];
          d = e[t++] | e[t++] << 8, g = e[t++], !(1 & x) && (g = null), p = x >> 2 & 7, t++;
          break;
        case 254:
          for (; ; ) {
            if (!((A = e[t++]) >= 0)) throw Error("Invalid block size");
            if (A === 0) break;
            t += A;
          }
          break;
        default:
          throw new Error("Unknown graphic control label: 0x" + e[t - 1].toString(16));
      }
      break;
    case 44:
      var N = e[t++] | e[t++] << 8, v = e[t++] | e[t++] << 8, w = e[t++] | e[t++] << 8, k = e[t++] | e[t++] << 8, T = e[t++], D = T >> 6 & 1, G = 1 << (7 & T) + 1, R = a, O = l, $ = !1;
      T >> 7 && ($ = !0, R = t, O = G, t += 3 * G);
      var z = t;
      for (t++; ; ) {
        var A;
        if (!((A = e[t++]) >= 0)) throw Error("Invalid block size");
        if (A === 0) break;
        t += A;
      }
      c.push({ x: N, y: v, width: w, height: k, has_local_palette: $, palette_offset: R, palette_size: O, data_offset: z, data_length: t - z, transparent_index: g, interlaced: !!D, delay: d, disposal: p });
      break;
    case 59:
      h = !1;
      break;
    default:
      throw new Error("Unknown gif block: 0x" + e[t - 1].toString(16));
  }
  this.numFrames = function() {
    return c.length;
  }, this.loopCount = function() {
    return b;
  }, this.frameInfo = function(_) {
    if (_ < 0 || _ >= c.length) throw new Error("Frame index out of range.");
    return c[_];
  }, this.decodeAndBlitFrameBGRA = function(_, I) {
    var M = this.frameInfo(_), st = M.width * M.height, W = new Uint8Array(st);
    rg(e, M.data_offset, W, st);
    var U = M.palette_offset, Q = M.transparent_index;
    Q === null && (Q = 256);
    var Z = M.width, ct = n - Z, St = Z, P = 4 * (M.y * n + M.x), B = 4 * ((M.y + M.height) * n + M.x), V = P, J = 4 * ct;
    M.interlaced === !0 && (J += 4 * n * 7);
    for (var nt = 8, gt = 0, yt = W.length; gt < yt; ++gt) {
      var vt = W[gt];
      if (St === 0 && (St = Z, (V += J) >= B && (J = 4 * ct + 4 * n * (nt - 1), V = P + (Z + ct) * (nt << 1), nt >>= 1)), vt === Q) V += 4;
      else {
        var Rt = e[U + 3 * vt], Dt = e[U + 3 * vt + 1], Ut = e[U + 3 * vt + 2];
        I[V++] = Ut, I[V++] = Dt, I[V++] = Rt, I[V++] = 255;
      }
      --St;
    }
  }, this.decodeAndBlitFrameRGBA = function(_, I) {
    var M = this.frameInfo(_), st = M.width * M.height, W = new Uint8Array(st);
    rg(e, M.data_offset, W, st);
    var U = M.palette_offset, Q = M.transparent_index;
    Q === null && (Q = 256);
    var Z = M.width, ct = n - Z, St = Z, P = 4 * (M.y * n + M.x), B = 4 * ((M.y + M.height) * n + M.x), V = P, J = 4 * ct;
    M.interlaced === !0 && (J += 4 * n * 7);
    for (var nt = 8, gt = 0, yt = W.length; gt < yt; ++gt) {
      var vt = W[gt];
      if (St === 0 && (St = Z, (V += J) >= B && (J = 4 * ct + 4 * n * (nt - 1), V = P + (Z + ct) * (nt << 1), nt >>= 1)), vt === Q) V += 4;
      else {
        var Rt = e[U + 3 * vt], Dt = e[U + 3 * vt + 1], Ut = e[U + 3 * vt + 2];
        I[V++] = Rt, I[V++] = Dt, I[V++] = Ut, I[V++] = 255;
      }
      --St;
    }
  };
}
function rg(e, t, n, i) {
  for (var r = e[t++], s = 1 << r, o = s + 1, a = o + 1, l = r + 1, h = (1 << l) - 1, c = 0, d = 0, g = 0, p = e[t++], b = new Int32Array(4096), x = null; ; ) {
    for (; c < 16 && p !== 0; ) d |= e[t++] << c, c += 8, p === 1 ? p = e[t++] : --p;
    if (c < l) break;
    var N = d & h;
    if (d >>= l, c -= l, N !== s) {
      if (N === o) break;
      for (var v = N < a ? N : x, w = 0, k = v; k > s; ) k = b[k] >> 8, ++w;
      var T = k;
      if (g + w + (v !== N ? 1 : 0) > i) return void un.log("Warning, gif stream longer than expected.");
      n[g++] = T;
      var D = g += w;
      for (v !== N && (n[g++] = T), k = v; w--; ) k = b[k], n[--D] = 255 & k, k >>= 8;
      x !== null && a < 4096 && (b[a++] = x << 8 | T, a >= h + 1 && l < 12 && (++l, h = h << 1 | 1)), x = N;
    } else a = o + 1, h = (1 << (l = r + 1)) - 1, x = null;
  }
  return g !== i && un.log("Warning, gif stream shorter than expected."), n;
}
/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
function Nh(e) {
  var t, n, i, r, s, o = Math.floor, a = new Array(64), l = new Array(64), h = new Array(64), c = new Array(64), d = new Array(65535), g = new Array(65535), p = new Array(64), b = new Array(64), x = [], N = 0, v = 7, w = new Array(64), k = new Array(64), T = new Array(64), D = new Array(256), G = new Array(2048), R = [0, 1, 5, 6, 14, 15, 27, 28, 2, 4, 7, 13, 16, 26, 29, 42, 3, 8, 12, 17, 25, 30, 41, 43, 9, 11, 18, 24, 31, 40, 44, 53, 10, 19, 23, 32, 39, 45, 52, 54, 20, 22, 33, 38, 46, 51, 55, 60, 21, 34, 37, 47, 50, 56, 59, 61, 35, 36, 48, 49, 57, 58, 62, 63], O = [0, 0, 1, 5, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0], $ = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11], z = [0, 0, 2, 1, 3, 3, 2, 4, 3, 5, 5, 4, 4, 0, 0, 1, 125], A = [1, 2, 3, 0, 4, 17, 5, 18, 33, 49, 65, 6, 19, 81, 97, 7, 34, 113, 20, 50, 129, 145, 161, 8, 35, 66, 177, 193, 21, 82, 209, 240, 36, 51, 98, 114, 130, 9, 10, 22, 23, 24, 25, 26, 37, 38, 39, 40, 41, 42, 52, 53, 54, 55, 56, 57, 58, 67, 68, 69, 70, 71, 72, 73, 74, 83, 84, 85, 86, 87, 88, 89, 90, 99, 100, 101, 102, 103, 104, 105, 106, 115, 116, 117, 118, 119, 120, 121, 122, 131, 132, 133, 134, 135, 136, 137, 138, 146, 147, 148, 149, 150, 151, 152, 153, 154, 162, 163, 164, 165, 166, 167, 168, 169, 170, 178, 179, 180, 181, 182, 183, 184, 185, 186, 194, 195, 196, 197, 198, 199, 200, 201, 202, 210, 211, 212, 213, 214, 215, 216, 217, 218, 225, 226, 227, 228, 229, 230, 231, 232, 233, 234, 241, 242, 243, 244, 245, 246, 247, 248, 249, 250], _ = [0, 0, 3, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0], I = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11], M = [0, 0, 2, 1, 2, 4, 4, 3, 4, 7, 5, 4, 4, 0, 1, 2, 119], st = [0, 1, 2, 3, 17, 4, 5, 33, 49, 6, 18, 65, 81, 7, 97, 113, 19, 34, 50, 129, 8, 20, 66, 145, 161, 177, 193, 9, 35, 51, 82, 240, 21, 98, 114, 209, 10, 22, 36, 52, 225, 37, 241, 23, 24, 25, 26, 38, 39, 40, 41, 42, 53, 54, 55, 56, 57, 58, 67, 68, 69, 70, 71, 72, 73, 74, 83, 84, 85, 86, 87, 88, 89, 90, 99, 100, 101, 102, 103, 104, 105, 106, 115, 116, 117, 118, 119, 120, 121, 122, 130, 131, 132, 133, 134, 135, 136, 137, 138, 146, 147, 148, 149, 150, 151, 152, 153, 154, 162, 163, 164, 165, 166, 167, 168, 169, 170, 178, 179, 180, 181, 182, 183, 184, 185, 186, 194, 195, 196, 197, 198, 199, 200, 201, 202, 210, 211, 212, 213, 214, 215, 216, 217, 218, 226, 227, 228, 229, 230, 231, 232, 233, 234, 242, 243, 244, 245, 246, 247, 248, 249, 250];
  function W(P, B) {
    for (var V = 0, J = 0, nt = new Array(), gt = 1; gt <= 16; gt++) {
      for (var yt = 1; yt <= P[gt]; yt++) nt[B[J]] = [], nt[B[J]][0] = V, nt[B[J]][1] = gt, J++, V++;
      V *= 2;
    }
    return nt;
  }
  function U(P) {
    for (var B = P[0], V = P[1] - 1; V >= 0; ) B & 1 << V && (N |= 1 << v), V--, --v < 0 && (N == 255 ? (Q(255), Q(0)) : Q(N), v = 7, N = 0);
  }
  function Q(P) {
    x.push(P);
  }
  function Z(P) {
    Q(P >> 8 & 255), Q(255 & P);
  }
  function ct(P, B, V, J, nt) {
    for (var gt, yt = nt[0], vt = nt[240], Rt = function(Mt, qt) {
      var Gt, Ht, ee, Qt, oe, xe, ke, Fe, ue, rt, mt = 0;
      for (ue = 0; ue < 8; ++ue) {
        Gt = Mt[mt], Ht = Mt[mt + 1], ee = Mt[mt + 2], Qt = Mt[mt + 3], oe = Mt[mt + 4], xe = Mt[mt + 5], ke = Mt[mt + 6];
        var zt = Gt + (Fe = Mt[mt + 7]), It = Gt - Fe, be = Ht + ke, $t = Ht - ke, Ft = ee + xe, pe = ee - xe, Me = Qt + oe, ji = Qt - oe, on = zt + Me, Yn = zt - Me, Dn = be + Ft, an = be - Ft;
        Mt[mt] = on + Dn, Mt[mt + 4] = on - Dn;
        var ve = 0.707106781 * (an + Yn);
        Mt[mt + 2] = Yn + ve, Mt[mt + 6] = Yn - ve;
        var qe = 0.382683433 * ((on = ji + pe) - (an = $t + It)), Dr = 0.5411961 * on + qe, Ze = 1.306562965 * an + qe, ki = 0.707106781 * (Dn = pe + $t), Bi = It + ki, ge = It - ki;
        Mt[mt + 5] = ge + Dr, Mt[mt + 3] = ge - Dr, Mt[mt + 1] = Bi + Ze, Mt[mt + 7] = Bi - Ze, mt += 8;
      }
      for (mt = 0, ue = 0; ue < 8; ++ue) {
        Gt = Mt[mt], Ht = Mt[mt + 8], ee = Mt[mt + 16], Qt = Mt[mt + 24], oe = Mt[mt + 32], xe = Mt[mt + 40], ke = Mt[mt + 48];
        var _i = Gt + (Fe = Mt[mt + 56]), Ni = Gt - Fe, Kn = Ht + ke, kn = Ht - ke, wn = ee + xe, ai = ee - xe, jr = Qt + oe, er = Qt - oe, Pi = _i + jr, Li = _i - jr, qi = Kn + wn, $i = Kn - wn;
        Mt[mt] = Pi + qi, Mt[mt + 32] = Pi - qi;
        var li = 0.707106781 * ($i + Li);
        Mt[mt + 16] = Li + li, Mt[mt + 48] = Li - li;
        var Ci = 0.382683433 * ((Pi = er + ai) - ($i = kn + Ni)), zi = 0.5411961 * Pi + Ci, Br = 1.306562965 * $i + Ci, qr = 0.707106781 * (qi = ai + kn), nr = Ni + qr, ir = Ni - qr;
        Mt[mt + 40] = ir + zi, Mt[mt + 24] = ir - zi, Mt[mt + 8] = nr + Br, Mt[mt + 56] = nr - Br, mt++;
      }
      for (ue = 0; ue < 64; ++ue) rt = Mt[ue] * qt[ue], p[ue] = rt > 0 ? rt + 0.5 | 0 : rt - 0.5 | 0;
      return p;
    }(P, B), Dt = 0; Dt < 64; ++Dt) b[R[Dt]] = Rt[Dt];
    var Ut = b[0] - V;
    V = b[0], Ut == 0 ? U(J[0]) : (U(J[g[gt = 32767 + Ut]]), U(d[gt]));
    for (var Wt = 63; Wt > 0 && b[Wt] == 0; ) Wt--;
    if (Wt == 0) return U(yt), V;
    for (var he, Nt = 1; Nt <= Wt; ) {
      for (var it = Nt; b[Nt] == 0 && Nt <= Wt; ) ++Nt;
      var de = Nt - it;
      if (de >= 16) {
        he = de >> 4;
        for (var Xt = 1; Xt <= he; ++Xt) U(vt);
        de &= 15;
      }
      gt = 32767 + b[Nt], U(nt[(de << 4) + g[gt]]), U(d[gt]), Nt++;
    }
    return Wt != 63 && U(yt), V;
  }
  function St(P) {
    P = Math.min(Math.max(P, 1), 100), s != P && (function(B) {
      for (var V = [16, 11, 10, 16, 24, 40, 51, 61, 12, 12, 14, 19, 26, 58, 60, 55, 14, 13, 16, 24, 40, 57, 69, 56, 14, 17, 22, 29, 51, 87, 80, 62, 18, 22, 37, 56, 68, 109, 103, 77, 24, 35, 55, 64, 81, 104, 113, 92, 49, 64, 78, 87, 103, 121, 120, 101, 72, 92, 95, 98, 112, 100, 103, 99], J = 0; J < 64; J++) {
        var nt = o((V[J] * B + 50) / 100);
        nt = Math.min(Math.max(nt, 1), 255), a[R[J]] = nt;
      }
      for (var gt = [17, 18, 24, 47, 99, 99, 99, 99, 18, 21, 26, 66, 99, 99, 99, 99, 24, 26, 56, 99, 99, 99, 99, 99, 47, 66, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99, 99], yt = 0; yt < 64; yt++) {
        var vt = o((gt[yt] * B + 50) / 100);
        vt = Math.min(Math.max(vt, 1), 255), l[R[yt]] = vt;
      }
      for (var Rt = [1, 1.387039845, 1.306562965, 1.175875602, 1, 0.785694958, 0.5411961, 0.275899379], Dt = 0, Ut = 0; Ut < 8; Ut++) for (var Wt = 0; Wt < 8; Wt++) h[Dt] = 1 / (a[R[Dt]] * Rt[Ut] * Rt[Wt] * 8), c[Dt] = 1 / (l[R[Dt]] * Rt[Ut] * Rt[Wt] * 8), Dt++;
    }(P < 50 ? Math.floor(5e3 / P) : Math.floor(200 - 2 * P)), s = P);
  }
  this.encode = function(P, B) {
    B && St(B), x = new Array(), N = 0, v = 7, Z(65496), Z(65504), Z(16), Q(74), Q(70), Q(73), Q(70), Q(0), Q(1), Q(1), Q(0), Z(1), Z(1), Q(0), Q(0), function() {
      Z(65499), Z(132), Q(0);
      for (var Ht = 0; Ht < 64; Ht++) Q(a[Ht]);
      Q(1);
      for (var ee = 0; ee < 64; ee++) Q(l[ee]);
    }(), function(Ht, ee) {
      Z(65472), Z(17), Q(8), Z(ee), Z(Ht), Q(3), Q(1), Q(17), Q(0), Q(2), Q(17), Q(1), Q(3), Q(17), Q(1);
    }(P.width, P.height), function() {
      Z(65476), Z(418), Q(0);
      for (var Ht = 0; Ht < 16; Ht++) Q(O[Ht + 1]);
      for (var ee = 0; ee <= 11; ee++) Q($[ee]);
      Q(16);
      for (var Qt = 0; Qt < 16; Qt++) Q(z[Qt + 1]);
      for (var oe = 0; oe <= 161; oe++) Q(A[oe]);
      Q(1);
      for (var xe = 0; xe < 16; xe++) Q(_[xe + 1]);
      for (var ke = 0; ke <= 11; ke++) Q(I[ke]);
      Q(17);
      for (var Fe = 0; Fe < 16; Fe++) Q(M[Fe + 1]);
      for (var ue = 0; ue <= 161; ue++) Q(st[ue]);
    }(), Z(65498), Z(12), Q(3), Q(1), Q(0), Q(2), Q(17), Q(3), Q(17), Q(0), Q(63), Q(0);
    var V = 0, J = 0, nt = 0;
    N = 0, v = 7, this.encode.displayName = "_encode_";
    for (var gt, yt, vt, Rt, Dt, Ut, Wt, he, Nt, it = P.data, de = P.width, Xt = P.height, Mt = 4 * de, qt = 0; qt < Xt; ) {
      for (gt = 0; gt < Mt; ) {
        for (Dt = Mt * qt + gt, Wt = -1, he = 0, Nt = 0; Nt < 64; Nt++) Ut = Dt + (he = Nt >> 3) * Mt + (Wt = 4 * (7 & Nt)), qt + he >= Xt && (Ut -= Mt * (qt + 1 + he - Xt)), gt + Wt >= Mt && (Ut -= gt + Wt - Mt + 4), yt = it[Ut++], vt = it[Ut++], Rt = it[Ut++], w[Nt] = (G[yt] + G[vt + 256 >> 0] + G[Rt + 512 >> 0] >> 16) - 128, k[Nt] = (G[yt + 768 >> 0] + G[vt + 1024 >> 0] + G[Rt + 1280 >> 0] >> 16) - 128, T[Nt] = (G[yt + 1280 >> 0] + G[vt + 1536 >> 0] + G[Rt + 1792 >> 0] >> 16) - 128;
        V = ct(w, h, V, t, i), J = ct(k, c, J, n, r), nt = ct(T, c, nt, n, r), gt += 32;
      }
      qt += 8;
    }
    if (v >= 0) {
      var Gt = [];
      Gt[1] = v + 1, Gt[0] = (1 << v + 1) - 1, U(Gt);
    }
    return Z(65497), new Uint8Array(x);
  }, e = e || 50, function() {
    for (var P = String.fromCharCode, B = 0; B < 256; B++) D[B] = P(B);
  }(), t = W(O, $), n = W(_, I), i = W(z, A), r = W(M, st), function() {
    for (var P = 1, B = 2, V = 1; V <= 15; V++) {
      for (var J = P; J < B; J++) g[32767 + J] = V, d[32767 + J] = [], d[32767 + J][1] = V, d[32767 + J][0] = J;
      for (var nt = -(B - 1); nt <= -P; nt++) g[32767 + nt] = V, d[32767 + nt] = [], d[32767 + nt][1] = V, d[32767 + nt][0] = B - 1 + nt;
      P <<= 1, B <<= 1;
    }
  }(), function() {
    for (var P = 0; P < 256; P++) G[P] = 19595 * P, G[P + 256 >> 0] = 38470 * P, G[P + 512 >> 0] = 7471 * P + 32768, G[P + 768 >> 0] = -11059 * P, G[P + 1024 >> 0] = -21709 * P, G[P + 1280 >> 0] = 32768 * P + 8421375, G[P + 1536 >> 0] = -27439 * P, G[P + 1792 >> 0] = -5329 * P;
  }(), St(e);
}
/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function ur(e, t) {
  if (this.pos = 0, this.buffer = e, this.datav = new DataView(e.buffer), this.is_with_alpha = !!t, this.bottom_up = !0, this.flag = String.fromCharCode(this.buffer[0]) + String.fromCharCode(this.buffer[1]), this.pos += 2, ["BM", "BA", "CI", "CP", "IC", "PT"].indexOf(this.flag) === -1) throw new Error("Invalid BMP File");
  this.parseHeader(), this.parseBGR();
}
function sg(e) {
  function t(O) {
    if (!O) throw Error("assert :P");
  }
  function n(O, $, z) {
    for (var A = 0; 4 > A; A++) if (O[$ + A] != z.charCodeAt(A)) return !0;
    return !1;
  }
  function i(O, $, z, A, _) {
    for (var I = 0; I < _; I++) O[$ + I] = z[A + I];
  }
  function r(O, $, z, A) {
    for (var _ = 0; _ < A; _++) O[$ + _] = z;
  }
  function s(O) {
    return new Int32Array(O);
  }
  function o(O, $) {
    for (var z = [], A = 0; A < O; A++) z.push(new $());
    return z;
  }
  function a(O, $) {
    var z = [];
    return function A(_, I, M) {
      for (var st = M[I], W = 0; W < st && (_.push(M.length > I + 1 ? [] : new $()), !(M.length < I + 1)); W++) A(_[W], I + 1, M);
    }(z, 0, O), z;
  }
  var l = function() {
    var O = this;
    function $(u, f) {
      for (var y = 1 << f - 1 >>> 0; u & y; ) y >>>= 1;
      return y ? (u & y - 1) + y : u;
    }
    function z(u, f, y, S, L) {
      t(!(S % y));
      do
        u[f + (S -= y)] = L;
      while (0 < S);
    }
    function A(u, f, y, S, L) {
      if (t(2328 >= L), 512 >= L) var E = s(512);
      else if ((E = s(L)) == null) return 0;
      return function(F, j, q, Y, lt, wt) {
        var xt, pt, Ot = j, _t = 1 << q, ut = s(16), ht = s(16);
        for (t(lt != 0), t(Y != null), t(F != null), t(0 < q), pt = 0; pt < lt; ++pt) {
          if (15 < Y[pt]) return 0;
          ++ut[Y[pt]];
        }
        if (ut[0] == lt) return 0;
        for (ht[1] = 0, xt = 1; 15 > xt; ++xt) {
          if (ut[xt] > 1 << xt) return 0;
          ht[xt + 1] = ht[xt] + ut[xt];
        }
        for (pt = 0; pt < lt; ++pt) xt = Y[pt], 0 < Y[pt] && (wt[ht[xt]++] = pt);
        if (ht[15] == 1) return (Y = new _()).g = 0, Y.value = wt[0], z(F, Ot, 1, _t, Y), _t;
        var Tt, jt = -1, Et = _t - 1, te = 0, Kt = 1, me = 1, Jt = 1 << q;
        for (pt = 0, xt = 1, lt = 2; xt <= q; ++xt, lt <<= 1) {
          if (Kt += me <<= 1, 0 > (me -= ut[xt])) return 0;
          for (; 0 < ut[xt]; --ut[xt]) (Y = new _()).g = xt, Y.value = wt[pt++], z(F, Ot + te, lt, Jt, Y), te = $(te, xt);
        }
        for (xt = q + 1, lt = 2; 15 >= xt; ++xt, lt <<= 1) {
          if (Kt += me <<= 1, 0 > (me -= ut[xt])) return 0;
          for (; 0 < ut[xt]; --ut[xt]) {
            if (Y = new _(), (te & Et) != jt) {
              for (Ot += Jt, Tt = 1 << (jt = xt) - q; 15 > jt && !(0 >= (Tt -= ut[jt])); ) ++jt, Tt <<= 1;
              _t += Jt = 1 << (Tt = jt - q), F[j + (jt = te & Et)].g = Tt + q, F[j + jt].value = Ot - j - jt;
            }
            Y.g = xt - q, Y.value = wt[pt++], z(F, Ot + (te >> q), lt, Jt, Y), te = $(te, xt);
          }
        }
        return Kt != 2 * ht[15] - 1 ? 0 : _t;
      }(u, f, y, S, L, E);
    }
    function _() {
      this.value = this.g = 0;
    }
    function I() {
      this.value = this.g = 0;
    }
    function M() {
      this.G = o(5, _), this.H = s(5), this.jc = this.Qb = this.qb = this.nd = 0, this.pd = o(Wn, I);
    }
    function st(u, f, y, S) {
      t(u != null), t(f != null), t(2147483648 > S), u.Ca = 254, u.I = 0, u.b = -8, u.Ka = 0, u.oa = f, u.pa = y, u.Jd = f, u.Yc = y + S, u.Zc = 4 <= S ? y + S - 4 + 1 : y, gt(u);
    }
    function W(u, f) {
      for (var y = 0; 0 < f--; ) y |= vt(u, 128) << f;
      return y;
    }
    function U(u, f) {
      var y = W(u, f);
      return yt(u) ? -y : y;
    }
    function Q(u, f, y, S) {
      var L, E = 0;
      for (t(u != null), t(f != null), t(4294967288 > S), u.Sb = S, u.Ra = 0, u.u = 0, u.h = 0, 4 < S && (S = 4), L = 0; L < S; ++L) E += f[y + L] << 8 * L;
      u.Ra = E, u.bb = S, u.oa = f, u.pa = y;
    }
    function Z(u) {
      for (; 8 <= u.u && u.bb < u.Sb; ) u.Ra >>>= 8, u.Ra += u.oa[u.pa + u.bb] << jo - 8 >>> 0, ++u.bb, u.u -= 8;
      V(u) && (u.h = 1, u.u = 0);
    }
    function ct(u, f) {
      if (t(0 <= f), !u.h && f <= Do) {
        var y = B(u) & Ro[f];
        return u.u += f, Z(u), y;
      }
      return u.h = 1, u.u = 0;
    }
    function St() {
      this.b = this.Ca = this.I = 0, this.oa = [], this.pa = 0, this.Jd = [], this.Yc = 0, this.Zc = [], this.Ka = 0;
    }
    function P() {
      this.Ra = 0, this.oa = [], this.h = this.u = this.bb = this.Sb = this.pa = 0;
    }
    function B(u) {
      return u.Ra >>> (u.u & jo - 1) >>> 0;
    }
    function V(u) {
      return t(u.bb <= u.Sb), u.h || u.bb == u.Sb && u.u > jo;
    }
    function J(u, f) {
      u.u = f, u.h = V(u);
    }
    function nt(u) {
      u.u >= ja && (t(u.u >= ja), Z(u));
    }
    function gt(u) {
      t(u != null && u.oa != null), u.pa < u.Zc ? (u.I = (u.oa[u.pa++] | u.I << 8) >>> 0, u.b += 8) : (t(u != null && u.oa != null), u.pa < u.Yc ? (u.b += 8, u.I = u.oa[u.pa++] | u.I << 8) : u.Ka ? u.b = 0 : (u.I <<= 8, u.b += 8, u.Ka = 1));
    }
    function yt(u) {
      return W(u, 1);
    }
    function vt(u, f) {
      var y = u.Ca;
      0 > u.b && gt(u);
      var S = u.b, L = y * f >>> 8, E = (u.I >>> S > L) + 0;
      for (E ? (y -= L, u.I -= L + 1 << S >>> 0) : y = L + 1, S = y, L = 0; 256 <= S; ) L += 8, S >>= 8;
      return S = 7 ^ L + pi[S], u.b -= S, u.Ca = (y << S) - 1, E;
    }
    function Rt(u, f, y) {
      u[f + 0] = y >> 24 & 255, u[f + 1] = y >> 16 & 255, u[f + 2] = y >> 8 & 255, u[f + 3] = y >> 0 & 255;
    }
    function Dt(u, f) {
      return u[f + 0] << 0 | u[f + 1] << 8;
    }
    function Ut(u, f) {
      return Dt(u, f) | u[f + 2] << 16;
    }
    function Wt(u, f) {
      return Dt(u, f) | Dt(u, f + 2) << 16;
    }
    function he(u, f) {
      var y = 1 << f;
      return t(u != null), t(0 < f), u.X = s(y), u.X == null ? 0 : (u.Mb = 32 - f, u.Xa = f, 1);
    }
    function Nt(u, f) {
      t(u != null), t(f != null), t(u.Xa == f.Xa), i(f.X, 0, u.X, 0, 1 << f.Xa);
    }
    function it() {
      this.X = [], this.Xa = this.Mb = 0;
    }
    function de(u, f, y, S) {
      t(y != null), t(S != null);
      var L = y[0], E = S[0];
      return L == 0 && (L = (u * E + f / 2) / f), E == 0 && (E = (f * L + u / 2) / u), 0 >= L || 0 >= E ? 0 : (y[0] = L, S[0] = E, 1);
    }
    function Xt(u, f) {
      return u + (1 << f) - 1 >>> f;
    }
    function Mt(u, f) {
      return ((4278255360 & u) + (4278255360 & f) >>> 0 & 4278255360) + ((16711935 & u) + (16711935 & f) >>> 0 & 16711935) >>> 0;
    }
    function qt(u, f) {
      O[f] = function(y, S, L, E, F, j, q) {
        var Y;
        for (Y = 0; Y < F; ++Y) {
          var lt = O[u](j[q + Y - 1], L, E + Y);
          j[q + Y] = Mt(y[S + Y], lt);
        }
      };
    }
    function Gt() {
      this.ud = this.hd = this.jd = 0;
    }
    function Ht(u, f) {
      return ((4278124286 & (u ^ f)) >>> 1) + (u & f) >>> 0;
    }
    function ee(u) {
      return 0 <= u && 256 > u ? u : 0 > u ? 0 : 255 < u ? 255 : void 0;
    }
    function Qt(u, f) {
      return ee(u + (u - f + 0.5 >> 1));
    }
    function oe(u, f, y) {
      return Math.abs(f - y) - Math.abs(u - y);
    }
    function xe(u, f, y, S, L, E, F) {
      for (S = E[F - 1], y = 0; y < L; ++y) E[F + y] = S = Mt(u[f + y], S);
    }
    function ke(u, f, y, S, L) {
      var E;
      for (E = 0; E < y; ++E) {
        var F = u[f + E], j = F >> 8 & 255, q = 16711935 & (q = (q = 16711935 & F) + ((j << 16) + j));
        S[L + E] = (4278255360 & F) + q >>> 0;
      }
    }
    function Fe(u, f) {
      f.jd = u >> 0 & 255, f.hd = u >> 8 & 255, f.ud = u >> 16 & 255;
    }
    function ue(u, f, y, S, L, E) {
      var F;
      for (F = 0; F < S; ++F) {
        var j = f[y + F], q = j >>> 8, Y = j, lt = 255 & (lt = (lt = j >>> 16) + ((u.jd << 24 >> 24) * (q << 24 >> 24) >>> 5));
        Y = 255 & (Y = (Y = Y + ((u.hd << 24 >> 24) * (q << 24 >> 24) >>> 5)) + ((u.ud << 24 >> 24) * (lt << 24 >> 24) >>> 5)), L[E + F] = (4278255360 & j) + (lt << 16) + Y;
      }
    }
    function rt(u, f, y, S, L) {
      O[f] = function(E, F, j, q, Y, lt, wt, xt, pt) {
        for (q = wt; q < xt; ++q) for (wt = 0; wt < pt; ++wt) Y[lt++] = L(j[S(E[F++])]);
      }, O[u] = function(E, F, j, q, Y, lt, wt) {
        var xt = 8 >> E.b, pt = E.Ea, Ot = E.K[0], _t = E.w;
        if (8 > xt) for (E = (1 << E.b) - 1, _t = (1 << xt) - 1; F < j; ++F) {
          var ut, ht = 0;
          for (ut = 0; ut < pt; ++ut) ut & E || (ht = S(q[Y++])), lt[wt++] = L(Ot[ht & _t]), ht >>= xt;
        }
        else O["VP8LMapColor" + y](q, Y, Ot, _t, lt, wt, F, j, pt);
      };
    }
    function mt(u, f, y, S, L) {
      for (y = f + y; f < y; ) {
        var E = u[f++];
        S[L++] = E >> 16 & 255, S[L++] = E >> 8 & 255, S[L++] = E >> 0 & 255;
      }
    }
    function zt(u, f, y, S, L) {
      for (y = f + y; f < y; ) {
        var E = u[f++];
        S[L++] = E >> 16 & 255, S[L++] = E >> 8 & 255, S[L++] = E >> 0 & 255, S[L++] = E >> 24 & 255;
      }
    }
    function It(u, f, y, S, L) {
      for (y = f + y; f < y; ) {
        var E = (F = u[f++]) >> 16 & 240 | F >> 12 & 15, F = F >> 0 & 240 | F >> 28 & 15;
        S[L++] = E, S[L++] = F;
      }
    }
    function be(u, f, y, S, L) {
      for (y = f + y; f < y; ) {
        var E = (F = u[f++]) >> 16 & 248 | F >> 13 & 7, F = F >> 5 & 224 | F >> 3 & 31;
        S[L++] = E, S[L++] = F;
      }
    }
    function $t(u, f, y, S, L) {
      for (y = f + y; f < y; ) {
        var E = u[f++];
        S[L++] = E >> 0 & 255, S[L++] = E >> 8 & 255, S[L++] = E >> 16 & 255;
      }
    }
    function Ft(u, f, y, S, L, E) {
      if (E == 0) for (y = f + y; f < y; ) Rt(S, ((E = u[f++])[0] >> 24 | E[1] >> 8 & 65280 | E[2] << 8 & 16711680 | E[3] << 24) >>> 0), L += 32;
      else i(S, L, u, f, y);
    }
    function pe(u, f) {
      O[f][0] = O[u + "0"], O[f][1] = O[u + "1"], O[f][2] = O[u + "2"], O[f][3] = O[u + "3"], O[f][4] = O[u + "4"], O[f][5] = O[u + "5"], O[f][6] = O[u + "6"], O[f][7] = O[u + "7"], O[f][8] = O[u + "8"], O[f][9] = O[u + "9"], O[f][10] = O[u + "10"], O[f][11] = O[u + "11"], O[f][12] = O[u + "12"], O[f][13] = O[u + "13"], O[f][14] = O[u + "0"], O[f][15] = O[u + "0"];
    }
    function Me(u) {
      return u == Jc || u == Xc || u == Jl || u == Zc;
    }
    function ji() {
      this.eb = [], this.size = this.A = this.fb = 0;
    }
    function on() {
      this.y = [], this.f = [], this.ea = [], this.F = [], this.Tc = this.Ed = this.Cd = this.Fd = this.lb = this.Db = this.Ab = this.fa = this.J = this.W = this.N = this.O = 0;
    }
    function Yn() {
      this.Rd = this.height = this.width = this.S = 0, this.f = {}, this.f.RGBA = new ji(), this.f.kb = new on(), this.sd = null;
    }
    function Dn() {
      this.width = [0], this.height = [0], this.Pd = [0], this.Qd = [0], this.format = [0];
    }
    function an() {
      this.Id = this.fd = this.Md = this.hb = this.ib = this.da = this.bd = this.cd = this.j = this.v = this.Da = this.Sd = this.ob = 0;
    }
    function ve(u) {
      return alert("todo:WebPSamplerProcessPlane"), u.T;
    }
    function qe(u, f) {
      var y = u.T, S = f.ba.f.RGBA, L = S.eb, E = S.fb + u.ka * S.A, F = Ki[f.ba.S], j = u.y, q = u.O, Y = u.f, lt = u.N, wt = u.ea, xt = u.W, pt = f.cc, Ot = f.dc, _t = f.Mc, ut = f.Nc, ht = u.ka, Tt = u.ka + u.T, jt = u.U, Et = jt + 1 >> 1;
      for (ht == 0 ? F(j, q, null, null, Y, lt, wt, xt, Y, lt, wt, xt, L, E, null, null, jt) : (F(f.ec, f.fc, j, q, pt, Ot, _t, ut, Y, lt, wt, xt, L, E - S.A, L, E, jt), ++y); ht + 2 < Tt; ht += 2) pt = Y, Ot = lt, _t = wt, ut = xt, lt += u.Rc, xt += u.Rc, E += 2 * S.A, F(j, (q += 2 * u.fa) - u.fa, j, q, pt, Ot, _t, ut, Y, lt, wt, xt, L, E - S.A, L, E, jt);
      return q += u.fa, u.j + Tt < u.o ? (i(f.ec, f.fc, j, q, jt), i(f.cc, f.dc, Y, lt, Et), i(f.Mc, f.Nc, wt, xt, Et), y--) : 1 & Tt || F(j, q, null, null, Y, lt, wt, xt, Y, lt, wt, xt, L, E + S.A, null, null, jt), y;
    }
    function Dr(u, f, y) {
      var S = u.F, L = [u.J];
      if (S != null) {
        var E = u.U, F = f.ba.S, j = F == Kl || F == Jl;
        f = f.ba.f.RGBA;
        var q = [0], Y = u.ka;
        q[0] = u.T, u.Kb && (Y == 0 ? --q[0] : (--Y, L[0] -= u.width), u.j + u.ka + u.T == u.o && (q[0] = u.o - u.j - Y));
        var lt = f.eb;
        Y = f.fb + Y * f.A, u = hn(S, L[0], u.width, E, q, lt, Y + (j ? 0 : 3), f.A), t(y == q), u && Me(F) && Vi(lt, Y, j, E, q, f.A);
      }
      return 0;
    }
    function Ze(u) {
      var f = u.ma, y = f.ba.S, S = 11 > y, L = y == Vl || y == Yl || y == Kl || y == Kc || y == 12 || Me(y);
      if (f.memory = null, f.Ib = null, f.Jb = null, f.Nd = null, !Ra(f.Oa, u, L ? 11 : 12)) return 0;
      if (L && Me(y) && Bt(), u.da) alert("todo:use_scaling");
      else {
        if (S) {
          if (f.Ib = ve, u.Kb) {
            if (y = u.U + 1 >> 1, f.memory = s(u.U + 2 * y), f.memory == null) return 0;
            f.ec = f.memory, f.fc = 0, f.cc = f.ec, f.dc = f.fc + u.U, f.Mc = f.cc, f.Nc = f.dc + y, f.Ib = qe, Bt();
          }
        } else alert("todo:EmitYUV");
        L && (f.Jb = Dr, S && bt());
      }
      if (S && !Xd) {
        for (u = 0; 256 > u; ++u) Qm[u] = 89858 * (u - 128) + Zl >> Xl, n2[u] = -22014 * (u - 128) + Zl, e2[u] = -45773 * (u - 128), t2[u] = 113618 * (u - 128) + Zl >> Xl;
        for (u = Ha; u < eh; ++u) f = 76283 * (u - 16) + Zl >> Xl, i2[u - Ha] = Ii(f, 255), r2[u - Ha] = Ii(f + 8 >> 4, 15);
        Xd = 1;
      }
      return 1;
    }
    function ki(u) {
      var f = u.ma, y = u.U, S = u.T;
      return t(!(1 & u.ka)), 0 >= y || 0 >= S ? 0 : (y = f.Ib(u, f), f.Jb != null && f.Jb(u, f, y), f.Dc += y, 1);
    }
    function Bi(u) {
      u.ma.memory = null;
    }
    function ge(u, f, y, S) {
      return ct(u, 8) != 47 ? 0 : (f[0] = ct(u, 14) + 1, y[0] = ct(u, 14) + 1, S[0] = ct(u, 1), ct(u, 3) != 0 ? 0 : !u.h);
    }
    function _i(u, f) {
      if (4 > u) return u + 1;
      var y = u - 2 >> 1;
      return (2 + (1 & u) << y) + ct(f, y) + 1;
    }
    function Ni(u, f) {
      return 120 < f ? f - 120 : 1 <= (y = ((y = Bm[f - 1]) >> 4) * u + (8 - (15 & y))) ? y : 1;
      var y;
    }
    function Kn(u, f, y) {
      var S = B(y), L = u[f += 255 & S].g - 8;
      return 0 < L && (J(y, y.u + 8), S = B(y), f += u[f].value, f += S & (1 << L) - 1), J(y, y.u + u[f].g), u[f].value;
    }
    function kn(u, f, y) {
      return y.g += u.g, y.value += u.value << f >>> 0, t(8 >= y.g), u.g;
    }
    function wn(u, f, y) {
      var S = u.xc;
      return t((f = S == 0 ? 0 : u.vc[u.md * (y >> S) + (f >> S)]) < u.Wb), u.Ya[f];
    }
    function ai(u, f, y, S) {
      var L = u.ab, E = u.c * f, F = u.C;
      f = F + f;
      var j = y, q = S;
      for (S = u.Ta, y = u.Ua; 0 < L--; ) {
        var Y = u.gc[L], lt = F, wt = f, xt = j, pt = q, Ot = (q = S, j = y, Y.Ea);
        switch (t(lt < wt), t(wt <= Y.nc), Y.hc) {
          case 2:
            ql(xt, pt, (wt - lt) * Ot, q, j);
            break;
          case 0:
            var _t = lt, ut = wt, ht = q, Tt = j, jt = (Jt = Y).Ea;
            _t == 0 && (Vc(xt, pt, null, null, 1, ht, Tt), xe(xt, pt + 1, 0, 0, jt - 1, ht, Tt + 1), pt += jt, Tt += jt, ++_t);
            for (var Et = 1 << Jt.b, te = Et - 1, Kt = Xt(jt, Jt.b), me = Jt.K, Jt = Jt.w + (_t >> Jt.b) * Kt; _t < ut; ) {
              var Ke = me, Qe = Jt, $e = 1;
              for (Ba(xt, pt, ht, Tt - jt, 1, ht, Tt); $e < jt; ) {
                var De = ($e & ~te) + Et;
                De > jt && (De = jt), (0, hs[Ke[Qe++] >> 8 & 15])(xt, pt + +$e, ht, Tt + $e - jt, De - $e, ht, Tt + $e), $e = De;
              }
              pt += jt, Tt += jt, ++_t & te || (Jt += Kt);
            }
            wt != Y.nc && i(q, j - Ot, q, j + (wt - lt - 1) * Ot, Ot);
            break;
          case 1:
            for (Ot = xt, ut = pt, jt = (xt = Y.Ea) - (Tt = xt & ~(ht = (pt = 1 << Y.b) - 1)), _t = Xt(xt, Y.b), Et = Y.K, Y = Y.w + (lt >> Y.b) * _t; lt < wt; ) {
              for (te = Et, Kt = Y, me = new Gt(), Jt = ut + Tt, Ke = ut + xt; ut < Jt; ) Fe(te[Kt++], me), Vs(me, Ot, ut, pt, q, j), ut += pt, j += pt;
              ut < Ke && (Fe(te[Kt++], me), Vs(me, Ot, ut, jt, q, j), ut += jt, j += jt), ++lt & ht || (Y += _t);
            }
            break;
          case 3:
            if (xt == q && pt == j && 0 < Y.b) {
              for (ut = q, xt = Ot = j + (wt - lt) * Ot - (Tt = (wt - lt) * Xt(Y.Ea, Y.b)), pt = q, ht = j, _t = [], Tt = (jt = Tt) - 1; 0 <= Tt; --Tt) _t[Tt] = pt[ht + Tt];
              for (Tt = jt - 1; 0 <= Tt; --Tt) ut[xt + Tt] = _t[Tt];
              Wi(Y, lt, wt, q, Ot, q, j);
            } else Wi(Y, lt, wt, xt, pt, q, j);
        }
        j = S, q = y;
      }
      q != y && i(S, y, j, q, E);
    }
    function jr(u, f) {
      var y = u.V, S = u.Ba + u.c * u.C, L = f - u.C;
      if (t(f <= u.l.o), t(16 >= L), 0 < L) {
        var E = u.l, F = u.Ta, j = u.Ua, q = E.width;
        if (ai(u, L, y, S), L = j = [j], t((y = u.C) < (S = f)), t(E.v < E.va), S > E.o && (S = E.o), y < E.j) {
          var Y = E.j - y;
          y = E.j, L[0] += Y * q;
        }
        if (y >= S ? y = 0 : (L[0] += 4 * E.v, E.ka = y - E.j, E.U = E.va - E.v, E.T = S - y, y = 1), y) {
          if (j = j[0], 11 > (y = u.ca).S) {
            var lt = y.f.RGBA, wt = (S = y.S, L = E.U, E = E.T, Y = lt.eb, lt.A), xt = E;
            for (lt = lt.fb + u.Ma * lt.A; 0 < xt--; ) {
              var pt = F, Ot = j, _t = L, ut = Y, ht = lt;
              switch (S) {
                case Gl:
                  gi(pt, Ot, _t, ut, ht);
                  break;
                case Vl:
                  ci(pt, Ot, _t, ut, ht);
                  break;
                case Jc:
                  ci(pt, Ot, _t, ut, ht), Vi(ut, ht, 0, _t, 1, 0);
                  break;
                case $d:
                  Hr(pt, Ot, _t, ut, ht);
                  break;
                case Yl:
                  Ft(pt, Ot, _t, ut, ht, 1);
                  break;
                case Xc:
                  Ft(pt, Ot, _t, ut, ht, 1), Vi(ut, ht, 0, _t, 1, 0);
                  break;
                case Kl:
                  Ft(pt, Ot, _t, ut, ht, 0);
                  break;
                case Jl:
                  Ft(pt, Ot, _t, ut, ht, 0), Vi(ut, ht, 1, _t, 1, 0);
                  break;
                case Kc:
                  fs(pt, Ot, _t, ut, ht);
                  break;
                case Zc:
                  fs(pt, Ot, _t, ut, ht), cn(ut, ht, _t, 1, 0);
                  break;
                case zd:
                  Wr(pt, Ot, _t, ut, ht);
                  break;
                default:
                  t(0);
              }
              j += q, lt += wt;
            }
            u.Ma += E;
          } else alert("todo:EmitRescaledRowsYUVA");
          t(u.Ma <= y.height);
        }
      }
      u.C = f, t(u.C <= u.i);
    }
    function er(u) {
      var f;
      if (0 < u.ua) return 0;
      for (f = 0; f < u.Wb; ++f) {
        var y = u.Ya[f].G, S = u.Ya[f].H;
        if (0 < y[1][S[1] + 0].g || 0 < y[2][S[2] + 0].g || 0 < y[3][S[3] + 0].g) return 0;
      }
      return 1;
    }
    function Pi(u, f, y, S, L, E) {
      if (u.Z != 0) {
        var F = u.qd, j = u.rd;
        for (t(ms[u.Z] != null); f < y; ++f) ms[u.Z](F, j, S, L, S, L, E), F = S, j = L, L += E;
        u.qd = F, u.rd = j;
      }
    }
    function Li(u, f) {
      var y = u.l.ma, S = y.Z == 0 || y.Z == 1 ? u.l.j : u.C;
      if (S = u.C < S ? S : u.C, t(f <= u.l.o), f > S) {
        var L = u.l.width, E = y.ca, F = y.tb + L * S, j = u.V, q = u.Ba + u.c * S, Y = u.gc;
        t(u.ab == 1), t(Y[0].hc == 3), $l(Y[0], S, f, j, q, E, F), Pi(y, S, f, E, F, L);
      }
      u.C = u.Ma = f;
    }
    function qi(u, f, y, S, L, E, F) {
      var j = u.$ / S, q = u.$ % S, Y = u.m, lt = u.s, wt = y + u.$, xt = wt;
      L = y + S * L;
      var pt = y + S * E, Ot = 280 + lt.ua, _t = u.Pb ? j : 16777216, ut = 0 < lt.ua ? lt.Wa : null, ht = lt.wc, Tt = wt < pt ? wn(lt, q, j) : null;
      t(u.C < E), t(pt <= L);
      var jt = !1;
      t: for (; ; ) {
        for (; jt || wt < pt; ) {
          var Et = 0;
          if (j >= _t) {
            var te = wt - y;
            t((_t = u).Pb), _t.wd = _t.m, _t.xd = te, 0 < _t.s.ua && Nt(_t.s.Wa, _t.s.vb), _t = j + $m;
          }
          if (q & ht || (Tt = wn(lt, q, j)), t(Tt != null), Tt.Qb && (f[wt] = Tt.qb, jt = !0), !jt) if (nt(Y), Tt.jc) {
            Et = Y, te = f;
            var Kt = wt, me = Tt.pd[B(Et) & Wn - 1];
            t(Tt.jc), 256 > me.g ? (J(Et, Et.u + me.g), te[Kt] = me.value, Et = 0) : (J(Et, Et.u + me.g - 256), t(256 <= me.value), Et = me.value), Et == 0 && (jt = !0);
          } else Et = Kn(Tt.G[0], Tt.H[0], Y);
          if (Y.h) break;
          if (jt || 256 > Et) {
            if (!jt) if (Tt.nd) f[wt] = (Tt.qb | Et << 8) >>> 0;
            else {
              if (nt(Y), jt = Kn(Tt.G[1], Tt.H[1], Y), nt(Y), te = Kn(Tt.G[2], Tt.H[2], Y), Kt = Kn(Tt.G[3], Tt.H[3], Y), Y.h) break;
              f[wt] = (Kt << 24 | jt << 16 | Et << 8 | te) >>> 0;
            }
            if (jt = !1, ++wt, ++q >= S && (q = 0, ++j, F != null && j <= E && !(j % 16) && F(u, j), ut != null)) for (; xt < wt; ) Et = f[xt++], ut.X[(506832829 * Et & 4294967295) >>> ut.Mb] = Et;
          } else if (280 > Et) {
            if (Et = _i(Et - 256, Y), te = Kn(Tt.G[4], Tt.H[4], Y), nt(Y), te = Ni(S, te = _i(te, Y)), Y.h) break;
            if (wt - y < te || L - wt < Et) break t;
            for (Kt = 0; Kt < Et; ++Kt) f[wt + Kt] = f[wt + Kt - te];
            for (wt += Et, q += Et; q >= S; ) q -= S, ++j, F != null && j <= E && !(j % 16) && F(u, j);
            if (t(wt <= L), q & ht && (Tt = wn(lt, q, j)), ut != null) for (; xt < wt; ) Et = f[xt++], ut.X[(506832829 * Et & 4294967295) >>> ut.Mb] = Et;
          } else {
            if (!(Et < Ot)) break t;
            for (jt = Et - 280, t(ut != null); xt < wt; ) Et = f[xt++], ut.X[(506832829 * Et & 4294967295) >>> ut.Mb] = Et;
            Et = wt, t(!(jt >>> (te = ut).Xa)), f[Et] = te.X[jt], jt = !0;
          }
          jt || t(Y.h == V(Y));
        }
        if (u.Pb && Y.h && wt < L) t(u.m.h), u.a = 5, u.m = u.wd, u.$ = u.xd, 0 < u.s.ua && Nt(u.s.vb, u.s.Wa);
        else {
          if (Y.h) break t;
          F != null && F(u, j > E ? E : j), u.a = 0, u.$ = wt - y;
        }
        return 1;
      }
      return u.a = 3, 0;
    }
    function $i(u) {
      t(u != null), u.vc = null, u.yc = null, u.Ya = null;
      var f = u.Wa;
      f != null && (f.X = null), u.vb = null, t(u != null);
    }
    function li() {
      var u = new Gc();
      return u == null ? null : (u.a = 0, u.xb = Hd, pe("Predictor", "VP8LPredictors"), pe("Predictor", "VP8LPredictors_C"), pe("PredictorAdd", "VP8LPredictorsAdd"), pe("PredictorAdd", "VP8LPredictorsAdd_C"), ql = ke, Vs = ue, gi = mt, ci = zt, fs = It, Wr = be, Hr = $t, O.VP8LMapColor32b = Bo, O.VP8LMapColor8b = zl, u);
    }
    function Ci(u, f, y, S, L) {
      var E = 1, F = [u], j = [f], q = S.m, Y = S.s, lt = null, wt = 0;
      t: for (; ; ) {
        if (y) for (; E && ct(q, 1); ) {
          var xt = F, pt = j, Ot = S, _t = 1, ut = Ot.m, ht = Ot.gc[Ot.ab], Tt = ct(ut, 2);
          if (Ot.Oc & 1 << Tt) E = 0;
          else {
            switch (Ot.Oc |= 1 << Tt, ht.hc = Tt, ht.Ea = xt[0], ht.nc = pt[0], ht.K = [null], ++Ot.ab, t(4 >= Ot.ab), Tt) {
              case 0:
              case 1:
                ht.b = ct(ut, 3) + 2, _t = Ci(Xt(ht.Ea, ht.b), Xt(ht.nc, ht.b), 0, Ot, ht.K), ht.K = ht.K[0];
                break;
              case 3:
                var jt, Et = ct(ut, 8) + 1, te = 16 < Et ? 0 : 4 < Et ? 1 : 2 < Et ? 2 : 3;
                if (xt[0] = Xt(ht.Ea, te), ht.b = te, jt = _t = Ci(Et, 1, 0, Ot, ht.K)) {
                  var Kt, me = Et, Jt = ht, Ke = 1 << (8 >> Jt.b), Qe = s(Ke);
                  if (Qe == null) jt = 0;
                  else {
                    var $e = Jt.K[0], De = Jt.w;
                    for (Qe[0] = Jt.K[0][0], Kt = 1; Kt < 1 * me; ++Kt) Qe[Kt] = Mt($e[De + Kt], Qe[Kt - 1]);
                    for (; Kt < 4 * Ke; ++Kt) Qe[Kt] = 0;
                    Jt.K[0] = null, Jt.K[0] = Qe, jt = 1;
                  }
                }
                _t = jt;
                break;
              case 2:
                break;
              default:
                t(0);
            }
            E = _t;
          }
        }
        if (F = F[0], j = j[0], E && ct(q, 1) && !(E = 1 <= (wt = ct(q, 4)) && 11 >= wt)) {
          S.a = 3;
          break t;
        }
        var ln;
        if (ln = E) e: {
          var nn, Ee, En, mi = S, On = F, yi = j, tn = wt, Oi = y, Fi = mi.m, Bn = mi.s, Hn = [null], fi = 1, Ji = 0, kr = qm[tn];
          n: for (; ; ) {
            if (Oi && ct(Fi, 1)) {
              var qn = ct(Fi, 3) + 2, Kr = Xt(On, qn), Zs = Xt(yi, qn), Wo = Kr * Zs;
              if (!Ci(Kr, Zs, 0, mi, Hn)) break n;
              for (Hn = Hn[0], Bn.xc = qn, nn = 0; nn < Wo; ++nn) {
                var ys = Hn[nn] >> 8 & 65535;
                Hn[nn] = ys, ys >= fi && (fi = ys + 1);
              }
            }
            if (Fi.h) break n;
            for (Ee = 0; 5 > Ee; ++Ee) {
              var Sn = Ud[Ee];
              !Ee && 0 < tn && (Sn += 1 << tn), Ji < Sn && (Ji = Sn);
            }
            var nh = o(fi * kr, _), tp = fi, ep = o(tp, M);
            if (ep == null) var tu = null;
            else t(65536 >= tp), tu = ep;
            var Ga = s(Ji);
            if (tu == null || Ga == null || nh == null) {
              mi.a = 1;
              break n;
            }
            var eu = nh;
            for (nn = En = 0; nn < fi; ++nn) {
              var ar = tu[nn], Ho = ar.G, Go = ar.H, np = 0, nu = 1, ip = 0;
              for (Ee = 0; 5 > Ee; ++Ee) {
                Sn = Ud[Ee], Ho[Ee] = eu, Go[Ee] = En, !Ee && 0 < tn && (Sn += 1 << tn);
                r: {
                  var iu, ih = Sn, ru = mi, Va = Ga, a2 = eu, l2 = En, rh = 0, bs = ru.m, u2 = ct(bs, 1);
                  if (r(Va, 0, 0, ih), u2) {
                    var c2 = ct(bs, 1) + 1, h2 = ct(bs, 1), rp = ct(bs, h2 == 0 ? 1 : 8);
                    Va[rp] = 1, c2 == 2 && (Va[rp = ct(bs, 8)] = 1);
                    var su = 1;
                  } else {
                    var sp = s(19), op = ct(bs, 4) + 4;
                    if (19 < op) {
                      ru.a = 3;
                      var ou = 0;
                      break r;
                    }
                    for (iu = 0; iu < op; ++iu) sp[jm[iu]] = ct(bs, 3);
                    var sh = void 0, Ya = void 0, ap = ru, f2 = sp, au = ih, lp = Va, oh = 0, vs = ap.m, up = 8, cp = o(128, _);
                    i: for (; A(cp, 0, 7, f2, 19); ) {
                      if (ct(vs, 1)) {
                        var d2 = 2 + 2 * ct(vs, 3);
                        if ((sh = 2 + ct(vs, d2)) > au) break i;
                      } else sh = au;
                      for (Ya = 0; Ya < au && sh--; ) {
                        nt(vs);
                        var hp = cp[0 + (127 & B(vs))];
                        J(vs, vs.u + hp.g);
                        var Vo = hp.value;
                        if (16 > Vo) lp[Ya++] = Vo, Vo != 0 && (up = Vo);
                        else {
                          var p2 = Vo == 16, fp = Vo - 16, g2 = Rm[fp], dp = ct(vs, Mm[fp]) + g2;
                          if (Ya + dp > au) break i;
                          for (var m2 = p2 ? up : 0; 0 < dp--; ) lp[Ya++] = m2;
                        }
                      }
                      oh = 1;
                      break i;
                    }
                    oh || (ap.a = 3), su = oh;
                  }
                  (su = su && !bs.h) && (rh = A(a2, l2, 8, Va, ih)), su && rh != 0 ? ou = rh : (ru.a = 3, ou = 0);
                }
                if (ou == 0) break n;
                if (nu && Dm[Ee] == 1 && (nu = eu[En].g == 0), np += eu[En].g, En += ou, 3 >= Ee) {
                  var Ka, ah = Ga[0];
                  for (Ka = 1; Ka < Sn; ++Ka) Ga[Ka] > ah && (ah = Ga[Ka]);
                  ip += ah;
                }
              }
              if (ar.nd = nu, ar.Qb = 0, nu && (ar.qb = (Ho[3][Go[3] + 0].value << 24 | Ho[1][Go[1] + 0].value << 16 | Ho[2][Go[2] + 0].value) >>> 0, np == 0 && 256 > Ho[0][Go[0] + 0].value && (ar.Qb = 1, ar.qb += Ho[0][Go[0] + 0].value << 8)), ar.jc = !ar.Qb && 6 > ip, ar.jc) {
                var lu, Jr = ar;
                for (lu = 0; lu < Wn; ++lu) {
                  var ws = lu, xs = Jr.pd[ws], uu = Jr.G[0][Jr.H[0] + ws];
                  256 <= uu.value ? (xs.g = uu.g + 256, xs.value = uu.value) : (xs.g = 0, xs.value = 0, ws >>= kn(uu, 8, xs), ws >>= kn(Jr.G[1][Jr.H[1] + ws], 16, xs), ws >>= kn(Jr.G[2][Jr.H[2] + ws], 0, xs), kn(Jr.G[3][Jr.H[3] + ws], 24, xs));
                }
              }
            }
            Bn.vc = Hn, Bn.Wb = fi, Bn.Ya = tu, Bn.yc = nh, ln = 1;
            break e;
          }
          ln = 0;
        }
        if (!(E = ln)) {
          S.a = 3;
          break t;
        }
        if (0 < wt) {
          if (Y.ua = 1 << wt, !he(Y.Wa, wt)) {
            S.a = 1, E = 0;
            break t;
          }
        } else Y.ua = 0;
        var lh = S, pp = F, y2 = j, uh = lh.s, ch = uh.xc;
        if (lh.c = pp, lh.i = y2, uh.md = Xt(pp, ch), uh.wc = ch == 0 ? -1 : (1 << ch) - 1, y) {
          S.xb = Ym;
          break t;
        }
        if ((lt = s(F * j)) == null) {
          S.a = 1, E = 0;
          break t;
        }
        E = (E = qi(S, lt, 0, F, j, j, null)) && !q.h;
        break t;
      }
      return E ? (L != null ? L[0] = lt : (t(lt == null), t(y)), S.$ = 0, y || $i(Y)) : $i(Y), E;
    }
    function zi(u, f) {
      var y = u.c * u.i, S = y + f + 16 * f;
      return t(u.c <= f), u.V = s(S), u.V == null ? (u.Ta = null, u.Ua = 0, u.a = 1, 0) : (u.Ta = u.V, u.Ua = u.Ba + y + f, 1);
    }
    function Br(u, f) {
      var y = u.C, S = f - y, L = u.V, E = u.Ba + u.c * y;
      for (t(f <= u.l.o); 0 < S; ) {
        var F = 16 < S ? 16 : S, j = u.l.ma, q = u.l.width, Y = q * F, lt = j.ca, wt = j.tb + q * y, xt = u.Ta, pt = u.Ua;
        ai(u, F, L, E), Nn(xt, pt, lt, wt, Y), Pi(j, y, y + F, lt, wt, q), S -= F, L += F * u.c, y += F;
      }
      t(y == f), u.C = u.Ma = f;
    }
    function qr() {
      this.ub = this.yd = this.td = this.Rb = 0;
    }
    function nr() {
      this.Kd = this.Ld = this.Ud = this.Td = this.i = this.c = 0;
    }
    function ir() {
      this.Fb = this.Bb = this.Cb = 0, this.Zb = s(4), this.Lb = s(4);
    }
    function Bs() {
      this.Yb = function() {
        var u = [];
        return function f(y, S, L) {
          for (var E = L[S], F = 0; F < E && (y.push(L.length > S + 1 ? [] : 0), !(L.length < S + 1)); F++) f(y[F], S + 1, L);
        }(u, 0, [3, 11]), u;
      }();
    }
    function ss() {
      this.jb = s(3), this.Wc = a([4, 8], Bs), this.Xc = a([4, 17], Bs);
    }
    function ba() {
      this.Pc = this.wb = this.Tb = this.zd = 0, this.vd = new s(4), this.od = new s(4);
    }
    function Ui() {
      this.ld = this.La = this.dd = this.tc = 0;
    }
    function Ao() {
      this.Na = this.la = 0;
    }
    function va() {
      this.Sc = [0, 0], this.Eb = [0, 0], this.Qc = [0, 0], this.ia = this.lc = 0;
    }
    function qs() {
      this.ad = s(384), this.Za = 0, this.Ob = s(16), this.$b = this.Ad = this.ia = this.Gc = this.Hc = this.Dd = 0;
    }
    function wa() {
      this.uc = this.M = this.Nb = 0, this.wa = Array(new Ui()), this.Y = 0, this.ya = Array(new qs()), this.aa = 0, this.l = new $r();
    }
    function $s() {
      this.y = s(16), this.f = s(8), this.ea = s(8);
    }
    function xa() {
      this.cb = this.a = 0, this.sc = "", this.m = new St(), this.Od = new qr(), this.Kc = new nr(), this.ed = new ba(), this.Qa = new ir(), this.Ic = this.$c = this.Aa = 0, this.D = new wa(), this.Xb = this.Va = this.Hb = this.zb = this.yb = this.Ub = this.za = 0, this.Jc = o(8, St), this.ia = 0, this.pb = o(4, va), this.Pa = new ss(), this.Bd = this.kc = 0, this.Ac = [], this.Bc = 0, this.zc = [0, 0, 0, 0], this.Gd = Array(new $s()), this.Hd = 0, this.rb = Array(new Ao()), this.sb = 0, this.wa = Array(new Ui()), this.Y = 0, this.oc = [], this.pc = 0, this.sa = [], this.ta = 0, this.qa = [], this.ra = 0, this.Ha = [], this.B = this.R = this.Ia = 0, this.Ec = [], this.M = this.ja = this.Vb = this.Fc = 0, this.ya = Array(new qs()), this.L = this.aa = 0, this.gd = a([4, 2], Ui), this.ga = null, this.Fa = [], this.Cc = this.qc = this.P = 0, this.Gb = [], this.Uc = 0, this.mb = [], this.nb = 0, this.rc = [], this.Ga = this.Vc = 0;
    }
    function $r() {
      this.T = this.U = this.ka = this.height = this.width = 0, this.y = [], this.f = [], this.ea = [], this.Rc = this.fa = this.W = this.N = this.O = 0, this.ma = "void", this.put = "VP8IoPutHook", this.ac = "VP8IoSetupHook", this.bc = "VP8IoTeardownHook", this.ha = this.Kb = 0, this.data = [], this.hb = this.ib = this.da = this.o = this.j = this.va = this.v = this.Da = this.ob = this.w = 0, this.F = [], this.J = 0;
    }
    function Sa() {
      var u = new xa();
      return u != null && (u.a = 0, u.sc = "OK", u.cb = 0, u.Xb = 0, Wa || (Wa = _o)), u;
    }
    function mn(u, f, y) {
      return u.a == 0 && (u.a = f, u.sc = y, u.cb = 0), 0;
    }
    function Ti(u, f, y) {
      return 3 <= y && u[f + 0] == 157 && u[f + 1] == 1 && u[f + 2] == 42;
    }
    function ko(u, f) {
      if (u == null) return 0;
      if (u.a = 0, u.sc = "OK", f == null) return mn(u, 2, "null VP8Io passed to VP8GetHeaders()");
      var y = f.data, S = f.w, L = f.ha;
      if (4 > L) return mn(u, 7, "Truncated header.");
      var E = y[S + 0] | y[S + 1] << 8 | y[S + 2] << 16, F = u.Od;
      if (F.Rb = !(1 & E), F.td = E >> 1 & 7, F.yd = E >> 4 & 1, F.ub = E >> 5, 3 < F.td) return mn(u, 3, "Incorrect keyframe parameters.");
      if (!F.yd) return mn(u, 4, "Frame not displayable.");
      S += 3, L -= 3;
      var j = u.Kc;
      if (F.Rb) {
        if (7 > L) return mn(u, 7, "cannot parse picture header");
        if (!Ti(y, S, L)) return mn(u, 3, "Bad code word");
        j.c = 16383 & (y[S + 4] << 8 | y[S + 3]), j.Td = y[S + 4] >> 6, j.i = 16383 & (y[S + 6] << 8 | y[S + 5]), j.Ud = y[S + 6] >> 6, S += 7, L -= 7, u.za = j.c + 15 >> 4, u.Ub = j.i + 15 >> 4, f.width = j.c, f.height = j.i, f.Da = 0, f.j = 0, f.v = 0, f.va = f.width, f.o = f.height, f.da = 0, f.ib = f.width, f.hb = f.height, f.U = f.width, f.T = f.height, r((E = u.Pa).jb, 0, 255, E.jb.length), t((E = u.Qa) != null), E.Cb = 0, E.Bb = 0, E.Fb = 1, r(E.Zb, 0, 0, E.Zb.length), r(E.Lb, 0, 0, E.Lb);
      }
      if (F.ub > L) return mn(u, 7, "bad partition length");
      st(E = u.m, y, S, F.ub), S += F.ub, L -= F.ub, F.Rb && (j.Ld = yt(E), j.Kd = yt(E)), j = u.Qa;
      var q, Y = u.Pa;
      if (t(E != null), t(j != null), j.Cb = yt(E), j.Cb) {
        if (j.Bb = yt(E), yt(E)) {
          for (j.Fb = yt(E), q = 0; 4 > q; ++q) j.Zb[q] = yt(E) ? U(E, 7) : 0;
          for (q = 0; 4 > q; ++q) j.Lb[q] = yt(E) ? U(E, 6) : 0;
        }
        if (j.Bb) for (q = 0; 3 > q; ++q) Y.jb[q] = yt(E) ? W(E, 8) : 255;
      } else j.Bb = 0;
      if (E.Ka) return mn(u, 3, "cannot parse segment header");
      if ((j = u.ed).zd = yt(E), j.Tb = W(E, 6), j.wb = W(E, 3), j.Pc = yt(E), j.Pc && yt(E)) {
        for (Y = 0; 4 > Y; ++Y) yt(E) && (j.vd[Y] = U(E, 6));
        for (Y = 0; 4 > Y; ++Y) yt(E) && (j.od[Y] = U(E, 6));
      }
      if (u.L = j.Tb == 0 ? 0 : j.zd ? 1 : 2, E.Ka) return mn(u, 3, "cannot parse filter header");
      var lt = L;
      if (L = q = S, S = q + lt, j = lt, u.Xb = (1 << W(u.m, 2)) - 1, lt < 3 * (Y = u.Xb)) y = 7;
      else {
        for (q += 3 * Y, j -= 3 * Y, lt = 0; lt < Y; ++lt) {
          var wt = y[L + 0] | y[L + 1] << 8 | y[L + 2] << 16;
          wt > j && (wt = j), st(u.Jc[+lt], y, q, wt), q += wt, j -= wt, L += 3;
        }
        st(u.Jc[+Y], y, q, j), y = q < S ? 0 : 5;
      }
      if (y != 0) return mn(u, y, "cannot parse partitions");
      for (y = W(q = u.m, 7), L = yt(q) ? U(q, 4) : 0, S = yt(q) ? U(q, 4) : 0, j = yt(q) ? U(q, 4) : 0, Y = yt(q) ? U(q, 4) : 0, q = yt(q) ? U(q, 4) : 0, lt = u.Qa, wt = 0; 4 > wt; ++wt) {
        if (lt.Cb) {
          var xt = lt.Zb[wt];
          lt.Fb || (xt += y);
        } else {
          if (0 < wt) {
            u.pb[wt] = u.pb[0];
            continue;
          }
          xt = y;
        }
        var pt = u.pb[wt];
        pt.Sc[0] = Qc[Ii(xt + L, 127)], pt.Sc[1] = th[Ii(xt + 0, 127)], pt.Eb[0] = 2 * Qc[Ii(xt + S, 127)], pt.Eb[1] = 101581 * th[Ii(xt + j, 127)] >> 16, 8 > pt.Eb[1] && (pt.Eb[1] = 8), pt.Qc[0] = Qc[Ii(xt + Y, 117)], pt.Qc[1] = th[Ii(xt + q, 127)], pt.lc = xt + q;
      }
      if (!F.Rb) return mn(u, 4, "Not a key frame.");
      for (yt(E), F = u.Pa, y = 0; 4 > y; ++y) {
        for (L = 0; 8 > L; ++L) for (S = 0; 3 > S; ++S) for (j = 0; 11 > j; ++j) Y = vt(E, Gm[y][L][S][j]) ? W(E, 8) : Wm[y][L][S][j], F.Wc[y][L].Yb[S][j] = Y;
        for (L = 0; 17 > L; ++L) F.Xc[y][L] = F.Wc[y][Vm[L]];
      }
      return u.kc = yt(E), u.kc && (u.Bd = W(E, 8)), u.cb = 1;
    }
    function _o(u, f, y, S, L, E, F) {
      var j = f[L].Yb[y];
      for (y = 0; 16 > L; ++L) {
        if (!vt(u, j[y + 0])) return L;
        for (; !vt(u, j[y + 1]); ) if (j = f[++L].Yb[0], y = 0, L == 16) return 16;
        var q = f[L + 1].Yb;
        if (vt(u, j[y + 2])) {
          var Y = u, lt = 0;
          if (vt(Y, (xt = j)[(wt = y) + 3])) if (vt(Y, xt[wt + 6])) {
            for (j = 0, wt = 2 * (lt = vt(Y, xt[wt + 8])) + (xt = vt(Y, xt[wt + 9 + lt])), lt = 0, xt = zm[wt]; xt[j]; ++j) lt += lt + vt(Y, xt[j]);
            lt += 3 + (8 << wt);
          } else vt(Y, xt[wt + 7]) ? (lt = 7 + 2 * vt(Y, 165), lt += vt(Y, 145)) : lt = 5 + vt(Y, 159);
          else lt = vt(Y, xt[wt + 4]) ? 3 + vt(Y, xt[wt + 5]) : 2;
          j = q[2];
        } else lt = 1, j = q[1];
        q = F + Um[L], 0 > (Y = u).b && gt(Y);
        var wt, xt = Y.b, pt = (wt = Y.Ca >> 1) - (Y.I >> xt) >> 31;
        --Y.b, Y.Ca += pt, Y.Ca |= 1, Y.I -= (wt + 1 & pt) << xt, E[q] = ((lt ^ pt) - pt) * S[(0 < L) + 0];
      }
      return 16;
    }
    function os(u) {
      var f = u.rb[u.sb - 1];
      f.la = 0, f.Na = 0, r(u.zc, 0, 0, u.zc.length), u.ja = 0;
    }
    function No(u, f) {
      if (u == null) return 0;
      if (f == null) return mn(u, 2, "NULL VP8Io parameter in VP8Decode().");
      if (!u.cb && !ko(u, f)) return 0;
      if (t(u.cb), f.ac == null || f.ac(f)) {
        f.ob && (u.L = 0);
        var y = Ql[u.L];
        if (u.L == 2 ? (u.yb = 0, u.zb = 0) : (u.yb = f.v - y >> 4, u.zb = f.j - y >> 4, 0 > u.yb && (u.yb = 0), 0 > u.zb && (u.zb = 0)), u.Va = f.o + 15 + y >> 4, u.Hb = f.va + 15 + y >> 4, u.Hb > u.za && (u.Hb = u.za), u.Va > u.Ub && (u.Va = u.Ub), 0 < u.L) {
          var S = u.ed;
          for (y = 0; 4 > y; ++y) {
            var L;
            if (u.Qa.Cb) {
              var E = u.Qa.Lb[y];
              u.Qa.Fb || (E += S.Tb);
            } else E = S.Tb;
            for (L = 0; 1 >= L; ++L) {
              var F = u.gd[y][L], j = E;
              if (S.Pc && (j += S.vd[0], L && (j += S.od[0])), 0 < (j = 0 > j ? 0 : 63 < j ? 63 : j)) {
                var q = j;
                0 < S.wb && (q = 4 < S.wb ? q >> 2 : q >> 1) > 9 - S.wb && (q = 9 - S.wb), 1 > q && (q = 1), F.dd = q, F.tc = 2 * j + q, F.ld = 40 <= j ? 2 : 15 <= j ? 1 : 0;
              } else F.tc = 0;
              F.La = L;
            }
          }
        }
        y = 0;
      } else mn(u, 6, "Frame setup failed"), y = u.a;
      if (y = y == 0) {
        if (y) {
          u.$c = 0, 0 < u.Aa || (u.Ic = o2);
          t: {
            y = u.Ic, S = 4 * (q = u.za);
            var Y = 32 * q, lt = q + 1, wt = 0 < u.L ? q * (0 < u.Aa ? 2 : 1) : 0, xt = (u.Aa == 2 ? 2 : 1) * q;
            if ((F = S + 832 + (L = 3 * (16 * y + Ql[u.L]) / 2 * Y) + (E = u.Fa != null && 0 < u.Fa.length ? u.Kc.c * u.Kc.i : 0)) != F) y = 0;
            else {
              if (F > u.Vb) {
                if (u.Vb = 0, u.Ec = s(F), u.Fc = 0, u.Ec == null) {
                  y = mn(u, 1, "no memory during frame initialization.");
                  break t;
                }
                u.Vb = F;
              }
              F = u.Ec, j = u.Fc, u.Ac = F, u.Bc = j, j += S, u.Gd = o(Y, $s), u.Hd = 0, u.rb = o(lt + 1, Ao), u.sb = 1, u.wa = wt ? o(wt, Ui) : null, u.Y = 0, u.D.Nb = 0, u.D.wa = u.wa, u.D.Y = u.Y, 0 < u.Aa && (u.D.Y += q), t(!0), u.oc = F, u.pc = j, j += 832, u.ya = o(xt, qs), u.aa = 0, u.D.ya = u.ya, u.D.aa = u.aa, u.Aa == 2 && (u.D.aa += q), u.R = 16 * q, u.B = 8 * q, q = (Y = Ql[u.L]) * u.R, Y = Y / 2 * u.B, u.sa = F, u.ta = j + q, u.qa = u.sa, u.ra = u.ta + 16 * y * u.R + Y, u.Ha = u.qa, u.Ia = u.ra + 8 * y * u.B + Y, u.$c = 0, j += L, u.mb = E ? F : null, u.nb = E ? j : null, t(j + E <= u.Fc + u.Vb), os(u), r(u.Ac, u.Bc, 0, S), y = 1;
            }
          }
          if (y) {
            if (f.ka = 0, f.y = u.sa, f.O = u.ta, f.f = u.qa, f.N = u.ra, f.ea = u.Ha, f.Vd = u.Ia, f.fa = u.R, f.Rc = u.B, f.F = null, f.J = 0, !Wl) {
              for (y = -255; 255 >= y; ++y) Mn[255 + y] = 0 > y ? -y : y;
              for (y = -1020; 1020 >= y; ++y) Vr[1020 + y] = -128 > y ? -128 : 127 < y ? 127 : y;
              for (y = -112; 112 >= y; ++y) Ua[112 + y] = -16 > y ? -16 : 15 < y ? 15 : y;
              for (y = -255; 510 >= y; ++y) Uo[255 + y] = 0 > y ? 0 : 255 < y ? 255 : y;
              Wl = 1;
            }
            qo = kt, Gr = et, qa = at, hi = ft, Hi = Ct, _n = Po, $o = Pa, Ul = Hs, $a = Hc, Ys = La, Ks = Wc, ds = Io, Js = Ca, zo = Dl, Xs = Rl, ps = Sr, za = Ur, Gi = Uc, or[0] = xr, or[1] = ne, or[2] = Lo, or[3] = jc, or[4] = Il, or[5] = Co, or[6] = El, or[7] = ka, or[8] = qc, or[9] = Bc, gs[0] = le, gs[1] = Ye, gs[2] = We, gs[3] = _e, gs[4] = fn, gs[5] = Aa, gs[6] = as, Yr[0] = ls, Yr[1] = we, Yr[2] = $c, Yr[3] = _a, Yr[4] = Ws, Yr[5] = zc, Yr[6] = Na, y = 1;
          } else y = 0;
        }
        y && (y = function(pt, Ot) {
          for (pt.M = 0; pt.M < pt.Va; ++pt.M) {
            var _t, ut = pt.Jc[pt.M & pt.Xb], ht = pt.m, Tt = pt;
            for (_t = 0; _t < Tt.za; ++_t) {
              var jt = ht, Et = Tt, te = Et.Ac, Kt = Et.Bc + 4 * _t, me = Et.zc, Jt = Et.ya[Et.aa + _t];
              if (Et.Qa.Bb ? Jt.$b = vt(jt, Et.Pa.jb[0]) ? 2 + vt(jt, Et.Pa.jb[2]) : vt(jt, Et.Pa.jb[1]) : Jt.$b = 0, Et.kc && (Jt.Ad = vt(jt, Et.Bd)), Jt.Za = !vt(jt, 145) + 0, Jt.Za) {
                var Ke = Jt.Ob, Qe = 0;
                for (Et = 0; 4 > Et; ++Et) {
                  var $e, De = me[0 + Et];
                  for ($e = 0; 4 > $e; ++$e) {
                    De = Hm[te[Kt + $e]][De];
                    for (var ln = Wd[vt(jt, De[0])]; 0 < ln; ) ln = Wd[2 * ln + vt(jt, De[ln])];
                    De = -ln, te[Kt + $e] = De;
                  }
                  i(Ke, Qe, te, Kt, 4), Qe += 4, me[0 + Et] = De;
                }
              } else De = vt(jt, 156) ? vt(jt, 128) ? 1 : 3 : vt(jt, 163) ? 2 : 0, Jt.Ob[0] = De, r(te, Kt, De, 4), r(me, 0, De, 4);
              Jt.Dd = vt(jt, 142) ? vt(jt, 114) ? vt(jt, 183) ? 1 : 3 : 2 : 0;
            }
            if (Tt.m.Ka) return mn(pt, 7, "Premature end-of-partition0 encountered.");
            for (; pt.ja < pt.za; ++pt.ja) {
              if (Tt = ut, jt = (ht = pt).rb[ht.sb - 1], te = ht.rb[ht.sb + ht.ja], _t = ht.ya[ht.aa + ht.ja], Kt = ht.kc ? _t.Ad : 0) jt.la = te.la = 0, _t.Za || (jt.Na = te.Na = 0), _t.Hc = 0, _t.Gc = 0, _t.ia = 0;
              else {
                var nn, Ee;
                if (jt = te, te = Tt, Kt = ht.Pa.Xc, me = ht.ya[ht.aa + ht.ja], Jt = ht.pb[me.$b], Et = me.ad, Ke = 0, Qe = ht.rb[ht.sb - 1], De = $e = 0, r(Et, Ke, 0, 384), me.Za) var En = 0, mi = Kt[3];
                else {
                  ln = s(16);
                  var On = jt.Na + Qe.Na;
                  if (On = Wa(te, Kt[1], On, Jt.Eb, 0, ln, 0), jt.Na = Qe.Na = (0 < On) + 0, 1 < On) qo(ln, 0, Et, Ke);
                  else {
                    var yi = ln[0] + 3 >> 3;
                    for (ln = 0; 256 > ln; ln += 16) Et[Ke + ln] = yi;
                  }
                  En = 1, mi = Kt[0];
                }
                var tn = 15 & jt.la, Oi = 15 & Qe.la;
                for (ln = 0; 4 > ln; ++ln) {
                  var Fi = 1 & Oi;
                  for (yi = Ee = 0; 4 > yi; ++yi) tn = tn >> 1 | (Fi = (On = Wa(te, mi, On = Fi + (1 & tn), Jt.Sc, En, Et, Ke)) > En) << 7, Ee = Ee << 2 | (3 < On ? 3 : 1 < On ? 2 : Et[Ke + 0] != 0), Ke += 16;
                  tn >>= 4, Oi = Oi >> 1 | Fi << 7, $e = ($e << 8 | Ee) >>> 0;
                }
                for (mi = tn, En = Oi >> 4, nn = 0; 4 > nn; nn += 2) {
                  for (Ee = 0, tn = jt.la >> 4 + nn, Oi = Qe.la >> 4 + nn, ln = 0; 2 > ln; ++ln) {
                    for (Fi = 1 & Oi, yi = 0; 2 > yi; ++yi) On = Fi + (1 & tn), tn = tn >> 1 | (Fi = 0 < (On = Wa(te, Kt[2], On, Jt.Qc, 0, Et, Ke))) << 3, Ee = Ee << 2 | (3 < On ? 3 : 1 < On ? 2 : Et[Ke + 0] != 0), Ke += 16;
                    tn >>= 2, Oi = Oi >> 1 | Fi << 5;
                  }
                  De |= Ee << 4 * nn, mi |= tn << 4 << nn, En |= (240 & Oi) << nn;
                }
                jt.la = mi, Qe.la = En, me.Hc = $e, me.Gc = De, me.ia = 43690 & De ? 0 : Jt.ia, Kt = !($e | De);
              }
              if (0 < ht.L && (ht.wa[ht.Y + ht.ja] = ht.gd[_t.$b][_t.Za], ht.wa[ht.Y + ht.ja].La |= !Kt), Tt.Ka) return mn(pt, 7, "Premature end-of-file encountered.");
            }
            if (os(pt), ht = Ot, Tt = 1, _t = (ut = pt).D, jt = 0 < ut.L && ut.M >= ut.zb && ut.M <= ut.Va, ut.Aa == 0) t: {
              if (_t.M = ut.M, _t.uc = jt, Ma(ut, _t), Tt = 1, _t = (Ee = ut.D).Nb, jt = (De = Ql[ut.L]) * ut.R, te = De / 2 * ut.B, ln = 16 * _t * ut.R, yi = 8 * _t * ut.B, Kt = ut.sa, me = ut.ta - jt + ln, Jt = ut.qa, Et = ut.ra - te + yi, Ke = ut.Ha, Qe = ut.Ia - te + yi, Oi = (tn = Ee.M) == 0, $e = tn >= ut.Va - 1, ut.Aa == 2 && Ma(ut, Ee), Ee.uc) for (Fi = (On = ut).D.M, t(On.D.uc), Ee = On.yb; Ee < On.Hb; ++Ee) {
                En = Ee, mi = Fi;
                var Bn = (Hn = (Sn = On).D).Nb;
                nn = Sn.R;
                var Hn = Hn.wa[Hn.Y + En], fi = Sn.sa, Ji = Sn.ta + 16 * Bn * nn + 16 * En, kr = Hn.dd, qn = Hn.tc;
                if (qn != 0) if (t(3 <= qn), Sn.L == 1) 0 < En && ps(fi, Ji, nn, qn + 4), Hn.La && Gi(fi, Ji, nn, qn), 0 < mi && Xs(fi, Ji, nn, qn + 4), Hn.La && za(fi, Ji, nn, qn);
                else {
                  var Kr = Sn.B, Zs = Sn.qa, Wo = Sn.ra + 8 * Bn * Kr + 8 * En, ys = Sn.Ha, Sn = Sn.Ia + 8 * Bn * Kr + 8 * En;
                  Bn = Hn.ld, 0 < En && (Ul(fi, Ji, nn, qn + 4, kr, Bn), Ys(Zs, Wo, ys, Sn, Kr, qn + 4, kr, Bn)), Hn.La && (ds(fi, Ji, nn, qn, kr, Bn), zo(Zs, Wo, ys, Sn, Kr, qn, kr, Bn)), 0 < mi && ($o(fi, Ji, nn, qn + 4, kr, Bn), $a(Zs, Wo, ys, Sn, Kr, qn + 4, kr, Bn)), Hn.La && (Ks(fi, Ji, nn, qn, kr, Bn), Js(Zs, Wo, ys, Sn, Kr, qn, kr, Bn));
                }
              }
              if (ut.ia && alert("todo:DitherRow"), ht.put != null) {
                if (Ee = 16 * tn, tn = 16 * (tn + 1), Oi ? (ht.y = ut.sa, ht.O = ut.ta + ln, ht.f = ut.qa, ht.N = ut.ra + yi, ht.ea = ut.Ha, ht.W = ut.Ia + yi) : (Ee -= De, ht.y = Kt, ht.O = me, ht.f = Jt, ht.N = Et, ht.ea = Ke, ht.W = Qe), $e || (tn -= De), tn > ht.o && (tn = ht.o), ht.F = null, ht.J = null, ut.Fa != null && 0 < ut.Fa.length && Ee < tn && (ht.J = Oa(ut, ht, Ee, tn - Ee), ht.F = ut.mb, ht.F == null && ht.F.length == 0)) {
                  Tt = mn(ut, 3, "Could not decode alpha data.");
                  break t;
                }
                Ee < ht.j && (De = ht.j - Ee, Ee = ht.j, t(!(1 & De)), ht.O += ut.R * De, ht.N += ut.B * (De >> 1), ht.W += ut.B * (De >> 1), ht.F != null && (ht.J += ht.width * De)), Ee < tn && (ht.O += ht.v, ht.N += ht.v >> 1, ht.W += ht.v >> 1, ht.F != null && (ht.J += ht.v), ht.ka = Ee - ht.j, ht.U = ht.va - ht.v, ht.T = tn - Ee, Tt = ht.put(ht));
              }
              _t + 1 != ut.Ic || $e || (i(ut.sa, ut.ta - jt, Kt, me + 16 * ut.R, jt), i(ut.qa, ut.ra - te, Jt, Et + 8 * ut.B, te), i(ut.Ha, ut.Ia - te, Ke, Qe + 8 * ut.B, te));
            }
            if (!Tt) return mn(pt, 6, "Output aborted.");
          }
          return 1;
        }(u, f)), f.bc != null && f.bc(f), y &= 1;
      }
      return y ? (u.cb = 0, y) : 0;
    }
    function ui(u, f, y, S, L) {
      L = u[f + y + 32 * S] + (L >> 3), u[f + y + 32 * S] = -256 & L ? 0 > L ? 0 : 255 : L;
    }
    function zr(u, f, y, S, L, E) {
      ui(u, f, 0, y, S + L), ui(u, f, 1, y, S + E), ui(u, f, 2, y, S - E), ui(u, f, 3, y, S - L);
    }
    function Jn(u) {
      return (20091 * u >> 16) + u;
    }
    function zs(u, f, y, S) {
      var L, E = 0, F = s(16);
      for (L = 0; 4 > L; ++L) {
        var j = u[f + 0] + u[f + 8], q = u[f + 0] - u[f + 8], Y = (35468 * u[f + 4] >> 16) - Jn(u[f + 12]), lt = Jn(u[f + 4]) + (35468 * u[f + 12] >> 16);
        F[E + 0] = j + lt, F[E + 1] = q + Y, F[E + 2] = q - Y, F[E + 3] = j - lt, E += 4, f++;
      }
      for (L = E = 0; 4 > L; ++L) j = (u = F[E + 0] + 4) + F[E + 8], q = u - F[E + 8], Y = (35468 * F[E + 4] >> 16) - Jn(F[E + 12]), ui(y, S, 0, 0, j + (lt = Jn(F[E + 4]) + (35468 * F[E + 12] >> 16))), ui(y, S, 1, 0, q + Y), ui(y, S, 2, 0, q - Y), ui(y, S, 3, 0, j - lt), E++, S += 32;
    }
    function Po(u, f, y, S) {
      var L = u[f + 0] + 4, E = 35468 * u[f + 4] >> 16, F = Jn(u[f + 4]), j = 35468 * u[f + 1] >> 16;
      zr(y, S, 0, L + F, u = Jn(u[f + 1]), j), zr(y, S, 1, L + E, u, j), zr(y, S, 2, L - E, u, j), zr(y, S, 3, L - F, u, j);
    }
    function et(u, f, y, S, L) {
      zs(u, f, y, S), L && zs(u, f + 16, y, S + 4);
    }
    function at(u, f, y, S) {
      Gr(u, f + 0, y, S, 1), Gr(u, f + 32, y, S + 128, 1);
    }
    function ft(u, f, y, S) {
      var L;
      for (u = u[f + 0] + 4, L = 0; 4 > L; ++L) for (f = 0; 4 > f; ++f) ui(y, S, f, L, u);
    }
    function Ct(u, f, y, S) {
      u[f + 0] && hi(u, f + 0, y, S), u[f + 16] && hi(u, f + 16, y, S + 4), u[f + 32] && hi(u, f + 32, y, S + 128), u[f + 48] && hi(u, f + 48, y, S + 128 + 4);
    }
    function kt(u, f, y, S) {
      var L, E = s(16);
      for (L = 0; 4 > L; ++L) {
        var F = u[f + 0 + L] + u[f + 12 + L], j = u[f + 4 + L] + u[f + 8 + L], q = u[f + 4 + L] - u[f + 8 + L], Y = u[f + 0 + L] - u[f + 12 + L];
        E[0 + L] = F + j, E[8 + L] = F - j, E[4 + L] = Y + q, E[12 + L] = Y - q;
      }
      for (L = 0; 4 > L; ++L) F = (u = E[0 + 4 * L] + 3) + E[3 + 4 * L], j = E[1 + 4 * L] + E[2 + 4 * L], q = E[1 + 4 * L] - E[2 + 4 * L], Y = u - E[3 + 4 * L], y[S + 0] = F + j >> 3, y[S + 16] = Y + q >> 3, y[S + 32] = F - j >> 3, y[S + 48] = Y - q >> 3, S += 64;
    }
    function ae(u, f, y) {
      var S, L = f - 32, E = Ei, F = 255 - u[L - 1];
      for (S = 0; S < y; ++S) {
        var j, q = E, Y = F + u[f - 1];
        for (j = 0; j < y; ++j) u[f + j] = q[Y + u[L + j]];
        f += 32;
      }
    }
    function ne(u, f) {
      ae(u, f, 4);
    }
    function we(u, f) {
      ae(u, f, 8);
    }
    function Ye(u, f) {
      ae(u, f, 16);
    }
    function We(u, f) {
      var y;
      for (y = 0; 16 > y; ++y) i(u, f + 32 * y, u, f - 32, 16);
    }
    function _e(u, f) {
      var y;
      for (y = 16; 0 < y; --y) r(u, f, u[f - 1], 16), f += 32;
    }
    function He(u, f, y) {
      var S;
      for (S = 0; 16 > S; ++S) r(f, y + 32 * S, u, 16);
    }
    function le(u, f) {
      var y, S = 16;
      for (y = 0; 16 > y; ++y) S += u[f - 1 + 32 * y] + u[f + y - 32];
      He(S >> 5, u, f);
    }
    function fn(u, f) {
      var y, S = 8;
      for (y = 0; 16 > y; ++y) S += u[f - 1 + 32 * y];
      He(S >> 4, u, f);
    }
    function Aa(u, f) {
      var y, S = 8;
      for (y = 0; 16 > y; ++y) S += u[f + y - 32];
      He(S >> 4, u, f);
    }
    function as(u, f) {
      He(128, u, f);
    }
    function Ae(u, f, y) {
      return u + 2 * f + y + 2 >> 2;
    }
    function Lo(u, f) {
      var y, S = f - 32;
      for (S = new Uint8Array([Ae(u[S - 1], u[S + 0], u[S + 1]), Ae(u[S + 0], u[S + 1], u[S + 2]), Ae(u[S + 1], u[S + 2], u[S + 3]), Ae(u[S + 2], u[S + 3], u[S + 4])]), y = 0; 4 > y; ++y) i(u, f + 32 * y, S, 0, S.length);
    }
    function jc(u, f) {
      var y = u[f - 1], S = u[f - 1 + 32], L = u[f - 1 + 64], E = u[f - 1 + 96];
      Rt(u, f + 0, 16843009 * Ae(u[f - 1 - 32], y, S)), Rt(u, f + 32, 16843009 * Ae(y, S, L)), Rt(u, f + 64, 16843009 * Ae(S, L, E)), Rt(u, f + 96, 16843009 * Ae(L, E, E));
    }
    function xr(u, f) {
      var y, S = 4;
      for (y = 0; 4 > y; ++y) S += u[f + y - 32] + u[f - 1 + 32 * y];
      for (S >>= 3, y = 0; 4 > y; ++y) r(u, f + 32 * y, S, 4);
    }
    function Il(u, f) {
      var y = u[f - 1 + 0], S = u[f - 1 + 32], L = u[f - 1 + 64], E = u[f - 1 - 32], F = u[f + 0 - 32], j = u[f + 1 - 32], q = u[f + 2 - 32], Y = u[f + 3 - 32];
      u[f + 0 + 96] = Ae(S, L, u[f - 1 + 96]), u[f + 1 + 96] = u[f + 0 + 64] = Ae(y, S, L), u[f + 2 + 96] = u[f + 1 + 64] = u[f + 0 + 32] = Ae(E, y, S), u[f + 3 + 96] = u[f + 2 + 64] = u[f + 1 + 32] = u[f + 0 + 0] = Ae(F, E, y), u[f + 3 + 64] = u[f + 2 + 32] = u[f + 1 + 0] = Ae(j, F, E), u[f + 3 + 32] = u[f + 2 + 0] = Ae(q, j, F), u[f + 3 + 0] = Ae(Y, q, j);
    }
    function El(u, f) {
      var y = u[f + 1 - 32], S = u[f + 2 - 32], L = u[f + 3 - 32], E = u[f + 4 - 32], F = u[f + 5 - 32], j = u[f + 6 - 32], q = u[f + 7 - 32];
      u[f + 0 + 0] = Ae(u[f + 0 - 32], y, S), u[f + 1 + 0] = u[f + 0 + 32] = Ae(y, S, L), u[f + 2 + 0] = u[f + 1 + 32] = u[f + 0 + 64] = Ae(S, L, E), u[f + 3 + 0] = u[f + 2 + 32] = u[f + 1 + 64] = u[f + 0 + 96] = Ae(L, E, F), u[f + 3 + 32] = u[f + 2 + 64] = u[f + 1 + 96] = Ae(E, F, j), u[f + 3 + 64] = u[f + 2 + 96] = Ae(F, j, q), u[f + 3 + 96] = Ae(j, q, q);
    }
    function Co(u, f) {
      var y = u[f - 1 + 0], S = u[f - 1 + 32], L = u[f - 1 + 64], E = u[f - 1 - 32], F = u[f + 0 - 32], j = u[f + 1 - 32], q = u[f + 2 - 32], Y = u[f + 3 - 32];
      u[f + 0 + 0] = u[f + 1 + 64] = E + F + 1 >> 1, u[f + 1 + 0] = u[f + 2 + 64] = F + j + 1 >> 1, u[f + 2 + 0] = u[f + 3 + 64] = j + q + 1 >> 1, u[f + 3 + 0] = q + Y + 1 >> 1, u[f + 0 + 96] = Ae(L, S, y), u[f + 0 + 64] = Ae(S, y, E), u[f + 0 + 32] = u[f + 1 + 96] = Ae(y, E, F), u[f + 1 + 32] = u[f + 2 + 96] = Ae(E, F, j), u[f + 2 + 32] = u[f + 3 + 96] = Ae(F, j, q), u[f + 3 + 32] = Ae(j, q, Y);
    }
    function ka(u, f) {
      var y = u[f + 0 - 32], S = u[f + 1 - 32], L = u[f + 2 - 32], E = u[f + 3 - 32], F = u[f + 4 - 32], j = u[f + 5 - 32], q = u[f + 6 - 32], Y = u[f + 7 - 32];
      u[f + 0 + 0] = y + S + 1 >> 1, u[f + 1 + 0] = u[f + 0 + 64] = S + L + 1 >> 1, u[f + 2 + 0] = u[f + 1 + 64] = L + E + 1 >> 1, u[f + 3 + 0] = u[f + 2 + 64] = E + F + 1 >> 1, u[f + 0 + 32] = Ae(y, S, L), u[f + 1 + 32] = u[f + 0 + 96] = Ae(S, L, E), u[f + 2 + 32] = u[f + 1 + 96] = Ae(L, E, F), u[f + 3 + 32] = u[f + 2 + 96] = Ae(E, F, j), u[f + 3 + 64] = Ae(F, j, q), u[f + 3 + 96] = Ae(j, q, Y);
    }
    function Bc(u, f) {
      var y = u[f - 1 + 0], S = u[f - 1 + 32], L = u[f - 1 + 64], E = u[f - 1 + 96];
      u[f + 0 + 0] = y + S + 1 >> 1, u[f + 2 + 0] = u[f + 0 + 32] = S + L + 1 >> 1, u[f + 2 + 32] = u[f + 0 + 64] = L + E + 1 >> 1, u[f + 1 + 0] = Ae(y, S, L), u[f + 3 + 0] = u[f + 1 + 32] = Ae(S, L, E), u[f + 3 + 32] = u[f + 1 + 64] = Ae(L, E, E), u[f + 3 + 64] = u[f + 2 + 64] = u[f + 0 + 96] = u[f + 1 + 96] = u[f + 2 + 96] = u[f + 3 + 96] = E;
    }
    function qc(u, f) {
      var y = u[f - 1 + 0], S = u[f - 1 + 32], L = u[f - 1 + 64], E = u[f - 1 + 96], F = u[f - 1 - 32], j = u[f + 0 - 32], q = u[f + 1 - 32], Y = u[f + 2 - 32];
      u[f + 0 + 0] = u[f + 2 + 32] = y + F + 1 >> 1, u[f + 0 + 32] = u[f + 2 + 64] = S + y + 1 >> 1, u[f + 0 + 64] = u[f + 2 + 96] = L + S + 1 >> 1, u[f + 0 + 96] = E + L + 1 >> 1, u[f + 3 + 0] = Ae(j, q, Y), u[f + 2 + 0] = Ae(F, j, q), u[f + 1 + 0] = u[f + 3 + 32] = Ae(y, F, j), u[f + 1 + 32] = u[f + 3 + 64] = Ae(S, y, F), u[f + 1 + 64] = u[f + 3 + 96] = Ae(L, S, y), u[f + 1 + 96] = Ae(E, L, S);
    }
    function $c(u, f) {
      var y;
      for (y = 0; 8 > y; ++y) i(u, f + 32 * y, u, f - 32, 8);
    }
    function _a(u, f) {
      var y;
      for (y = 0; 8 > y; ++y) r(u, f, u[f - 1], 8), f += 32;
    }
    function Us(u, f, y) {
      var S;
      for (S = 0; 8 > S; ++S) r(f, y + 32 * S, u, 8);
    }
    function ls(u, f) {
      var y, S = 8;
      for (y = 0; 8 > y; ++y) S += u[f + y - 32] + u[f - 1 + 32 * y];
      Us(S >> 4, u, f);
    }
    function zc(u, f) {
      var y, S = 4;
      for (y = 0; 8 > y; ++y) S += u[f + y - 32];
      Us(S >> 3, u, f);
    }
    function Ws(u, f) {
      var y, S = 4;
      for (y = 0; 8 > y; ++y) S += u[f - 1 + 32 * y];
      Us(S >> 3, u, f);
    }
    function Na(u, f) {
      Us(128, u, f);
    }
    function To(u, f, y) {
      var S = u[f - y], L = u[f + 0], E = 3 * (L - S) + Yc[1020 + u[f - 2 * y] - u[f + y]], F = Hl[112 + (E + 4 >> 3)];
      u[f - y] = Ei[255 + S + Hl[112 + (E + 3 >> 3)]], u[f + 0] = Ei[255 + L - F];
    }
    function Ol(u, f, y, S) {
      var L = u[f + 0], E = u[f + y];
      return Yi[255 + u[f - 2 * y] - u[f - y]] > S || Yi[255 + E - L] > S;
    }
    function Fl(u, f, y, S) {
      return 4 * Yi[255 + u[f - y] - u[f + 0]] + Yi[255 + u[f - 2 * y] - u[f + y]] <= S;
    }
    function Ml(u, f, y, S, L) {
      var E = u[f - 3 * y], F = u[f - 2 * y], j = u[f - y], q = u[f + 0], Y = u[f + y], lt = u[f + 2 * y], wt = u[f + 3 * y];
      return 4 * Yi[255 + j - q] + Yi[255 + F - Y] > S ? 0 : Yi[255 + u[f - 4 * y] - E] <= L && Yi[255 + E - F] <= L && Yi[255 + F - j] <= L && Yi[255 + wt - lt] <= L && Yi[255 + lt - Y] <= L && Yi[255 + Y - q] <= L;
    }
    function Rl(u, f, y, S) {
      var L = 2 * S + 1;
      for (S = 0; 16 > S; ++S) Fl(u, f + S, y, L) && To(u, f + S, y);
    }
    function Sr(u, f, y, S) {
      var L = 2 * S + 1;
      for (S = 0; 16 > S; ++S) Fl(u, f + S * y, 1, L) && To(u, f + S * y, 1);
    }
    function Ur(u, f, y, S) {
      var L;
      for (L = 3; 0 < L; --L) Rl(u, f += 4 * y, y, S);
    }
    function Uc(u, f, y, S) {
      var L;
      for (L = 3; 0 < L; --L) Sr(u, f += 4, y, S);
    }
    function us(u, f, y, S, L, E, F, j) {
      for (E = 2 * E + 1; 0 < L--; ) {
        if (Ml(u, f, y, E, F)) if (Ol(u, f, y, j)) To(u, f, y);
        else {
          var q = u, Y = f, lt = y, wt = q[Y - 2 * lt], xt = q[Y - lt], pt = q[Y + 0], Ot = q[Y + lt], _t = q[Y + 2 * lt], ut = 27 * (Tt = Yc[1020 + 3 * (pt - xt) + Yc[1020 + wt - Ot]]) + 63 >> 7, ht = 18 * Tt + 63 >> 7, Tt = 9 * Tt + 63 >> 7;
          q[Y - 3 * lt] = Ei[255 + q[Y - 3 * lt] + Tt], q[Y - 2 * lt] = Ei[255 + wt + ht], q[Y - lt] = Ei[255 + xt + ut], q[Y + 0] = Ei[255 + pt - ut], q[Y + lt] = Ei[255 + Ot - ht], q[Y + 2 * lt] = Ei[255 + _t - Tt];
        }
        f += S;
      }
    }
    function rr(u, f, y, S, L, E, F, j) {
      for (E = 2 * E + 1; 0 < L--; ) {
        if (Ml(u, f, y, E, F)) if (Ol(u, f, y, j)) To(u, f, y);
        else {
          var q = u, Y = f, lt = y, wt = q[Y - lt], xt = q[Y + 0], pt = q[Y + lt], Ot = Hl[112 + ((_t = 3 * (xt - wt)) + 4 >> 3)], _t = Hl[112 + (_t + 3 >> 3)], ut = Ot + 1 >> 1;
          q[Y - 2 * lt] = Ei[255 + q[Y - 2 * lt] + ut], q[Y - lt] = Ei[255 + wt + _t], q[Y + 0] = Ei[255 + xt - Ot], q[Y + lt] = Ei[255 + pt - ut];
        }
        f += S;
      }
    }
    function Pa(u, f, y, S, L, E) {
      us(u, f, y, 1, 16, S, L, E);
    }
    function Hs(u, f, y, S, L, E) {
      us(u, f, 1, y, 16, S, L, E);
    }
    function Wc(u, f, y, S, L, E) {
      var F;
      for (F = 3; 0 < F; --F) rr(u, f += 4 * y, y, 1, 16, S, L, E);
    }
    function Io(u, f, y, S, L, E) {
      var F;
      for (F = 3; 0 < F; --F) rr(u, f += 4, 1, y, 16, S, L, E);
    }
    function Hc(u, f, y, S, L, E, F, j) {
      us(u, f, L, 1, 8, E, F, j), us(y, S, L, 1, 8, E, F, j);
    }
    function La(u, f, y, S, L, E, F, j) {
      us(u, f, 1, L, 8, E, F, j), us(y, S, 1, L, 8, E, F, j);
    }
    function Ca(u, f, y, S, L, E, F, j) {
      rr(u, f + 4 * L, L, 1, 8, E, F, j), rr(y, S + 4 * L, L, 1, 8, E, F, j);
    }
    function Dl(u, f, y, S, L, E, F, j) {
      rr(u, f + 4, 1, L, 8, E, F, j), rr(y, S + 4, 1, L, 8, E, F, j);
    }
    function Eo() {
      this.ba = new Yn(), this.ec = [], this.cc = [], this.Mc = [], this.Dc = this.Nc = this.dc = this.fc = 0, this.Oa = new an(), this.memory = 0, this.Ib = "OutputFunc", this.Jb = "OutputAlphaFunc", this.Nd = "OutputRowFunc";
    }
    function Ta() {
      this.data = [], this.offset = this.kd = this.ha = this.w = 0, this.na = [], this.xa = this.gb = this.Ja = this.Sa = this.P = 0;
    }
    function Ia() {
      this.nc = this.Ea = this.b = this.hc = 0, this.K = [], this.w = 0;
    }
    function jl() {
      this.ua = 0, this.Wa = new it(), this.vb = new it(), this.md = this.xc = this.wc = 0, this.vc = [], this.Wb = 0, this.Ya = new M(), this.yc = new _();
    }
    function Gc() {
      this.xb = this.a = 0, this.l = new $r(), this.ca = new Yn(), this.V = [], this.Ba = 0, this.Ta = [], this.Ua = 0, this.m = new P(), this.Pb = 0, this.wd = new P(), this.Ma = this.$ = this.C = this.i = this.c = this.xd = 0, this.s = new jl(), this.ab = 0, this.gc = o(4, Ia), this.Oc = 0;
    }
    function Oo() {
      this.Lc = this.Z = this.$a = this.i = this.c = 0, this.l = new $r(), this.ic = 0, this.ca = [], this.tb = 0, this.qd = null, this.rd = 0;
    }
    function Gs(u, f, y, S, L, E, F) {
      for (u = u == null ? 0 : u[f + 0], f = 0; f < F; ++f) L[E + f] = u + y[S + f] & 255, u = L[E + f];
    }
    function Ea(u, f, y, S, L, E, F) {
      var j;
      if (u == null) Gs(null, null, y, S, L, E, F);
      else for (j = 0; j < F; ++j) L[E + j] = u[f + j] + y[S + j] & 255;
    }
    function cs(u, f, y, S, L, E, F) {
      if (u == null) Gs(null, null, y, S, L, E, F);
      else {
        var j, q = u[f + 0], Y = q, lt = q;
        for (j = 0; j < F; ++j) Y = lt + (q = u[f + j]) - Y, lt = y[S + j] + (-256 & Y ? 0 > Y ? 0 : 255 : Y) & 255, Y = q, L[E + j] = lt;
      }
    }
    function Oa(u, f, y, S) {
      var L = f.width, E = f.o;
      if (t(u != null && f != null), 0 > y || 0 >= S || y + S > E) return null;
      if (!u.Cc) {
        if (u.ga == null) {
          var F;
          if (u.ga = new Oo(), (F = u.ga == null) || (F = f.width * f.o, t(u.Gb.length == 0), u.Gb = s(F), u.Uc = 0, u.Gb == null ? F = 0 : (u.mb = u.Gb, u.nb = u.Uc, u.rc = null, F = 1), F = !F), !F) {
            F = u.ga;
            var j = u.Fa, q = u.P, Y = u.qc, lt = u.mb, wt = u.nb, xt = q + 1, pt = Y - 1, Ot = F.l;
            if (t(j != null && lt != null && f != null), ms[0] = null, ms[1] = Gs, ms[2] = Ea, ms[3] = cs, F.ca = lt, F.tb = wt, F.c = f.width, F.i = f.height, t(0 < F.c && 0 < F.i), 1 >= Y) f = 0;
            else if (F.$a = j[q + 0] >> 0 & 3, F.Z = j[q + 0] >> 2 & 3, F.Lc = j[q + 0] >> 4 & 3, q = j[q + 0] >> 6 & 3, 0 > F.$a || 1 < F.$a || 4 <= F.Z || 1 < F.Lc || q) f = 0;
            else if (Ot.put = ki, Ot.ac = Ze, Ot.bc = Bi, Ot.ma = F, Ot.width = f.width, Ot.height = f.height, Ot.Da = f.Da, Ot.v = f.v, Ot.va = f.va, Ot.j = f.j, Ot.o = f.o, F.$a) t: {
              t(F.$a == 1), f = li();
              e: for (; ; ) {
                if (f == null) {
                  f = 0;
                  break t;
                }
                if (t(F != null), F.mc = f, f.c = F.c, f.i = F.i, f.l = F.l, f.l.ma = F, f.l.width = F.c, f.l.height = F.i, f.a = 0, Q(f.m, j, xt, pt), !Ci(F.c, F.i, 1, f, null) || (f.ab == 1 && f.gc[0].hc == 3 && er(f.s) ? (F.ic = 1, j = f.c * f.i, f.Ta = null, f.Ua = 0, f.V = s(j), f.Ba = 0, f.V == null ? (f.a = 1, f = 0) : f = 1) : (F.ic = 0, f = zi(f, F.c)), !f)) break e;
                f = 1;
                break t;
              }
              F.mc = null, f = 0;
            }
            else f = pt >= F.c * F.i;
            F = !f;
          }
          if (F) return null;
          u.ga.Lc != 1 ? u.Ga = 0 : S = E - y;
        }
        t(u.ga != null), t(y + S <= E);
        t: {
          if (f = (j = u.ga).c, E = j.l.o, j.$a == 0) {
            if (xt = u.rc, pt = u.Vc, Ot = u.Fa, q = u.P + 1 + y * f, Y = u.mb, lt = u.nb + y * f, t(q <= u.P + u.qc), j.Z != 0) for (t(ms[j.Z] != null), F = 0; F < S; ++F) ms[j.Z](xt, pt, Ot, q, Y, lt, f), xt = Y, pt = lt, lt += f, q += f;
            else for (F = 0; F < S; ++F) i(Y, lt, Ot, q, f), xt = Y, pt = lt, lt += f, q += f;
            u.rc = xt, u.Vc = pt;
          } else {
            if (t(j.mc != null), f = y + S, t((F = j.mc) != null), t(f <= F.i), F.C >= f) f = 1;
            else if (j.ic || bt(), j.ic) {
              j = F.V, xt = F.Ba, pt = F.c;
              var _t = F.i, ut = (Ot = 1, q = F.$ / pt, Y = F.$ % pt, lt = F.m, wt = F.s, F.$), ht = pt * _t, Tt = pt * f, jt = wt.wc, Et = ut < Tt ? wn(wt, Y, q) : null;
              t(ut <= ht), t(f <= _t), t(er(wt));
              e: for (; ; ) {
                for (; !lt.h && ut < Tt; ) {
                  if (Y & jt || (Et = wn(wt, Y, q)), t(Et != null), nt(lt), 256 > (_t = Kn(Et.G[0], Et.H[0], lt))) j[xt + ut] = _t, ++ut, ++Y >= pt && (Y = 0, ++q <= f && !(q % 16) && Li(F, q));
                  else {
                    if (!(280 > _t)) {
                      Ot = 0;
                      break e;
                    }
                    _t = _i(_t - 256, lt);
                    var te, Kt = Kn(Et.G[4], Et.H[4], lt);
                    if (nt(lt), !(ut >= (Kt = Ni(pt, Kt = _i(Kt, lt))) && ht - ut >= _t)) {
                      Ot = 0;
                      break e;
                    }
                    for (te = 0; te < _t; ++te) j[xt + ut + te] = j[xt + ut + te - Kt];
                    for (ut += _t, Y += _t; Y >= pt; ) Y -= pt, ++q <= f && !(q % 16) && Li(F, q);
                    ut < Tt && Y & jt && (Et = wn(wt, Y, q));
                  }
                  t(lt.h == V(lt));
                }
                Li(F, q > f ? f : q);
                break e;
              }
              !Ot || lt.h && ut < ht ? (Ot = 0, F.a = lt.h ? 5 : 3) : F.$ = ut, f = Ot;
            } else f = qi(F, F.V, F.Ba, F.c, F.i, f, Br);
            if (!f) {
              S = 0;
              break t;
            }
          }
          y + S >= E && (u.Cc = 1), S = 1;
        }
        if (!S) return null;
        if (u.Cc && ((S = u.ga) != null && (S.mc = null), u.ga = null, 0 < u.Ga)) return alert("todo:WebPDequantizeLevels"), null;
      }
      return u.nb + y * L;
    }
    function m(u, f, y, S, L, E) {
      for (; 0 < L--; ) {
        var F, j = u, q = f + (y ? 1 : 0), Y = u, lt = f + (y ? 0 : 3);
        for (F = 0; F < S; ++F) {
          var wt = Y[lt + 4 * F];
          wt != 255 && (wt *= 32897, j[q + 4 * F + 0] = j[q + 4 * F + 0] * wt >> 23, j[q + 4 * F + 1] = j[q + 4 * F + 1] * wt >> 23, j[q + 4 * F + 2] = j[q + 4 * F + 2] * wt >> 23);
        }
        f += E;
      }
    }
    function C(u, f, y, S, L) {
      for (; 0 < S--; ) {
        var E;
        for (E = 0; E < y; ++E) {
          var F = u[f + 2 * E + 0], j = 15 & (Y = u[f + 2 * E + 1]), q = 4369 * j, Y = (240 & Y | Y >> 4) * q >> 16;
          u[f + 2 * E + 0] = (240 & F | F >> 4) * q >> 16 & 240 | (15 & F | F << 4) * q >> 16 >> 4 & 15, u[f + 2 * E + 1] = 240 & Y | j;
        }
        f += L;
      }
    }
    function tt(u, f, y, S, L, E, F, j) {
      var q, Y, lt = 255;
      for (Y = 0; Y < L; ++Y) {
        for (q = 0; q < S; ++q) {
          var wt = u[f + q];
          E[F + 4 * q] = wt, lt &= wt;
        }
        f += y, F += j;
      }
      return lt != 255;
    }
    function ot(u, f, y, S, L) {
      var E;
      for (E = 0; E < L; ++E) y[S + E] = u[f + E] >> 8;
    }
    function bt() {
      Vi = m, cn = C, hn = tt, Nn = ot;
    }
    function Pt(u, f, y) {
      O[u] = function(S, L, E, F, j, q, Y, lt, wt, xt, pt, Ot, _t, ut, ht, Tt, jt) {
        var Et, te = jt - 1 >> 1, Kt = j[q + 0] | Y[lt + 0] << 16, me = wt[xt + 0] | pt[Ot + 0] << 16;
        t(S != null);
        var Jt = 3 * Kt + me + 131074 >> 2;
        for (f(S[L + 0], 255 & Jt, Jt >> 16, _t, ut), E != null && (Jt = 3 * me + Kt + 131074 >> 2, f(E[F + 0], 255 & Jt, Jt >> 16, ht, Tt)), Et = 1; Et <= te; ++Et) {
          var Ke = j[q + Et] | Y[lt + Et] << 16, Qe = wt[xt + Et] | pt[Ot + Et] << 16, $e = Kt + Ke + me + Qe + 524296, De = $e + 2 * (Ke + me) >> 3;
          Jt = De + Kt >> 1, Kt = ($e = $e + 2 * (Kt + Qe) >> 3) + Ke >> 1, f(S[L + 2 * Et - 1], 255 & Jt, Jt >> 16, _t, ut + (2 * Et - 1) * y), f(S[L + 2 * Et - 0], 255 & Kt, Kt >> 16, _t, ut + (2 * Et - 0) * y), E != null && (Jt = $e + me >> 1, Kt = De + Qe >> 1, f(E[F + 2 * Et - 1], 255 & Jt, Jt >> 16, ht, Tt + (2 * Et - 1) * y), f(E[F + 2 * Et + 0], 255 & Kt, Kt >> 16, ht, Tt + (2 * Et + 0) * y)), Kt = Ke, me = Qe;
        }
        1 & jt || (Jt = 3 * Kt + me + 131074 >> 2, f(S[L + jt - 1], 255 & Jt, Jt >> 16, _t, ut + (jt - 1) * y), E != null && (Jt = 3 * me + Kt + 131074 >> 2, f(E[F + jt - 1], 255 & Jt, Jt >> 16, ht, Tt + (jt - 1) * y)));
      };
    }
    function Bt() {
      Ki[Gl] = Km, Ki[Vl] = Gd, Ki[$d] = Jm, Ki[Yl] = Vd, Ki[Kl] = Yd, Ki[Kc] = Kd, Ki[zd] = Xm, Ki[Jc] = Gd, Ki[Xc] = Vd, Ki[Jl] = Yd, Ki[Zc] = Kd;
    }
    function Zt(u) {
      return u & ~Zm ? 0 > u ? 0 : 255 : u >> Jd;
    }
    function ce(u, f) {
      return Zt((19077 * u >> 8) + (26149 * f >> 8) - 14234);
    }
    function Te(u, f, y) {
      return Zt((19077 * u >> 8) - (6419 * f >> 8) - (13320 * y >> 8) + 8708);
    }
    function Le(u, f) {
      return Zt((19077 * u >> 8) + (33050 * f >> 8) - 17685);
    }
    function Be(u, f, y, S, L) {
      S[L + 0] = ce(u, y), S[L + 1] = Te(u, f, y), S[L + 2] = Le(u, f);
    }
    function yn(u, f, y, S, L) {
      S[L + 0] = Le(u, f), S[L + 1] = Te(u, f, y), S[L + 2] = ce(u, y);
    }
    function xn(u, f, y, S, L) {
      var E = Te(u, f, y);
      f = E << 3 & 224 | Le(u, f) >> 3, S[L + 0] = 248 & ce(u, y) | E >> 5, S[L + 1] = f;
    }
    function In(u, f, y, S, L) {
      var E = 240 & Le(u, f) | 15;
      S[L + 0] = 240 & ce(u, y) | Te(u, f, y) >> 4, S[L + 1] = E;
    }
    function Xn(u, f, y, S, L) {
      S[L + 0] = 255, Be(u, f, y, S, L + 1);
    }
    function jn(u, f, y, S, L) {
      yn(u, f, y, S, L), S[L + 3] = 255;
    }
    function sr(u, f, y, S, L) {
      Be(u, f, y, S, L), S[L + 3] = 255;
    }
    function Ii(u, f) {
      return 0 > u ? 0 : u > f ? f : u;
    }
    function Ar(u, f, y) {
      O[u] = function(S, L, E, F, j, q, Y, lt, wt) {
        for (var xt = lt + (-2 & wt) * y; lt != xt; ) f(S[L + 0], E[F + 0], j[q + 0], Y, lt), f(S[L + 1], E[F + 0], j[q + 0], Y, lt + y), L += 2, ++F, ++q, lt += 2 * y;
        1 & wt && f(S[L + 0], E[F + 0], j[q + 0], Y, lt);
      };
    }
    function Bl(u, f, y) {
      return y == 0 ? u == 0 ? f == 0 ? 6 : 5 : f == 0 ? 4 : 0 : y;
    }
    function Fa(u, f, y, S, L) {
      switch (u >>> 30) {
        case 3:
          Gr(f, y, S, L, 0);
          break;
        case 2:
          _n(f, y, S, L);
          break;
        case 1:
          hi(f, y, S, L);
      }
    }
    function Ma(u, f) {
      var y, S, L = f.M, E = f.Nb, F = u.oc, j = u.pc + 40, q = u.oc, Y = u.pc + 584, lt = u.oc, wt = u.pc + 600;
      for (y = 0; 16 > y; ++y) F[j + 32 * y - 1] = 129;
      for (y = 0; 8 > y; ++y) q[Y + 32 * y - 1] = 129, lt[wt + 32 * y - 1] = 129;
      for (0 < L ? F[j - 1 - 32] = q[Y - 1 - 32] = lt[wt - 1 - 32] = 129 : (r(F, j - 32 - 1, 127, 21), r(q, Y - 32 - 1, 127, 9), r(lt, wt - 32 - 1, 127, 9)), S = 0; S < u.za; ++S) {
        var xt = f.ya[f.aa + S];
        if (0 < S) {
          for (y = -1; 16 > y; ++y) i(F, j + 32 * y - 4, F, j + 32 * y + 12, 4);
          for (y = -1; 8 > y; ++y) i(q, Y + 32 * y - 4, q, Y + 32 * y + 4, 4), i(lt, wt + 32 * y - 4, lt, wt + 32 * y + 4, 4);
        }
        var pt = u.Gd, Ot = u.Hd + S, _t = xt.ad, ut = xt.Hc;
        if (0 < L && (i(F, j - 32, pt[Ot].y, 0, 16), i(q, Y - 32, pt[Ot].f, 0, 8), i(lt, wt - 32, pt[Ot].ea, 0, 8)), xt.Za) {
          var ht = F, Tt = j - 32 + 16;
          for (0 < L && (S >= u.za - 1 ? r(ht, Tt, pt[Ot].y[15], 4) : i(ht, Tt, pt[Ot + 1].y, 0, 4)), y = 0; 4 > y; y++) ht[Tt + 128 + y] = ht[Tt + 256 + y] = ht[Tt + 384 + y] = ht[Tt + 0 + y];
          for (y = 0; 16 > y; ++y, ut <<= 2) ht = F, Tt = j + Zd[y], or[xt.Ob[y]](ht, Tt), Fa(ut, _t, 16 * +y, ht, Tt);
        } else if (ht = Bl(S, L, xt.Ob[0]), gs[ht](F, j), ut != 0) for (y = 0; 16 > y; ++y, ut <<= 2) Fa(ut, _t, 16 * +y, F, j + Zd[y]);
        for (y = xt.Gc, ht = Bl(S, L, xt.Dd), Yr[ht](q, Y), Yr[ht](lt, wt), ut = _t, ht = q, Tt = Y, 255 & (xt = y >> 0) && (170 & xt ? qa(ut, 256, ht, Tt) : Hi(ut, 256, ht, Tt)), xt = lt, ut = wt, 255 & (y >>= 8) && (170 & y ? qa(_t, 320, xt, ut) : Hi(_t, 320, xt, ut)), L < u.Ub - 1 && (i(pt[Ot].y, 0, F, j + 480, 16), i(pt[Ot].f, 0, q, Y + 224, 8), i(pt[Ot].ea, 0, lt, wt + 224, 8)), y = 8 * E * u.B, pt = u.sa, Ot = u.ta + 16 * S + 16 * E * u.R, _t = u.qa, xt = u.ra + 8 * S + y, ut = u.Ha, ht = u.Ia + 8 * S + y, y = 0; 16 > y; ++y) i(pt, Ot + y * u.R, F, j + 32 * y, 16);
        for (y = 0; 8 > y; ++y) i(_t, xt + y * u.B, q, Y + 32 * y, 8), i(ut, ht + y * u.B, lt, wt + 32 * y, 8);
      }
    }
    function Fo(u, f, y, S, L, E, F, j, q) {
      var Y = [0], lt = [0], wt = 0, xt = q != null ? q.kd : 0, pt = q ?? new Ta();
      if (u == null || 12 > y) return 7;
      pt.data = u, pt.w = f, pt.ha = y, f = [f], y = [y], pt.gb = [pt.gb];
      t: {
        var Ot = f, _t = y, ut = pt.gb;
        if (t(u != null), t(_t != null), t(ut != null), ut[0] = 0, 12 <= _t[0] && !n(u, Ot[0], "RIFF")) {
          if (n(u, Ot[0] + 8, "WEBP")) {
            ut = 3;
            break t;
          }
          var ht = Wt(u, Ot[0] + 4);
          if (12 > ht || 4294967286 < ht) {
            ut = 3;
            break t;
          }
          if (xt && ht > _t[0] - 8) {
            ut = 7;
            break t;
          }
          ut[0] = ht, Ot[0] += 12, _t[0] -= 12;
        }
        ut = 0;
      }
      if (ut != 0) return ut;
      for (ht = 0 < pt.gb[0], y = y[0]; ; ) {
        t: {
          var Tt = u;
          _t = f, ut = y;
          var jt = Y, Et = lt, te = Ot = [0];
          if ((Jt = wt = [wt])[0] = 0, 8 > ut[0]) ut = 7;
          else {
            if (!n(Tt, _t[0], "VP8X")) {
              if (Wt(Tt, _t[0] + 4) != 10) {
                ut = 3;
                break t;
              }
              if (18 > ut[0]) {
                ut = 7;
                break t;
              }
              var Kt = Wt(Tt, _t[0] + 8), me = 1 + Ut(Tt, _t[0] + 12);
              if (2147483648 <= me * (Tt = 1 + Ut(Tt, _t[0] + 15))) {
                ut = 3;
                break t;
              }
              te != null && (te[0] = Kt), jt != null && (jt[0] = me), Et != null && (Et[0] = Tt), _t[0] += 18, ut[0] -= 18, Jt[0] = 1;
            }
            ut = 0;
          }
        }
        if (wt = wt[0], Ot = Ot[0], ut != 0) return ut;
        if (_t = !!(2 & Ot), !ht && wt) return 3;
        if (E != null && (E[0] = !!(16 & Ot)), F != null && (F[0] = _t), j != null && (j[0] = 0), F = Y[0], Ot = lt[0], wt && _t && q == null) {
          ut = 0;
          break;
        }
        if (4 > y) {
          ut = 7;
          break;
        }
        if (ht && wt || !ht && !wt && !n(u, f[0], "ALPH")) {
          y = [y], pt.na = [pt.na], pt.P = [pt.P], pt.Sa = [pt.Sa];
          t: {
            Kt = u, ut = f, ht = y;
            var Jt = pt.gb;
            jt = pt.na, Et = pt.P, te = pt.Sa, me = 22, t(Kt != null), t(ht != null), Tt = ut[0];
            var Ke = ht[0];
            for (t(jt != null), t(te != null), jt[0] = null, Et[0] = null, te[0] = 0; ; ) {
              if (ut[0] = Tt, ht[0] = Ke, 8 > Ke) {
                ut = 7;
                break t;
              }
              var Qe = Wt(Kt, Tt + 4);
              if (4294967286 < Qe) {
                ut = 3;
                break t;
              }
              var $e = 8 + Qe + 1 & -2;
              if (me += $e, 0 < Jt && me > Jt) {
                ut = 3;
                break t;
              }
              if (!n(Kt, Tt, "VP8 ") || !n(Kt, Tt, "VP8L")) {
                ut = 0;
                break t;
              }
              if (Ke[0] < $e) {
                ut = 7;
                break t;
              }
              n(Kt, Tt, "ALPH") || (jt[0] = Kt, Et[0] = Tt + 8, te[0] = Qe), Tt += $e, Ke -= $e;
            }
          }
          if (y = y[0], pt.na = pt.na[0], pt.P = pt.P[0], pt.Sa = pt.Sa[0], ut != 0) break;
        }
        y = [y], pt.Ja = [pt.Ja], pt.xa = [pt.xa];
        t: if (Jt = u, ut = f, ht = y, jt = pt.gb[0], Et = pt.Ja, te = pt.xa, Kt = ut[0], Tt = !n(Jt, Kt, "VP8 "), me = !n(Jt, Kt, "VP8L"), t(Jt != null), t(ht != null), t(Et != null), t(te != null), 8 > ht[0]) ut = 7;
        else {
          if (Tt || me) {
            if (Jt = Wt(Jt, Kt + 4), 12 <= jt && Jt > jt - 12) {
              ut = 3;
              break t;
            }
            if (xt && Jt > ht[0] - 8) {
              ut = 7;
              break t;
            }
            Et[0] = Jt, ut[0] += 8, ht[0] -= 8, te[0] = me;
          } else te[0] = 5 <= ht[0] && Jt[Kt + 0] == 47 && !(Jt[Kt + 4] >> 5), Et[0] = ht[0];
          ut = 0;
        }
        if (y = y[0], pt.Ja = pt.Ja[0], pt.xa = pt.xa[0], f = f[0], ut != 0) break;
        if (4294967286 < pt.Ja) return 3;
        if (j == null || _t || (j[0] = pt.xa ? 2 : 1), F = [F], Ot = [Ot], pt.xa) {
          if (5 > y) {
            ut = 7;
            break;
          }
          j = F, xt = Ot, _t = E, u == null || 5 > y ? u = 0 : 5 <= y && u[f + 0] == 47 && !(u[f + 4] >> 5) ? (ht = [0], Jt = [0], jt = [0], Q(Et = new P(), u, f, y), ge(Et, ht, Jt, jt) ? (j != null && (j[0] = ht[0]), xt != null && (xt[0] = Jt[0]), _t != null && (_t[0] = jt[0]), u = 1) : u = 0) : u = 0;
        } else {
          if (10 > y) {
            ut = 7;
            break;
          }
          j = Ot, u == null || 10 > y || !Ti(u, f + 3, y - 3) ? u = 0 : (xt = u[f + 0] | u[f + 1] << 8 | u[f + 2] << 16, _t = 16383 & (u[f + 7] << 8 | u[f + 6]), u = 16383 & (u[f + 9] << 8 | u[f + 8]), 1 & xt || 3 < (xt >> 1 & 7) || !(xt >> 4 & 1) || xt >> 5 >= pt.Ja || !_t || !u ? u = 0 : (F && (F[0] = _t), j && (j[0] = u), u = 1));
        }
        if (!u || (F = F[0], Ot = Ot[0], wt && (Y[0] != F || lt[0] != Ot))) return 3;
        q != null && (q[0] = pt, q.offset = f - q.w, t(4294967286 > f - q.w), t(q.offset == q.ha - y));
        break;
      }
      return ut == 0 || ut == 7 && wt && q == null ? (E != null && (E[0] |= pt.na != null && 0 < pt.na.length), S != null && (S[0] = F), L != null && (L[0] = Ot), 0) : ut;
    }
    function Ra(u, f, y) {
      var S = f.width, L = f.height, E = 0, F = 0, j = S, q = L;
      if (f.Da = u != null && 0 < u.Da, f.Da && (j = u.cd, q = u.bd, E = u.v, F = u.j, 11 > y || (E &= -2, F &= -2), 0 > E || 0 > F || 0 >= j || 0 >= q || E + j > S || F + q > L)) return 0;
      if (f.v = E, f.j = F, f.va = E + j, f.o = F + q, f.U = j, f.T = q, f.da = u != null && 0 < u.da, f.da) {
        if (!de(j, q, y = [u.ib], E = [u.hb])) return 0;
        f.ib = y[0], f.hb = E[0];
      }
      return f.ob = u != null && u.ob, f.Kb = u == null || !u.Sd, f.da && (f.ob = f.ib < 3 * S / 4 && f.hb < 3 * L / 4, f.Kb = 0), 1;
    }
    function Da(u) {
      if (u == null) return 2;
      if (11 > u.S) {
        var f = u.f.RGBA;
        f.fb += (u.height - 1) * f.A, f.A = -f.A;
      } else f = u.f.kb, u = u.height, f.O += (u - 1) * f.fa, f.fa = -f.fa, f.N += (u - 1 >> 1) * f.Ab, f.Ab = -f.Ab, f.W += (u - 1 >> 1) * f.Db, f.Db = -f.Db, f.F != null && (f.J += (u - 1) * f.lb, f.lb = -f.lb);
      return 0;
    }
    function Mo(u, f, y, S) {
      if (S == null || 0 >= u || 0 >= f) return 2;
      if (y != null) {
        if (y.Da) {
          var L = y.cd, E = y.bd, F = -2 & y.v, j = -2 & y.j;
          if (0 > F || 0 > j || 0 >= L || 0 >= E || F + L > u || j + E > f) return 2;
          u = L, f = E;
        }
        if (y.da) {
          if (!de(u, f, L = [y.ib], E = [y.hb])) return 2;
          u = L[0], f = E[0];
        }
      }
      S.width = u, S.height = f;
      t: {
        var q = S.width, Y = S.height;
        if (u = S.S, 0 >= q || 0 >= Y || !(u >= Gl && 13 > u)) u = 2;
        else {
          if (0 >= S.Rd && S.sd == null) {
            F = E = L = f = 0;
            var lt = (j = q * Qd[u]) * Y;
            if (11 > u || (E = (Y + 1) / 2 * (f = (q + 1) / 2), u == 12 && (F = (L = q) * Y)), (Y = s(lt + 2 * E + F)) == null) {
              u = 1;
              break t;
            }
            S.sd = Y, 11 > u ? ((q = S.f.RGBA).eb = Y, q.fb = 0, q.A = j, q.size = lt) : ((q = S.f.kb).y = Y, q.O = 0, q.fa = j, q.Fd = lt, q.f = Y, q.N = 0 + lt, q.Ab = f, q.Cd = E, q.ea = Y, q.W = 0 + lt + E, q.Db = f, q.Ed = E, u == 12 && (q.F = Y, q.J = 0 + lt + 2 * E), q.Tc = F, q.lb = L);
          }
          if (f = 1, L = S.S, E = S.width, F = S.height, L >= Gl && 13 > L) if (11 > L) u = S.f.RGBA, f &= (j = Math.abs(u.A)) * (F - 1) + E <= u.size, f &= j >= E * Qd[L], f &= u.eb != null;
          else {
            u = S.f.kb, j = (E + 1) / 2, lt = (F + 1) / 2, q = Math.abs(u.fa), Y = Math.abs(u.Ab);
            var wt = Math.abs(u.Db), xt = Math.abs(u.lb), pt = xt * (F - 1) + E;
            f &= q * (F - 1) + E <= u.Fd, f &= Y * (lt - 1) + j <= u.Cd, f = (f &= wt * (lt - 1) + j <= u.Ed) & q >= E & Y >= j & wt >= j, f &= u.y != null, f &= u.f != null, f &= u.ea != null, L == 12 && (f &= xt >= E, f &= pt <= u.Tc, f &= u.F != null);
          }
          else f = 0;
          u = f ? 0 : 2;
        }
      }
      return u != 0 || y != null && y.fd && (u = Da(S)), u;
    }
    var Wn = 64, Ro = [0, 1, 3, 7, 15, 31, 63, 127, 255, 511, 1023, 2047, 4095, 8191, 16383, 32767, 65535, 131071, 262143, 524287, 1048575, 2097151, 4194303, 8388607, 16777215], Do = 24, jo = 32, ja = 8, pi = [0, 0, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7];
    qt("Predictor0", "PredictorAdd0"), O.Predictor0 = function() {
      return 4278190080;
    }, O.Predictor1 = function(u) {
      return u;
    }, O.Predictor2 = function(u, f, y) {
      return f[y + 0];
    }, O.Predictor3 = function(u, f, y) {
      return f[y + 1];
    }, O.Predictor4 = function(u, f, y) {
      return f[y - 1];
    }, O.Predictor5 = function(u, f, y) {
      return Ht(Ht(u, f[y + 1]), f[y + 0]);
    }, O.Predictor6 = function(u, f, y) {
      return Ht(u, f[y - 1]);
    }, O.Predictor7 = function(u, f, y) {
      return Ht(u, f[y + 0]);
    }, O.Predictor8 = function(u, f, y) {
      return Ht(f[y - 1], f[y + 0]);
    }, O.Predictor9 = function(u, f, y) {
      return Ht(f[y + 0], f[y + 1]);
    }, O.Predictor10 = function(u, f, y) {
      return Ht(Ht(u, f[y - 1]), Ht(f[y + 0], f[y + 1]));
    }, O.Predictor11 = function(u, f, y) {
      var S = f[y + 0];
      return 0 >= oe(S >> 24 & 255, u >> 24 & 255, (f = f[y - 1]) >> 24 & 255) + oe(S >> 16 & 255, u >> 16 & 255, f >> 16 & 255) + oe(S >> 8 & 255, u >> 8 & 255, f >> 8 & 255) + oe(255 & S, 255 & u, 255 & f) ? S : u;
    }, O.Predictor12 = function(u, f, y) {
      var S = f[y + 0];
      return (ee((u >> 24 & 255) + (S >> 24 & 255) - ((f = f[y - 1]) >> 24 & 255)) << 24 | ee((u >> 16 & 255) + (S >> 16 & 255) - (f >> 16 & 255)) << 16 | ee((u >> 8 & 255) + (S >> 8 & 255) - (f >> 8 & 255)) << 8 | ee((255 & u) + (255 & S) - (255 & f))) >>> 0;
    }, O.Predictor13 = function(u, f, y) {
      var S = f[y - 1];
      return (Qt((u = Ht(u, f[y + 0])) >> 24 & 255, S >> 24 & 255) << 24 | Qt(u >> 16 & 255, S >> 16 & 255) << 16 | Qt(u >> 8 & 255, S >> 8 & 255) << 8 | Qt(u >> 0 & 255, S >> 0 & 255)) >>> 0;
    };
    var Vc = O.PredictorAdd0;
    O.PredictorAdd1 = xe, qt("Predictor2", "PredictorAdd2"), qt("Predictor3", "PredictorAdd3"), qt("Predictor4", "PredictorAdd4"), qt("Predictor5", "PredictorAdd5"), qt("Predictor6", "PredictorAdd6"), qt("Predictor7", "PredictorAdd7"), qt("Predictor8", "PredictorAdd8"), qt("Predictor9", "PredictorAdd9"), qt("Predictor10", "PredictorAdd10"), qt("Predictor11", "PredictorAdd11"), qt("Predictor12", "PredictorAdd12"), qt("Predictor13", "PredictorAdd13");
    var Ba = O.PredictorAdd2;
    rt("ColorIndexInverseTransform", "MapARGB", "32b", function(u) {
      return u >> 8 & 255;
    }, function(u) {
      return u;
    }), rt("VP8LColorIndexInverseTransformAlpha", "MapAlpha", "8b", function(u) {
      return u;
    }, function(u) {
      return u >> 8 & 255;
    });
    var ql, Wi = O.ColorIndexInverseTransform, Bo = O.MapARGB, $l = O.VP8LColorIndexInverseTransformAlpha, zl = O.MapAlpha, hs = O.VP8LPredictorsAdd = [];
    hs.length = 16, (O.VP8LPredictors = []).length = 16, (O.VP8LPredictorsAdd_C = []).length = 16, (O.VP8LPredictors_C = []).length = 16;
    var Vs, gi, ci, fs, Wr, Hr, qo, Gr, _n, qa, hi, Hi, $o, Ul, $a, Ys, Ks, ds, Js, zo, Xs, ps, za, Gi, Vi, cn, hn, Nn, Mn = s(511), Vr = s(2041), Ua = s(225), Uo = s(767), Wl = 0, Yc = Vr, Hl = Ua, Ei = Uo, Yi = Mn, Gl = 0, Vl = 1, $d = 2, Yl = 3, Kl = 4, Kc = 5, zd = 6, Jc = 7, Xc = 8, Jl = 9, Zc = 10, Mm = [2, 3, 7], Rm = [3, 3, 11], Ud = [280, 256, 256, 256, 40], Dm = [0, 1, 1, 1, 0], jm = [17, 18, 0, 1, 2, 3, 4, 5, 16, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15], Bm = [24, 7, 23, 25, 40, 6, 39, 41, 22, 26, 38, 42, 56, 5, 55, 57, 21, 27, 54, 58, 37, 43, 72, 4, 71, 73, 20, 28, 53, 59, 70, 74, 36, 44, 88, 69, 75, 52, 60, 3, 87, 89, 19, 29, 86, 90, 35, 45, 68, 76, 85, 91, 51, 61, 104, 2, 103, 105, 18, 30, 102, 106, 34, 46, 84, 92, 67, 77, 101, 107, 50, 62, 120, 1, 119, 121, 83, 93, 17, 31, 100, 108, 66, 78, 118, 122, 33, 47, 117, 123, 49, 63, 99, 109, 82, 94, 0, 116, 124, 65, 79, 16, 32, 98, 110, 48, 115, 125, 81, 95, 64, 114, 126, 97, 111, 80, 113, 127, 96, 112], qm = [2954, 2956, 2958, 2962, 2970, 2986, 3018, 3082, 3212, 3468, 3980, 5004], $m = 8, Qc = [4, 5, 6, 7, 8, 9, 10, 10, 11, 12, 13, 14, 15, 16, 17, 17, 18, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 25, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 91, 93, 95, 96, 98, 100, 101, 102, 104, 106, 108, 110, 112, 114, 116, 118, 122, 124, 126, 128, 130, 132, 134, 136, 138, 140, 143, 145, 148, 151, 154, 157], th = [4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 60, 62, 64, 66, 68, 70, 72, 74, 76, 78, 80, 82, 84, 86, 88, 90, 92, 94, 96, 98, 100, 102, 104, 106, 108, 110, 112, 114, 116, 119, 122, 125, 128, 131, 134, 137, 140, 143, 146, 149, 152, 155, 158, 161, 164, 167, 170, 173, 177, 181, 185, 189, 193, 197, 201, 205, 209, 213, 217, 221, 225, 229, 234, 239, 245, 249, 254, 259, 264, 269, 274, 279, 284], Wa = null, zm = [[173, 148, 140, 0], [176, 155, 140, 135, 0], [180, 157, 141, 134, 130, 0], [254, 254, 243, 230, 196, 177, 153, 140, 133, 130, 129, 0]], Um = [0, 1, 4, 8, 5, 2, 3, 6, 9, 12, 13, 10, 7, 11, 14, 15], Wd = [-0, 1, -1, 2, -2, 3, 4, 6, -3, 5, -4, -5, -6, 7, -7, 8, -8, -9], Wm = [[[[128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128], [128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128], [128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128]], [[253, 136, 254, 255, 228, 219, 128, 128, 128, 128, 128], [189, 129, 242, 255, 227, 213, 255, 219, 128, 128, 128], [106, 126, 227, 252, 214, 209, 255, 255, 128, 128, 128]], [[1, 98, 248, 255, 236, 226, 255, 255, 128, 128, 128], [181, 133, 238, 254, 221, 234, 255, 154, 128, 128, 128], [78, 134, 202, 247, 198, 180, 255, 219, 128, 128, 128]], [[1, 185, 249, 255, 243, 255, 128, 128, 128, 128, 128], [184, 150, 247, 255, 236, 224, 128, 128, 128, 128, 128], [77, 110, 216, 255, 236, 230, 128, 128, 128, 128, 128]], [[1, 101, 251, 255, 241, 255, 128, 128, 128, 128, 128], [170, 139, 241, 252, 236, 209, 255, 255, 128, 128, 128], [37, 116, 196, 243, 228, 255, 255, 255, 128, 128, 128]], [[1, 204, 254, 255, 245, 255, 128, 128, 128, 128, 128], [207, 160, 250, 255, 238, 128, 128, 128, 128, 128, 128], [102, 103, 231, 255, 211, 171, 128, 128, 128, 128, 128]], [[1, 152, 252, 255, 240, 255, 128, 128, 128, 128, 128], [177, 135, 243, 255, 234, 225, 128, 128, 128, 128, 128], [80, 129, 211, 255, 194, 224, 128, 128, 128, 128, 128]], [[1, 1, 255, 128, 128, 128, 128, 128, 128, 128, 128], [246, 1, 255, 128, 128, 128, 128, 128, 128, 128, 128], [255, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128]]], [[[198, 35, 237, 223, 193, 187, 162, 160, 145, 155, 62], [131, 45, 198, 221, 172, 176, 220, 157, 252, 221, 1], [68, 47, 146, 208, 149, 167, 221, 162, 255, 223, 128]], [[1, 149, 241, 255, 221, 224, 255, 255, 128, 128, 128], [184, 141, 234, 253, 222, 220, 255, 199, 128, 128, 128], [81, 99, 181, 242, 176, 190, 249, 202, 255, 255, 128]], [[1, 129, 232, 253, 214, 197, 242, 196, 255, 255, 128], [99, 121, 210, 250, 201, 198, 255, 202, 128, 128, 128], [23, 91, 163, 242, 170, 187, 247, 210, 255, 255, 128]], [[1, 200, 246, 255, 234, 255, 128, 128, 128, 128, 128], [109, 178, 241, 255, 231, 245, 255, 255, 128, 128, 128], [44, 130, 201, 253, 205, 192, 255, 255, 128, 128, 128]], [[1, 132, 239, 251, 219, 209, 255, 165, 128, 128, 128], [94, 136, 225, 251, 218, 190, 255, 255, 128, 128, 128], [22, 100, 174, 245, 186, 161, 255, 199, 128, 128, 128]], [[1, 182, 249, 255, 232, 235, 128, 128, 128, 128, 128], [124, 143, 241, 255, 227, 234, 128, 128, 128, 128, 128], [35, 77, 181, 251, 193, 211, 255, 205, 128, 128, 128]], [[1, 157, 247, 255, 236, 231, 255, 255, 128, 128, 128], [121, 141, 235, 255, 225, 227, 255, 255, 128, 128, 128], [45, 99, 188, 251, 195, 217, 255, 224, 128, 128, 128]], [[1, 1, 251, 255, 213, 255, 128, 128, 128, 128, 128], [203, 1, 248, 255, 255, 128, 128, 128, 128, 128, 128], [137, 1, 177, 255, 224, 255, 128, 128, 128, 128, 128]]], [[[253, 9, 248, 251, 207, 208, 255, 192, 128, 128, 128], [175, 13, 224, 243, 193, 185, 249, 198, 255, 255, 128], [73, 17, 171, 221, 161, 179, 236, 167, 255, 234, 128]], [[1, 95, 247, 253, 212, 183, 255, 255, 128, 128, 128], [239, 90, 244, 250, 211, 209, 255, 255, 128, 128, 128], [155, 77, 195, 248, 188, 195, 255, 255, 128, 128, 128]], [[1, 24, 239, 251, 218, 219, 255, 205, 128, 128, 128], [201, 51, 219, 255, 196, 186, 128, 128, 128, 128, 128], [69, 46, 190, 239, 201, 218, 255, 228, 128, 128, 128]], [[1, 191, 251, 255, 255, 128, 128, 128, 128, 128, 128], [223, 165, 249, 255, 213, 255, 128, 128, 128, 128, 128], [141, 124, 248, 255, 255, 128, 128, 128, 128, 128, 128]], [[1, 16, 248, 255, 255, 128, 128, 128, 128, 128, 128], [190, 36, 230, 255, 236, 255, 128, 128, 128, 128, 128], [149, 1, 255, 128, 128, 128, 128, 128, 128, 128, 128]], [[1, 226, 255, 128, 128, 128, 128, 128, 128, 128, 128], [247, 192, 255, 128, 128, 128, 128, 128, 128, 128, 128], [240, 128, 255, 128, 128, 128, 128, 128, 128, 128, 128]], [[1, 134, 252, 255, 255, 128, 128, 128, 128, 128, 128], [213, 62, 250, 255, 255, 128, 128, 128, 128, 128, 128], [55, 93, 255, 128, 128, 128, 128, 128, 128, 128, 128]], [[128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128], [128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128], [128, 128, 128, 128, 128, 128, 128, 128, 128, 128, 128]]], [[[202, 24, 213, 235, 186, 191, 220, 160, 240, 175, 255], [126, 38, 182, 232, 169, 184, 228, 174, 255, 187, 128], [61, 46, 138, 219, 151, 178, 240, 170, 255, 216, 128]], [[1, 112, 230, 250, 199, 191, 247, 159, 255, 255, 128], [166, 109, 228, 252, 211, 215, 255, 174, 128, 128, 128], [39, 77, 162, 232, 172, 180, 245, 178, 255, 255, 128]], [[1, 52, 220, 246, 198, 199, 249, 220, 255, 255, 128], [124, 74, 191, 243, 183, 193, 250, 221, 255, 255, 128], [24, 71, 130, 219, 154, 170, 243, 182, 255, 255, 128]], [[1, 182, 225, 249, 219, 240, 255, 224, 128, 128, 128], [149, 150, 226, 252, 216, 205, 255, 171, 128, 128, 128], [28, 108, 170, 242, 183, 194, 254, 223, 255, 255, 128]], [[1, 81, 230, 252, 204, 203, 255, 192, 128, 128, 128], [123, 102, 209, 247, 188, 196, 255, 233, 128, 128, 128], [20, 95, 153, 243, 164, 173, 255, 203, 128, 128, 128]], [[1, 222, 248, 255, 216, 213, 128, 128, 128, 128, 128], [168, 175, 246, 252, 235, 205, 255, 255, 128, 128, 128], [47, 116, 215, 255, 211, 212, 255, 255, 128, 128, 128]], [[1, 121, 236, 253, 212, 214, 255, 255, 128, 128, 128], [141, 84, 213, 252, 201, 202, 255, 219, 128, 128, 128], [42, 80, 160, 240, 162, 185, 255, 205, 128, 128, 128]], [[1, 1, 255, 128, 128, 128, 128, 128, 128, 128, 128], [244, 1, 255, 128, 128, 128, 128, 128, 128, 128, 128], [238, 1, 255, 128, 128, 128, 128, 128, 128, 128, 128]]]], Hm = [[[231, 120, 48, 89, 115, 113, 120, 152, 112], [152, 179, 64, 126, 170, 118, 46, 70, 95], [175, 69, 143, 80, 85, 82, 72, 155, 103], [56, 58, 10, 171, 218, 189, 17, 13, 152], [114, 26, 17, 163, 44, 195, 21, 10, 173], [121, 24, 80, 195, 26, 62, 44, 64, 85], [144, 71, 10, 38, 171, 213, 144, 34, 26], [170, 46, 55, 19, 136, 160, 33, 206, 71], [63, 20, 8, 114, 114, 208, 12, 9, 226], [81, 40, 11, 96, 182, 84, 29, 16, 36]], [[134, 183, 89, 137, 98, 101, 106, 165, 148], [72, 187, 100, 130, 157, 111, 32, 75, 80], [66, 102, 167, 99, 74, 62, 40, 234, 128], [41, 53, 9, 178, 241, 141, 26, 8, 107], [74, 43, 26, 146, 73, 166, 49, 23, 157], [65, 38, 105, 160, 51, 52, 31, 115, 128], [104, 79, 12, 27, 217, 255, 87, 17, 7], [87, 68, 71, 44, 114, 51, 15, 186, 23], [47, 41, 14, 110, 182, 183, 21, 17, 194], [66, 45, 25, 102, 197, 189, 23, 18, 22]], [[88, 88, 147, 150, 42, 46, 45, 196, 205], [43, 97, 183, 117, 85, 38, 35, 179, 61], [39, 53, 200, 87, 26, 21, 43, 232, 171], [56, 34, 51, 104, 114, 102, 29, 93, 77], [39, 28, 85, 171, 58, 165, 90, 98, 64], [34, 22, 116, 206, 23, 34, 43, 166, 73], [107, 54, 32, 26, 51, 1, 81, 43, 31], [68, 25, 106, 22, 64, 171, 36, 225, 114], [34, 19, 21, 102, 132, 188, 16, 76, 124], [62, 18, 78, 95, 85, 57, 50, 48, 51]], [[193, 101, 35, 159, 215, 111, 89, 46, 111], [60, 148, 31, 172, 219, 228, 21, 18, 111], [112, 113, 77, 85, 179, 255, 38, 120, 114], [40, 42, 1, 196, 245, 209, 10, 25, 109], [88, 43, 29, 140, 166, 213, 37, 43, 154], [61, 63, 30, 155, 67, 45, 68, 1, 209], [100, 80, 8, 43, 154, 1, 51, 26, 71], [142, 78, 78, 16, 255, 128, 34, 197, 171], [41, 40, 5, 102, 211, 183, 4, 1, 221], [51, 50, 17, 168, 209, 192, 23, 25, 82]], [[138, 31, 36, 171, 27, 166, 38, 44, 229], [67, 87, 58, 169, 82, 115, 26, 59, 179], [63, 59, 90, 180, 59, 166, 93, 73, 154], [40, 40, 21, 116, 143, 209, 34, 39, 175], [47, 15, 16, 183, 34, 223, 49, 45, 183], [46, 17, 33, 183, 6, 98, 15, 32, 183], [57, 46, 22, 24, 128, 1, 54, 17, 37], [65, 32, 73, 115, 28, 128, 23, 128, 205], [40, 3, 9, 115, 51, 192, 18, 6, 223], [87, 37, 9, 115, 59, 77, 64, 21, 47]], [[104, 55, 44, 218, 9, 54, 53, 130, 226], [64, 90, 70, 205, 40, 41, 23, 26, 57], [54, 57, 112, 184, 5, 41, 38, 166, 213], [30, 34, 26, 133, 152, 116, 10, 32, 134], [39, 19, 53, 221, 26, 114, 32, 73, 255], [31, 9, 65, 234, 2, 15, 1, 118, 73], [75, 32, 12, 51, 192, 255, 160, 43, 51], [88, 31, 35, 67, 102, 85, 55, 186, 85], [56, 21, 23, 111, 59, 205, 45, 37, 192], [55, 38, 70, 124, 73, 102, 1, 34, 98]], [[125, 98, 42, 88, 104, 85, 117, 175, 82], [95, 84, 53, 89, 128, 100, 113, 101, 45], [75, 79, 123, 47, 51, 128, 81, 171, 1], [57, 17, 5, 71, 102, 57, 53, 41, 49], [38, 33, 13, 121, 57, 73, 26, 1, 85], [41, 10, 67, 138, 77, 110, 90, 47, 114], [115, 21, 2, 10, 102, 255, 166, 23, 6], [101, 29, 16, 10, 85, 128, 101, 196, 26], [57, 18, 10, 102, 102, 213, 34, 20, 43], [117, 20, 15, 36, 163, 128, 68, 1, 26]], [[102, 61, 71, 37, 34, 53, 31, 243, 192], [69, 60, 71, 38, 73, 119, 28, 222, 37], [68, 45, 128, 34, 1, 47, 11, 245, 171], [62, 17, 19, 70, 146, 85, 55, 62, 70], [37, 43, 37, 154, 100, 163, 85, 160, 1], [63, 9, 92, 136, 28, 64, 32, 201, 85], [75, 15, 9, 9, 64, 255, 184, 119, 16], [86, 6, 28, 5, 64, 255, 25, 248, 1], [56, 8, 17, 132, 137, 255, 55, 116, 128], [58, 15, 20, 82, 135, 57, 26, 121, 40]], [[164, 50, 31, 137, 154, 133, 25, 35, 218], [51, 103, 44, 131, 131, 123, 31, 6, 158], [86, 40, 64, 135, 148, 224, 45, 183, 128], [22, 26, 17, 131, 240, 154, 14, 1, 209], [45, 16, 21, 91, 64, 222, 7, 1, 197], [56, 21, 39, 155, 60, 138, 23, 102, 213], [83, 12, 13, 54, 192, 255, 68, 47, 28], [85, 26, 85, 85, 128, 128, 32, 146, 171], [18, 11, 7, 63, 144, 171, 4, 4, 246], [35, 27, 10, 146, 174, 171, 12, 26, 128]], [[190, 80, 35, 99, 180, 80, 126, 54, 45], [85, 126, 47, 87, 176, 51, 41, 20, 32], [101, 75, 128, 139, 118, 146, 116, 128, 85], [56, 41, 15, 176, 236, 85, 37, 9, 62], [71, 30, 17, 119, 118, 255, 17, 18, 138], [101, 38, 60, 138, 55, 70, 43, 26, 142], [146, 36, 19, 30, 171, 255, 97, 27, 20], [138, 45, 61, 62, 219, 1, 81, 188, 64], [32, 41, 20, 117, 151, 142, 20, 21, 163], [112, 19, 12, 61, 195, 128, 48, 4, 24]]], Gm = [[[[255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[176, 246, 255, 255, 255, 255, 255, 255, 255, 255, 255], [223, 241, 252, 255, 255, 255, 255, 255, 255, 255, 255], [249, 253, 253, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 244, 252, 255, 255, 255, 255, 255, 255, 255, 255], [234, 254, 254, 255, 255, 255, 255, 255, 255, 255, 255], [253, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 246, 254, 255, 255, 255, 255, 255, 255, 255, 255], [239, 253, 254, 255, 255, 255, 255, 255, 255, 255, 255], [254, 255, 254, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 248, 254, 255, 255, 255, 255, 255, 255, 255, 255], [251, 255, 254, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 253, 254, 255, 255, 255, 255, 255, 255, 255, 255], [251, 254, 254, 255, 255, 255, 255, 255, 255, 255, 255], [254, 255, 254, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 254, 253, 255, 254, 255, 255, 255, 255, 255, 255], [250, 255, 254, 255, 254, 255, 255, 255, 255, 255, 255], [254, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]]], [[[217, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [225, 252, 241, 253, 255, 255, 254, 255, 255, 255, 255], [234, 250, 241, 250, 253, 255, 253, 254, 255, 255, 255]], [[255, 254, 255, 255, 255, 255, 255, 255, 255, 255, 255], [223, 254, 254, 255, 255, 255, 255, 255, 255, 255, 255], [238, 253, 254, 254, 255, 255, 255, 255, 255, 255, 255]], [[255, 248, 254, 255, 255, 255, 255, 255, 255, 255, 255], [249, 254, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 253, 255, 255, 255, 255, 255, 255, 255, 255, 255], [247, 254, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 253, 254, 255, 255, 255, 255, 255, 255, 255, 255], [252, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 254, 254, 255, 255, 255, 255, 255, 255, 255, 255], [253, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 254, 253, 255, 255, 255, 255, 255, 255, 255, 255], [250, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [254, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]]], [[[186, 251, 250, 255, 255, 255, 255, 255, 255, 255, 255], [234, 251, 244, 254, 255, 255, 255, 255, 255, 255, 255], [251, 251, 243, 253, 254, 255, 254, 255, 255, 255, 255]], [[255, 253, 254, 255, 255, 255, 255, 255, 255, 255, 255], [236, 253, 254, 255, 255, 255, 255, 255, 255, 255, 255], [251, 253, 253, 254, 254, 255, 255, 255, 255, 255, 255]], [[255, 254, 254, 255, 255, 255, 255, 255, 255, 255, 255], [254, 254, 254, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 254, 255, 255, 255, 255, 255, 255, 255, 255, 255], [254, 254, 255, 255, 255, 255, 255, 255, 255, 255, 255], [254, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [254, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]]], [[[248, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [250, 254, 252, 254, 255, 255, 255, 255, 255, 255, 255], [248, 254, 249, 253, 255, 255, 255, 255, 255, 255, 255]], [[255, 253, 253, 255, 255, 255, 255, 255, 255, 255, 255], [246, 253, 253, 255, 255, 255, 255, 255, 255, 255, 255], [252, 254, 251, 254, 254, 255, 255, 255, 255, 255, 255]], [[255, 254, 252, 255, 255, 255, 255, 255, 255, 255, 255], [248, 254, 253, 255, 255, 255, 255, 255, 255, 255, 255], [253, 255, 254, 254, 255, 255, 255, 255, 255, 255, 255]], [[255, 251, 254, 255, 255, 255, 255, 255, 255, 255, 255], [245, 251, 254, 255, 255, 255, 255, 255, 255, 255, 255], [253, 253, 254, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 251, 253, 255, 255, 255, 255, 255, 255, 255, 255], [252, 253, 254, 255, 255, 255, 255, 255, 255, 255, 255], [255, 254, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 252, 255, 255, 255, 255, 255, 255, 255, 255, 255], [249, 255, 254, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 254, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 255, 253, 255, 255, 255, 255, 255, 255, 255, 255], [250, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]], [[255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [254, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255], [255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255]]]], Vm = [0, 1, 2, 3, 6, 4, 5, 6, 6, 6, 6, 6, 6, 6, 6, 7, 0], gs = [], or = [], Yr = [], Ym = 1, Hd = 2, ms = [], Ki = [];
    Pt("UpsampleRgbLinePair", Be, 3), Pt("UpsampleBgrLinePair", yn, 3), Pt("UpsampleRgbaLinePair", sr, 4), Pt("UpsampleBgraLinePair", jn, 4), Pt("UpsampleArgbLinePair", Xn, 4), Pt("UpsampleRgba4444LinePair", In, 2), Pt("UpsampleRgb565LinePair", xn, 2);
    var Km = O.UpsampleRgbLinePair, Jm = O.UpsampleBgrLinePair, Gd = O.UpsampleRgbaLinePair, Vd = O.UpsampleBgraLinePair, Yd = O.UpsampleArgbLinePair, Kd = O.UpsampleRgba4444LinePair, Xm = O.UpsampleRgb565LinePair, Xl = 16, Zl = 1 << Xl - 1, Ha = -227, eh = 482, Jd = 6, Zm = (256 << Jd) - 1, Xd = 0, Qm = s(256), t2 = s(256), e2 = s(256), n2 = s(256), i2 = s(eh - Ha), r2 = s(eh - Ha);
    Ar("YuvToRgbRow", Be, 3), Ar("YuvToBgrRow", yn, 3), Ar("YuvToRgbaRow", sr, 4), Ar("YuvToBgraRow", jn, 4), Ar("YuvToArgbRow", Xn, 4), Ar("YuvToRgba4444Row", In, 2), Ar("YuvToRgb565Row", xn, 2);
    var Zd = [0, 4, 8, 12, 128, 132, 136, 140, 256, 260, 264, 268, 384, 388, 392, 396], Ql = [0, 2, 8], s2 = [8, 7, 6, 4, 4, 2, 2, 2, 1, 1, 1, 1], o2 = 1;
    this.WebPDecodeRGBA = function(u, f, y, S, L) {
      var E = Vl, F = new Eo(), j = new Yn();
      F.ba = j, j.S = E, j.width = [j.width], j.height = [j.height];
      var q = j.width, Y = j.height, lt = new Dn();
      if (lt == null || u == null) var wt = 2;
      else t(lt != null), wt = Fo(u, f, y, lt.width, lt.height, lt.Pd, lt.Qd, lt.format, null);
      if (wt != 0 ? q = 0 : (q != null && (q[0] = lt.width[0]), Y != null && (Y[0] = lt.height[0]), q = 1), q) {
        j.width = j.width[0], j.height = j.height[0], S != null && (S[0] = j.width), L != null && (L[0] = j.height);
        t: {
          if (S = new $r(), (L = new Ta()).data = u, L.w = f, L.ha = y, L.kd = 1, f = [0], t(L != null), ((u = Fo(L.data, L.w, L.ha, null, null, null, f, null, L)) == 0 || u == 7) && f[0] && (u = 4), (f = u) == 0) {
            if (t(F != null), S.data = L.data, S.w = L.w + L.offset, S.ha = L.ha - L.offset, S.put = ki, S.ac = Ze, S.bc = Bi, S.ma = F, L.xa) {
              if ((u = li()) == null) {
                F = 1;
                break t;
              }
              if (function(xt, pt) {
                var Ot = [0], _t = [0], ut = [0];
                e: for (; ; ) {
                  if (xt == null) return 0;
                  if (pt == null) return xt.a = 2, 0;
                  if (xt.l = pt, xt.a = 0, Q(xt.m, pt.data, pt.w, pt.ha), !ge(xt.m, Ot, _t, ut)) {
                    xt.a = 3;
                    break e;
                  }
                  if (xt.xb = Hd, pt.width = Ot[0], pt.height = _t[0], !Ci(Ot[0], _t[0], 1, xt, null)) break e;
                  return 1;
                }
                return t(xt.a != 0), 0;
              }(u, S)) {
                if (S = (f = Mo(S.width, S.height, F.Oa, F.ba)) == 0) {
                  e: {
                    S = u;
                    n: for (; ; ) {
                      if (S == null) {
                        S = 0;
                        break e;
                      }
                      if (t(S.s.yc != null), t(S.s.Ya != null), t(0 < S.s.Wb), t((y = S.l) != null), t((L = y.ma) != null), S.xb != 0) {
                        if (S.ca = L.ba, S.tb = L.tb, t(S.ca != null), !Ra(L.Oa, y, Yl)) {
                          S.a = 2;
                          break n;
                        }
                        if (!zi(S, y.width) || y.da) break n;
                        if ((y.da || Me(S.ca.S)) && bt(), 11 > S.ca.S || (alert("todo:WebPInitConvertARGBToYUV"), S.ca.f.kb.F != null && bt()), S.Pb && 0 < S.s.ua && S.s.vb.X == null && !he(S.s.vb, S.s.Wa.Xa)) {
                          S.a = 1;
                          break n;
                        }
                        S.xb = 0;
                      }
                      if (!qi(S, S.V, S.Ba, S.c, S.i, y.o, jr)) break n;
                      L.Dc = S.Ma, S = 1;
                      break e;
                    }
                    t(S.a != 0), S = 0;
                  }
                  S = !S;
                }
                S && (f = u.a);
              } else f = u.a;
            } else {
              if ((u = new Sa()) == null) {
                F = 1;
                break t;
              }
              if (u.Fa = L.na, u.P = L.P, u.qc = L.Sa, ko(u, S)) {
                if ((f = Mo(S.width, S.height, F.Oa, F.ba)) == 0) {
                  if (u.Aa = 0, y = F.Oa, t((L = u) != null), y != null) {
                    if (0 < (q = 0 > (q = y.Md) ? 0 : 100 < q ? 255 : 255 * q / 100)) {
                      for (Y = lt = 0; 4 > Y; ++Y) 12 > (wt = L.pb[Y]).lc && (wt.ia = q * s2[0 > wt.lc ? 0 : wt.lc] >> 3), lt |= wt.ia;
                      lt && (alert("todo:VP8InitRandom"), L.ia = 1);
                    }
                    L.Ga = y.Id, 100 < L.Ga ? L.Ga = 100 : 0 > L.Ga && (L.Ga = 0);
                  }
                  No(u, S) || (f = u.a);
                }
              } else f = u.a;
            }
            f == 0 && F.Oa != null && F.Oa.fd && (f = Da(F.ba));
          }
          F = f;
        }
        E = F != 0 ? null : 11 > E ? j.f.RGBA.eb : j.f.kb.y;
      } else E = null;
      return E;
    };
    var Qd = [3, 4, 3, 4, 4, 2, 2, 4, 4, 4, 2, 1, 1];
  };
  function h(O, $) {
    for (var z = "", A = 0; A < 4; A++) z += String.fromCharCode(O[$++]);
    return z;
  }
  function c(O, $) {
    return (O[$ + 0] << 0 | O[$ + 1] << 8 | O[$ + 2] << 16) >>> 0;
  }
  function d(O, $) {
    return (O[$ + 0] << 0 | O[$ + 1] << 8 | O[$ + 2] << 16 | O[$ + 3] << 24) >>> 0;
  }
  new l();
  var g = [0], p = [0], b = [], x = new l(), N = e, v = function(O, $) {
    var z = {}, A = 0, _ = !1, I = 0, M = 0;
    if (z.frames = [], !/** @license
       * Copyright (c) 2017 Dominik Homberger
      Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
      The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
      THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
      https://webpjs.appspot.com
      WebPRiffParser dominikhlbg@gmail.com
      */
    function(B, V, J, nt) {
      for (var gt = 0; gt < nt; gt++) if (B[V + gt] != J.charCodeAt(gt)) return !0;
      return !1;
    }(O, $, "RIFF", 4)) {
      var st, W;
      for (d(O, $ += 4), $ += 8; $ < O.length; ) {
        var U = h(O, $), Q = d(O, $ += 4);
        $ += 4;
        var Z = Q + (1 & Q);
        switch (U) {
          case "VP8 ":
          case "VP8L":
            z.frames[A] === void 0 && (z.frames[A] = {}), (P = z.frames[A]).src_off = _ ? M : $ - 8, P.src_size = I + Q + 8, A++, _ && (_ = !1, I = 0, M = 0);
            break;
          case "VP8X":
            (P = z.header = {}).feature_flags = O[$];
            var ct = $ + 4;
            P.canvas_width = 1 + c(O, ct), ct += 3, P.canvas_height = 1 + c(O, ct), ct += 3;
            break;
          case "ALPH":
            _ = !0, I = Z + 8, M = $ - 8;
            break;
          case "ANIM":
            (P = z.header).bgcolor = d(O, $), ct = $ + 4, P.loop_count = (st = O)[(W = ct) + 0] << 0 | st[W + 1] << 8, ct += 2;
            break;
          case "ANMF":
            var St, P;
            (P = z.frames[A] = {}).offset_x = 2 * c(O, $), $ += 3, P.offset_y = 2 * c(O, $), $ += 3, P.width = 1 + c(O, $), $ += 3, P.height = 1 + c(O, $), $ += 3, P.duration = c(O, $), $ += 3, St = O[$++], P.dispose = 1 & St, P.blend = St >> 1 & 1;
        }
        U != "ANMF" && ($ += Z);
      }
      return z;
    }
  }(N, 0);
  v.response = N, v.rgbaoutput = !0, v.dataurl = !1;
  var w = v.header ? v.header : null, k = v.frames ? v.frames : null;
  if (w) {
    w.loop_counter = w.loop_count, g = [w.canvas_height], p = [w.canvas_width];
    for (var T = 0; T < k.length && k[T].blend != 0; T++) ;
  }
  var D = k[0], G = x.WebPDecodeRGBA(N, D.src_off, D.src_size, p, g);
  D.rgba = G, D.imgwidth = p[0], D.imgheight = g[0];
  for (var R = 0; R < p[0] * g[0] * 4; R++) b[R] = G[R];
  return this.width = p, this.height = g, this.data = b, this;
}
(function(e) {
  var t = function() {
    return typeof af == "function";
  }, n = function(g, p, b, x) {
    var N = 4, v = o;
    switch (x) {
      case e.image_compression.FAST:
        N = 1, v = s;
        break;
      case e.image_compression.MEDIUM:
        N = 6, v = a;
        break;
      case e.image_compression.SLOW:
        N = 9, v = l;
    }
    g = i(g, p, b, v);
    var w = af(g, { level: N });
    return e.__addimage__.arrayBufferToBinaryString(w);
  }, i = function(g, p, b, x) {
    for (var N, v, w, k = g.length / p, T = new Uint8Array(g.length + k), D = c(), G = 0; G < k; G += 1) {
      if (w = G * p, N = g.subarray(w, w + p), x) T.set(x(N, b, v), w + G);
      else {
        for (var R, O = D.length, $ = []; R < O; R += 1) $[R] = D[R](N, b, v);
        var z = d($.concat());
        T.set($[z], w + G);
      }
      v = N;
    }
    return T;
  }, r = function(g) {
    var p = Array.apply([], g);
    return p.unshift(0), p;
  }, s = function(g, p) {
    var b, x = [], N = g.length;
    x[0] = 1;
    for (var v = 0; v < N; v += 1) b = g[v - p] || 0, x[v + 1] = g[v] - b + 256 & 255;
    return x;
  }, o = function(g, p, b) {
    var x, N = [], v = g.length;
    N[0] = 2;
    for (var w = 0; w < v; w += 1) x = b && b[w] || 0, N[w + 1] = g[w] - x + 256 & 255;
    return N;
  }, a = function(g, p, b) {
    var x, N, v = [], w = g.length;
    v[0] = 3;
    for (var k = 0; k < w; k += 1) x = g[k - p] || 0, N = b && b[k] || 0, v[k + 1] = g[k] + 256 - (x + N >>> 1) & 255;
    return v;
  }, l = function(g, p, b) {
    var x, N, v, w, k = [], T = g.length;
    k[0] = 4;
    for (var D = 0; D < T; D += 1) x = g[D - p] || 0, N = b && b[D] || 0, v = b && b[D - p] || 0, w = h(x, N, v), k[D + 1] = g[D] - w + 256 & 255;
    return k;
  }, h = function(g, p, b) {
    if (g === p && p === b) return g;
    var x = Math.abs(p - b), N = Math.abs(g - b), v = Math.abs(g + p - b - b);
    return x <= N && x <= v ? g : N <= v ? p : b;
  }, c = function() {
    return [r, s, o, a, l];
  }, d = function(g) {
    var p = g.map(function(b) {
      return b.reduce(function(x, N) {
        return x + Math.abs(N);
      }, 0);
    });
    return p.indexOf(Math.min.apply(null, p));
  };
  e.processPNG = function(g, p, b, x) {
    var N, v, w, k, T, D, G, R, O, $, z, A, _, I, M, st = this.decode.FLATE_DECODE, W = "";
    if (this.__addimage__.isArrayBuffer(g) && (g = new Uint8Array(g)), this.__addimage__.isArrayBufferView(g)) {
      if (g = (w = new Cv(g)).imgData, v = w.bits, N = w.colorSpace, T = w.colors, [4, 6].indexOf(w.colorType) !== -1) {
        if (w.bits === 8) {
          O = (R = w.pixelBitlength == 32 ? new Uint32Array(w.decodePixels().buffer) : w.pixelBitlength == 16 ? new Uint16Array(w.decodePixels().buffer) : new Uint8Array(w.decodePixels().buffer)).length, z = new Uint8Array(O * w.colors), $ = new Uint8Array(O);
          var U, Q = w.pixelBitlength - w.bits;
          for (I = 0, M = 0; I < O; I++) {
            for (_ = R[I], U = 0; U < Q; ) z[M++] = _ >>> U & 255, U += w.bits;
            $[I] = _ >>> U & 255;
          }
        }
        if (w.bits === 16) {
          O = (R = new Uint32Array(w.decodePixels().buffer)).length, z = new Uint8Array(O * (32 / w.pixelBitlength) * w.colors), $ = new Uint8Array(O * (32 / w.pixelBitlength)), A = w.colors > 1, I = 0, M = 0;
          for (var Z = 0; I < O; ) _ = R[I++], z[M++] = _ >>> 0 & 255, A && (z[M++] = _ >>> 16 & 255, _ = R[I++], z[M++] = _ >>> 0 & 255), $[Z++] = _ >>> 16 & 255;
          v = 8;
        }
        x !== e.image_compression.NONE && t() ? (g = n(z, w.width * w.colors, w.colors, x), G = n($, w.width, 1, x)) : (g = z, G = $, st = void 0);
      }
      if (w.colorType === 3 && (N = this.color_spaces.INDEXED, D = w.palette, w.transparency.indexed)) {
        var ct = w.transparency.indexed, St = 0;
        for (I = 0, O = ct.length; I < O; ++I) St += ct[I];
        if ((St /= 255) === O - 1 && ct.indexOf(0) !== -1) k = [ct.indexOf(0)];
        else if (St !== O) {
          for (R = w.decodePixels(), $ = new Uint8Array(R.length), I = 0, O = R.length; I < O; I++) $[I] = ct[R[I]];
          G = n($, w.width, 1);
        }
      }
      var P = function(B) {
        var V;
        switch (B) {
          case e.image_compression.FAST:
            V = 11;
            break;
          case e.image_compression.MEDIUM:
            V = 13;
            break;
          case e.image_compression.SLOW:
            V = 14;
            break;
          default:
            V = 12;
        }
        return V;
      }(x);
      return st === this.decode.FLATE_DECODE && (W = "/Predictor " + P + " "), W += "/Colors " + T + " /BitsPerComponent " + v + " /Columns " + w.width, (this.__addimage__.isArrayBuffer(g) || this.__addimage__.isArrayBufferView(g)) && (g = this.__addimage__.arrayBufferToBinaryString(g)), (G && this.__addimage__.isArrayBuffer(G) || this.__addimage__.isArrayBufferView(G)) && (G = this.__addimage__.arrayBufferToBinaryString(G)), { alias: b, data: g, index: p, filter: st, decodeParameters: W, transparency: k, palette: D, sMask: G, predictor: P, width: w.width, height: w.height, bitsPerComponent: v, colorSpace: N };
    }
  };
})(ye.API), function(e) {
  e.processGIF89A = function(t, n, i, r) {
    var s = new Tv(t), o = s.width, a = s.height, l = [];
    s.decodeAndBlitFrameRGBA(0, l);
    var h = { data: l, width: o, height: a }, c = new Nh(100).encode(h, 100);
    return e.processJPEG.call(this, c, n, i, r);
  }, e.processGIF87A = e.processGIF89A;
}(ye.API), ur.prototype.parseHeader = function() {
  if (this.fileSize = this.datav.getUint32(this.pos, !0), this.pos += 4, this.reserved = this.datav.getUint32(this.pos, !0), this.pos += 4, this.offset = this.datav.getUint32(this.pos, !0), this.pos += 4, this.headerSize = this.datav.getUint32(this.pos, !0), this.pos += 4, this.width = this.datav.getUint32(this.pos, !0), this.pos += 4, this.height = this.datav.getInt32(this.pos, !0), this.pos += 4, this.planes = this.datav.getUint16(this.pos, !0), this.pos += 2, this.bitPP = this.datav.getUint16(this.pos, !0), this.pos += 2, this.compress = this.datav.getUint32(this.pos, !0), this.pos += 4, this.rawSize = this.datav.getUint32(this.pos, !0), this.pos += 4, this.hr = this.datav.getUint32(this.pos, !0), this.pos += 4, this.vr = this.datav.getUint32(this.pos, !0), this.pos += 4, this.colors = this.datav.getUint32(this.pos, !0), this.pos += 4, this.importantColors = this.datav.getUint32(this.pos, !0), this.pos += 4, this.bitPP === 16 && this.is_with_alpha && (this.bitPP = 15), this.bitPP < 15) {
    var e = this.colors === 0 ? 1 << this.bitPP : this.colors;
    this.palette = new Array(e);
    for (var t = 0; t < e; t++) {
      var n = this.datav.getUint8(this.pos++, !0), i = this.datav.getUint8(this.pos++, !0), r = this.datav.getUint8(this.pos++, !0), s = this.datav.getUint8(this.pos++, !0);
      this.palette[t] = { red: r, green: i, blue: n, quad: s };
    }
  }
  this.height < 0 && (this.height *= -1, this.bottom_up = !1);
}, ur.prototype.parseBGR = function() {
  this.pos = this.offset;
  try {
    var e = "bit" + this.bitPP, t = this.width * this.height * 4;
    this.data = new Uint8Array(t), this[e]();
  } catch (n) {
    un.log("bit decode error:" + n);
  }
}, ur.prototype.bit1 = function() {
  var e, t = Math.ceil(this.width / 8), n = t % 4;
  for (e = this.height - 1; e >= 0; e--) {
    for (var i = this.bottom_up ? e : this.height - 1 - e, r = 0; r < t; r++) for (var s = this.datav.getUint8(this.pos++, !0), o = i * this.width * 4 + 8 * r * 4, a = 0; a < 8 && 8 * r + a < this.width; a++) {
      var l = this.palette[s >> 7 - a & 1];
      this.data[o + 4 * a] = l.blue, this.data[o + 4 * a + 1] = l.green, this.data[o + 4 * a + 2] = l.red, this.data[o + 4 * a + 3] = 255;
    }
    n !== 0 && (this.pos += 4 - n);
  }
}, ur.prototype.bit4 = function() {
  for (var e = Math.ceil(this.width / 2), t = e % 4, n = this.height - 1; n >= 0; n--) {
    for (var i = this.bottom_up ? n : this.height - 1 - n, r = 0; r < e; r++) {
      var s = this.datav.getUint8(this.pos++, !0), o = i * this.width * 4 + 2 * r * 4, a = s >> 4, l = 15 & s, h = this.palette[a];
      if (this.data[o] = h.blue, this.data[o + 1] = h.green, this.data[o + 2] = h.red, this.data[o + 3] = 255, 2 * r + 1 >= this.width) break;
      h = this.palette[l], this.data[o + 4] = h.blue, this.data[o + 4 + 1] = h.green, this.data[o + 4 + 2] = h.red, this.data[o + 4 + 3] = 255;
    }
    t !== 0 && (this.pos += 4 - t);
  }
}, ur.prototype.bit8 = function() {
  for (var e = this.width % 4, t = this.height - 1; t >= 0; t--) {
    for (var n = this.bottom_up ? t : this.height - 1 - t, i = 0; i < this.width; i++) {
      var r = this.datav.getUint8(this.pos++, !0), s = n * this.width * 4 + 4 * i;
      if (r < this.palette.length) {
        var o = this.palette[r];
        this.data[s] = o.red, this.data[s + 1] = o.green, this.data[s + 2] = o.blue, this.data[s + 3] = 255;
      } else this.data[s] = 255, this.data[s + 1] = 255, this.data[s + 2] = 255, this.data[s + 3] = 255;
    }
    e !== 0 && (this.pos += 4 - e);
  }
}, ur.prototype.bit15 = function() {
  for (var e = this.width % 3, t = parseInt("11111", 2), n = this.height - 1; n >= 0; n--) {
    for (var i = this.bottom_up ? n : this.height - 1 - n, r = 0; r < this.width; r++) {
      var s = this.datav.getUint16(this.pos, !0);
      this.pos += 2;
      var o = (s & t) / t * 255 | 0, a = (s >> 5 & t) / t * 255 | 0, l = (s >> 10 & t) / t * 255 | 0, h = s >> 15 ? 255 : 0, c = i * this.width * 4 + 4 * r;
      this.data[c] = l, this.data[c + 1] = a, this.data[c + 2] = o, this.data[c + 3] = h;
    }
    this.pos += e;
  }
}, ur.prototype.bit16 = function() {
  for (var e = this.width % 3, t = parseInt("11111", 2), n = parseInt("111111", 2), i = this.height - 1; i >= 0; i--) {
    for (var r = this.bottom_up ? i : this.height - 1 - i, s = 0; s < this.width; s++) {
      var o = this.datav.getUint16(this.pos, !0);
      this.pos += 2;
      var a = (o & t) / t * 255 | 0, l = (o >> 5 & n) / n * 255 | 0, h = (o >> 11) / t * 255 | 0, c = r * this.width * 4 + 4 * s;
      this.data[c] = h, this.data[c + 1] = l, this.data[c + 2] = a, this.data[c + 3] = 255;
    }
    this.pos += e;
  }
}, ur.prototype.bit24 = function() {
  for (var e = this.height - 1; e >= 0; e--) {
    for (var t = this.bottom_up ? e : this.height - 1 - e, n = 0; n < this.width; n++) {
      var i = this.datav.getUint8(this.pos++, !0), r = this.datav.getUint8(this.pos++, !0), s = this.datav.getUint8(this.pos++, !0), o = t * this.width * 4 + 4 * n;
      this.data[o] = s, this.data[o + 1] = r, this.data[o + 2] = i, this.data[o + 3] = 255;
    }
    this.pos += this.width % 4;
  }
}, ur.prototype.bit32 = function() {
  for (var e = this.height - 1; e >= 0; e--) for (var t = this.bottom_up ? e : this.height - 1 - e, n = 0; n < this.width; n++) {
    var i = this.datav.getUint8(this.pos++, !0), r = this.datav.getUint8(this.pos++, !0), s = this.datav.getUint8(this.pos++, !0), o = this.datav.getUint8(this.pos++, !0), a = t * this.width * 4 + 4 * n;
    this.data[a] = s, this.data[a + 1] = r, this.data[a + 2] = i, this.data[a + 3] = o;
  }
}, ur.prototype.getData = function() {
  return this.data;
}, /**
 * @license
 * Copyright (c) 2018 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(e) {
  e.processBMP = function(t, n, i, r) {
    var s = new ur(t, !1), o = s.width, a = s.height, l = { data: s.getData(), width: o, height: a }, h = new Nh(100).encode(l, 100);
    return e.processJPEG.call(this, h, n, i, r);
  };
}(ye.API), sg.prototype.getData = function() {
  return this.data;
}, /**
 * @license
 * Copyright (c) 2019 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(e) {
  e.processWEBP = function(t, n, i, r) {
    var s = new sg(t), o = s.width, a = s.height, l = { data: s.getData(), width: o, height: a }, h = new Nh(100).encode(l, 100);
    return e.processJPEG.call(this, h, n, i, r);
  };
}(ye.API), ye.API.processRGBA = function(e, t, n) {
  for (var i = e.data, r = i.length, s = new Uint8Array(r / 4 * 3), o = new Uint8Array(r / 4), a = 0, l = 0, h = 0; h < r; h += 4) {
    var c = i[h], d = i[h + 1], g = i[h + 2], p = i[h + 3];
    s[a++] = c, s[a++] = d, s[a++] = g, o[l++] = p;
  }
  var b = this.__addimage__.arrayBufferToBinaryString(s);
  return { alpha: this.__addimage__.arrayBufferToBinaryString(o), data: b, index: t, alias: n, colorSpace: "DeviceRGB", bitsPerComponent: 8, width: e.width, height: e.height };
}, ye.API.setLanguage = function(e) {
  return this.internal.languageSettings === void 0 && (this.internal.languageSettings = {}, this.internal.languageSettings.isSubscribed = !1), { af: "Afrikaans", sq: "Albanian", ar: "Arabic (Standard)", "ar-DZ": "Arabic (Algeria)", "ar-BH": "Arabic (Bahrain)", "ar-EG": "Arabic (Egypt)", "ar-IQ": "Arabic (Iraq)", "ar-JO": "Arabic (Jordan)", "ar-KW": "Arabic (Kuwait)", "ar-LB": "Arabic (Lebanon)", "ar-LY": "Arabic (Libya)", "ar-MA": "Arabic (Morocco)", "ar-OM": "Arabic (Oman)", "ar-QA": "Arabic (Qatar)", "ar-SA": "Arabic (Saudi Arabia)", "ar-SY": "Arabic (Syria)", "ar-TN": "Arabic (Tunisia)", "ar-AE": "Arabic (U.A.E.)", "ar-YE": "Arabic (Yemen)", an: "Aragonese", hy: "Armenian", as: "Assamese", ast: "Asturian", az: "Azerbaijani", eu: "Basque", be: "Belarusian", bn: "Bengali", bs: "Bosnian", br: "Breton", bg: "Bulgarian", my: "Burmese", ca: "Catalan", ch: "Chamorro", ce: "Chechen", zh: "Chinese", "zh-HK": "Chinese (Hong Kong)", "zh-CN": "Chinese (PRC)", "zh-SG": "Chinese (Singapore)", "zh-TW": "Chinese (Taiwan)", cv: "Chuvash", co: "Corsican", cr: "Cree", hr: "Croatian", cs: "Czech", da: "Danish", nl: "Dutch (Standard)", "nl-BE": "Dutch (Belgian)", en: "English", "en-AU": "English (Australia)", "en-BZ": "English (Belize)", "en-CA": "English (Canada)", "en-IE": "English (Ireland)", "en-JM": "English (Jamaica)", "en-NZ": "English (New Zealand)", "en-PH": "English (Philippines)", "en-ZA": "English (South Africa)", "en-TT": "English (Trinidad & Tobago)", "en-GB": "English (United Kingdom)", "en-US": "English (United States)", "en-ZW": "English (Zimbabwe)", eo: "Esperanto", et: "Estonian", fo: "Faeroese", fj: "Fijian", fi: "Finnish", fr: "French (Standard)", "fr-BE": "French (Belgium)", "fr-CA": "French (Canada)", "fr-FR": "French (France)", "fr-LU": "French (Luxembourg)", "fr-MC": "French (Monaco)", "fr-CH": "French (Switzerland)", fy: "Frisian", fur: "Friulian", gd: "Gaelic (Scots)", "gd-IE": "Gaelic (Irish)", gl: "Galacian", ka: "Georgian", de: "German (Standard)", "de-AT": "German (Austria)", "de-DE": "German (Germany)", "de-LI": "German (Liechtenstein)", "de-LU": "German (Luxembourg)", "de-CH": "German (Switzerland)", el: "Greek", gu: "Gujurati", ht: "Haitian", he: "Hebrew", hi: "Hindi", hu: "Hungarian", is: "Icelandic", id: "Indonesian", iu: "Inuktitut", ga: "Irish", it: "Italian (Standard)", "it-CH": "Italian (Switzerland)", ja: "Japanese", kn: "Kannada", ks: "Kashmiri", kk: "Kazakh", km: "Khmer", ky: "Kirghiz", tlh: "Klingon", ko: "Korean", "ko-KP": "Korean (North Korea)", "ko-KR": "Korean (South Korea)", la: "Latin", lv: "Latvian", lt: "Lithuanian", lb: "Luxembourgish", mk: "North Macedonia", ms: "Malay", ml: "Malayalam", mt: "Maltese", mi: "Maori", mr: "Marathi", mo: "Moldavian", nv: "Navajo", ng: "Ndonga", ne: "Nepali", no: "Norwegian", nb: "Norwegian (Bokmal)", nn: "Norwegian (Nynorsk)", oc: "Occitan", or: "Oriya", om: "Oromo", fa: "Persian", "fa-IR": "Persian/Iran", pl: "Polish", pt: "Portuguese", "pt-BR": "Portuguese (Brazil)", pa: "Punjabi", "pa-IN": "Punjabi (India)", "pa-PK": "Punjabi (Pakistan)", qu: "Quechua", rm: "Rhaeto-Romanic", ro: "Romanian", "ro-MO": "Romanian (Moldavia)", ru: "Russian", "ru-MO": "Russian (Moldavia)", sz: "Sami (Lappish)", sg: "Sango", sa: "Sanskrit", sc: "Sardinian", sd: "Sindhi", si: "Singhalese", sr: "Serbian", sk: "Slovak", sl: "Slovenian", so: "Somani", sb: "Sorbian", es: "Spanish", "es-AR": "Spanish (Argentina)", "es-BO": "Spanish (Bolivia)", "es-CL": "Spanish (Chile)", "es-CO": "Spanish (Colombia)", "es-CR": "Spanish (Costa Rica)", "es-DO": "Spanish (Dominican Republic)", "es-EC": "Spanish (Ecuador)", "es-SV": "Spanish (El Salvador)", "es-GT": "Spanish (Guatemala)", "es-HN": "Spanish (Honduras)", "es-MX": "Spanish (Mexico)", "es-NI": "Spanish (Nicaragua)", "es-PA": "Spanish (Panama)", "es-PY": "Spanish (Paraguay)", "es-PE": "Spanish (Peru)", "es-PR": "Spanish (Puerto Rico)", "es-ES": "Spanish (Spain)", "es-UY": "Spanish (Uruguay)", "es-VE": "Spanish (Venezuela)", sx: "Sutu", sw: "Swahili", sv: "Swedish", "sv-FI": "Swedish (Finland)", "sv-SV": "Swedish (Sweden)", ta: "Tamil", tt: "Tatar", te: "Teluga", th: "Thai", tig: "Tigre", ts: "Tsonga", tn: "Tswana", tr: "Turkish", tk: "Turkmen", uk: "Ukrainian", hsb: "Upper Sorbian", ur: "Urdu", ve: "Venda", vi: "Vietnamese", vo: "Volapuk", wa: "Walloon", cy: "Welsh", xh: "Xhosa", ji: "Yiddish", zu: "Zulu" }[e] !== void 0 && (this.internal.languageSettings.languageCode = e, this.internal.languageSettings.isSubscribed === !1 && (this.internal.events.subscribe("putCatalog", function() {
    this.internal.write("/Lang (" + this.internal.languageSettings.languageCode + ")");
  }), this.internal.languageSettings.isSubscribed = !0)), this;
}, Ko = ye.API, bu = Ko.getCharWidthsArray = function(e, t) {
  var n, i, r = (t = t || {}).font || this.internal.getFont(), s = t.fontSize || this.internal.getFontSize(), o = t.charSpace || this.internal.getCharSpace(), a = t.widths ? t.widths : r.metadata.Unicode.widths, l = a.fof ? a.fof : 1, h = t.kerning ? t.kerning : r.metadata.Unicode.kerning, c = h.fof ? h.fof : 1, d = t.doKerning !== !1, g = 0, p = e.length, b = 0, x = a[0] || l, N = [];
  for (n = 0; n < p; n++) i = e.charCodeAt(n), typeof r.metadata.widthOfString == "function" ? N.push((r.metadata.widthOfGlyph(r.metadata.characterToGlyph(i)) + o * (1e3 / s) || 0) / 1e3) : (g = d && en(h[i]) === "object" && !isNaN(parseInt(h[i][b], 10)) ? h[i][b] / c : 0, N.push((a[i] || x) / l + g)), b = i;
  return N;
}, eg = Ko.getStringUnitWidth = function(e, t) {
  var n = (t = t || {}).fontSize || this.internal.getFontSize(), i = t.font || this.internal.getFont(), r = t.charSpace || this.internal.getCharSpace();
  return Ko.processArabic && (e = Ko.processArabic(e)), typeof i.metadata.widthOfString == "function" ? i.metadata.widthOfString(e, n, r) / n : bu.apply(this, arguments).reduce(function(s, o) {
    return s + o;
  }, 0);
}, ng = function(e, t, n, i) {
  for (var r = [], s = 0, o = e.length, a = 0; s !== o && a + t[s] < n; ) a += t[s], s++;
  r.push(e.slice(0, s));
  var l = s;
  for (a = 0; s !== o; ) a + t[s] > i && (r.push(e.slice(l, s)), a = 0, l = s), a += t[s], s++;
  return l !== s && r.push(e.slice(l, s)), r;
}, ig = function(e, t, n) {
  n || (n = {});
  var i, r, s, o, a, l, h, c = [], d = [c], g = n.textIndent || 0, p = 0, b = 0, x = e.split(" "), N = bu.apply(this, [" ", n])[0];
  if (l = n.lineIndent === -1 ? x[0].length + 2 : n.lineIndent || 0) {
    var v = Array(l).join(" "), w = [];
    x.map(function(T) {
      (T = T.split(/\s*\n/)).length > 1 ? w = w.concat(T.map(function(D, G) {
        return (G && D.length ? `
` : "") + D;
      })) : w.push(T[0]);
    }), x = w, l = eg.apply(this, [v, n]);
  }
  for (s = 0, o = x.length; s < o; s++) {
    var k = 0;
    if (i = x[s], l && i[0] == `
` && (i = i.substr(1), k = 1), g + p + (b = (r = bu.apply(this, [i, n])).reduce(function(T, D) {
      return T + D;
    }, 0)) > t || k) {
      if (b > t) {
        for (a = ng.apply(this, [i, r, t - (g + p), t]), c.push(a.shift()), c = [a.pop()]; a.length; ) d.push([a.shift()]);
        b = r.slice(i.length - (c[0] ? c[0].length : 0)).reduce(function(T, D) {
          return T + D;
        }, 0);
      } else c = [i];
      d.push(c), g = b + l, p = N;
    } else c.push(i), g += p + b, p = N;
  }
  return h = l ? function(T, D) {
    return (D ? v : "") + T.join(" ");
  } : function(T) {
    return T.join(" ");
  }, d.map(h);
}, Ko.splitTextToSize = function(e, t, n) {
  var i, r = (n = n || {}).fontSize || this.internal.getFontSize(), s = (function(c) {
    if (c.widths && c.kerning) return { widths: c.widths, kerning: c.kerning };
    var d = this.internal.getFont(c.fontName, c.fontStyle);
    return d.metadata.Unicode ? { widths: d.metadata.Unicode.widths || { 0: 1 }, kerning: d.metadata.Unicode.kerning || {} } : { font: d.metadata, fontSize: this.internal.getFontSize(), charSpace: this.internal.getCharSpace() };
  }).call(this, n);
  i = Array.isArray(e) ? e : String(e).split(/\r?\n/);
  var o = 1 * this.internal.scaleFactor * t / r;
  s.textIndent = n.textIndent ? 1 * n.textIndent * this.internal.scaleFactor / r : 0, s.lineIndent = n.lineIndent;
  var a, l, h = [];
  for (a = 0, l = i.length; a < l; a++) h = h.concat(ig.apply(this, [i[a], o, s]));
  return h;
}, function(e) {
  e.__fontmetrics__ = e.__fontmetrics__ || {};
  for (var t = "klmnopqrstuvwxyz", n = {}, i = {}, r = 0; r < t.length; r++) n[t[r]] = "0123456789abcdef"[r], i["0123456789abcdef"[r]] = t[r];
  var s = function(d) {
    return "0x" + parseInt(d, 10).toString(16);
  }, o = e.__fontmetrics__.compress = function(d) {
    var g, p, b, x, N = ["{"];
    for (var v in d) {
      if (g = d[v], isNaN(parseInt(v, 10)) ? p = "'" + v + "'" : (v = parseInt(v, 10), p = (p = s(v).slice(2)).slice(0, -1) + i[p.slice(-1)]), typeof g == "number") g < 0 ? (b = s(g).slice(3), x = "-") : (b = s(g).slice(2), x = ""), b = x + b.slice(0, -1) + i[b.slice(-1)];
      else {
        if (en(g) !== "object") throw new Error("Don't know what to do with value type " + en(g) + ".");
        b = o(g);
      }
      N.push(p + b);
    }
    return N.push("}"), N.join("");
  }, a = e.__fontmetrics__.uncompress = function(d) {
    if (typeof d != "string") throw new Error("Invalid argument passed to uncompress.");
    for (var g, p, b, x, N = {}, v = 1, w = N, k = [], T = "", D = "", G = d.length - 1, R = 1; R < G; R += 1) (x = d[R]) == "'" ? g ? (b = g.join(""), g = void 0) : g = [] : g ? g.push(x) : x == "{" ? (k.push([w, b]), w = {}, b = void 0) : x == "}" ? ((p = k.pop())[0][p[1]] = w, b = void 0, w = p[0]) : x == "-" ? v = -1 : b === void 0 ? n.hasOwnProperty(x) ? (T += n[x], b = parseInt(T, 16) * v, v = 1, T = "") : T += x : n.hasOwnProperty(x) ? (D += n[x], w[b] = parseInt(D, 16) * v, v = 1, b = void 0, D = "") : D += x;
    return N;
  }, l = { codePages: ["WinAnsiEncoding"], WinAnsiEncoding: a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}") }, h = { Unicode: { Courier: l, "Courier-Bold": l, "Courier-BoldOblique": l, "Courier-Oblique": l, Helvetica: l, "Helvetica-Bold": l, "Helvetica-BoldOblique": l, "Helvetica-Oblique": l, "Times-Roman": l, "Times-Bold": l, "Times-BoldItalic": l, "Times-Italic": l } }, c = { Unicode: { "Courier-Oblique": a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"), "Times-BoldItalic": a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"), "Helvetica-Bold": a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"), Courier: a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"), "Courier-BoldOblique": a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"), "Times-Bold": a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"), Symbol: a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"), Helvetica: a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"), "Helvetica-BoldOblique": a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"), ZapfDingbats: a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"), "Courier-Bold": a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"), "Times-Italic": a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"), "Times-Roman": a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"), "Helvetica-Oblique": a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}") } };
  e.events.push(["addFont", function(d) {
    var g = d.font, p = c.Unicode[g.postScriptName];
    p && (g.metadata.Unicode = {}, g.metadata.Unicode.widths = p.widths, g.metadata.Unicode.kerning = p.kerning);
    var b = h.Unicode[g.postScriptName];
    b && (g.metadata.Unicode.encoding = b, g.encoding = b.codePages[0]);
  }]);
}(ye.API), /**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(e) {
  var t = function(n) {
    for (var i = n.length, r = new Uint8Array(i), s = 0; s < i; s++) r[s] = n.charCodeAt(s);
    return r;
  };
  e.API.events.push(["addFont", function(n) {
    var i = void 0, r = n.font, s = n.instance;
    if (!r.isStandardFont) {
      if (s === void 0) throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('" + r.postScriptName + "').");
      if (typeof (i = s.existsFileInVFS(r.postScriptName) === !1 ? s.loadFile(r.postScriptName) : s.getFileFromVFS(r.postScriptName)) != "string") throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('" + r.postScriptName + "').");
      (function(o, a) {
        a = /^\x00\x01\x00\x00/.test(a) ? t(a) : t(cl(a)), o.metadata = e.API.TTFFont.open(a), o.metadata.Unicode = o.metadata.Unicode || { encoding: {}, kerning: {}, widths: [] }, o.metadata.glyIdsUsed = [0];
      })(r, i);
    }
  }]);
}(ye), /** @license
 * Copyright (c) 2012 Willow Systems Corporation, https://github.com/willowsystems
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 */
function(e) {
  function t() {
    return (Se.canvg ? Promise.resolve(Se.canvg) : import("./index.es-BsG2Cq_F.js")).catch(function(n) {
      return Promise.reject(new Error("Could not load canvg: " + n));
    }).then(function(n) {
      return n.default ? n.default : n;
    });
  }
  ye.API.addSvgAsImage = function(n, i, r, s, o, a, l, h) {
    if (isNaN(i) || isNaN(r)) throw un.error("jsPDF.addSvgAsImage: Invalid coordinates", arguments), new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");
    if (isNaN(s) || isNaN(o)) throw un.error("jsPDF.addSvgAsImage: Invalid measurements", arguments), new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");
    var c = document.createElement("canvas");
    c.width = s, c.height = o;
    var d = c.getContext("2d");
    d.fillStyle = "#fff", d.fillRect(0, 0, c.width, c.height);
    var g = { ignoreMouse: !0, ignoreAnimation: !0, ignoreDimensions: !0 }, p = this;
    return t().then(function(b) {
      return b.fromString(d, n, g);
    }, function() {
      return Promise.reject(new Error("Could not load canvg."));
    }).then(function(b) {
      return b.render(g);
    }).then(function() {
      p.addImage(c.toDataURL("image/jpeg", 1), i, r, s, o, l, h);
    });
  };
}(), ye.API.putTotalPages = function(e) {
  var t, n = 0;
  parseInt(this.internal.getFont().id.substr(1), 10) < 15 ? (t = new RegExp(e, "g"), n = this.internal.getNumberOfPages()) : (t = new RegExp(this.pdfEscape16(e, this.internal.getFont()), "g"), n = this.pdfEscape16(this.internal.getNumberOfPages() + "", this.internal.getFont()));
  for (var i = 1; i <= this.internal.getNumberOfPages(); i++) for (var r = 0; r < this.internal.pages[i].length; r++) this.internal.pages[i][r] = this.internal.pages[i][r].replace(t, n);
  return this;
}, ye.API.viewerPreferences = function(e, t) {
  var n;
  e = e || {}, t = t || !1;
  var i, r, s, o = { HideToolbar: { defaultValue: !1, value: !1, type: "boolean", explicitSet: !1, valueSet: [!0, !1], pdfVersion: 1.3 }, HideMenubar: { defaultValue: !1, value: !1, type: "boolean", explicitSet: !1, valueSet: [!0, !1], pdfVersion: 1.3 }, HideWindowUI: { defaultValue: !1, value: !1, type: "boolean", explicitSet: !1, valueSet: [!0, !1], pdfVersion: 1.3 }, FitWindow: { defaultValue: !1, value: !1, type: "boolean", explicitSet: !1, valueSet: [!0, !1], pdfVersion: 1.3 }, CenterWindow: { defaultValue: !1, value: !1, type: "boolean", explicitSet: !1, valueSet: [!0, !1], pdfVersion: 1.3 }, DisplayDocTitle: { defaultValue: !1, value: !1, type: "boolean", explicitSet: !1, valueSet: [!0, !1], pdfVersion: 1.4 }, NonFullScreenPageMode: { defaultValue: "UseNone", value: "UseNone", type: "name", explicitSet: !1, valueSet: ["UseNone", "UseOutlines", "UseThumbs", "UseOC"], pdfVersion: 1.3 }, Direction: { defaultValue: "L2R", value: "L2R", type: "name", explicitSet: !1, valueSet: ["L2R", "R2L"], pdfVersion: 1.3 }, ViewArea: { defaultValue: "CropBox", value: "CropBox", type: "name", explicitSet: !1, valueSet: ["MediaBox", "CropBox", "TrimBox", "BleedBox", "ArtBox"], pdfVersion: 1.4 }, ViewClip: { defaultValue: "CropBox", value: "CropBox", type: "name", explicitSet: !1, valueSet: ["MediaBox", "CropBox", "TrimBox", "BleedBox", "ArtBox"], pdfVersion: 1.4 }, PrintArea: { defaultValue: "CropBox", value: "CropBox", type: "name", explicitSet: !1, valueSet: ["MediaBox", "CropBox", "TrimBox", "BleedBox", "ArtBox"], pdfVersion: 1.4 }, PrintClip: { defaultValue: "CropBox", value: "CropBox", type: "name", explicitSet: !1, valueSet: ["MediaBox", "CropBox", "TrimBox", "BleedBox", "ArtBox"], pdfVersion: 1.4 }, PrintScaling: { defaultValue: "AppDefault", value: "AppDefault", type: "name", explicitSet: !1, valueSet: ["AppDefault", "None"], pdfVersion: 1.6 }, Duplex: { defaultValue: "", value: "none", type: "name", explicitSet: !1, valueSet: ["Simplex", "DuplexFlipShortEdge", "DuplexFlipLongEdge", "none"], pdfVersion: 1.7 }, PickTrayByPDFSize: { defaultValue: !1, value: !1, type: "boolean", explicitSet: !1, valueSet: [!0, !1], pdfVersion: 1.7 }, PrintPageRange: { defaultValue: "", value: "", type: "array", explicitSet: !1, valueSet: null, pdfVersion: 1.7 }, NumCopies: { defaultValue: 1, value: 1, type: "integer", explicitSet: !1, valueSet: null, pdfVersion: 1.7 } }, a = Object.keys(o), l = [], h = 0, c = 0, d = 0;
  function g(b, x) {
    var N, v = !1;
    for (N = 0; N < b.length; N += 1) b[N] === x && (v = !0);
    return v;
  }
  if (this.internal.viewerpreferences === void 0 && (this.internal.viewerpreferences = {}, this.internal.viewerpreferences.configuration = JSON.parse(JSON.stringify(o)), this.internal.viewerpreferences.isSubscribed = !1), n = this.internal.viewerpreferences.configuration, e === "reset" || t === !0) {
    var p = a.length;
    for (d = 0; d < p; d += 1) n[a[d]].value = n[a[d]].defaultValue, n[a[d]].explicitSet = !1;
  }
  if (en(e) === "object") {
    for (r in e) if (s = e[r], g(a, r) && s !== void 0) {
      if (n[r].type === "boolean" && typeof s == "boolean") n[r].value = s;
      else if (n[r].type === "name" && g(n[r].valueSet, s)) n[r].value = s;
      else if (n[r].type === "integer" && Number.isInteger(s)) n[r].value = s;
      else if (n[r].type === "array") {
        for (h = 0; h < s.length; h += 1) if (i = !0, s[h].length === 1 && typeof s[h][0] == "number") l.push(String(s[h] - 1));
        else if (s[h].length > 1) {
          for (c = 0; c < s[h].length; c += 1) typeof s[h][c] != "number" && (i = !1);
          i === !0 && l.push([s[h][0] - 1, s[h][1] - 1].join(" "));
        }
        n[r].value = "[" + l.join(" ") + "]";
      } else n[r].value = n[r].defaultValue;
      n[r].explicitSet = !0;
    }
  }
  return this.internal.viewerpreferences.isSubscribed === !1 && (this.internal.events.subscribe("putCatalog", function() {
    var b, x = [];
    for (b in n) n[b].explicitSet === !0 && (n[b].type === "name" ? x.push("/" + b + " /" + n[b].value) : x.push("/" + b + " " + n[b].value));
    x.length !== 0 && this.internal.write(`/ViewerPreferences
<<
` + x.join(`
`) + `
>>`);
  }), this.internal.viewerpreferences.isSubscribed = !0), this.internal.viewerpreferences.configuration = n, this;
}, /** ====================================================================
 * @license
 * jsPDF XMP metadata plugin
 * Copyright (c) 2016 Jussi Utunen, u-jussi@suomi24.fi
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 */
function(e) {
  var t = function() {
    var i = '<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="' + this.internal.__metadata__.namespaceuri + '"><jspdf:metadata>', r = unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')), s = unescape(encodeURIComponent(i)), o = unescape(encodeURIComponent(this.internal.__metadata__.metadata)), a = unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")), l = unescape(encodeURIComponent("</x:xmpmeta>")), h = s.length + o.length + a.length + r.length + l.length;
    this.internal.__metadata__.metadata_object_number = this.internal.newObject(), this.internal.write("<< /Type /Metadata /Subtype /XML /Length " + h + " >>"), this.internal.write("stream"), this.internal.write(r + s + o + a + l), this.internal.write("endstream"), this.internal.write("endobj");
  }, n = function() {
    this.internal.__metadata__.metadata_object_number && this.internal.write("/Metadata " + this.internal.__metadata__.metadata_object_number + " 0 R");
  };
  e.addMetadata = function(i, r) {
    return this.internal.__metadata__ === void 0 && (this.internal.__metadata__ = { metadata: i, namespaceuri: r || "http://jspdf.default.namespaceuri/" }, this.internal.events.subscribe("putCatalog", n), this.internal.events.subscribe("postPutResources", t)), this;
  };
}(ye.API), function(e) {
  var t = e.API, n = t.pdfEscape16 = function(s, o) {
    for (var a, l = o.metadata.Unicode.widths, h = ["", "0", "00", "000", "0000"], c = [""], d = 0, g = s.length; d < g; ++d) {
      if (a = o.metadata.characterToGlyph(s.charCodeAt(d)), o.metadata.glyIdsUsed.push(a), o.metadata.toUnicode[a] = s.charCodeAt(d), l.indexOf(a) == -1 && (l.push(a), l.push([parseInt(o.metadata.widthOfGlyph(a), 10)])), a == "0") return c.join("");
      a = a.toString(16), c.push(h[4 - a.length], a);
    }
    return c.join("");
  }, i = function(s) {
    var o, a, l, h, c, d, g;
    for (c = `/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`, l = [], d = 0, g = (a = Object.keys(s).sort(function(p, b) {
      return p - b;
    })).length; d < g; d++) o = a[d], l.length >= 100 && (c += `
` + l.length + ` beginbfchar
` + l.join(`
`) + `
endbfchar`, l = []), s[o] !== void 0 && s[o] !== null && typeof s[o].toString == "function" && (h = ("0000" + s[o].toString(16)).slice(-4), o = ("0000" + (+o).toString(16)).slice(-4), l.push("<" + o + "><" + h + ">"));
    return l.length && (c += `
` + l.length + ` beginbfchar
` + l.join(`
`) + `
endbfchar
`), c += `endcmap
CMapName currentdict /CMap defineresource pop
end
end`;
  };
  t.events.push(["putFont", function(s) {
    (function(o) {
      var a = o.font, l = o.out, h = o.newObject, c = o.putStream;
      if (a.metadata instanceof e.API.TTFFont && a.encoding === "Identity-H") {
        for (var d = a.metadata.Unicode.widths, g = a.metadata.subset.encode(a.metadata.glyIdsUsed, 1), p = "", b = 0; b < g.length; b++) p += String.fromCharCode(g[b]);
        var x = h();
        c({ data: p, addLength1: !0, objectId: x }), l("endobj");
        var N = h();
        c({ data: i(a.metadata.toUnicode), addLength1: !0, objectId: N }), l("endobj");
        var v = h();
        l("<<"), l("/Type /FontDescriptor"), l("/FontName /" + Qo(a.fontName)), l("/FontFile2 " + x + " 0 R"), l("/FontBBox " + e.API.PDFObject.convert(a.metadata.bbox)), l("/Flags " + a.metadata.flags), l("/StemV " + a.metadata.stemV), l("/ItalicAngle " + a.metadata.italicAngle), l("/Ascent " + a.metadata.ascender), l("/Descent " + a.metadata.decender), l("/CapHeight " + a.metadata.capHeight), l(">>"), l("endobj");
        var w = h();
        l("<<"), l("/Type /Font"), l("/BaseFont /" + Qo(a.fontName)), l("/FontDescriptor " + v + " 0 R"), l("/W " + e.API.PDFObject.convert(d)), l("/CIDToGIDMap /Identity"), l("/DW 1000"), l("/Subtype /CIDFontType2"), l("/CIDSystemInfo"), l("<<"), l("/Supplement 0"), l("/Registry (Adobe)"), l("/Ordering (" + a.encoding + ")"), l(">>"), l(">>"), l("endobj"), a.objectNumber = h(), l("<<"), l("/Type /Font"), l("/Subtype /Type0"), l("/ToUnicode " + N + " 0 R"), l("/BaseFont /" + Qo(a.fontName)), l("/Encoding /" + a.encoding), l("/DescendantFonts [" + w + " 0 R]"), l(">>"), l("endobj"), a.isAlreadyPutted = !0;
      }
    })(s);
  }]), t.events.push(["putFont", function(s) {
    (function(o) {
      var a = o.font, l = o.out, h = o.newObject, c = o.putStream;
      if (a.metadata instanceof e.API.TTFFont && a.encoding === "WinAnsiEncoding") {
        for (var d = a.metadata.rawData, g = "", p = 0; p < d.length; p++) g += String.fromCharCode(d[p]);
        var b = h();
        c({ data: g, addLength1: !0, objectId: b }), l("endobj");
        var x = h();
        c({ data: i(a.metadata.toUnicode), addLength1: !0, objectId: x }), l("endobj");
        var N = h();
        l("<<"), l("/Descent " + a.metadata.decender), l("/CapHeight " + a.metadata.capHeight), l("/StemV " + a.metadata.stemV), l("/Type /FontDescriptor"), l("/FontFile2 " + b + " 0 R"), l("/Flags 96"), l("/FontBBox " + e.API.PDFObject.convert(a.metadata.bbox)), l("/FontName /" + Qo(a.fontName)), l("/ItalicAngle " + a.metadata.italicAngle), l("/Ascent " + a.metadata.ascender), l(">>"), l("endobj"), a.objectNumber = h();
        for (var v = 0; v < a.metadata.hmtx.widths.length; v++) a.metadata.hmtx.widths[v] = parseInt(a.metadata.hmtx.widths[v] * (1e3 / a.metadata.head.unitsPerEm));
        l("<</Subtype/TrueType/Type/Font/ToUnicode " + x + " 0 R/BaseFont/" + Qo(a.fontName) + "/FontDescriptor " + N + " 0 R/Encoding/" + a.encoding + " /FirstChar 29 /LastChar 255 /Widths " + e.API.PDFObject.convert(a.metadata.hmtx.widths) + ">>"), l("endobj"), a.isAlreadyPutted = !0;
      }
    })(s);
  }]);
  var r = function(s) {
    var o, a = s.text || "", l = s.x, h = s.y, c = s.options || {}, d = s.mutex || {}, g = d.pdfEscape, p = d.activeFontKey, b = d.fonts, x = p, N = "", v = 0, w = "", k = b[x].encoding;
    if (b[x].encoding !== "Identity-H") return { text: a, x: l, y: h, options: c, mutex: d };
    for (w = a, x = p, Array.isArray(a) && (w = a[0]), v = 0; v < w.length; v += 1) b[x].metadata.hasOwnProperty("cmap") && (o = b[x].metadata.cmap.unicode.codeMap[w[v].charCodeAt(0)]), o || w[v].charCodeAt(0) < 256 && b[x].metadata.hasOwnProperty("Unicode") ? N += w[v] : N += "";
    var T = "";
    return parseInt(x.slice(1)) < 14 || k === "WinAnsiEncoding" ? T = g(N, x).split("").map(function(D) {
      return D.charCodeAt(0).toString(16);
    }).join("") : k === "Identity-H" && (T = n(N, b[x])), d.isHex = !0, { text: T, x: l, y: h, options: c, mutex: d };
  };
  t.events.push(["postProcessText", function(s) {
    var o = s.text || "", a = [], l = { text: o, x: s.x, y: s.y, options: s.options, mutex: s.mutex };
    if (Array.isArray(o)) {
      var h = 0;
      for (h = 0; h < o.length; h += 1) Array.isArray(o[h]) && o[h].length === 3 ? a.push([r(Object.assign({}, l, { text: o[h][0] })).text, o[h][1], o[h][2]]) : a.push(r(Object.assign({}, l, { text: o[h] })).text);
      s.text = a;
    } else s.text = r(Object.assign({}, l, { text: o })).text;
  }]);
}(ye), /**
 * @license
 * jsPDF virtual FileSystem functionality
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(e) {
  var t = function() {
    return this.internal.vFS === void 0 && (this.internal.vFS = {}), !0;
  };
  e.existsFileInVFS = function(n) {
    return t.call(this), this.internal.vFS[n] !== void 0;
  }, e.addFileToVFS = function(n, i) {
    return t.call(this), this.internal.vFS[n] = i, this;
  }, e.getFileFromVFS = function(n) {
    return t.call(this), this.internal.vFS[n] !== void 0 ? this.internal.vFS[n] : null;
  };
}(ye.API), /**
 * @license
 * Unicode Bidi Engine based on the work of Alex Shensis (@asthensis)
 * MIT License
 */
function(e) {
  e.__bidiEngine__ = e.prototype.__bidiEngine__ = function(i) {
    var r, s, o, a, l, h, c, d = t, g = [[0, 3, 0, 1, 0, 0, 0], [0, 3, 0, 1, 2, 2, 0], [0, 3, 0, 17, 2, 0, 1], [0, 3, 5, 5, 4, 1, 0], [0, 3, 21, 21, 4, 0, 1], [0, 3, 5, 5, 4, 2, 0]], p = [[2, 0, 1, 1, 0, 1, 0], [2, 0, 1, 1, 0, 2, 0], [2, 0, 2, 1, 3, 2, 0], [2, 0, 2, 33, 3, 1, 1]], b = { L: 0, R: 1, EN: 2, AN: 3, N: 4, B: 5, S: 6 }, x = { 0: 0, 5: 1, 6: 2, 7: 3, 32: 4, 251: 5, 254: 6, 255: 7 }, N = ["(", ")", "(", "<", ">", "<", "[", "]", "[", "{", "}", "{", "«", "»", "«", "‹", "›", "‹", "⁅", "⁆", "⁅", "⁽", "⁾", "⁽", "₍", "₎", "₍", "≤", "≥", "≤", "〈", "〉", "〈", "﹙", "﹚", "﹙", "﹛", "﹜", "﹛", "﹝", "﹞", "﹝", "﹤", "﹥", "﹤"], v = new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/), w = !1, k = 0;
    this.__bidiEngine__ = {};
    var T = function(A) {
      var _ = A.charCodeAt(), I = _ >> 8, M = x[I];
      return M !== void 0 ? d[256 * M + (255 & _)] : I === 252 || I === 253 ? "AL" : v.test(I) ? "L" : I === 8 ? "R" : "N";
    }, D = function(A) {
      for (var _, I = 0; I < A.length; I++) {
        if ((_ = T(A.charAt(I))) === "L") return !1;
        if (_ === "R") return !0;
      }
      return !1;
    }, G = function(A, _, I, M) {
      var st, W, U, Q, Z = _[M];
      switch (Z) {
        case "L":
        case "R":
          w = !1;
          break;
        case "N":
        case "AN":
          break;
        case "EN":
          w && (Z = "AN");
          break;
        case "AL":
          w = !0, Z = "R";
          break;
        case "WS":
          Z = "N";
          break;
        case "CS":
          M < 1 || M + 1 >= _.length || (st = I[M - 1]) !== "EN" && st !== "AN" || (W = _[M + 1]) !== "EN" && W !== "AN" ? Z = "N" : w && (W = "AN"), Z = W === st ? W : "N";
          break;
        case "ES":
          Z = (st = M > 0 ? I[M - 1] : "B") === "EN" && M + 1 < _.length && _[M + 1] === "EN" ? "EN" : "N";
          break;
        case "ET":
          if (M > 0 && I[M - 1] === "EN") {
            Z = "EN";
            break;
          }
          if (w) {
            Z = "N";
            break;
          }
          for (U = M + 1, Q = _.length; U < Q && _[U] === "ET"; ) U++;
          Z = U < Q && _[U] === "EN" ? "EN" : "N";
          break;
        case "NSM":
          if (o && !a) {
            for (Q = _.length, U = M + 1; U < Q && _[U] === "NSM"; ) U++;
            if (U < Q) {
              var ct = A[M], St = ct >= 1425 && ct <= 2303 || ct === 64286;
              if (st = _[U], St && (st === "R" || st === "AL")) {
                Z = "R";
                break;
              }
            }
          }
          Z = M < 1 || (st = _[M - 1]) === "B" ? "N" : I[M - 1];
          break;
        case "B":
          w = !1, r = !0, Z = k;
          break;
        case "S":
          s = !0, Z = "N";
          break;
        case "LRE":
        case "RLE":
        case "LRO":
        case "RLO":
        case "PDF":
          w = !1;
          break;
        case "BN":
          Z = "N";
      }
      return Z;
    }, R = function(A, _, I) {
      var M = A.split("");
      return I && O(M, I, { hiLevel: k }), M.reverse(), _ && _.reverse(), M.join("");
    }, O = function(A, _, I) {
      var M, st, W, U, Q, Z = -1, ct = A.length, St = 0, P = [], B = k ? p : g, V = [];
      for (w = !1, r = !1, s = !1, st = 0; st < ct; st++) V[st] = T(A[st]);
      for (W = 0; W < ct; W++) {
        if (Q = St, P[W] = G(A, V, P, W), M = 240 & (St = B[Q][b[P[W]]]), St &= 15, _[W] = U = B[St][5], M > 0) if (M === 16) {
          for (st = Z; st < W; st++) _[st] = 1;
          Z = -1;
        } else Z = -1;
        if (B[St][6]) Z === -1 && (Z = W);
        else if (Z > -1) {
          for (st = Z; st < W; st++) _[st] = U;
          Z = -1;
        }
        V[W] === "B" && (_[W] = 0), I.hiLevel |= U;
      }
      s && function(J, nt, gt) {
        for (var yt = 0; yt < gt; yt++) if (J[yt] === "S") {
          nt[yt] = k;
          for (var vt = yt - 1; vt >= 0 && J[vt] === "WS"; vt--) nt[vt] = k;
        }
      }(V, _, ct);
    }, $ = function(A, _, I, M, st) {
      if (!(st.hiLevel < A)) {
        if (A === 1 && k === 1 && !r) return _.reverse(), void (I && I.reverse());
        for (var W, U, Q, Z, ct = _.length, St = 0; St < ct; ) {
          if (M[St] >= A) {
            for (Q = St + 1; Q < ct && M[Q] >= A; ) Q++;
            for (Z = St, U = Q - 1; Z < U; Z++, U--) W = _[Z], _[Z] = _[U], _[U] = W, I && (W = I[Z], I[Z] = I[U], I[U] = W);
            St = Q;
          }
          St++;
        }
      }
    }, z = function(A, _, I) {
      var M = A.split(""), st = { hiLevel: k };
      return I || (I = []), O(M, I, st), function(W, U, Q) {
        if (Q.hiLevel !== 0 && c) for (var Z, ct = 0; ct < W.length; ct++) U[ct] === 1 && (Z = N.indexOf(W[ct])) >= 0 && (W[ct] = N[Z + 1]);
      }(M, I, st), $(2, M, _, I, st), $(1, M, _, I, st), M.join("");
    };
    return this.__bidiEngine__.doBidiReorder = function(A, _, I) {
      if (function(st, W) {
        if (W) for (var U = 0; U < st.length; U++) W[U] = U;
        a === void 0 && (a = D(st)), h === void 0 && (h = D(st));
      }(A, _), o || !l || h) if (o && l && a ^ h) k = a ? 1 : 0, A = R(A, _, I);
      else if (!o && l && h) k = a ? 1 : 0, A = z(A, _, I), A = R(A, _);
      else if (!o || a || l || h) {
        if (o && !l && a ^ h) A = R(A, _), a ? (k = 0, A = z(A, _, I)) : (k = 1, A = z(A, _, I), A = R(A, _));
        else if (o && a && !l && h) k = 1, A = z(A, _, I), A = R(A, _);
        else if (!o && !l && a ^ h) {
          var M = c;
          a ? (k = 1, A = z(A, _, I), k = 0, c = !1, A = z(A, _, I), c = M) : (k = 0, A = z(A, _, I), A = R(A, _), k = 1, c = !1, A = z(A, _, I), c = M, A = R(A, _));
        }
      } else k = 0, A = z(A, _, I);
      else k = a ? 1 : 0, A = z(A, _, I);
      return A;
    }, this.__bidiEngine__.setOptions = function(A) {
      A && (o = A.isInputVisual, l = A.isOutputVisual, a = A.isInputRtl, h = A.isOutputRtl, c = A.isSymmetricSwapping);
    }, this.__bidiEngine__.setOptions(i), this.__bidiEngine__;
  };
  var t = ["BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "S", "B", "S", "WS", "B", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "B", "B", "B", "S", "WS", "N", "N", "ET", "ET", "ET", "N", "N", "N", "N", "N", "ES", "CS", "ES", "CS", "CS", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "CS", "N", "N", "N", "N", "N", "N", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "N", "N", "N", "N", "N", "N", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "N", "N", "N", "N", "BN", "BN", "BN", "BN", "BN", "BN", "B", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "BN", "CS", "N", "ET", "ET", "ET", "ET", "N", "N", "N", "N", "L", "N", "N", "BN", "N", "N", "ET", "ET", "EN", "EN", "N", "L", "N", "N", "N", "EN", "L", "N", "N", "N", "N", "N", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "N", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "N", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "N", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "N", "N", "L", "L", "L", "L", "L", "L", "L", "N", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "N", "L", "N", "N", "N", "N", "N", "ET", "N", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "R", "NSM", "R", "NSM", "NSM", "R", "NSM", "NSM", "R", "NSM", "N", "N", "N", "N", "N", "N", "N", "N", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "N", "N", "N", "N", "N", "R", "R", "R", "R", "R", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "AN", "AN", "AN", "AN", "AN", "AN", "N", "N", "AL", "ET", "ET", "AL", "CS", "AL", "N", "N", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "AL", "AL", "N", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "AN", "AN", "AN", "AN", "AN", "AN", "AN", "AN", "AN", "AN", "ET", "AN", "AN", "AL", "AL", "AL", "NSM", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "AN", "N", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "AL", "AL", "NSM", "NSM", "N", "NSM", "NSM", "NSM", "NSM", "AL", "AL", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "N", "AL", "AL", "NSM", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "N", "N", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "AL", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "R", "R", "N", "N", "N", "N", "R", "N", "N", "N", "N", "N", "WS", "WS", "WS", "WS", "WS", "WS", "WS", "WS", "WS", "WS", "WS", "BN", "BN", "BN", "L", "R", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "WS", "B", "LRE", "RLE", "PDF", "LRO", "RLO", "CS", "ET", "ET", "ET", "ET", "ET", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "CS", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "WS", "BN", "BN", "BN", "BN", "BN", "N", "LRI", "RLI", "FSI", "PDI", "BN", "BN", "BN", "BN", "BN", "BN", "EN", "L", "N", "N", "EN", "EN", "EN", "EN", "EN", "EN", "ES", "ES", "N", "N", "N", "L", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "ES", "ES", "N", "N", "N", "N", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "N", "N", "N", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "ET", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "L", "L", "L", "L", "L", "L", "L", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "L", "L", "L", "L", "L", "N", "N", "N", "N", "N", "R", "NSM", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "ES", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "N", "R", "R", "R", "R", "R", "N", "R", "N", "R", "R", "N", "R", "R", "N", "R", "R", "R", "R", "R", "R", "R", "R", "R", "R", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "NSM", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "CS", "N", "CS", "N", "N", "CS", "N", "N", "N", "N", "N", "N", "N", "N", "N", "ET", "N", "N", "ES", "ES", "N", "N", "N", "N", "N", "ET", "ET", "N", "N", "N", "N", "N", "AL", "AL", "AL", "AL", "AL", "N", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "AL", "N", "N", "BN", "N", "N", "N", "ET", "ET", "ET", "N", "N", "N", "N", "N", "ES", "CS", "ES", "CS", "CS", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN", "CS", "N", "N", "N", "N", "N", "N", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "N", "N", "N", "N", "N", "N", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "L", "N", "N", "N", "L", "L", "L", "L", "L", "L", "N", "N", "L", "L", "L", "L", "L", "L", "N", "N", "L", "L", "L", "L", "L", "L", "N", "N", "L", "L", "L", "N", "N", "N", "ET", "ET", "N", "N", "N", "ET", "ET", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N", "N"], n = new e.__bidiEngine__({ isInputVisual: !0 });
  e.API.events.push(["postProcessText", function(i) {
    var r = i.text, s = (i.x, i.y, i.options || {}), o = (i.mutex, s.lang, []);
    if (s.isInputVisual = typeof s.isInputVisual != "boolean" || s.isInputVisual, n.setOptions(s), Object.prototype.toString.call(r) === "[object Array]") {
      var a = 0;
      for (o = [], a = 0; a < r.length; a += 1) Object.prototype.toString.call(r[a]) === "[object Array]" ? o.push([n.doBidiReorder(r[a][0]), r[a][1], r[a][2]]) : o.push([n.doBidiReorder(r[a])]);
      i.text = o;
    } else i.text = n.doBidiReorder(r);
    n.setOptions({ isInputVisual: !0 });
  }]);
}(ye), ye.API.TTFFont = function() {
  function e(t) {
    var n;
    if (this.rawData = t, n = this.contents = new Rs(t), this.contents.pos = 4, n.readString(4) === "ttcf") throw new Error("TTCF not supported.");
    n.pos = 0, this.parse(), this.subset = new Hv(this), this.registerTTF();
  }
  return e.open = function(t) {
    return new e(t);
  }, e.prototype.parse = function() {
    return this.directory = new Iv(this.contents), this.head = new Ov(this), this.name = new jv(this), this.cmap = new F1(this), this.toUnicode = {}, this.hhea = new Fv(this), this.maxp = new Bv(this), this.hmtx = new qv(this), this.post = new Rv(this), this.os2 = new Mv(this), this.loca = new Wv(this), this.glyf = new $v(this), this.ascender = this.os2.exists && this.os2.ascender || this.hhea.ascender, this.decender = this.os2.exists && this.os2.decender || this.hhea.decender, this.lineGap = this.os2.exists && this.os2.lineGap || this.hhea.lineGap, this.bbox = [this.head.xMin, this.head.yMin, this.head.xMax, this.head.yMax];
  }, e.prototype.registerTTF = function() {
    var t, n, i, r, s;
    if (this.scaleFactor = 1e3 / this.head.unitsPerEm, this.bbox = (function() {
      var o, a, l, h;
      for (h = [], o = 0, a = (l = this.bbox).length; o < a; o++) t = l[o], h.push(Math.round(t * this.scaleFactor));
      return h;
    }).call(this), this.stemV = 0, this.post.exists ? (i = 255 & (r = this.post.italic_angle), 32768 & (n = r >> 16) && (n = -(1 + (65535 ^ n))), this.italicAngle = +(n + "." + i)) : this.italicAngle = 0, this.ascender = Math.round(this.ascender * this.scaleFactor), this.decender = Math.round(this.decender * this.scaleFactor), this.lineGap = Math.round(this.lineGap * this.scaleFactor), this.capHeight = this.os2.exists && this.os2.capHeight || this.ascender, this.xHeight = this.os2.exists && this.os2.xHeight || 0, this.familyClass = (this.os2.exists && this.os2.familyClass || 0) >> 8, this.isSerif = (s = this.familyClass) === 1 || s === 2 || s === 3 || s === 4 || s === 5 || s === 7, this.isScript = this.familyClass === 10, this.flags = 0, this.post.isFixedPitch && (this.flags |= 1), this.isSerif && (this.flags |= 2), this.isScript && (this.flags |= 8), this.italicAngle !== 0 && (this.flags |= 64), this.flags |= 32, !this.cmap.unicode) throw new Error("No unicode cmap for font");
  }, e.prototype.characterToGlyph = function(t) {
    var n;
    return ((n = this.cmap.unicode) != null ? n.codeMap[t] : void 0) || 0;
  }, e.prototype.widthOfGlyph = function(t) {
    var n;
    return n = 1e3 / this.head.unitsPerEm, this.hmtx.forGlyph(t).advance * n;
  }, e.prototype.widthOfString = function(t, n, i) {
    var r, s, o, a;
    for (o = 0, s = 0, a = (t = "" + t).length; 0 <= a ? s < a : s > a; s = 0 <= a ? ++s : --s) r = t.charCodeAt(s), o += this.widthOfGlyph(this.characterToGlyph(r)) + i * (1e3 / n) || 0;
    return o * (n / 1e3);
  }, e.prototype.lineHeight = function(t, n) {
    var i;
    return n == null && (n = !1), i = n ? this.lineGap : 0, (this.ascender + i - this.decender) / 1e3 * t;
  }, e;
}();
var wr, Rs = function() {
  function e(t) {
    this.data = t ?? [], this.pos = 0, this.length = this.data.length;
  }
  return e.prototype.readByte = function() {
    return this.data[this.pos++];
  }, e.prototype.writeByte = function(t) {
    return this.data[this.pos++] = t;
  }, e.prototype.readUInt32 = function() {
    return 16777216 * this.readByte() + (this.readByte() << 16) + (this.readByte() << 8) + this.readByte();
  }, e.prototype.writeUInt32 = function(t) {
    return this.writeByte(t >>> 24 & 255), this.writeByte(t >> 16 & 255), this.writeByte(t >> 8 & 255), this.writeByte(255 & t);
  }, e.prototype.readInt32 = function() {
    var t;
    return (t = this.readUInt32()) >= 2147483648 ? t - 4294967296 : t;
  }, e.prototype.writeInt32 = function(t) {
    return t < 0 && (t += 4294967296), this.writeUInt32(t);
  }, e.prototype.readUInt16 = function() {
    return this.readByte() << 8 | this.readByte();
  }, e.prototype.writeUInt16 = function(t) {
    return this.writeByte(t >> 8 & 255), this.writeByte(255 & t);
  }, e.prototype.readInt16 = function() {
    var t;
    return (t = this.readUInt16()) >= 32768 ? t - 65536 : t;
  }, e.prototype.writeInt16 = function(t) {
    return t < 0 && (t += 65536), this.writeUInt16(t);
  }, e.prototype.readString = function(t) {
    var n, i;
    for (i = [], n = 0; 0 <= t ? n < t : n > t; n = 0 <= t ? ++n : --n) i[n] = String.fromCharCode(this.readByte());
    return i.join("");
  }, e.prototype.writeString = function(t) {
    var n, i, r;
    for (r = [], n = 0, i = t.length; 0 <= i ? n < i : n > i; n = 0 <= i ? ++n : --n) r.push(this.writeByte(t.charCodeAt(n)));
    return r;
  }, e.prototype.readShort = function() {
    return this.readInt16();
  }, e.prototype.writeShort = function(t) {
    return this.writeInt16(t);
  }, e.prototype.readLongLong = function() {
    var t, n, i, r, s, o, a, l;
    return t = this.readByte(), n = this.readByte(), i = this.readByte(), r = this.readByte(), s = this.readByte(), o = this.readByte(), a = this.readByte(), l = this.readByte(), 128 & t ? -1 * (72057594037927940 * (255 ^ t) + 281474976710656 * (255 ^ n) + 1099511627776 * (255 ^ i) + 4294967296 * (255 ^ r) + 16777216 * (255 ^ s) + 65536 * (255 ^ o) + 256 * (255 ^ a) + (255 ^ l) + 1) : 72057594037927940 * t + 281474976710656 * n + 1099511627776 * i + 4294967296 * r + 16777216 * s + 65536 * o + 256 * a + l;
  }, e.prototype.writeLongLong = function(t) {
    var n, i;
    return n = Math.floor(t / 4294967296), i = 4294967295 & t, this.writeByte(n >> 24 & 255), this.writeByte(n >> 16 & 255), this.writeByte(n >> 8 & 255), this.writeByte(255 & n), this.writeByte(i >> 24 & 255), this.writeByte(i >> 16 & 255), this.writeByte(i >> 8 & 255), this.writeByte(255 & i);
  }, e.prototype.readInt = function() {
    return this.readInt32();
  }, e.prototype.writeInt = function(t) {
    return this.writeInt32(t);
  }, e.prototype.read = function(t) {
    var n, i;
    for (n = [], i = 0; 0 <= t ? i < t : i > t; i = 0 <= t ? ++i : --i) n.push(this.readByte());
    return n;
  }, e.prototype.write = function(t) {
    var n, i, r, s;
    for (s = [], i = 0, r = t.length; i < r; i++) n = t[i], s.push(this.writeByte(n));
    return s;
  }, e;
}(), Iv = function() {
  var e;
  function t(n) {
    var i, r, s;
    for (this.scalarType = n.readInt(), this.tableCount = n.readShort(), this.searchRange = n.readShort(), this.entrySelector = n.readShort(), this.rangeShift = n.readShort(), this.tables = {}, r = 0, s = this.tableCount; 0 <= s ? r < s : r > s; r = 0 <= s ? ++r : --r) i = { tag: n.readString(4), checksum: n.readInt(), offset: n.readInt(), length: n.readInt() }, this.tables[i.tag] = i;
  }
  return t.prototype.encode = function(n) {
    var i, r, s, o, a, l, h, c, d, g, p, b, x;
    for (x in p = Object.keys(n).length, l = Math.log(2), d = 16 * Math.floor(Math.log(p) / l), o = Math.floor(d / l), c = 16 * p - d, (r = new Rs()).writeInt(this.scalarType), r.writeShort(p), r.writeShort(d), r.writeShort(o), r.writeShort(c), s = 16 * p, h = r.pos + s, a = null, b = [], n) for (g = n[x], r.writeString(x), r.writeInt(e(g)), r.writeInt(h), r.writeInt(g.length), b = b.concat(g), x === "head" && (a = h), h += g.length; h % 4; ) b.push(0), h++;
    return r.write(b), i = 2981146554 - e(r.data), r.pos = a + 8, r.writeUInt32(i), r.data;
  }, e = function(n) {
    var i, r, s, o;
    for (n = M1.call(n); n.length % 4; ) n.push(0);
    for (s = new Rs(n), r = 0, i = 0, o = n.length; i < o; i = i += 4) r += s.readUInt32();
    return 4294967295 & r;
  }, t;
}(), Ev = {}.hasOwnProperty, Rr = function(e, t) {
  for (var n in t) Ev.call(t, n) && (e[n] = t[n]);
  function i() {
    this.constructor = e;
  }
  return i.prototype = t.prototype, e.prototype = new i(), e.__super__ = t.prototype, e;
};
wr = function() {
  function e(t) {
    var n;
    this.file = t, n = this.file.directory.tables[this.tag], this.exists = !!n, n && (this.offset = n.offset, this.length = n.length, this.parse(this.file.contents));
  }
  return e.prototype.parse = function() {
  }, e.prototype.encode = function() {
  }, e.prototype.raw = function() {
    return this.exists ? (this.file.contents.pos = this.offset, this.file.contents.read(this.length)) : null;
  }, e;
}();
var Ov = function(e) {
  function t() {
    return t.__super__.constructor.apply(this, arguments);
  }
  return Rr(t, wr), t.prototype.tag = "head", t.prototype.parse = function(n) {
    return n.pos = this.offset, this.version = n.readInt(), this.revision = n.readInt(), this.checkSumAdjustment = n.readInt(), this.magicNumber = n.readInt(), this.flags = n.readShort(), this.unitsPerEm = n.readShort(), this.created = n.readLongLong(), this.modified = n.readLongLong(), this.xMin = n.readShort(), this.yMin = n.readShort(), this.xMax = n.readShort(), this.yMax = n.readShort(), this.macStyle = n.readShort(), this.lowestRecPPEM = n.readShort(), this.fontDirectionHint = n.readShort(), this.indexToLocFormat = n.readShort(), this.glyphDataFormat = n.readShort();
  }, t.prototype.encode = function(n) {
    var i;
    return (i = new Rs()).writeInt(this.version), i.writeInt(this.revision), i.writeInt(this.checkSumAdjustment), i.writeInt(this.magicNumber), i.writeShort(this.flags), i.writeShort(this.unitsPerEm), i.writeLongLong(this.created), i.writeLongLong(this.modified), i.writeShort(this.xMin), i.writeShort(this.yMin), i.writeShort(this.xMax), i.writeShort(this.yMax), i.writeShort(this.macStyle), i.writeShort(this.lowestRecPPEM), i.writeShort(this.fontDirectionHint), i.writeShort(n), i.writeShort(this.glyphDataFormat), i.data;
  }, t;
}(), og = function() {
  function e(t, n) {
    var i, r, s, o, a, l, h, c, d, g, p, b, x, N, v, w, k;
    switch (this.platformID = t.readUInt16(), this.encodingID = t.readShort(), this.offset = n + t.readInt(), d = t.pos, t.pos = this.offset, this.format = t.readUInt16(), this.length = t.readUInt16(), this.language = t.readUInt16(), this.isUnicode = this.platformID === 3 && this.encodingID === 1 && this.format === 4 || this.platformID === 0 && this.format === 4, this.codeMap = {}, this.format) {
      case 0:
        for (l = 0; l < 256; ++l) this.codeMap[l] = t.readByte();
        break;
      case 4:
        for (p = t.readUInt16(), g = p / 2, t.pos += 6, s = function() {
          var T, D;
          for (D = [], l = T = 0; 0 <= g ? T < g : T > g; l = 0 <= g ? ++T : --T) D.push(t.readUInt16());
          return D;
        }(), t.pos += 2, x = function() {
          var T, D;
          for (D = [], l = T = 0; 0 <= g ? T < g : T > g; l = 0 <= g ? ++T : --T) D.push(t.readUInt16());
          return D;
        }(), h = function() {
          var T, D;
          for (D = [], l = T = 0; 0 <= g ? T < g : T > g; l = 0 <= g ? ++T : --T) D.push(t.readUInt16());
          return D;
        }(), c = function() {
          var T, D;
          for (D = [], l = T = 0; 0 <= g ? T < g : T > g; l = 0 <= g ? ++T : --T) D.push(t.readUInt16());
          return D;
        }(), r = (this.length - t.pos + this.offset) / 2, a = function() {
          var T, D;
          for (D = [], l = T = 0; 0 <= r ? T < r : T > r; l = 0 <= r ? ++T : --T) D.push(t.readUInt16());
          return D;
        }(), l = v = 0, k = s.length; v < k; l = ++v) for (N = s[l], i = w = b = x[l]; b <= N ? w <= N : w >= N; i = b <= N ? ++w : --w) c[l] === 0 ? o = i + h[l] : (o = a[c[l] / 2 + (i - b) - (g - l)] || 0) !== 0 && (o += h[l]), this.codeMap[i] = 65535 & o;
    }
    t.pos = d;
  }
  return e.encode = function(t, n) {
    var i, r, s, o, a, l, h, c, d, g, p, b, x, N, v, w, k, T, D, G, R, O, $, z, A, _, I, M, st, W, U, Q, Z, ct, St, P, B, V, J, nt, gt, yt, vt, Rt, Dt, Ut;
    switch (M = new Rs(), o = Object.keys(t).sort(function(Wt, he) {
      return Wt - he;
    }), n) {
      case "macroman":
        for (x = 0, N = function() {
          var Wt = [];
          for (b = 0; b < 256; ++b) Wt.push(0);
          return Wt;
        }(), w = { 0: 0 }, s = {}, st = 0, Z = o.length; st < Z; st++) w[vt = t[r = o[st]]] == null && (w[vt] = ++x), s[r] = { old: t[r], new: w[t[r]] }, N[r] = w[t[r]];
        return M.writeUInt16(1), M.writeUInt16(0), M.writeUInt32(12), M.writeUInt16(0), M.writeUInt16(262), M.writeUInt16(0), M.write(N), { charMap: s, subtable: M.data, maxGlyphID: x + 1 };
      case "unicode":
        for (_ = [], d = [], k = 0, w = {}, i = {}, v = h = null, W = 0, ct = o.length; W < ct; W++) w[D = t[r = o[W]]] == null && (w[D] = ++k), i[r] = { old: D, new: w[D] }, a = w[D] - r, v != null && a === h || (v && d.push(v), _.push(r), h = a), v = r;
        for (v && d.push(v), d.push(65535), _.push(65535), z = 2 * ($ = _.length), O = 2 * Math.pow(Math.log($) / Math.LN2, 2), g = Math.log(O / 2) / Math.LN2, R = 2 * $ - O, l = [], G = [], p = [], b = U = 0, St = _.length; U < St; b = ++U) {
          if (A = _[b], c = d[b], A === 65535) {
            l.push(0), G.push(0);
            break;
          }
          if (A - (I = i[A].new) >= 32768) for (l.push(0), G.push(2 * (p.length + $ - b)), r = Q = A; A <= c ? Q <= c : Q >= c; r = A <= c ? ++Q : --Q) p.push(i[r].new);
          else l.push(I - A), G.push(0);
        }
        for (M.writeUInt16(3), M.writeUInt16(1), M.writeUInt32(12), M.writeUInt16(4), M.writeUInt16(16 + 8 * $ + 2 * p.length), M.writeUInt16(0), M.writeUInt16(z), M.writeUInt16(O), M.writeUInt16(g), M.writeUInt16(R), gt = 0, P = d.length; gt < P; gt++) r = d[gt], M.writeUInt16(r);
        for (M.writeUInt16(0), yt = 0, B = _.length; yt < B; yt++) r = _[yt], M.writeUInt16(r);
        for (Rt = 0, V = l.length; Rt < V; Rt++) a = l[Rt], M.writeUInt16(a);
        for (Dt = 0, J = G.length; Dt < J; Dt++) T = G[Dt], M.writeUInt16(T);
        for (Ut = 0, nt = p.length; Ut < nt; Ut++) x = p[Ut], M.writeUInt16(x);
        return { charMap: i, subtable: M.data, maxGlyphID: k + 1 };
    }
  }, e;
}(), F1 = function(e) {
  function t() {
    return t.__super__.constructor.apply(this, arguments);
  }
  return Rr(t, wr), t.prototype.tag = "cmap", t.prototype.parse = function(n) {
    var i, r, s;
    for (n.pos = this.offset, this.version = n.readUInt16(), s = n.readUInt16(), this.tables = [], this.unicode = null, r = 0; 0 <= s ? r < s : r > s; r = 0 <= s ? ++r : --r) i = new og(n, this.offset), this.tables.push(i), i.isUnicode && this.unicode == null && (this.unicode = i);
    return !0;
  }, t.encode = function(n, i) {
    var r, s;
    return i == null && (i = "macroman"), r = og.encode(n, i), (s = new Rs()).writeUInt16(0), s.writeUInt16(1), r.table = s.data.concat(r.subtable), r;
  }, t;
}(), Fv = function(e) {
  function t() {
    return t.__super__.constructor.apply(this, arguments);
  }
  return Rr(t, wr), t.prototype.tag = "hhea", t.prototype.parse = function(n) {
    return n.pos = this.offset, this.version = n.readInt(), this.ascender = n.readShort(), this.decender = n.readShort(), this.lineGap = n.readShort(), this.advanceWidthMax = n.readShort(), this.minLeftSideBearing = n.readShort(), this.minRightSideBearing = n.readShort(), this.xMaxExtent = n.readShort(), this.caretSlopeRise = n.readShort(), this.caretSlopeRun = n.readShort(), this.caretOffset = n.readShort(), n.pos += 8, this.metricDataFormat = n.readShort(), this.numberOfMetrics = n.readUInt16();
  }, t;
}(), Mv = function(e) {
  function t() {
    return t.__super__.constructor.apply(this, arguments);
  }
  return Rr(t, wr), t.prototype.tag = "OS/2", t.prototype.parse = function(n) {
    if (n.pos = this.offset, this.version = n.readUInt16(), this.averageCharWidth = n.readShort(), this.weightClass = n.readUInt16(), this.widthClass = n.readUInt16(), this.type = n.readShort(), this.ySubscriptXSize = n.readShort(), this.ySubscriptYSize = n.readShort(), this.ySubscriptXOffset = n.readShort(), this.ySubscriptYOffset = n.readShort(), this.ySuperscriptXSize = n.readShort(), this.ySuperscriptYSize = n.readShort(), this.ySuperscriptXOffset = n.readShort(), this.ySuperscriptYOffset = n.readShort(), this.yStrikeoutSize = n.readShort(), this.yStrikeoutPosition = n.readShort(), this.familyClass = n.readShort(), this.panose = function() {
      var i, r;
      for (r = [], i = 0; i < 10; ++i) r.push(n.readByte());
      return r;
    }(), this.charRange = function() {
      var i, r;
      for (r = [], i = 0; i < 4; ++i) r.push(n.readInt());
      return r;
    }(), this.vendorID = n.readString(4), this.selection = n.readShort(), this.firstCharIndex = n.readShort(), this.lastCharIndex = n.readShort(), this.version > 0 && (this.ascent = n.readShort(), this.descent = n.readShort(), this.lineGap = n.readShort(), this.winAscent = n.readShort(), this.winDescent = n.readShort(), this.codePageRange = function() {
      var i, r;
      for (r = [], i = 0; i < 2; i = ++i) r.push(n.readInt());
      return r;
    }(), this.version > 1)) return this.xHeight = n.readShort(), this.capHeight = n.readShort(), this.defaultChar = n.readShort(), this.breakChar = n.readShort(), this.maxContext = n.readShort();
  }, t;
}(), Rv = function(e) {
  function t() {
    return t.__super__.constructor.apply(this, arguments);
  }
  return Rr(t, wr), t.prototype.tag = "post", t.prototype.parse = function(n) {
    var i, r, s;
    switch (n.pos = this.offset, this.format = n.readInt(), this.italicAngle = n.readInt(), this.underlinePosition = n.readShort(), this.underlineThickness = n.readShort(), this.isFixedPitch = n.readInt(), this.minMemType42 = n.readInt(), this.maxMemType42 = n.readInt(), this.minMemType1 = n.readInt(), this.maxMemType1 = n.readInt(), this.format) {
      case 65536:
        break;
      case 131072:
        var o;
        for (r = n.readUInt16(), this.glyphNameIndex = [], o = 0; 0 <= r ? o < r : o > r; o = 0 <= r ? ++o : --o) this.glyphNameIndex.push(n.readUInt16());
        for (this.names = [], s = []; n.pos < this.offset + this.length; ) i = n.readByte(), s.push(this.names.push(n.readString(i)));
        return s;
      case 151552:
        return r = n.readUInt16(), this.offsets = n.read(r);
      case 196608:
        break;
      case 262144:
        return this.map = (function() {
          var a, l, h;
          for (h = [], o = a = 0, l = this.file.maxp.numGlyphs; 0 <= l ? a < l : a > l; o = 0 <= l ? ++a : --a) h.push(n.readUInt32());
          return h;
        }).call(this);
    }
  }, t;
}(), Dv = function(e, t) {
  this.raw = e, this.length = e.length, this.platformID = t.platformID, this.encodingID = t.encodingID, this.languageID = t.languageID;
}, jv = function(e) {
  function t() {
    return t.__super__.constructor.apply(this, arguments);
  }
  return Rr(t, wr), t.prototype.tag = "name", t.prototype.parse = function(n) {
    var i, r, s, o, a, l, h, c, d, g, p;
    for (n.pos = this.offset, n.readShort(), i = n.readShort(), l = n.readShort(), r = [], o = 0; 0 <= i ? o < i : o > i; o = 0 <= i ? ++o : --o) r.push({ platformID: n.readShort(), encodingID: n.readShort(), languageID: n.readShort(), nameID: n.readShort(), length: n.readShort(), offset: this.offset + l + n.readShort() });
    for (h = {}, o = d = 0, g = r.length; d < g; o = ++d) s = r[o], n.pos = s.offset, c = n.readString(s.length), a = new Dv(c, s), h[p = s.nameID] == null && (h[p] = []), h[s.nameID].push(a);
    this.strings = h, this.copyright = h[0], this.fontFamily = h[1], this.fontSubfamily = h[2], this.uniqueSubfamily = h[3], this.fontName = h[4], this.version = h[5];
    try {
      this.postscriptName = h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g, "");
    } catch {
      this.postscriptName = h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g, "");
    }
    return this.trademark = h[7], this.manufacturer = h[8], this.designer = h[9], this.description = h[10], this.vendorUrl = h[11], this.designerUrl = h[12], this.license = h[13], this.licenseUrl = h[14], this.preferredFamily = h[15], this.preferredSubfamily = h[17], this.compatibleFull = h[18], this.sampleText = h[19];
  }, t;
}(), Bv = function(e) {
  function t() {
    return t.__super__.constructor.apply(this, arguments);
  }
  return Rr(t, wr), t.prototype.tag = "maxp", t.prototype.parse = function(n) {
    return n.pos = this.offset, this.version = n.readInt(), this.numGlyphs = n.readUInt16(), this.maxPoints = n.readUInt16(), this.maxContours = n.readUInt16(), this.maxCompositePoints = n.readUInt16(), this.maxComponentContours = n.readUInt16(), this.maxZones = n.readUInt16(), this.maxTwilightPoints = n.readUInt16(), this.maxStorage = n.readUInt16(), this.maxFunctionDefs = n.readUInt16(), this.maxInstructionDefs = n.readUInt16(), this.maxStackElements = n.readUInt16(), this.maxSizeOfInstructions = n.readUInt16(), this.maxComponentElements = n.readUInt16(), this.maxComponentDepth = n.readUInt16();
  }, t;
}(), qv = function(e) {
  function t() {
    return t.__super__.constructor.apply(this, arguments);
  }
  return Rr(t, wr), t.prototype.tag = "hmtx", t.prototype.parse = function(n) {
    var i, r, s, o, a, l, h;
    for (n.pos = this.offset, this.metrics = [], i = 0, l = this.file.hhea.numberOfMetrics; 0 <= l ? i < l : i > l; i = 0 <= l ? ++i : --i) this.metrics.push({ advance: n.readUInt16(), lsb: n.readInt16() });
    for (s = this.file.maxp.numGlyphs - this.file.hhea.numberOfMetrics, this.leftSideBearings = function() {
      var c, d;
      for (d = [], i = c = 0; 0 <= s ? c < s : c > s; i = 0 <= s ? ++c : --c) d.push(n.readInt16());
      return d;
    }(), this.widths = (function() {
      var c, d, g, p;
      for (p = [], c = 0, d = (g = this.metrics).length; c < d; c++) o = g[c], p.push(o.advance);
      return p;
    }).call(this), r = this.widths[this.widths.length - 1], h = [], i = a = 0; 0 <= s ? a < s : a > s; i = 0 <= s ? ++a : --a) h.push(this.widths.push(r));
    return h;
  }, t.prototype.forGlyph = function(n) {
    return n in this.metrics ? this.metrics[n] : { advance: this.metrics[this.metrics.length - 1].advance, lsb: this.leftSideBearings[n - this.metrics.length] };
  }, t;
}(), M1 = [].slice, $v = function(e) {
  function t() {
    return t.__super__.constructor.apply(this, arguments);
  }
  return Rr(t, wr), t.prototype.tag = "glyf", t.prototype.parse = function() {
    return this.cache = {};
  }, t.prototype.glyphFor = function(n) {
    var i, r, s, o, a, l, h, c, d, g;
    return n in this.cache ? this.cache[n] : (o = this.file.loca, i = this.file.contents, r = o.indexOf(n), (s = o.lengthOf(n)) === 0 ? this.cache[n] = null : (i.pos = this.offset + r, a = (l = new Rs(i.read(s))).readShort(), c = l.readShort(), g = l.readShort(), h = l.readShort(), d = l.readShort(), this.cache[n] = a === -1 ? new Uv(l, c, g, h, d) : new zv(l, a, c, g, h, d), this.cache[n]));
  }, t.prototype.encode = function(n, i, r) {
    var s, o, a, l, h;
    for (a = [], o = [], l = 0, h = i.length; l < h; l++) s = n[i[l]], o.push(a.length), s && (a = a.concat(s.encode(r)));
    return o.push(a.length), { table: a, offsets: o };
  }, t;
}(), zv = function() {
  function e(t, n, i, r, s, o) {
    this.raw = t, this.numberOfContours = n, this.xMin = i, this.yMin = r, this.xMax = s, this.yMax = o, this.compound = !1;
  }
  return e.prototype.encode = function() {
    return this.raw.data;
  }, e;
}(), Uv = function() {
  function e(t, n, i, r, s) {
    var o, a;
    for (this.raw = t, this.xMin = n, this.yMin = i, this.xMax = r, this.yMax = s, this.compound = !0, this.glyphIDs = [], this.glyphOffsets = [], o = this.raw; a = o.readShort(), this.glyphOffsets.push(o.pos), this.glyphIDs.push(o.readUInt16()), 32 & a; ) o.pos += 1 & a ? 4 : 2, 128 & a ? o.pos += 8 : 64 & a ? o.pos += 4 : 8 & a && (o.pos += 2);
  }
  return e.prototype.encode = function() {
    var t, n, i;
    for (n = new Rs(M1.call(this.raw.data)), t = 0, i = this.glyphIDs.length; t < i; ++t) n.pos = this.glyphOffsets[t];
    return n.data;
  }, e;
}(), Wv = function(e) {
  function t() {
    return t.__super__.constructor.apply(this, arguments);
  }
  return Rr(t, wr), t.prototype.tag = "loca", t.prototype.parse = function(n) {
    var i, r;
    return n.pos = this.offset, i = this.file.head.indexToLocFormat, this.offsets = i === 0 ? (function() {
      var s, o;
      for (o = [], r = 0, s = this.length; r < s; r += 2) o.push(2 * n.readUInt16());
      return o;
    }).call(this) : (function() {
      var s, o;
      for (o = [], r = 0, s = this.length; r < s; r += 4) o.push(n.readUInt32());
      return o;
    }).call(this);
  }, t.prototype.indexOf = function(n) {
    return this.offsets[n];
  }, t.prototype.lengthOf = function(n) {
    return this.offsets[n + 1] - this.offsets[n];
  }, t.prototype.encode = function(n, i) {
    for (var r = new Uint32Array(this.offsets.length), s = 0, o = 0, a = 0; a < r.length; ++a) if (r[a] = s, o < i.length && i[o] == a) {
      ++o, r[a] = s;
      var l = this.offsets[a], h = this.offsets[a + 1] - l;
      h > 0 && (s += h);
    }
    for (var c = new Array(4 * r.length), d = 0; d < r.length; ++d) c[4 * d + 3] = 255 & r[d], c[4 * d + 2] = (65280 & r[d]) >> 8, c[4 * d + 1] = (16711680 & r[d]) >> 16, c[4 * d] = (4278190080 & r[d]) >> 24;
    return c;
  }, t;
}(), Hv = function() {
  function e(t) {
    this.font = t, this.subset = {}, this.unicodes = {}, this.next = 33;
  }
  return e.prototype.generateCmap = function() {
    var t, n, i, r, s;
    for (n in r = this.font.cmap.tables[0].codeMap, t = {}, s = this.subset) i = s[n], t[n] = r[i];
    return t;
  }, e.prototype.glyphsFor = function(t) {
    var n, i, r, s, o, a, l;
    for (r = {}, o = 0, a = t.length; o < a; o++) r[s = t[o]] = this.font.glyf.glyphFor(s);
    for (s in n = [], r) (i = r[s]) != null && i.compound && n.push.apply(n, i.glyphIDs);
    if (n.length > 0) for (s in l = this.glyphsFor(n)) i = l[s], r[s] = i;
    return r;
  }, e.prototype.encode = function(t, n) {
    var i, r, s, o, a, l, h, c, d, g, p, b, x, N, v;
    for (r in i = F1.encode(this.generateCmap(), "unicode"), o = this.glyphsFor(t), p = { 0: 0 }, v = i.charMap) p[(l = v[r]).old] = l.new;
    for (b in g = i.maxGlyphID, o) b in p || (p[b] = g++);
    return c = function(w) {
      var k, T;
      for (k in T = {}, w) T[w[k]] = k;
      return T;
    }(p), d = Object.keys(c).sort(function(w, k) {
      return w - k;
    }), x = function() {
      var w, k, T;
      for (T = [], w = 0, k = d.length; w < k; w++) a = d[w], T.push(c[a]);
      return T;
    }(), s = this.font.glyf.encode(o, x, p), h = this.font.loca.encode(s.offsets, x), N = { cmap: this.font.cmap.raw(), glyf: s.table, loca: h, hmtx: this.font.hmtx.raw(), hhea: this.font.hhea.raw(), maxp: this.font.maxp.raw(), post: this.font.post.raw(), name: this.font.name.raw(), head: this.font.head.encode(n) }, this.font.os2.exists && (N["OS/2"] = this.font.os2.raw()), this.font.directory.encode(N);
  }, e;
}();
ye.API.PDFObject = function() {
  var e;
  function t() {
  }
  return e = function(n, i) {
    return (Array(i + 1).join("0") + n).slice(-i);
  }, t.convert = function(n) {
    var i, r, s, o;
    if (Array.isArray(n)) return "[" + function() {
      var a, l, h;
      for (h = [], a = 0, l = n.length; a < l; a++) i = n[a], h.push(t.convert(i));
      return h;
    }().join(" ") + "]";
    if (typeof n == "string") return "/" + n;
    if (n != null && n.isString) return "(" + n + ")";
    if (n instanceof Date) return "(D:" + e(n.getUTCFullYear(), 4) + e(n.getUTCMonth(), 2) + e(n.getUTCDate(), 2) + e(n.getUTCHours(), 2) + e(n.getUTCMinutes(), 2) + e(n.getUTCSeconds(), 2) + "Z)";
    if ({}.toString.call(n) === "[object Object]") {
      for (r in s = ["<<"], n) o = n[r], s.push("/" + r + " " + t.convert(o));
      return s.push(">>"), s.join(`
`);
    }
    return "" + n;
  }, t;
}();
const Gv = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({ __proto__: null, AcroForm: Av, AcroFormAppearance: ie, AcroFormButton: Rn, AcroFormCheckBox: dl, AcroFormChoiceField: ao, AcroFormComboBox: uo, AcroFormEditBox: hl, AcroFormListBox: lo, AcroFormPasswordField: pl, AcroFormPushButton: fl, AcroFormRadioButton: co, AcroFormTextField: Es, GState: ml, ShadingPattern: Ns, TilingPattern: ro, default: ye, jsPDF: ye }, Symbol.toStringTag, { value: "Module" }));
var R1 = { exports: {} };
const Vv = /* @__PURE__ */ py(Gv);
/*!
* 
*               jsPDF AutoTable plugin v3.8.4
*
*               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
*               Licensed under the MIT License.
*               http://opensource.org/licenses/mit-license
*
*/
(function(e, t) {
  (function(i, r) {
    e.exports = r(function() {
      try {
        return Vv;
      } catch {
      }
    }());
  })(typeof globalThis < "u" ? globalThis : typeof dh < "u" ? dh : typeof window < "u" ? window : typeof self < "u" ? self : dh, function(n) {
    return (
      /******/
      function() {
        var i = {
          /***/
          172: (
            /***/
            function(a, l) {
              var h = this && this.__extends || /* @__PURE__ */ function() {
                var g = function(p, b) {
                  return g = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(x, N) {
                    x.__proto__ = N;
                  } || function(x, N) {
                    for (var v in N) Object.prototype.hasOwnProperty.call(N, v) && (x[v] = N[v]);
                  }, g(p, b);
                };
                return function(p, b) {
                  if (typeof b != "function" && b !== null)
                    throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
                  g(p, b);
                  function x() {
                    this.constructor = p;
                  }
                  p.prototype = b === null ? Object.create(b) : (x.prototype = b.prototype, new x());
                };
              }();
              Object.defineProperty(l, "__esModule", { value: !0 }), l.CellHookData = l.HookData = void 0;
              var c = (
                /** @class */
                /* @__PURE__ */ function() {
                  function g(p, b, x) {
                    this.table = b, this.pageNumber = b.pageNumber, this.pageCount = this.pageNumber, this.settings = b.settings, this.cursor = x, this.doc = p.getDocument();
                  }
                  return g;
                }()
              );
              l.HookData = c;
              var d = (
                /** @class */
                function(g) {
                  h(p, g);
                  function p(b, x, N, v, w, k) {
                    var T = g.call(this, b, x, k) || this;
                    return T.cell = N, T.row = v, T.column = w, T.section = v.section, T;
                  }
                  return p;
                }(c)
              );
              l.CellHookData = d;
            }
          ),
          /***/
          340: (
            /***/
            function(a, l, h) {
              Object.defineProperty(l, "__esModule", { value: !0 });
              var c = h(4), d = h(136), g = h(744), p = h(776), b = h(664), x = h(972);
              function N(v) {
                v.API.autoTable = function() {
                  for (var w = [], k = 0; k < arguments.length; k++)
                    w[k] = arguments[k];
                  var T;
                  w.length === 1 ? T = w[0] : (console.error("Use of deprecated autoTable initiation"), T = w[2] || {}, T.columns = w[0], T.body = w[1]);
                  var D = (0, p.parseInput)(this, T), G = (0, x.createTable)(this, D);
                  return (0, b.drawTable)(this, G), this;
                }, v.API.lastAutoTable = !1, v.API.previousAutoTable = !1, v.API.autoTable.previous = !1, v.API.autoTableText = function(w, k, T, D) {
                  (0, d.default)(w, k, T, D, this);
                }, v.API.autoTableSetDefaults = function(w) {
                  return g.DocHandler.setDefaults(w, this), this;
                }, v.autoTableSetDefaults = function(w, k) {
                  g.DocHandler.setDefaults(w, k);
                }, v.API.autoTableHtmlToJson = function(w, k) {
                  var T;
                  if (k === void 0 && (k = !1), typeof window > "u")
                    return console.error("Cannot run autoTableHtmlToJson in non browser environment"), null;
                  var D = new g.DocHandler(this), G = (0, c.parseHtml)(D, w, window, k, !1), R = G.head, O = G.body, $ = ((T = R[0]) === null || T === void 0 ? void 0 : T.map(function(z) {
                    return z.content;
                  })) || [];
                  return { columns: $, rows: O, data: O };
                }, v.API.autoTableEndPosY = function() {
                  console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");
                  var w = this.lastAutoTable;
                  return w && w.finalY ? w.finalY : 0;
                }, v.API.autoTableAddPageContent = function(w) {
                  return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."), v.API.autoTable.globalDefaults || (v.API.autoTable.globalDefaults = {}), v.API.autoTable.globalDefaults.addPageContent = w, this;
                }, v.API.autoTableAddPage = function() {
                  return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"), this.addPage(), this;
                };
              }
              l.default = N;
            }
          ),
          /***/
          136: (
            /***/
            function(a, l) {
              Object.defineProperty(l, "__esModule", { value: !0 });
              function h(c, d, g, p, b) {
                p = p || {};
                var x = 1.15, N = b.internal.scaleFactor, v = b.internal.getFontSize() / N, w = b.getLineHeightFactor ? b.getLineHeightFactor() : x, k = v * w, T = /\r\n|\r|\n/g, D = "", G = 1;
                if ((p.valign === "middle" || p.valign === "bottom" || p.halign === "center" || p.halign === "right") && (D = typeof c == "string" ? c.split(T) : c, G = D.length || 1), g += v * (2 - x), p.valign === "middle" ? g -= G / 2 * k : p.valign === "bottom" && (g -= G * k), p.halign === "center" || p.halign === "right") {
                  var R = v;
                  if (p.halign === "center" && (R *= 0.5), D && G >= 1) {
                    for (var O = 0; O < D.length; O++)
                      b.text(D[O], d - b.getStringUnitWidth(D[O]) * R, g), g += k;
                    return b;
                  }
                  d -= b.getStringUnitWidth(c) * R;
                }
                return p.halign === "justify" ? b.text(c, d, g, {
                  maxWidth: p.maxWidth || 100,
                  align: "justify"
                }) : b.text(c, d, g), b;
              }
              l.default = h;
            }
          ),
          /***/
          420: (
            /***/
            function(a, l) {
              Object.defineProperty(l, "__esModule", { value: !0 }), l.getPageAvailableWidth = l.parseSpacing = l.getFillStyle = l.addTableBorder = l.getStringWidth = void 0;
              function h(b, x, N) {
                N.applyStyles(x, !0);
                var v = Array.isArray(b) ? b : [b], w = v.map(function(k) {
                  return N.getTextWidth(k);
                }).reduce(function(k, T) {
                  return Math.max(k, T);
                }, 0);
                return w;
              }
              l.getStringWidth = h;
              function c(b, x, N, v) {
                var w = x.settings.tableLineWidth, k = x.settings.tableLineColor;
                b.applyStyles({ lineWidth: w, lineColor: k });
                var T = d(w, !1);
                T && b.rect(N.x, N.y, x.getWidth(b.pageSize().width), v.y - N.y, T);
              }
              l.addTableBorder = c;
              function d(b, x) {
                var N = b > 0, v = x || x === 0;
                return N && v ? "DF" : N ? "S" : v ? "F" : null;
              }
              l.getFillStyle = d;
              function g(b, x) {
                var N, v, w, k;
                if (b = b || x, Array.isArray(b)) {
                  if (b.length >= 4)
                    return {
                      top: b[0],
                      right: b[1],
                      bottom: b[2],
                      left: b[3]
                    };
                  if (b.length === 3)
                    return {
                      top: b[0],
                      right: b[1],
                      bottom: b[2],
                      left: b[1]
                    };
                  if (b.length === 2)
                    return {
                      top: b[0],
                      right: b[1],
                      bottom: b[0],
                      left: b[1]
                    };
                  b.length === 1 ? b = b[0] : b = x;
                }
                return typeof b == "object" ? (typeof b.vertical == "number" && (b.top = b.vertical, b.bottom = b.vertical), typeof b.horizontal == "number" && (b.right = b.horizontal, b.left = b.horizontal), {
                  left: (N = b.left) !== null && N !== void 0 ? N : x,
                  top: (v = b.top) !== null && v !== void 0 ? v : x,
                  right: (w = b.right) !== null && w !== void 0 ? w : x,
                  bottom: (k = b.bottom) !== null && k !== void 0 ? k : x
                }) : (typeof b != "number" && (b = x), { top: b, right: b, bottom: b, left: b });
              }
              l.parseSpacing = g;
              function p(b, x) {
                var N = g(x.settings.margin, 0);
                return b.pageSize().width - (N.left + N.right);
              }
              l.getPageAvailableWidth = p;
            }
          ),
          /***/
          796: (
            /***/
            function(a, l) {
              var h = this && this.__extends || /* @__PURE__ */ function() {
                var p = function(b, x) {
                  return p = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(N, v) {
                    N.__proto__ = v;
                  } || function(N, v) {
                    for (var w in v) Object.prototype.hasOwnProperty.call(v, w) && (N[w] = v[w]);
                  }, p(b, x);
                };
                return function(b, x) {
                  if (typeof x != "function" && x !== null)
                    throw new TypeError("Class extends value " + String(x) + " is not a constructor or null");
                  p(b, x);
                  function N() {
                    this.constructor = b;
                  }
                  b.prototype = x === null ? Object.create(x) : (N.prototype = x.prototype, new N());
                };
              }();
              Object.defineProperty(l, "__esModule", { value: !0 }), l.getTheme = l.defaultStyles = l.HtmlRowInput = void 0;
              var c = (
                /** @class */
                function(p) {
                  h(b, p);
                  function b(x) {
                    var N = p.call(this) || this;
                    return N._element = x, N;
                  }
                  return b;
                }(Array)
              );
              l.HtmlRowInput = c;
              function d(p) {
                return {
                  font: "helvetica",
                  // helvetica, times, courier
                  fontStyle: "normal",
                  // normal, bold, italic, bolditalic
                  overflow: "linebreak",
                  // linebreak, ellipsize, visible or hidden
                  fillColor: !1,
                  // Either false for transparent, rbg array e.g. [255, 255, 255] or gray level e.g 200
                  textColor: 20,
                  halign: "left",
                  // left, center, right, justify
                  valign: "top",
                  // top, middle, bottom
                  fontSize: 10,
                  cellPadding: 5 / p,
                  // number or {top,left,right,left,vertical,horizontal}
                  lineColor: 200,
                  lineWidth: 0,
                  cellWidth: "auto",
                  // 'auto'|'wrap'|number
                  minCellHeight: 0,
                  minCellWidth: 0
                };
              }
              l.defaultStyles = d;
              function g(p) {
                var b = {
                  striped: {
                    table: { fillColor: 255, textColor: 80, fontStyle: "normal" },
                    head: { textColor: 255, fillColor: [41, 128, 185], fontStyle: "bold" },
                    body: {},
                    foot: { textColor: 255, fillColor: [41, 128, 185], fontStyle: "bold" },
                    alternateRow: { fillColor: 245 }
                  },
                  grid: {
                    table: {
                      fillColor: 255,
                      textColor: 80,
                      fontStyle: "normal",
                      lineWidth: 0.1
                    },
                    head: {
                      textColor: 255,
                      fillColor: [26, 188, 156],
                      fontStyle: "bold",
                      lineWidth: 0
                    },
                    body: {},
                    foot: {
                      textColor: 255,
                      fillColor: [26, 188, 156],
                      fontStyle: "bold",
                      lineWidth: 0
                    },
                    alternateRow: {}
                  },
                  plain: {
                    head: { fontStyle: "bold" },
                    foot: { fontStyle: "bold" }
                  }
                };
                return b[p];
              }
              l.getTheme = g;
            }
          ),
          /***/
          903: (
            /***/
            function(a, l, h) {
              Object.defineProperty(l, "__esModule", { value: !0 }), l.parseCss = void 0;
              var c = h(420);
              function d(N, v, w, k, T) {
                var D = {}, G = 1.3333333333333333, R = p(v, function(Z) {
                  return T.getComputedStyle(Z).backgroundColor;
                });
                R != null && (D.fillColor = R);
                var O = p(v, function(Z) {
                  return T.getComputedStyle(Z).color;
                });
                O != null && (D.textColor = O);
                var $ = x(k, w);
                $ && (D.cellPadding = $);
                var z = "borderTopColor", A = G * w, _ = k.borderTopWidth;
                if (k.borderBottomWidth === _ && k.borderRightWidth === _ && k.borderLeftWidth === _) {
                  var I = (parseFloat(_) || 0) / A;
                  I && (D.lineWidth = I);
                } else
                  D.lineWidth = {
                    top: (parseFloat(k.borderTopWidth) || 0) / A,
                    right: (parseFloat(k.borderRightWidth) || 0) / A,
                    bottom: (parseFloat(k.borderBottomWidth) || 0) / A,
                    left: (parseFloat(k.borderLeftWidth) || 0) / A
                  }, D.lineWidth.top || (D.lineWidth.right ? z = "borderRightColor" : D.lineWidth.bottom ? z = "borderBottomColor" : D.lineWidth.left && (z = "borderLeftColor"));
                var M = p(v, function(Z) {
                  return T.getComputedStyle(Z)[z];
                });
                M != null && (D.lineColor = M);
                var st = ["left", "right", "center", "justify"];
                st.indexOf(k.textAlign) !== -1 && (D.halign = k.textAlign), st = ["middle", "bottom", "top"], st.indexOf(k.verticalAlign) !== -1 && (D.valign = k.verticalAlign);
                var W = parseInt(k.fontSize || "");
                isNaN(W) || (D.fontSize = W / G);
                var U = g(k);
                U && (D.fontStyle = U);
                var Q = (k.fontFamily || "").toLowerCase();
                return N.indexOf(Q) !== -1 && (D.font = Q), D;
              }
              l.parseCss = d;
              function g(N) {
                var v = "";
                return (N.fontWeight === "bold" || N.fontWeight === "bolder" || parseInt(N.fontWeight) >= 700) && (v = "bold"), (N.fontStyle === "italic" || N.fontStyle === "oblique") && (v += "italic"), v;
              }
              function p(N, v) {
                var w = b(N, v);
                if (!w)
                  return null;
                var k = w.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);
                if (!k || !Array.isArray(k))
                  return null;
                var T = [
                  parseInt(k[1]),
                  parseInt(k[2]),
                  parseInt(k[3])
                ], D = parseInt(k[4]);
                return D === 0 || isNaN(T[0]) || isNaN(T[1]) || isNaN(T[2]) ? null : T;
              }
              function b(N, v) {
                var w = v(N);
                return w === "rgba(0, 0, 0, 0)" || w === "transparent" || w === "initial" || w === "inherit" ? N.parentElement == null ? null : b(N.parentElement, v) : w;
              }
              function x(N, v) {
                var w = [
                  N.paddingTop,
                  N.paddingRight,
                  N.paddingBottom,
                  N.paddingLeft
                ], k = 96 / (72 / v), T = (parseInt(N.lineHeight) - parseInt(N.fontSize)) / v / 2, D = w.map(function(R) {
                  return parseInt(R || "0") / k;
                }), G = (0, c.parseSpacing)(D, 0);
                return T > G.top && (G.top = T), T > G.bottom && (G.bottom = T), G;
              }
            }
          ),
          /***/
          744: (
            /***/
            function(a, l) {
              Object.defineProperty(l, "__esModule", { value: !0 }), l.DocHandler = void 0;
              var h = {}, c = (
                /** @class */
                function() {
                  function d(g) {
                    this.jsPDFDocument = g, this.userStyles = {
                      // Black for versions of jspdf without getTextColor
                      textColor: g.getTextColor ? this.jsPDFDocument.getTextColor() : 0,
                      fontSize: g.internal.getFontSize(),
                      fontStyle: g.internal.getFont().fontStyle,
                      font: g.internal.getFont().fontName,
                      // 0 for versions of jspdf without getLineWidth
                      lineWidth: g.getLineWidth ? this.jsPDFDocument.getLineWidth() : 0,
                      // Black for versions of jspdf without getDrawColor
                      lineColor: g.getDrawColor ? this.jsPDFDocument.getDrawColor() : 0
                    };
                  }
                  return d.setDefaults = function(g, p) {
                    p === void 0 && (p = null), p ? p.__autoTableDocumentDefaults = g : h = g;
                  }, d.unifyColor = function(g) {
                    return Array.isArray(g) ? g : typeof g == "number" ? [g, g, g] : typeof g == "string" ? [g] : null;
                  }, d.prototype.applyStyles = function(g, p) {
                    var b, x, N;
                    p === void 0 && (p = !1), g.fontStyle && this.jsPDFDocument.setFontStyle && this.jsPDFDocument.setFontStyle(g.fontStyle);
                    var v = this.jsPDFDocument.internal.getFont(), w = v.fontStyle, k = v.fontName;
                    if (g.font && (k = g.font), g.fontStyle) {
                      w = g.fontStyle;
                      var T = this.getFontList()[k];
                      T && T.indexOf(w) === -1 && (this.jsPDFDocument.setFontStyle && this.jsPDFDocument.setFontStyle(T[0]), w = T[0]);
                    }
                    if (this.jsPDFDocument.setFont(k, w), g.fontSize && this.jsPDFDocument.setFontSize(g.fontSize), !p) {
                      var D = d.unifyColor(g.fillColor);
                      D && (b = this.jsPDFDocument).setFillColor.apply(b, D), D = d.unifyColor(g.textColor), D && (x = this.jsPDFDocument).setTextColor.apply(x, D), D = d.unifyColor(g.lineColor), D && (N = this.jsPDFDocument).setDrawColor.apply(N, D), typeof g.lineWidth == "number" && this.jsPDFDocument.setLineWidth(g.lineWidth);
                    }
                  }, d.prototype.splitTextToSize = function(g, p, b) {
                    return this.jsPDFDocument.splitTextToSize(g, p, b);
                  }, d.prototype.rect = function(g, p, b, x, N) {
                    return this.jsPDFDocument.rect(g, p, b, x, N);
                  }, d.prototype.getLastAutoTable = function() {
                    return this.jsPDFDocument.lastAutoTable || null;
                  }, d.prototype.getTextWidth = function(g) {
                    return this.jsPDFDocument.getTextWidth(g);
                  }, d.prototype.getDocument = function() {
                    return this.jsPDFDocument;
                  }, d.prototype.setPage = function(g) {
                    this.jsPDFDocument.setPage(g);
                  }, d.prototype.addPage = function() {
                    return this.jsPDFDocument.addPage();
                  }, d.prototype.getFontList = function() {
                    return this.jsPDFDocument.getFontList();
                  }, d.prototype.getGlobalOptions = function() {
                    return h || {};
                  }, d.prototype.getDocumentOptions = function() {
                    return this.jsPDFDocument.__autoTableDocumentDefaults || {};
                  }, d.prototype.pageSize = function() {
                    var g = this.jsPDFDocument.internal.pageSize;
                    return g.width == null && (g = {
                      width: g.getWidth(),
                      height: g.getHeight()
                    }), g;
                  }, d.prototype.scaleFactor = function() {
                    return this.jsPDFDocument.internal.scaleFactor;
                  }, d.prototype.getLineHeightFactor = function() {
                    var g = this.jsPDFDocument;
                    return g.getLineHeightFactor ? g.getLineHeightFactor() : 1.15;
                  }, d.prototype.getLineHeight = function(g) {
                    return g / this.scaleFactor() * this.getLineHeightFactor();
                  }, d.prototype.pageNumber = function() {
                    var g = this.jsPDFDocument.internal.getCurrentPageInfo();
                    return g ? g.pageNumber : this.jsPDFDocument.internal.getNumberOfPages();
                  }, d;
                }()
              );
              l.DocHandler = c;
            }
          ),
          /***/
          4: (
            /***/
            function(a, l, h) {
              Object.defineProperty(l, "__esModule", { value: !0 }), l.parseHtml = void 0;
              var c = h(903), d = h(796);
              function g(x, N, v, w, k) {
                var T, D;
                w === void 0 && (w = !1), k === void 0 && (k = !1);
                var G;
                typeof N == "string" ? G = v.document.querySelector(N) : G = N;
                var R = Object.keys(x.getFontList()), O = x.scaleFactor(), $ = [], z = [], A = [];
                if (!G)
                  return console.error("Html table could not be found with input: ", N), { head: $, body: z, foot: A };
                for (var _ = 0; _ < G.rows.length; _++) {
                  var I = G.rows[_], M = (D = (T = I == null ? void 0 : I.parentElement) === null || T === void 0 ? void 0 : T.tagName) === null || D === void 0 ? void 0 : D.toLowerCase(), st = p(R, O, v, I, w, k);
                  st && (M === "thead" ? $.push(st) : M === "tfoot" ? A.push(st) : z.push(st));
                }
                return { head: $, body: z, foot: A };
              }
              l.parseHtml = g;
              function p(x, N, v, w, k, T) {
                for (var D = new d.HtmlRowInput(w), G = 0; G < w.cells.length; G++) {
                  var R = w.cells[G], O = v.getComputedStyle(R);
                  if (k || O.display !== "none") {
                    var $ = void 0;
                    T && ($ = (0, c.parseCss)(x, R, N, O, v)), D.push({
                      rowSpan: R.rowSpan,
                      colSpan: R.colSpan,
                      styles: $,
                      _element: R,
                      content: b(R)
                    });
                  }
                }
                var z = v.getComputedStyle(w);
                if (D.length > 0 && (k || z.display !== "none"))
                  return D;
              }
              function b(x) {
                var N = x.cloneNode(!0);
                return N.innerHTML = N.innerHTML.replace(/\n/g, "").replace(/ +/g, " "), N.innerHTML = N.innerHTML.split(/<br.*?>/).map(function(v) {
                  return v.trim();
                }).join(`
`), N.innerText || N.textContent || "";
              }
            }
          ),
          /***/
          776: (
            /***/
            function(a, l, h) {
              Object.defineProperty(l, "__esModule", { value: !0 }), l.parseInput = void 0;
              var c = h(4), d = h(356), g = h(420), p = h(744), b = h(792);
              function x(G, R) {
                var O = new p.DocHandler(G), $ = O.getDocumentOptions(), z = O.getGlobalOptions();
                (0, b.default)(O, z, $, R);
                var A = (0, d.assign)({}, z, $, R), _;
                typeof window < "u" && (_ = window);
                var I = N(z, $, R), M = v(z, $, R), st = w(O, A), W = T(O, A, _);
                return {
                  id: R.tableId,
                  content: W,
                  hooks: M,
                  styles: I,
                  settings: st
                };
              }
              l.parseInput = x;
              function N(G, R, O) {
                for (var $ = {
                  styles: {},
                  headStyles: {},
                  bodyStyles: {},
                  footStyles: {},
                  alternateRowStyles: {},
                  columnStyles: {}
                }, z = function(M) {
                  if (M === "columnStyles") {
                    var st = G[M], W = R[M], U = O[M];
                    $.columnStyles = (0, d.assign)({}, st, W, U);
                  } else {
                    var Q = [G, R, O], Z = Q.map(function(ct) {
                      return ct[M] || {};
                    });
                    $[M] = (0, d.assign)({}, Z[0], Z[1], Z[2]);
                  }
                }, A = 0, _ = Object.keys($); A < _.length; A++) {
                  var I = _[A];
                  z(I);
                }
                return $;
              }
              function v(G, R, O) {
                for (var $ = [G, R, O], z = {
                  didParseCell: [],
                  willDrawCell: [],
                  didDrawCell: [],
                  willDrawPage: [],
                  didDrawPage: []
                }, A = 0, _ = $; A < _.length; A++) {
                  var I = _[A];
                  I.didParseCell && z.didParseCell.push(I.didParseCell), I.willDrawCell && z.willDrawCell.push(I.willDrawCell), I.didDrawCell && z.didDrawCell.push(I.didDrawCell), I.willDrawPage && z.willDrawPage.push(I.willDrawPage), I.didDrawPage && z.didDrawPage.push(I.didDrawPage);
                }
                return z;
              }
              function w(G, R) {
                var O, $, z, A, _, I, M, st, W, U, Q, Z, ct = (0, g.parseSpacing)(R.margin, 40 / G.scaleFactor()), St = (O = k(G, R.startY)) !== null && O !== void 0 ? O : ct.top, P;
                R.showFoot === !0 ? P = "everyPage" : R.showFoot === !1 ? P = "never" : P = ($ = R.showFoot) !== null && $ !== void 0 ? $ : "everyPage";
                var B;
                R.showHead === !0 ? B = "everyPage" : R.showHead === !1 ? B = "never" : B = (z = R.showHead) !== null && z !== void 0 ? z : "everyPage";
                var V = (A = R.useCss) !== null && A !== void 0 ? A : !1, J = R.theme || (V ? "plain" : "striped"), nt = !!R.horizontalPageBreak, gt = (_ = R.horizontalPageBreakRepeat) !== null && _ !== void 0 ? _ : null;
                return {
                  includeHiddenHtml: (I = R.includeHiddenHtml) !== null && I !== void 0 ? I : !1,
                  useCss: V,
                  theme: J,
                  startY: St,
                  margin: ct,
                  pageBreak: (M = R.pageBreak) !== null && M !== void 0 ? M : "auto",
                  rowPageBreak: (st = R.rowPageBreak) !== null && st !== void 0 ? st : "auto",
                  tableWidth: (W = R.tableWidth) !== null && W !== void 0 ? W : "auto",
                  showHead: B,
                  showFoot: P,
                  tableLineWidth: (U = R.tableLineWidth) !== null && U !== void 0 ? U : 0,
                  tableLineColor: (Q = R.tableLineColor) !== null && Q !== void 0 ? Q : 200,
                  horizontalPageBreak: nt,
                  horizontalPageBreakRepeat: gt,
                  horizontalPageBreakBehaviour: (Z = R.horizontalPageBreakBehaviour) !== null && Z !== void 0 ? Z : "afterAllRows"
                };
              }
              function k(G, R) {
                var O = G.getLastAutoTable(), $ = G.scaleFactor(), z = G.pageNumber(), A = !1;
                if (O && O.startPageNumber) {
                  var _ = O.startPageNumber + O.pageNumber - 1;
                  A = _ === z;
                }
                return typeof R == "number" ? R : (R == null || R === !1) && A && (O == null ? void 0 : O.finalY) != null ? O.finalY + 20 / $ : null;
              }
              function T(G, R, O) {
                var $ = R.head || [], z = R.body || [], A = R.foot || [];
                if (R.html) {
                  var _ = R.includeHiddenHtml;
                  if (O) {
                    var I = (0, c.parseHtml)(G, R.html, O, _, R.useCss) || {};
                    $ = I.head || $, z = I.body || $, A = I.foot || $;
                  } else
                    console.error("Cannot parse html in non browser environment");
                }
                var M = R.columns || D($, z, A);
                return {
                  columns: M,
                  head: $,
                  body: z,
                  foot: A
                };
              }
              function D(G, R, O) {
                var $ = G[0] || R[0] || O[0] || [], z = [];
                return Object.keys($).filter(function(A) {
                  return A !== "_element";
                }).forEach(function(A) {
                  var _ = 1, I;
                  Array.isArray($) ? I = $[parseInt(A)] : I = $[A], typeof I == "object" && !Array.isArray(I) && (_ = (I == null ? void 0 : I.colSpan) || 1);
                  for (var M = 0; M < _; M++) {
                    var st = void 0;
                    Array.isArray($) ? st = z.length : st = A + (M > 0 ? "_".concat(M) : "");
                    var W = { dataKey: st };
                    z.push(W);
                  }
                }), z;
              }
            }
          ),
          /***/
          792: (
            /***/
            function(a, l) {
              Object.defineProperty(l, "__esModule", { value: !0 });
              function h(d, g, p, b) {
                for (var x = function(k) {
                  k && typeof k != "object" && console.error("The options parameter should be of type object, is: " + typeof k), typeof k.extendWidth < "u" && (k.tableWidth = k.extendWidth ? "auto" : "wrap", console.error("Use of deprecated option: extendWidth, use tableWidth instead.")), typeof k.margins < "u" && (typeof k.margin > "u" && (k.margin = k.margins), console.error("Use of deprecated option: margins, use margin instead.")), k.startY && typeof k.startY != "number" && (console.error("Invalid value for startY option", k.startY), delete k.startY), !k.didDrawPage && (k.afterPageContent || k.beforePageContent || k.afterPageAdd) && (console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"), k.didDrawPage = function(A) {
                    d.applyStyles(d.userStyles), k.beforePageContent && k.beforePageContent(A), d.applyStyles(d.userStyles), k.afterPageContent && k.afterPageContent(A), d.applyStyles(d.userStyles), k.afterPageAdd && A.pageNumber > 1 && A.afterPageAdd(A), d.applyStyles(d.userStyles);
                  }), [
                    "createdHeaderCell",
                    "drawHeaderRow",
                    "drawRow",
                    "drawHeaderCell"
                  ].forEach(function(A) {
                    k[A] && console.error('The "'.concat(A, '" hook has changed in version 3.0, check the changelog for how to migrate.'));
                  }), [
                    ["showFoot", "showFooter"],
                    ["showHead", "showHeader"],
                    ["didDrawPage", "addPageContent"],
                    ["didParseCell", "createdCell"],
                    ["headStyles", "headerStyles"]
                  ].forEach(function(A) {
                    var _ = A[0], I = A[1];
                    k[I] && (console.error("Use of deprecated option ".concat(I, ". Use ").concat(_, " instead")), k[_] = k[I]);
                  }), [
                    ["padding", "cellPadding"],
                    ["lineHeight", "rowHeight"],
                    "fontSize",
                    "overflow"
                  ].forEach(function(A) {
                    var _ = typeof A == "string" ? A : A[0], I = typeof A == "string" ? A : A[1];
                    typeof k[_] < "u" && (typeof k.styles[I] > "u" && (k.styles[I] = k[_]), console.error("Use of deprecated option: " + _ + ", use the style " + I + " instead."));
                  });
                  for (var T = 0, D = [
                    "styles",
                    "bodyStyles",
                    "headStyles",
                    "footStyles"
                  ]; T < D.length; T++) {
                    var G = D[T];
                    c(k[G] || {});
                  }
                  for (var R = k.columnStyles || {}, O = 0, $ = Object.keys(R); O < $.length; O++) {
                    var z = $[O];
                    c(R[z] || {});
                  }
                }, N = 0, v = [g, p, b]; N < v.length; N++) {
                  var w = v[N];
                  x(w);
                }
              }
              l.default = h;
              function c(d) {
                d.rowHeight ? (console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."), d.minCellHeight || (d.minCellHeight = d.rowHeight)) : d.columnWidth && (console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."), d.cellWidth || (d.cellWidth = d.columnWidth));
              }
            }
          ),
          /***/
          260: (
            /***/
            function(a, l, h) {
              Object.defineProperty(l, "__esModule", { value: !0 }), l.Column = l.Cell = l.Row = l.Table = void 0;
              var c = h(796), d = h(172), g = h(420), p = (
                /** @class */
                function() {
                  function v(w, k) {
                    this.pageNumber = 1, this.pageCount = 1, this.id = w.id, this.settings = w.settings, this.styles = w.styles, this.hooks = w.hooks, this.columns = k.columns, this.head = k.head, this.body = k.body, this.foot = k.foot;
                  }
                  return v.prototype.getHeadHeight = function(w) {
                    return this.head.reduce(function(k, T) {
                      return k + T.getMaxCellHeight(w);
                    }, 0);
                  }, v.prototype.getFootHeight = function(w) {
                    return this.foot.reduce(function(k, T) {
                      return k + T.getMaxCellHeight(w);
                    }, 0);
                  }, v.prototype.allRows = function() {
                    return this.head.concat(this.body).concat(this.foot);
                  }, v.prototype.callCellHooks = function(w, k, T, D, G, R) {
                    for (var O = 0, $ = k; O < $.length; O++) {
                      var z = $[O], A = new d.CellHookData(w, this, T, D, G, R), _ = z(A) === !1;
                      if (T.text = Array.isArray(T.text) ? T.text : [T.text], _)
                        return !1;
                    }
                    return !0;
                  }, v.prototype.callEndPageHooks = function(w, k) {
                    w.applyStyles(w.userStyles);
                    for (var T = 0, D = this.hooks.didDrawPage; T < D.length; T++) {
                      var G = D[T];
                      G(new d.HookData(w, this, k));
                    }
                  }, v.prototype.callWillDrawPageHooks = function(w, k) {
                    for (var T = 0, D = this.hooks.willDrawPage; T < D.length; T++) {
                      var G = D[T];
                      G(new d.HookData(w, this, k));
                    }
                  }, v.prototype.getWidth = function(w) {
                    if (typeof this.settings.tableWidth == "number")
                      return this.settings.tableWidth;
                    if (this.settings.tableWidth === "wrap") {
                      var k = this.columns.reduce(function(D, G) {
                        return D + G.wrappedWidth;
                      }, 0);
                      return k;
                    } else {
                      var T = this.settings.margin;
                      return w - T.left - T.right;
                    }
                  }, v;
                }()
              );
              l.Table = p;
              var b = (
                /** @class */
                function() {
                  function v(w, k, T, D, G) {
                    G === void 0 && (G = !1), this.height = 0, this.raw = w, w instanceof c.HtmlRowInput && (this.raw = w._element, this.element = w._element), this.index = k, this.section = T, this.cells = D, this.spansMultiplePages = G;
                  }
                  return v.prototype.getMaxCellHeight = function(w) {
                    var k = this;
                    return w.reduce(function(T, D) {
                      var G;
                      return Math.max(T, ((G = k.cells[D.index]) === null || G === void 0 ? void 0 : G.height) || 0);
                    }, 0);
                  }, v.prototype.hasRowSpan = function(w) {
                    var k = this;
                    return w.filter(function(T) {
                      var D = k.cells[T.index];
                      return D ? D.rowSpan > 1 : !1;
                    }).length > 0;
                  }, v.prototype.canEntireRowFit = function(w, k) {
                    return this.getMaxCellHeight(k) <= w;
                  }, v.prototype.getMinimumRowHeight = function(w, k) {
                    var T = this;
                    return w.reduce(function(D, G) {
                      var R = T.cells[G.index];
                      if (!R)
                        return 0;
                      var O = k.getLineHeight(R.styles.fontSize), $ = R.padding("vertical"), z = $ + O;
                      return z > D ? z : D;
                    }, 0);
                  }, v;
                }()
              );
              l.Row = b;
              var x = (
                /** @class */
                function() {
                  function v(w, k, T) {
                    var D, G;
                    this.contentHeight = 0, this.contentWidth = 0, this.wrappedWidth = 0, this.minReadableWidth = 0, this.minWidth = 0, this.width = 0, this.height = 0, this.x = 0, this.y = 0, this.styles = k, this.section = T, this.raw = w;
                    var R = w;
                    w != null && typeof w == "object" && !Array.isArray(w) ? (this.rowSpan = w.rowSpan || 1, this.colSpan = w.colSpan || 1, R = (G = (D = w.content) !== null && D !== void 0 ? D : w.title) !== null && G !== void 0 ? G : w, w._element && (this.raw = w._element)) : (this.rowSpan = 1, this.colSpan = 1);
                    var O = R != null ? "" + R : "", $ = /\r\n|\r|\n/g;
                    this.text = O.split($);
                  }
                  return v.prototype.getTextPos = function() {
                    var w;
                    if (this.styles.valign === "top")
                      w = this.y + this.padding("top");
                    else if (this.styles.valign === "bottom")
                      w = this.y + this.height - this.padding("bottom");
                    else {
                      var k = this.height - this.padding("vertical");
                      w = this.y + k / 2 + this.padding("top");
                    }
                    var T;
                    if (this.styles.halign === "right")
                      T = this.x + this.width - this.padding("right");
                    else if (this.styles.halign === "center") {
                      var D = this.width - this.padding("horizontal");
                      T = this.x + D / 2 + this.padding("left");
                    } else
                      T = this.x + this.padding("left");
                    return { x: T, y: w };
                  }, v.prototype.getContentHeight = function(w, k) {
                    k === void 0 && (k = 1.15);
                    var T = Array.isArray(this.text) ? this.text.length : 1, D = this.styles.fontSize / w * k, G = T * D + this.padding("vertical");
                    return Math.max(G, this.styles.minCellHeight);
                  }, v.prototype.padding = function(w) {
                    var k = (0, g.parseSpacing)(this.styles.cellPadding, 0);
                    return w === "vertical" ? k.top + k.bottom : w === "horizontal" ? k.left + k.right : k[w];
                  }, v;
                }()
              );
              l.Cell = x;
              var N = (
                /** @class */
                function() {
                  function v(w, k, T) {
                    this.wrappedWidth = 0, this.minReadableWidth = 0, this.minWidth = 0, this.width = 0, this.dataKey = w, this.raw = k, this.index = T;
                  }
                  return v.prototype.getMaxCustomCellWidth = function(w) {
                    for (var k = 0, T = 0, D = w.allRows(); T < D.length; T++) {
                      var G = D[T], R = G.cells[this.index];
                      R && typeof R.styles.cellWidth == "number" && (k = Math.max(k, R.styles.cellWidth));
                    }
                    return k;
                  }, v;
                }()
              );
              l.Column = N;
            }
          ),
          /***/
          356: (
            /***/
            function(a, l) {
              Object.defineProperty(l, "__esModule", { value: !0 }), l.assign = void 0;
              function h(c, d, g, p, b) {
                if (c == null)
                  throw new TypeError("Cannot convert undefined or null to object");
                for (var x = Object(c), N = 1; N < arguments.length; N++) {
                  var v = arguments[N];
                  if (v != null)
                    for (var w in v)
                      Object.prototype.hasOwnProperty.call(v, w) && (x[w] = v[w]);
                }
                return x;
              }
              l.assign = h;
            }
          ),
          /***/
          972: (
            /***/
            function(a, l, h) {
              Object.defineProperty(l, "__esModule", { value: !0 }), l.createTable = void 0;
              var c = h(744), d = h(260), g = h(324), p = h(796), b = h(356);
              function x(G, R) {
                var O = new c.DocHandler(G), $ = N(R, O.scaleFactor()), z = new d.Table(R, $);
                return (0, g.calculateWidths)(O, z), O.applyStyles(O.userStyles), z;
              }
              l.createTable = x;
              function N(G, R) {
                var O = G.content, $ = T(O.columns);
                if (O.head.length === 0) {
                  var z = w($, "head");
                  z && O.head.push(z);
                }
                if (O.foot.length === 0) {
                  var z = w($, "foot");
                  z && O.foot.push(z);
                }
                var A = G.settings.theme, _ = G.styles;
                return {
                  columns: $,
                  head: v("head", O.head, $, _, A, R),
                  body: v("body", O.body, $, _, A, R),
                  foot: v("foot", O.foot, $, _, A, R)
                };
              }
              function v(G, R, O, $, z, A) {
                var _ = {}, I = R.map(function(M, st) {
                  for (var W = 0, U = {}, Q = 0, Z = 0, ct = 0, St = O; ct < St.length; ct++) {
                    var P = St[ct];
                    if (_[P.index] == null || _[P.index].left === 0)
                      if (Z === 0) {
                        var B = void 0;
                        Array.isArray(M) ? B = M[P.index - Q - W] : B = M[P.dataKey];
                        var V = {};
                        typeof B == "object" && !Array.isArray(B) && (V = (B == null ? void 0 : B.styles) || {});
                        var J = D(G, P, st, z, $, A, V), nt = new d.Cell(B, J, G);
                        U[P.dataKey] = nt, U[P.index] = nt, Z = nt.colSpan - 1, _[P.index] = {
                          left: nt.rowSpan - 1,
                          times: Z
                        };
                      } else
                        Z--, Q++;
                    else
                      _[P.index].left--, Z = _[P.index].times, W++;
                  }
                  return new d.Row(M, st, G, U);
                });
                return I;
              }
              function w(G, R) {
                var O = {};
                return G.forEach(function($) {
                  if ($.raw != null) {
                    var z = k(R, $.raw);
                    z != null && (O[$.dataKey] = z);
                  }
                }), Object.keys(O).length > 0 ? O : null;
              }
              function k(G, R) {
                if (G === "head") {
                  if (typeof R == "object")
                    return R.header || R.title || null;
                  if (typeof R == "string" || typeof R == "number")
                    return R;
                } else if (G === "foot" && typeof R == "object")
                  return R.footer;
                return null;
              }
              function T(G) {
                return G.map(function(R, O) {
                  var $, z, A;
                  return typeof R == "object" ? A = (z = ($ = R.dataKey) !== null && $ !== void 0 ? $ : R.key) !== null && z !== void 0 ? z : O : A = O, new d.Column(A, R, O);
                });
              }
              function D(G, R, O, $, z, A, _) {
                var I = (0, p.getTheme)($), M;
                G === "head" ? M = z.headStyles : G === "body" ? M = z.bodyStyles : G === "foot" && (M = z.footStyles);
                var st = (0, b.assign)({}, I.table, I[G], z.styles, M), W = z.columnStyles[R.dataKey] || z.columnStyles[R.index] || {}, U = G === "body" ? W : {}, Q = G === "body" && O % 2 === 0 ? (0, b.assign)({}, I.alternateRow, z.alternateRowStyles) : {}, Z = (0, p.defaultStyles)(A), ct = (0, b.assign)({}, Z, st, Q, U);
                return (0, b.assign)(ct, _);
              }
            }
          ),
          /***/
          664: (
            /***/
            function(a, l, h) {
              Object.defineProperty(l, "__esModule", { value: !0 }), l.addPage = l.drawTable = void 0;
              var c = h(420), d = h(260), g = h(744), p = h(356), b = h(136), x = h(224);
              function N(W, U) {
                var Q = U.settings, Z = Q.startY, ct = Q.margin, St = {
                  x: ct.left,
                  y: Z
                }, P = U.getHeadHeight(U.columns) + U.getFootHeight(U.columns), B = Z + ct.bottom + P;
                if (Q.pageBreak === "avoid") {
                  var V = U.body, J = V.reduce(function(yt, vt) {
                    return yt + vt.height;
                  }, 0);
                  B += J;
                }
                var nt = new g.DocHandler(W);
                (Q.pageBreak === "always" || Q.startY != null && B > nt.pageSize().height) && (st(nt), St.y = ct.top), U.callWillDrawPageHooks(nt, St);
                var gt = (0, p.assign)({}, St);
                U.startPageNumber = nt.pageNumber(), Q.horizontalPageBreak ? v(nt, U, gt, St) : (nt.applyStyles(nt.userStyles), (Q.showHead === "firstPage" || Q.showHead === "everyPage") && U.head.forEach(function(yt) {
                  return z(nt, U, yt, St, U.columns);
                }), nt.applyStyles(nt.userStyles), U.body.forEach(function(yt, vt) {
                  var Rt = vt === U.body.length - 1;
                  $(nt, U, yt, Rt, gt, St, U.columns);
                }), nt.applyStyles(nt.userStyles), (Q.showFoot === "lastPage" || Q.showFoot === "everyPage") && U.foot.forEach(function(yt) {
                  return z(nt, U, yt, St, U.columns);
                })), (0, c.addTableBorder)(nt, U, gt, St), U.callEndPageHooks(nt, St), U.finalY = St.y, W.lastAutoTable = U, W.previousAutoTable = U, W.autoTable && (W.autoTable.previous = U), nt.applyStyles(nt.userStyles);
              }
              l.drawTable = N;
              function v(W, U, Q, Z) {
                var ct = (0, x.calculateAllColumnsCanFitInPage)(W, U), St = U.settings;
                if (St.horizontalPageBreakBehaviour === "afterAllRows")
                  ct.forEach(function(J, nt) {
                    W.applyStyles(W.userStyles), nt > 0 ? M(W, U, Q, Z, J.columns, !0) : w(W, U, Z, J.columns), k(W, U, Q, Z, J.columns), D(W, U, Z, J.columns);
                  });
                else
                  for (var P = -1, B = ct[0], V = function() {
                    var J = P;
                    if (B) {
                      W.applyStyles(W.userStyles);
                      var nt = B.columns;
                      P >= 0 ? M(W, U, Q, Z, nt, !0) : w(W, U, Z, nt), J = T(W, U, P + 1, Z, nt), D(W, U, Z, nt);
                    }
                    var gt = J - P;
                    ct.slice(1).forEach(function(yt) {
                      W.applyStyles(W.userStyles), M(W, U, Q, Z, yt.columns, !0), T(W, U, P + 1, Z, yt.columns, gt), D(W, U, Z, yt.columns);
                    }), P = J;
                  }; P < U.body.length - 1; )
                    V();
              }
              function w(W, U, Q, Z) {
                var ct = U.settings;
                W.applyStyles(W.userStyles), (ct.showHead === "firstPage" || ct.showHead === "everyPage") && U.head.forEach(function(St) {
                  return z(W, U, St, Q, Z);
                });
              }
              function k(W, U, Q, Z, ct) {
                W.applyStyles(W.userStyles), U.body.forEach(function(St, P) {
                  var B = P === U.body.length - 1;
                  $(W, U, St, B, Q, Z, ct);
                });
              }
              function T(W, U, Q, Z, ct, St) {
                W.applyStyles(W.userStyles), St = St ?? U.body.length;
                var P = Math.min(Q + St, U.body.length), B = -1;
                return U.body.slice(Q, P).forEach(function(V, J) {
                  var nt = Q + J === U.body.length - 1, gt = I(W, U, nt, Z);
                  V.canEntireRowFit(gt, ct) && (z(W, U, V, Z, ct), B = Q + J);
                }), B;
              }
              function D(W, U, Q, Z) {
                var ct = U.settings;
                W.applyStyles(W.userStyles), (ct.showFoot === "lastPage" || ct.showFoot === "everyPage") && U.foot.forEach(function(St) {
                  return z(W, U, St, Q, Z);
                });
              }
              function G(W, U, Q) {
                var Z = Q.getLineHeight(W.styles.fontSize), ct = W.padding("vertical"), St = Math.floor((U - ct) / Z);
                return Math.max(0, St);
              }
              function R(W, U, Q, Z) {
                var ct = {};
                W.spansMultiplePages = !0, W.height = 0;
                for (var St = 0, P = 0, B = Q.columns; P < B.length; P++) {
                  var V = B[P], J = W.cells[V.index];
                  if (J) {
                    Array.isArray(J.text) || (J.text = [J.text]);
                    var nt = new d.Cell(J.raw, J.styles, J.section);
                    nt = (0, p.assign)(nt, J), nt.text = [];
                    var gt = G(J, U, Z);
                    J.text.length > gt && (nt.text = J.text.splice(gt, J.text.length));
                    var yt = Z.scaleFactor(), vt = Z.getLineHeightFactor();
                    J.contentHeight = J.getContentHeight(yt, vt), J.contentHeight >= U && (J.contentHeight = U, nt.styles.minCellHeight -= U), J.contentHeight > W.height && (W.height = J.contentHeight), nt.contentHeight = nt.getContentHeight(yt, vt), nt.contentHeight > St && (St = nt.contentHeight), ct[V.index] = nt;
                  }
                }
                var Rt = new d.Row(W.raw, -1, W.section, ct, !0);
                Rt.height = St;
                for (var Dt = 0, Ut = Q.columns; Dt < Ut.length; Dt++) {
                  var V = Ut[Dt], nt = Rt.cells[V.index];
                  nt && (nt.height = Rt.height);
                  var J = W.cells[V.index];
                  J && (J.height = W.height);
                }
                return Rt;
              }
              function O(W, U, Q, Z) {
                var ct = W.pageSize().height, St = Z.settings.margin, P = St.top + St.bottom, B = ct - P;
                U.section === "body" && (B -= Z.getHeadHeight(Z.columns) + Z.getFootHeight(Z.columns));
                var V = U.getMinimumRowHeight(Z.columns, W), J = V < Q;
                if (V > B)
                  return console.error("Will not be able to print row ".concat(U.index, " correctly since it's minimum height is larger than page height")), !0;
                if (!J)
                  return !1;
                var nt = U.hasRowSpan(Z.columns), gt = U.getMaxCellHeight(Z.columns) > B;
                return gt ? (nt && console.error("The content of row ".concat(U.index, " will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")), !0) : !(nt || Z.settings.rowPageBreak === "avoid");
              }
              function $(W, U, Q, Z, ct, St, P) {
                var B = I(W, U, Z, St);
                if (Q.canEntireRowFit(B, P))
                  z(W, U, Q, St, P);
                else if (O(W, Q, B, U)) {
                  var V = R(Q, B, U, W);
                  z(W, U, Q, St, P), M(W, U, ct, St, P), $(W, U, V, Z, ct, St, P);
                } else
                  M(W, U, ct, St, P), $(W, U, Q, Z, ct, St, P);
              }
              function z(W, U, Q, Z, ct) {
                Z.x = U.settings.margin.left;
                for (var St = 0, P = ct; St < P.length; St++) {
                  var B = P[St], V = Q.cells[B.index];
                  if (!V) {
                    Z.x += B.width;
                    continue;
                  }
                  W.applyStyles(V.styles), V.x = Z.x, V.y = Z.y;
                  var J = U.callCellHooks(W, U.hooks.willDrawCell, V, Q, B, Z);
                  if (J === !1) {
                    Z.x += B.width;
                    continue;
                  }
                  A(W, V, Z);
                  var nt = V.getTextPos();
                  (0, b.default)(V.text, nt.x, nt.y, {
                    halign: V.styles.halign,
                    valign: V.styles.valign,
                    maxWidth: Math.ceil(V.width - V.padding("left") - V.padding("right"))
                  }, W.getDocument()), U.callCellHooks(W, U.hooks.didDrawCell, V, Q, B, Z), Z.x += B.width;
                }
                Z.y += Q.height;
              }
              function A(W, U, Q) {
                var Z = U.styles;
                if (W.getDocument().setFillColor(W.getDocument().getFillColor()), typeof Z.lineWidth == "number") {
                  var ct = (0, c.getFillStyle)(Z.lineWidth, Z.fillColor);
                  ct && W.rect(U.x, Q.y, U.width, U.height, ct);
                } else typeof Z.lineWidth == "object" && (Z.fillColor && W.rect(U.x, Q.y, U.width, U.height, "F"), _(W, U, Q, Z.lineWidth));
              }
              function _(W, U, Q, Z) {
                var ct, St, P, B;
                Z.top && (ct = Q.x, St = Q.y, P = Q.x + U.width, B = Q.y, Z.right && (P += 0.5 * Z.right), Z.left && (ct -= 0.5 * Z.left), V(Z.top, ct, St, P, B)), Z.bottom && (ct = Q.x, St = Q.y + U.height, P = Q.x + U.width, B = Q.y + U.height, Z.right && (P += 0.5 * Z.right), Z.left && (ct -= 0.5 * Z.left), V(Z.bottom, ct, St, P, B)), Z.left && (ct = Q.x, St = Q.y, P = Q.x, B = Q.y + U.height, Z.top && (St -= 0.5 * Z.top), Z.bottom && (B += 0.5 * Z.bottom), V(Z.left, ct, St, P, B)), Z.right && (ct = Q.x + U.width, St = Q.y, P = Q.x + U.width, B = Q.y + U.height, Z.top && (St -= 0.5 * Z.top), Z.bottom && (B += 0.5 * Z.bottom), V(Z.right, ct, St, P, B));
                function V(J, nt, gt, yt, vt) {
                  W.getDocument().setLineWidth(J), W.getDocument().line(nt, gt, yt, vt, "S");
                }
              }
              function I(W, U, Q, Z) {
                var ct = U.settings.margin.bottom, St = U.settings.showFoot;
                return (St === "everyPage" || St === "lastPage" && Q) && (ct += U.getFootHeight(U.columns)), W.pageSize().height - Z.y - ct;
              }
              function M(W, U, Q, Z, ct, St) {
                ct === void 0 && (ct = []), St === void 0 && (St = !1), W.applyStyles(W.userStyles), U.settings.showFoot === "everyPage" && !St && U.foot.forEach(function(B) {
                  return z(W, U, B, Z, ct);
                }), U.callEndPageHooks(W, Z);
                var P = U.settings.margin;
                (0, c.addTableBorder)(W, U, Q, Z), st(W), U.pageNumber++, U.pageCount++, Z.x = P.left, Z.y = P.top, Q.y = P.top, U.callWillDrawPageHooks(W, Z), U.settings.showHead === "everyPage" && (U.head.forEach(function(B) {
                  return z(W, U, B, Z, ct);
                }), W.applyStyles(W.userStyles));
              }
              l.addPage = M;
              function st(W) {
                var U = W.pageNumber();
                W.setPage(U + 1);
                var Q = W.pageNumber();
                return Q === U ? (W.addPage(), !0) : !1;
              }
            }
          ),
          /***/
          224: (
            /***/
            function(a, l, h) {
              Object.defineProperty(l, "__esModule", { value: !0 }), l.calculateAllColumnsCanFitInPage = void 0;
              var c = h(420);
              function d(p, b, x) {
                var N;
                x === void 0 && (x = {});
                var v = (0, c.getPageAvailableWidth)(p, b), w = /* @__PURE__ */ new Map(), k = [], T = [], D = [];
                b.settings.horizontalPageBreakRepeat, Array.isArray(b.settings.horizontalPageBreakRepeat) ? D = b.settings.horizontalPageBreakRepeat : (typeof b.settings.horizontalPageBreakRepeat == "string" || typeof b.settings.horizontalPageBreakRepeat == "number") && (D = [b.settings.horizontalPageBreakRepeat]), D.forEach(function($) {
                  var z = b.columns.find(function(A) {
                    return A.dataKey === $ || A.index === $;
                  });
                  z && !w.has(z.index) && (w.set(z.index, !0), k.push(z.index), T.push(b.columns[z.index]), v -= z.wrappedWidth);
                });
                for (var G = !0, R = (N = x == null ? void 0 : x.start) !== null && N !== void 0 ? N : 0; R < b.columns.length; ) {
                  if (w.has(R)) {
                    R++;
                    continue;
                  }
                  var O = b.columns[R].wrappedWidth;
                  if (G || v >= O)
                    G = !1, k.push(R), T.push(b.columns[R]), v -= O;
                  else
                    break;
                  R++;
                }
                return { colIndexes: k, columns: T, lastIndex: R - 1 };
              }
              function g(p, b) {
                for (var x = [], N = 0; N < b.columns.length; N++) {
                  var v = d(p, b, { start: N });
                  v.columns.length && (x.push(v), N = v.lastIndex);
                }
                return x;
              }
              l.calculateAllColumnsCanFitInPage = g;
            }
          ),
          /***/
          324: (
            /***/
            function(a, l, h) {
              Object.defineProperty(l, "__esModule", { value: !0 }), l.ellipsize = l.resizeColumns = l.calculateWidths = void 0;
              var c = h(420);
              function d(k, T) {
                g(k, T);
                var D = [], G = 0;
                T.columns.forEach(function(O) {
                  var $ = O.getMaxCustomCellWidth(T);
                  $ ? O.width = $ : (O.width = O.wrappedWidth, D.push(O)), G += O.width;
                });
                var R = T.getWidth(k.pageSize().width) - G;
                R && (R = p(D, R, function(O) {
                  return Math.max(O.minReadableWidth, O.minWidth);
                })), R && (R = p(D, R, function(O) {
                  return O.minWidth;
                })), R = Math.abs(R), !T.settings.horizontalPageBreak && R > 0.1 / k.scaleFactor() && (R = R < 1 ? R : Math.round(R), console.warn("Of the table content, ".concat(R, " units width could not fit page"))), x(T), N(T, k), b(T);
              }
              l.calculateWidths = d;
              function g(k, T) {
                var D = k.scaleFactor(), G = T.settings.horizontalPageBreak, R = (0, c.getPageAvailableWidth)(k, T);
                T.allRows().forEach(function(O) {
                  for (var $ = 0, z = T.columns; $ < z.length; $++) {
                    var A = z[$], _ = O.cells[A.index];
                    if (_) {
                      var I = T.hooks.didParseCell;
                      T.callCellHooks(k, I, _, O, A, null);
                      var M = _.padding("horizontal");
                      _.contentWidth = (0, c.getStringWidth)(_.text, _.styles, k) + M;
                      var st = (0, c.getStringWidth)(_.text.join(" ").split(/[^\S\u00A0]+/), _.styles, k);
                      if (_.minReadableWidth = st + _.padding("horizontal"), typeof _.styles.cellWidth == "number")
                        _.minWidth = _.styles.cellWidth, _.wrappedWidth = _.styles.cellWidth;
                      else if (_.styles.cellWidth === "wrap" || G === !0)
                        _.contentWidth > R ? (_.minWidth = R, _.wrappedWidth = R) : (_.minWidth = _.contentWidth, _.wrappedWidth = _.contentWidth);
                      else {
                        var W = 10 / D;
                        _.minWidth = _.styles.minCellWidth || W, _.wrappedWidth = _.contentWidth, _.minWidth > _.wrappedWidth && (_.wrappedWidth = _.minWidth);
                      }
                    }
                  }
                }), T.allRows().forEach(function(O) {
                  for (var $ = 0, z = T.columns; $ < z.length; $++) {
                    var A = z[$], _ = O.cells[A.index];
                    if (_ && _.colSpan === 1)
                      A.wrappedWidth = Math.max(A.wrappedWidth, _.wrappedWidth), A.minWidth = Math.max(A.minWidth, _.minWidth), A.minReadableWidth = Math.max(A.minReadableWidth, _.minReadableWidth);
                    else {
                      var I = T.styles.columnStyles[A.dataKey] || T.styles.columnStyles[A.index] || {}, M = I.cellWidth || I.minCellWidth;
                      M && typeof M == "number" && (A.minWidth = M, A.wrappedWidth = M);
                    }
                    _ && (_.colSpan > 1 && !A.minWidth && (A.minWidth = _.minWidth), _.colSpan > 1 && !A.wrappedWidth && (A.wrappedWidth = _.minWidth));
                  }
                });
              }
              function p(k, T, D) {
                for (var G = T, R = k.reduce(function(W, U) {
                  return W + U.wrappedWidth;
                }, 0), O = 0; O < k.length; O++) {
                  var $ = k[O], z = $.wrappedWidth / R, A = G * z, _ = $.width + A, I = D($), M = _ < I ? I : _;
                  T -= M - $.width, $.width = M;
                }
                if (T = Math.round(T * 1e10) / 1e10, T) {
                  var st = k.filter(function(W) {
                    return T < 0 ? W.width > D(W) : !0;
                  });
                  st.length && (T = p(st, T, D));
                }
                return T;
              }
              l.resizeColumns = p;
              function b(k) {
                for (var T = {}, D = 1, G = k.allRows(), R = 0; R < G.length; R++)
                  for (var O = G[R], $ = 0, z = k.columns; $ < z.length; $++) {
                    var A = z[$], _ = T[A.index];
                    if (D > 1)
                      D--, delete O.cells[A.index];
                    else if (_)
                      _.cell.height += O.height, D = _.cell.colSpan, delete O.cells[A.index], _.left--, _.left <= 1 && delete T[A.index];
                    else {
                      var I = O.cells[A.index];
                      if (!I)
                        continue;
                      if (I.height = O.height, I.rowSpan > 1) {
                        var M = G.length - R, st = I.rowSpan > M ? M : I.rowSpan;
                        T[A.index] = { cell: I, left: st, row: O };
                      }
                    }
                  }
              }
              function x(k) {
                for (var T = k.allRows(), D = 0; D < T.length; D++)
                  for (var G = T[D], R = null, O = 0, $ = 0, z = 0; z < k.columns.length; z++) {
                    var A = k.columns[z];
                    if ($ -= 1, $ > 1 && k.columns[z + 1])
                      O += A.width, delete G.cells[A.index];
                    else if (R) {
                      var _ = R;
                      delete G.cells[A.index], R = null, _.width = A.width + O;
                    } else {
                      var _ = G.cells[A.index];
                      if (!_)
                        continue;
                      if ($ = _.colSpan, O = 0, _.colSpan > 1) {
                        R = _, O += A.width;
                        continue;
                      }
                      _.width = A.width + O;
                    }
                  }
              }
              function N(k, T) {
                for (var D = { count: 0, height: 0 }, G = 0, R = k.allRows(); G < R.length; G++) {
                  for (var O = R[G], $ = 0, z = k.columns; $ < z.length; $++) {
                    var A = z[$], _ = O.cells[A.index];
                    if (_) {
                      T.applyStyles(_.styles, !0);
                      var I = _.width - _.padding("horizontal");
                      if (_.styles.overflow === "linebreak")
                        _.text = T.splitTextToSize(_.text, I + 1 / T.scaleFactor(), { fontSize: _.styles.fontSize });
                      else if (_.styles.overflow === "ellipsize")
                        _.text = v(_.text, I, _.styles, T, "...");
                      else if (_.styles.overflow === "hidden")
                        _.text = v(_.text, I, _.styles, T, "");
                      else if (typeof _.styles.overflow == "function") {
                        var M = _.styles.overflow(_.text, I);
                        typeof M == "string" ? _.text = [M] : _.text = M;
                      }
                      _.contentHeight = _.getContentHeight(T.scaleFactor(), T.getLineHeightFactor());
                      var st = _.contentHeight / _.rowSpan;
                      _.rowSpan > 1 && D.count * D.height < st * _.rowSpan ? D = { height: st, count: _.rowSpan } : D && D.count > 0 && D.height > st && (st = D.height), st > O.height && (O.height = st);
                    }
                  }
                  D.count--;
                }
              }
              function v(k, T, D, G, R) {
                return k.map(function(O) {
                  return w(O, T, D, G, R);
                });
              }
              l.ellipsize = v;
              function w(k, T, D, G, R) {
                var O = 1e4 * G.scaleFactor();
                if (T = Math.ceil(T * O) / O, T >= (0, c.getStringWidth)(k, D, G))
                  return k;
                for (; T < (0, c.getStringWidth)(k + R, D, G) && !(k.length <= 1); )
                  k = k.substring(0, k.length - 1);
                return k.trim() + R;
              }
            }
          ),
          /***/
          964: (
            /***/
            function(a) {
              if (typeof n > "u") {
                var l = new Error("Cannot find module 'undefined'");
                throw l.code = "MODULE_NOT_FOUND", l;
              }
              a.exports = n;
            }
          )
          /******/
        }, r = {};
        function s(a) {
          var l = r[a];
          if (l !== void 0)
            return l.exports;
          var h = r[a] = {
            /******/
            // no module.id needed
            /******/
            // no module.loaded needed
            /******/
            exports: {}
            /******/
          };
          return i[a].call(h.exports, h, h.exports, s), h.exports;
        }
        var o = {};
        return function() {
          var a = o;
          Object.defineProperty(a, "__esModule", { value: !0 }), a.Cell = a.Column = a.Row = a.Table = a.CellHookData = a.__drawTable = a.__createTable = a.applyPlugin = void 0;
          var l = s(340), h = s(776), c = s(664), d = s(972), g = s(260);
          Object.defineProperty(a, "Table", { enumerable: !0, get: function() {
            return g.Table;
          } });
          var p = s(172);
          Object.defineProperty(a, "CellHookData", { enumerable: !0, get: function() {
            return p.CellHookData;
          } });
          var b = s(260);
          Object.defineProperty(a, "Cell", { enumerable: !0, get: function() {
            return b.Cell;
          } }), Object.defineProperty(a, "Column", { enumerable: !0, get: function() {
            return b.Column;
          } }), Object.defineProperty(a, "Row", { enumerable: !0, get: function() {
            return b.Row;
          } });
          function x(T) {
            (0, l.default)(T);
          }
          a.applyPlugin = x;
          function N(T, D) {
            var G = (0, h.parseInput)(T, D), R = (0, d.createTable)(T, G);
            (0, c.drawTable)(T, R);
          }
          function v(T, D) {
            var G = (0, h.parseInput)(T, D);
            return (0, d.createTable)(T, G);
          }
          a.__createTable = v;
          function w(T, D) {
            (0, c.drawTable)(T, D);
          }
          a.__drawTable = w;
          try {
            var k = s(964);
            k.jsPDF && (k = k.jsPDF), x(k);
          } catch {
          }
          a.default = N;
        }(), o;
      }()
    );
  });
})(R1);
var Yv = R1.exports;
const vu = /* @__PURE__ */ hd(Yv), wu = 5, Ph = 10, xu = ",", Su = {
  fillColor: [7, 59, 76],
  fontStyle: "normal"
}, Au = {
  fontSize: 9
}, ku = { left: 10 };
let _u = [];
const Kv = (e, t, n = (i) => i.toString()) => {
  const { t: i } = w2.global, r = new ye({ orientation: "landscape" });
  let s = 10;
  r.setFontSize(20), r.text(i("pdf.orderSummary"), 10, s), s += 15, r.setFontSize(14), r.text("Your parts", 10, s), s += wu, _u = [
    i("length"),
    i("width"),
    i("thickness"),
    i("material"),
    i("quantity"),
    i("name"),
    `Banding (${mr.join(xu)})`,
    `Finish (${pr.join(xu)})`
  ];
  const o = e.parts.map((h) => {
    var g;
    const c = mr.map((p) => h.banding[p] || "-").join(xu), d = pr.map((p) => h.banding[p] || "-").join(xu);
    return [
      n(h.l),
      n(h.w),
      n(h.t) || "-",
      ((g = h.material) == null ? void 0 : g.toUpperCase()) || "-",
      n(h.q),
      h.name || "-",
      c,
      d
    ];
  });
  vu(r, {
    startY: s,
    head: [_u],
    body: o,
    margin: ku,
    headStyles: Su,
    styles: Au
  }), s = r.autoTable.previous.finalY + Ph, r.setFontSize(14), r.text(i("pdf.stockRequirements"), 10, s), s += wu, _u = [
    i("length"),
    i("width"),
    i("thickness"),
    i("material"),
    i("quantity")
    // 'Cost'
  ];
  const a = e.stock.map((h) => {
    var c;
    return [
      n(h.l),
      n(h.w),
      n(h.t) || "-",
      ((c = h.material) == null ? void 0 : c.toUpperCase()) || "-",
      n(h.q)
      // stock.cost
    ];
  });
  if (vu(r, {
    startY: s,
    head: [_u],
    body: a,
    margin: ku,
    headStyles: Su,
    styles: Au
  }), s = r.autoTable.previous.finalY + Ph, t && Object.values(t)) {
    r.setFontSize(14), r.text("Hardware", 10, s), s += wu;
    const h = Object.values(t).map((c) => [
      c.name.toUpperCase(),
      n(c.q)
      // item.totalCost.toFixed( 2 )
    ]);
    vu(r, {
      startY: s,
      head: [[i("pdf.item"), i("quantity")]],
      body: h,
      margin: ku,
      headStyles: Su,
      styles: Au
    }), s = r.autoTable.previous.finalY + Ph;
  }
  r.setFontSize(14), r.text(i("pdf.totals"), 10, s), s += wu;
  const l = [
    [i("pdf.totalParts"), n(e.metadata.totalPartsProduced)],
    [i("pdf.partArea"), n(e.metadata.totalPartArea)],
    [i("pdf.totalStockRequired"), n(e.metadata.totalUsedStock)],
    [i("pdf.totalBandingLength"), n(e.metadata.totalBandingLength)],
    [i("pdf.totalFinishArea"), n(e.metadata.totalFinishArea)]
  ];
  return vu(r, {
    startY: s,
    body: l,
    margin: ku,
    headStyles: Su,
    styles: Au
  }), r.output("blob");
};
function Jv(e) {
  return S2() ? (A2(e), !0) : !1;
}
function Sd(e) {
  return typeof e == "function" ? e() : Ie(e);
}
const Xv = typeof window < "u" && typeof document < "u";
typeof WorkerGlobalScope < "u" && globalThis instanceof WorkerGlobalScope;
const Zv = Object.prototype.toString, Qv = (e) => Zv.call(e) === "[object Object]", tw = () => {
};
function ew(e, t) {
  function n(...i) {
    return new Promise((r, s) => {
      Promise.resolve(e(() => t.apply(this, i), { fn: t, thisArg: this, args: i })).then(r).catch(s);
    });
  }
  return n;
}
const D1 = (e) => e();
function nw(e = D1) {
  const t = Pe(!0);
  function n() {
    t.value = !1;
  }
  function i() {
    t.value = !0;
  }
  const r = (...s) => {
    t.value && e(...s);
  };
  return { isActive: x2(t), pause: n, resume: i, eventFilter: r };
}
function iw(e) {
  return k2();
}
function rw(e, t, n = {}) {
  const {
    eventFilter: i = D1,
    ...r
  } = n;
  return dr(
    e,
    ew(
      i,
      t
    ),
    r
  );
}
function sw(e, t, n = {}) {
  const {
    eventFilter: i,
    ...r
  } = n, { eventFilter: s, pause: o, resume: a, isActive: l } = nw(i);
  return { stop: rw(
    e,
    t,
    {
      ...r,
      eventFilter: s
    }
  ), pause: o, resume: a, isActive: l };
}
function ow(e, t = !0, n) {
  iw() ? pa(e, n) : t ? e() : Qr(e);
}
function aw(e) {
  var t;
  const n = Sd(e);
  return (t = n == null ? void 0 : n.$el) != null ? t : n;
}
const ic = Xv ? window : void 0;
function ag(...e) {
  let t, n, i, r;
  if (typeof e[0] == "string" || Array.isArray(e[0]) ? ([n, i, r] = e, t = ic) : [t, n, i, r] = e, !t)
    return tw;
  Array.isArray(n) || (n = [n]), Array.isArray(i) || (i = [i]);
  const s = [], o = () => {
    s.forEach((c) => c()), s.length = 0;
  }, a = (c, d, g, p) => (c.addEventListener(d, g, p), () => c.removeEventListener(d, g, p)), l = dr(
    () => [aw(t), Sd(r)],
    ([c, d]) => {
      if (o(), !c)
        return;
      const g = Qv(d) ? { ...d } : d;
      s.push(
        ...n.flatMap((p) => i.map((b) => a(c, p, b, g)))
      );
    },
    { immediate: !0, flush: "post" }
  ), h = () => {
    l(), o();
  };
  return Jv(h), h;
}
const Nu = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {}, Pu = "__vueuse_ssr_handlers__", lw = /* @__PURE__ */ uw();
function uw() {
  return Pu in Nu || (Nu[Pu] = Nu[Pu] || {}), Nu[Pu];
}
function cw(e, t) {
  return lw[e] || t;
}
function hw(e) {
  return e == null ? "any" : e instanceof Set ? "set" : e instanceof Map ? "map" : e instanceof Date ? "date" : typeof e == "boolean" ? "boolean" : typeof e == "string" ? "string" : typeof e == "object" ? "object" : Number.isNaN(e) ? "any" : "number";
}
const fw = {
  boolean: {
    read: (e) => e === "true",
    write: (e) => String(e)
  },
  object: {
    read: (e) => JSON.parse(e),
    write: (e) => JSON.stringify(e)
  },
  number: {
    read: (e) => Number.parseFloat(e),
    write: (e) => String(e)
  },
  any: {
    read: (e) => e,
    write: (e) => String(e)
  },
  string: {
    read: (e) => e,
    write: (e) => String(e)
  },
  map: {
    read: (e) => new Map(JSON.parse(e)),
    write: (e) => JSON.stringify(Array.from(e.entries()))
  },
  set: {
    read: (e) => new Set(JSON.parse(e)),
    write: (e) => JSON.stringify(Array.from(e))
  },
  date: {
    read: (e) => new Date(e),
    write: (e) => e.toISOString()
  }
}, lg = "vueuse-storage";
function dw(e, t, n, i = {}) {
  var r;
  const {
    flush: s = "pre",
    deep: o = !0,
    listenToStorageChanges: a = !0,
    writeDefaults: l = !0,
    mergeDefaults: h = !1,
    shallow: c,
    window: d = ic,
    eventFilter: g,
    onError: p = (z) => {
      console.error(z);
    },
    initOnMounted: b
  } = i, x = (c ? no : Pe)(typeof t == "function" ? t() : t);
  if (!n)
    try {
      n = cw("getDefaultStorage", () => {
        var z;
        return (z = ic) == null ? void 0 : z.localStorage;
      })();
    } catch (z) {
      p(z);
    }
  if (!n)
    return x;
  const N = Sd(t), v = hw(N), w = (r = i.serializer) != null ? r : fw[v], { pause: k, resume: T } = sw(
    x,
    () => G(x.value),
    { flush: s, deep: o, eventFilter: g }
  );
  d && a && ow(() => {
    ag(d, "storage", O), ag(d, lg, $), b && O();
  }), b || O();
  function D(z, A) {
    d && d.dispatchEvent(new CustomEvent(lg, {
      detail: {
        key: e,
        oldValue: z,
        newValue: A,
        storageArea: n
      }
    }));
  }
  function G(z) {
    try {
      const A = n.getItem(e);
      if (z == null)
        D(A, null), n.removeItem(e);
      else {
        const _ = w.write(z);
        A !== _ && (n.setItem(e, _), D(A, _));
      }
    } catch (A) {
      p(A);
    }
  }
  function R(z) {
    const A = z ? z.newValue : n.getItem(e);
    if (A == null)
      return l && N != null && n.setItem(e, w.write(N)), N;
    if (!z && h) {
      const _ = w.read(A);
      return typeof h == "function" ? h(_, N) : v === "object" && !Array.isArray(_) ? { ...N, ..._ } : _;
    } else return typeof A != "string" ? A : w.read(A);
  }
  function O(z) {
    if (!(z && z.storageArea !== n)) {
      if (z && z.key == null) {
        x.value = N;
        return;
      }
      if (!(z && z.key !== e)) {
        k();
        try {
          (z == null ? void 0 : z.newValue) !== w.write(x.value) && (x.value = R(z));
        } catch (A) {
          p(A);
        } finally {
          z ? Qr(T) : T();
        }
      }
    }
  }
  function $(z) {
    O(z.detail);
  }
  return x;
}
function ug(e, t, n = {}) {
  const { window: i = ic } = n;
  return dw(e, t, i == null ? void 0 : i.localStorage, n);
}
const Mr = /* @__PURE__ */ Object.create(null);
Mr.open = "0";
Mr.close = "1";
Mr.ping = "2";
Mr.pong = "3";
Mr.message = "4";
Mr.upgrade = "5";
Mr.noop = "6";
const ju = /* @__PURE__ */ Object.create(null);
Object.keys(Mr).forEach((e) => {
  ju[Mr[e]] = e;
});
const pf = { type: "error", data: "parser error" }, j1 = typeof Blob == "function" || typeof Blob < "u" && Object.prototype.toString.call(Blob) === "[object BlobConstructor]", B1 = typeof ArrayBuffer == "function", q1 = (e) => typeof ArrayBuffer.isView == "function" ? ArrayBuffer.isView(e) : e && e.buffer instanceof ArrayBuffer, Ad = ({ type: e, data: t }, n, i) => j1 && t instanceof Blob ? n ? i(t) : cg(t, i) : B1 && (t instanceof ArrayBuffer || q1(t)) ? n ? i(t) : cg(new Blob([t]), i) : i(Mr[e] + (t || "")), cg = (e, t) => {
  const n = new FileReader();
  return n.onload = function() {
    const i = n.result.split(",")[1];
    t("b" + (i || ""));
  }, n.readAsDataURL(e);
};
function hg(e) {
  return e instanceof Uint8Array ? e : e instanceof ArrayBuffer ? new Uint8Array(e) : new Uint8Array(e.buffer, e.byteOffset, e.byteLength);
}
let Lh;
function pw(e, t) {
  if (j1 && e.data instanceof Blob)
    return e.data.arrayBuffer().then(hg).then(t);
  if (B1 && (e.data instanceof ArrayBuffer || q1(e.data)))
    return t(hg(e.data));
  Ad(e, !1, (n) => {
    Lh || (Lh = new TextEncoder()), t(Lh.encode(n));
  });
}
const fg = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", sl = typeof Uint8Array > "u" ? [] : new Uint8Array(256);
for (let e = 0; e < fg.length; e++)
  sl[fg.charCodeAt(e)] = e;
const gw = (e) => {
  let t = e.length * 0.75, n = e.length, i, r = 0, s, o, a, l;
  e[e.length - 1] === "=" && (t--, e[e.length - 2] === "=" && t--);
  const h = new ArrayBuffer(t), c = new Uint8Array(h);
  for (i = 0; i < n; i += 4)
    s = sl[e.charCodeAt(i)], o = sl[e.charCodeAt(i + 1)], a = sl[e.charCodeAt(i + 2)], l = sl[e.charCodeAt(i + 3)], c[r++] = s << 2 | o >> 4, c[r++] = (o & 15) << 4 | a >> 2, c[r++] = (a & 3) << 6 | l & 63;
  return h;
}, mw = typeof ArrayBuffer == "function", kd = (e, t) => {
  if (typeof e != "string")
    return {
      type: "message",
      data: $1(e, t)
    };
  const n = e.charAt(0);
  return n === "b" ? {
    type: "message",
    data: yw(e.substring(1), t)
  } : ju[n] ? e.length > 1 ? {
    type: ju[n],
    data: e.substring(1)
  } : {
    type: ju[n]
  } : pf;
}, yw = (e, t) => {
  if (mw) {
    const n = gw(e);
    return $1(n, t);
  } else
    return { base64: !0, data: e };
}, $1 = (e, t) => {
  switch (t) {
    case "blob":
      return e instanceof Blob ? e : new Blob([e]);
    case "arraybuffer":
    default:
      return e instanceof ArrayBuffer ? e : e.buffer;
  }
}, z1 = "", bw = (e, t) => {
  const n = e.length, i = new Array(n);
  let r = 0;
  e.forEach((s, o) => {
    Ad(s, !1, (a) => {
      i[o] = a, ++r === n && t(i.join(z1));
    });
  });
}, vw = (e, t) => {
  const n = e.split(z1), i = [];
  for (let r = 0; r < n.length; r++) {
    const s = kd(n[r], t);
    if (i.push(s), s.type === "error")
      break;
  }
  return i;
};
function ww() {
  return new TransformStream({
    transform(e, t) {
      pw(e, (n) => {
        const i = n.length;
        let r;
        if (i < 126)
          r = new Uint8Array(1), new DataView(r.buffer).setUint8(0, i);
        else if (i < 65536) {
          r = new Uint8Array(3);
          const s = new DataView(r.buffer);
          s.setUint8(0, 126), s.setUint16(1, i);
        } else {
          r = new Uint8Array(9);
          const s = new DataView(r.buffer);
          s.setUint8(0, 127), s.setBigUint64(1, BigInt(i));
        }
        e.data && typeof e.data != "string" && (r[0] |= 128), t.enqueue(r), t.enqueue(n);
      });
    }
  });
}
let Ch;
function Lu(e) {
  return e.reduce((t, n) => t + n.length, 0);
}
function Cu(e, t) {
  if (e[0].length === t)
    return e.shift();
  const n = new Uint8Array(t);
  let i = 0;
  for (let r = 0; r < t; r++)
    n[r] = e[0][i++], i === e[0].length && (e.shift(), i = 0);
  return e.length && i < e[0].length && (e[0] = e[0].slice(i)), n;
}
function xw(e, t) {
  Ch || (Ch = new TextDecoder());
  const n = [];
  let i = 0, r = -1, s = !1;
  return new TransformStream({
    transform(o, a) {
      for (n.push(o); ; ) {
        if (i === 0) {
          if (Lu(n) < 1)
            break;
          const l = Cu(n, 1);
          s = (l[0] & 128) === 128, r = l[0] & 127, r < 126 ? i = 3 : r === 126 ? i = 1 : i = 2;
        } else if (i === 1) {
          if (Lu(n) < 2)
            break;
          const l = Cu(n, 2);
          r = new DataView(l.buffer, l.byteOffset, l.length).getUint16(0), i = 3;
        } else if (i === 2) {
          if (Lu(n) < 8)
            break;
          const l = Cu(n, 8), h = new DataView(l.buffer, l.byteOffset, l.length), c = h.getUint32(0);
          if (c > Math.pow(2, 21) - 1) {
            a.enqueue(pf);
            break;
          }
          r = c * Math.pow(2, 32) + h.getUint32(4), i = 3;
        } else {
          if (Lu(n) < r)
            break;
          const l = Cu(n, r);
          a.enqueue(kd(s ? l : Ch.decode(l), t)), i = 0;
        }
        if (r === 0 || r > e) {
          a.enqueue(pf);
          break;
        }
      }
    }
  });
}
const U1 = 4;
function Fn(e) {
  if (e) return Sw(e);
}
function Sw(e) {
  for (var t in Fn.prototype)
    e[t] = Fn.prototype[t];
  return e;
}
Fn.prototype.on = Fn.prototype.addEventListener = function(e, t) {
  return this._callbacks = this._callbacks || {}, (this._callbacks["$" + e] = this._callbacks["$" + e] || []).push(t), this;
};
Fn.prototype.once = function(e, t) {
  function n() {
    this.off(e, n), t.apply(this, arguments);
  }
  return n.fn = t, this.on(e, n), this;
};
Fn.prototype.off = Fn.prototype.removeListener = Fn.prototype.removeAllListeners = Fn.prototype.removeEventListener = function(e, t) {
  if (this._callbacks = this._callbacks || {}, arguments.length == 0)
    return this._callbacks = {}, this;
  var n = this._callbacks["$" + e];
  if (!n) return this;
  if (arguments.length == 1)
    return delete this._callbacks["$" + e], this;
  for (var i, r = 0; r < n.length; r++)
    if (i = n[r], i === t || i.fn === t) {
      n.splice(r, 1);
      break;
    }
  return n.length === 0 && delete this._callbacks["$" + e], this;
};
Fn.prototype.emit = function(e) {
  this._callbacks = this._callbacks || {};
  for (var t = new Array(arguments.length - 1), n = this._callbacks["$" + e], i = 1; i < arguments.length; i++)
    t[i - 1] = arguments[i];
  if (n) {
    n = n.slice(0);
    for (var i = 0, r = n.length; i < r; ++i)
      n[i].apply(this, t);
  }
  return this;
};
Fn.prototype.emitReserved = Fn.prototype.emit;
Fn.prototype.listeners = function(e) {
  return this._callbacks = this._callbacks || {}, this._callbacks["$" + e] || [];
};
Fn.prototype.hasListeners = function(e) {
  return !!this.listeners(e).length;
};
const Ec = typeof Promise == "function" && typeof Promise.resolve == "function" ? (t) => Promise.resolve().then(t) : (t, n) => n(t, 0), Zi = typeof self < "u" ? self : typeof window < "u" ? window : Function("return this")(), Aw = "arraybuffer";
function W1(e, ...t) {
  return t.reduce((n, i) => (e.hasOwnProperty(i) && (n[i] = e[i]), n), {});
}
const kw = Zi.setTimeout, _w = Zi.clearTimeout;
function Oc(e, t) {
  t.useNativeTimers ? (e.setTimeoutFn = kw.bind(Zi), e.clearTimeoutFn = _w.bind(Zi)) : (e.setTimeoutFn = Zi.setTimeout.bind(Zi), e.clearTimeoutFn = Zi.clearTimeout.bind(Zi));
}
const Nw = 1.33;
function Pw(e) {
  return typeof e == "string" ? Lw(e) : Math.ceil((e.byteLength || e.size) * Nw);
}
function Lw(e) {
  let t = 0, n = 0;
  for (let i = 0, r = e.length; i < r; i++)
    t = e.charCodeAt(i), t < 128 ? n += 1 : t < 2048 ? n += 2 : t < 55296 || t >= 57344 ? n += 3 : (i++, n += 4);
  return n;
}
function H1() {
  return Date.now().toString(36).substring(3) + Math.random().toString(36).substring(2, 5);
}
function Cw(e) {
  let t = "";
  for (let n in e)
    e.hasOwnProperty(n) && (t.length && (t += "&"), t += encodeURIComponent(n) + "=" + encodeURIComponent(e[n]));
  return t;
}
function Tw(e) {
  let t = {}, n = e.split("&");
  for (let i = 0, r = n.length; i < r; i++) {
    let s = n[i].split("=");
    t[decodeURIComponent(s[0])] = decodeURIComponent(s[1]);
  }
  return t;
}
class Iw extends Error {
  constructor(t, n, i) {
    super(t), this.description = n, this.context = i, this.type = "TransportError";
  }
}
class _d extends Fn {
  /**
   * Transport abstract constructor.
   *
   * @param {Object} opts - options
   * @protected
   */
  constructor(t) {
    super(), this.writable = !1, Oc(this, t), this.opts = t, this.query = t.query, this.socket = t.socket, this.supportsBinary = !t.forceBase64;
  }
  /**
   * Emits an error.
   *
   * @param {String} reason
   * @param description
   * @param context - the error context
   * @return {Transport} for chaining
   * @protected
   */
  onError(t, n, i) {
    return super.emitReserved("error", new Iw(t, n, i)), this;
  }
  /**
   * Opens the transport.
   */
  open() {
    return this.readyState = "opening", this.doOpen(), this;
  }
  /**
   * Closes the transport.
   */
  close() {
    return (this.readyState === "opening" || this.readyState === "open") && (this.doClose(), this.onClose()), this;
  }
  /**
   * Sends multiple packets.
   *
   * @param {Array} packets
   */
  send(t) {
    this.readyState === "open" && this.write(t);
  }
  /**
   * Called upon open
   *
   * @protected
   */
  onOpen() {
    this.readyState = "open", this.writable = !0, super.emitReserved("open");
  }
  /**
   * Called with data.
   *
   * @param {String} data
   * @protected
   */
  onData(t) {
    const n = kd(t, this.socket.binaryType);
    this.onPacket(n);
  }
  /**
   * Called with a decoded packet.
   *
   * @protected
   */
  onPacket(t) {
    super.emitReserved("packet", t);
  }
  /**
   * Called upon close.
   *
   * @protected
   */
  onClose(t) {
    this.readyState = "closed", super.emitReserved("close", t);
  }
  /**
   * Pauses the transport, in order not to lose packets during an upgrade.
   *
   * @param onPause
   */
  pause(t) {
  }
  createUri(t, n = {}) {
    return t + "://" + this._hostname() + this._port() + this.opts.path + this._query(n);
  }
  _hostname() {
    const t = this.opts.hostname;
    return t.indexOf(":") === -1 ? t : "[" + t + "]";
  }
  _port() {
    return this.opts.port && (this.opts.secure && +(this.opts.port !== 443) || !this.opts.secure && Number(this.opts.port) !== 80) ? ":" + this.opts.port : "";
  }
  _query(t) {
    const n = Cw(t);
    return n.length ? "?" + n : "";
  }
}
class Ew extends _d {
  constructor() {
    super(...arguments), this._polling = !1;
  }
  get name() {
    return "polling";
  }
  /**
   * Opens the socket (triggers polling). We write a PING message to determine
   * when the transport is open.
   *
   * @protected
   */
  doOpen() {
    this._poll();
  }
  /**
   * Pauses polling.
   *
   * @param {Function} onPause - callback upon buffers are flushed and transport is paused
   * @package
   */
  pause(t) {
    this.readyState = "pausing";
    const n = () => {
      this.readyState = "paused", t();
    };
    if (this._polling || !this.writable) {
      let i = 0;
      this._polling && (i++, this.once("pollComplete", function() {
        --i || n();
      })), this.writable || (i++, this.once("drain", function() {
        --i || n();
      }));
    } else
      n();
  }
  /**
   * Starts polling cycle.
   *
   * @private
   */
  _poll() {
    this._polling = !0, this.doPoll(), this.emitReserved("poll");
  }
  /**
   * Overloads onData to detect payloads.
   *
   * @protected
   */
  onData(t) {
    const n = (i) => {
      if (this.readyState === "opening" && i.type === "open" && this.onOpen(), i.type === "close")
        return this.onClose({ description: "transport closed by the server" }), !1;
      this.onPacket(i);
    };
    vw(t, this.socket.binaryType).forEach(n), this.readyState !== "closed" && (this._polling = !1, this.emitReserved("pollComplete"), this.readyState === "open" && this._poll());
  }
  /**
   * For polling, send a close packet.
   *
   * @protected
   */
  doClose() {
    const t = () => {
      this.write([{ type: "close" }]);
    };
    this.readyState === "open" ? t() : this.once("open", t);
  }
  /**
   * Writes a packets payload.
   *
   * @param {Array} packets - data packets
   * @protected
   */
  write(t) {
    this.writable = !1, bw(t, (n) => {
      this.doWrite(n, () => {
        this.writable = !0, this.emitReserved("drain");
      });
    });
  }
  /**
   * Generates uri for connection.
   *
   * @private
   */
  uri() {
    const t = this.opts.secure ? "https" : "http", n = this.query || {};
    return this.opts.timestampRequests !== !1 && (n[this.opts.timestampParam] = H1()), !this.supportsBinary && !n.sid && (n.b64 = 1), this.createUri(t, n);
  }
}
let G1 = !1;
try {
  G1 = typeof XMLHttpRequest < "u" && "withCredentials" in new XMLHttpRequest();
} catch {
}
const Ow = G1;
function Fw() {
}
class Mw extends Ew {
  /**
   * XHR Polling constructor.
   *
   * @param {Object} opts
   * @package
   */
  constructor(t) {
    if (super(t), typeof location < "u") {
      const n = location.protocol === "https:";
      let i = location.port;
      i || (i = n ? "443" : "80"), this.xd = typeof location < "u" && t.hostname !== location.hostname || i !== t.port;
    }
  }
  /**
   * Sends data.
   *
   * @param {String} data to send.
   * @param {Function} called upon flush.
   * @private
   */
  doWrite(t, n) {
    const i = this.request({
      method: "POST",
      data: t
    });
    i.on("success", n), i.on("error", (r, s) => {
      this.onError("xhr post error", r, s);
    });
  }
  /**
   * Starts a poll cycle.
   *
   * @private
   */
  doPoll() {
    const t = this.request();
    t.on("data", this.onData.bind(this)), t.on("error", (n, i) => {
      this.onError("xhr poll error", n, i);
    }), this.pollXhr = t;
  }
}
class Or extends Fn {
  /**
   * Request constructor
   *
   * @param {Object} options
   * @package
   */
  constructor(t, n, i) {
    super(), this.createRequest = t, Oc(this, i), this._opts = i, this._method = i.method || "GET", this._uri = n, this._data = i.data !== void 0 ? i.data : null, this._create();
  }
  /**
   * Creates the XHR object and sends the request.
   *
   * @private
   */
  _create() {
    var t;
    const n = W1(this._opts, "agent", "pfx", "key", "passphrase", "cert", "ca", "ciphers", "rejectUnauthorized", "autoUnref");
    n.xdomain = !!this._opts.xd;
    const i = this._xhr = this.createRequest(n);
    try {
      i.open(this._method, this._uri, !0);
      try {
        if (this._opts.extraHeaders) {
          i.setDisableHeaderCheck && i.setDisableHeaderCheck(!0);
          for (let r in this._opts.extraHeaders)
            this._opts.extraHeaders.hasOwnProperty(r) && i.setRequestHeader(r, this._opts.extraHeaders[r]);
        }
      } catch {
      }
      if (this._method === "POST")
        try {
          i.setRequestHeader("Content-type", "text/plain;charset=UTF-8");
        } catch {
        }
      try {
        i.setRequestHeader("Accept", "*/*");
      } catch {
      }
      (t = this._opts.cookieJar) === null || t === void 0 || t.addCookies(i), "withCredentials" in i && (i.withCredentials = this._opts.withCredentials), this._opts.requestTimeout && (i.timeout = this._opts.requestTimeout), i.onreadystatechange = () => {
        var r;
        i.readyState === 3 && ((r = this._opts.cookieJar) === null || r === void 0 || r.parseCookies(
          // @ts-ignore
          i.getResponseHeader("set-cookie")
        )), i.readyState === 4 && (i.status === 200 || i.status === 1223 ? this._onLoad() : this.setTimeoutFn(() => {
          this._onError(typeof i.status == "number" ? i.status : 0);
        }, 0));
      }, i.send(this._data);
    } catch (r) {
      this.setTimeoutFn(() => {
        this._onError(r);
      }, 0);
      return;
    }
    typeof document < "u" && (this._index = Or.requestsCount++, Or.requests[this._index] = this);
  }
  /**
   * Called upon error.
   *
   * @private
   */
  _onError(t) {
    this.emitReserved("error", t, this._xhr), this._cleanup(!0);
  }
  /**
   * Cleans up house.
   *
   * @private
   */
  _cleanup(t) {
    if (!(typeof this._xhr > "u" || this._xhr === null)) {
      if (this._xhr.onreadystatechange = Fw, t)
        try {
          this._xhr.abort();
        } catch {
        }
      typeof document < "u" && delete Or.requests[this._index], this._xhr = null;
    }
  }
  /**
   * Called upon load.
   *
   * @private
   */
  _onLoad() {
    const t = this._xhr.responseText;
    t !== null && (this.emitReserved("data", t), this.emitReserved("success"), this._cleanup());
  }
  /**
   * Aborts the request.
   *
   * @package
   */
  abort() {
    this._cleanup();
  }
}
Or.requestsCount = 0;
Or.requests = {};
if (typeof document < "u") {
  if (typeof attachEvent == "function")
    attachEvent("onunload", dg);
  else if (typeof addEventListener == "function") {
    const e = "onpagehide" in Zi ? "pagehide" : "unload";
    addEventListener(e, dg, !1);
  }
}
function dg() {
  for (let e in Or.requests)
    Or.requests.hasOwnProperty(e) && Or.requests[e].abort();
}
const Rw = function() {
  const e = V1({
    xdomain: !1
  });
  return e && e.responseType !== null;
}();
class Dw extends Mw {
  constructor(t) {
    super(t);
    const n = t && t.forceBase64;
    this.supportsBinary = Rw && !n;
  }
  request(t = {}) {
    return Object.assign(t, { xd: this.xd }, this.opts), new Or(V1, this.uri(), t);
  }
}
function V1(e) {
  const t = e.xdomain;
  try {
    if (typeof XMLHttpRequest < "u" && (!t || Ow))
      return new XMLHttpRequest();
  } catch {
  }
  if (!t)
    try {
      return new Zi[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP");
    } catch {
    }
}
const Y1 = typeof navigator < "u" && typeof navigator.product == "string" && navigator.product.toLowerCase() === "reactnative";
class jw extends _d {
  get name() {
    return "websocket";
  }
  doOpen() {
    const t = this.uri(), n = this.opts.protocols, i = Y1 ? {} : W1(this.opts, "agent", "perMessageDeflate", "pfx", "key", "passphrase", "cert", "ca", "ciphers", "rejectUnauthorized", "localAddress", "protocolVersion", "origin", "maxPayload", "family", "checkServerIdentity");
    this.opts.extraHeaders && (i.headers = this.opts.extraHeaders);
    try {
      this.ws = this.createSocket(t, n, i);
    } catch (r) {
      return this.emitReserved("error", r);
    }
    this.ws.binaryType = this.socket.binaryType, this.addEventListeners();
  }
  /**
   * Adds event listeners to the socket
   *
   * @private
   */
  addEventListeners() {
    this.ws.onopen = () => {
      this.opts.autoUnref && this.ws._socket.unref(), this.onOpen();
    }, this.ws.onclose = (t) => this.onClose({
      description: "websocket connection closed",
      context: t
    }), this.ws.onmessage = (t) => this.onData(t.data), this.ws.onerror = (t) => this.onError("websocket error", t);
  }
  write(t) {
    this.writable = !1;
    for (let n = 0; n < t.length; n++) {
      const i = t[n], r = n === t.length - 1;
      Ad(i, this.supportsBinary, (s) => {
        try {
          this.doWrite(i, s);
        } catch {
        }
        r && Ec(() => {
          this.writable = !0, this.emitReserved("drain");
        }, this.setTimeoutFn);
      });
    }
  }
  doClose() {
    typeof this.ws < "u" && (this.ws.onerror = () => {
    }, this.ws.close(), this.ws = null);
  }
  /**
   * Generates uri for connection.
   *
   * @private
   */
  uri() {
    const t = this.opts.secure ? "wss" : "ws", n = this.query || {};
    return this.opts.timestampRequests && (n[this.opts.timestampParam] = H1()), this.supportsBinary || (n.b64 = 1), this.createUri(t, n);
  }
}
const Th = Zi.WebSocket || Zi.MozWebSocket;
class Bw extends jw {
  createSocket(t, n, i) {
    return Y1 ? new Th(t, n, i) : n ? new Th(t, n) : new Th(t);
  }
  doWrite(t, n) {
    this.ws.send(n);
  }
}
class qw extends _d {
  get name() {
    return "webtransport";
  }
  doOpen() {
    try {
      this._transport = new WebTransport(this.createUri("https"), this.opts.transportOptions[this.name]);
    } catch (t) {
      return this.emitReserved("error", t);
    }
    this._transport.closed.then(() => {
      this.onClose();
    }).catch((t) => {
      this.onError("webtransport error", t);
    }), this._transport.ready.then(() => {
      this._transport.createBidirectionalStream().then((t) => {
        const n = xw(Number.MAX_SAFE_INTEGER, this.socket.binaryType), i = t.readable.pipeThrough(n).getReader(), r = ww();
        r.readable.pipeTo(t.writable), this._writer = r.writable.getWriter();
        const s = () => {
          i.read().then(({ done: a, value: l }) => {
            a || (this.onPacket(l), s());
          }).catch((a) => {
          });
        };
        s();
        const o = { type: "open" };
        this.query.sid && (o.data = `{"sid":"${this.query.sid}"}`), this._writer.write(o).then(() => this.onOpen());
      });
    });
  }
  write(t) {
    this.writable = !1;
    for (let n = 0; n < t.length; n++) {
      const i = t[n], r = n === t.length - 1;
      this._writer.write(i).then(() => {
        r && Ec(() => {
          this.writable = !0, this.emitReserved("drain");
        }, this.setTimeoutFn);
      });
    }
  }
  doClose() {
    var t;
    (t = this._transport) === null || t === void 0 || t.close();
  }
}
const $w = {
  websocket: Bw,
  webtransport: qw,
  polling: Dw
}, zw = /^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/, Uw = [
  "source",
  "protocol",
  "authority",
  "userInfo",
  "user",
  "password",
  "host",
  "port",
  "relative",
  "path",
  "directory",
  "file",
  "query",
  "anchor"
];
function gf(e) {
  if (e.length > 8e3)
    throw "URI too long";
  const t = e, n = e.indexOf("["), i = e.indexOf("]");
  n != -1 && i != -1 && (e = e.substring(0, n) + e.substring(n, i).replace(/:/g, ";") + e.substring(i, e.length));
  let r = zw.exec(e || ""), s = {}, o = 14;
  for (; o--; )
    s[Uw[o]] = r[o] || "";
  return n != -1 && i != -1 && (s.source = t, s.host = s.host.substring(1, s.host.length - 1).replace(/;/g, ":"), s.authority = s.authority.replace("[", "").replace("]", "").replace(/;/g, ":"), s.ipv6uri = !0), s.pathNames = Ww(s, s.path), s.queryKey = Hw(s, s.query), s;
}
function Ww(e, t) {
  const n = /\/{2,9}/g, i = t.replace(n, "/").split("/");
  return (t.slice(0, 1) == "/" || t.length === 0) && i.splice(0, 1), t.slice(-1) == "/" && i.splice(i.length - 1, 1), i;
}
function Hw(e, t) {
  const n = {};
  return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function(i, r, s) {
    r && (n[r] = s);
  }), n;
}
const mf = typeof addEventListener == "function" && typeof removeEventListener == "function", Bu = [];
mf && addEventListener("offline", () => {
  Bu.forEach((e) => e());
}, !1);
class Os extends Fn {
  /**
   * Socket constructor.
   *
   * @param {String|Object} uri - uri or options
   * @param {Object} opts - options
   */
  constructor(t, n) {
    if (super(), this.binaryType = Aw, this.writeBuffer = [], this._prevBufferLen = 0, this._pingInterval = -1, this._pingTimeout = -1, this._maxPayload = -1, this._pingTimeoutTime = 1 / 0, t && typeof t == "object" && (n = t, t = null), t) {
      const i = gf(t);
      n.hostname = i.host, n.secure = i.protocol === "https" || i.protocol === "wss", n.port = i.port, i.query && (n.query = i.query);
    } else n.host && (n.hostname = gf(n.host).host);
    Oc(this, n), this.secure = n.secure != null ? n.secure : typeof location < "u" && location.protocol === "https:", n.hostname && !n.port && (n.port = this.secure ? "443" : "80"), this.hostname = n.hostname || (typeof location < "u" ? location.hostname : "localhost"), this.port = n.port || (typeof location < "u" && location.port ? location.port : this.secure ? "443" : "80"), this.transports = [], this._transportsByName = {}, n.transports.forEach((i) => {
      const r = i.prototype.name;
      this.transports.push(r), this._transportsByName[r] = i;
    }), this.opts = Object.assign({
      path: "/engine.io",
      agent: !1,
      withCredentials: !1,
      upgrade: !0,
      timestampParam: "t",
      rememberUpgrade: !1,
      addTrailingSlash: !0,
      rejectUnauthorized: !0,
      perMessageDeflate: {
        threshold: 1024
      },
      transportOptions: {},
      closeOnBeforeunload: !1
    }, n), this.opts.path = this.opts.path.replace(/\/$/, "") + (this.opts.addTrailingSlash ? "/" : ""), typeof this.opts.query == "string" && (this.opts.query = Tw(this.opts.query)), mf && (this.opts.closeOnBeforeunload && (this._beforeunloadEventListener = () => {
      this.transport && (this.transport.removeAllListeners(), this.transport.close());
    }, addEventListener("beforeunload", this._beforeunloadEventListener, !1)), this.hostname !== "localhost" && (this._offlineEventListener = () => {
      this._onClose("transport close", {
        description: "network connection lost"
      });
    }, Bu.push(this._offlineEventListener))), this.opts.withCredentials && (this._cookieJar = void 0), this._open();
  }
  /**
   * Creates transport of the given type.
   *
   * @param {String} name - transport name
   * @return {Transport}
   * @private
   */
  createTransport(t) {
    const n = Object.assign({}, this.opts.query);
    n.EIO = U1, n.transport = t, this.id && (n.sid = this.id);
    const i = Object.assign({}, this.opts, {
      query: n,
      socket: this,
      hostname: this.hostname,
      secure: this.secure,
      port: this.port
    }, this.opts.transportOptions[t]);
    return new this._transportsByName[t](i);
  }
  /**
   * Initializes transport to use and starts probe.
   *
   * @private
   */
  _open() {
    if (this.transports.length === 0) {
      this.setTimeoutFn(() => {
        this.emitReserved("error", "No transports available");
      }, 0);
      return;
    }
    const t = this.opts.rememberUpgrade && Os.priorWebsocketSuccess && this.transports.indexOf("websocket") !== -1 ? "websocket" : this.transports[0];
    this.readyState = "opening";
    const n = this.createTransport(t);
    n.open(), this.setTransport(n);
  }
  /**
   * Sets the current transport. Disables the existing one (if any).
   *
   * @private
   */
  setTransport(t) {
    this.transport && this.transport.removeAllListeners(), this.transport = t, t.on("drain", this._onDrain.bind(this)).on("packet", this._onPacket.bind(this)).on("error", this._onError.bind(this)).on("close", (n) => this._onClose("transport close", n));
  }
  /**
   * Called when connection is deemed open.
   *
   * @private
   */
  onOpen() {
    this.readyState = "open", Os.priorWebsocketSuccess = this.transport.name === "websocket", this.emitReserved("open"), this.flush();
  }
  /**
   * Handles a packet.
   *
   * @private
   */
  _onPacket(t) {
    if (this.readyState === "opening" || this.readyState === "open" || this.readyState === "closing")
      switch (this.emitReserved("packet", t), this.emitReserved("heartbeat"), t.type) {
        case "open":
          this.onHandshake(JSON.parse(t.data));
          break;
        case "ping":
          this._sendPacket("pong"), this.emitReserved("ping"), this.emitReserved("pong"), this._resetPingTimeout();
          break;
        case "error":
          const n = new Error("server error");
          n.code = t.data, this._onError(n);
          break;
        case "message":
          this.emitReserved("data", t.data), this.emitReserved("message", t.data);
          break;
      }
  }
  /**
   * Called upon handshake completion.
   *
   * @param {Object} data - handshake obj
   * @private
   */
  onHandshake(t) {
    this.emitReserved("handshake", t), this.id = t.sid, this.transport.query.sid = t.sid, this._pingInterval = t.pingInterval, this._pingTimeout = t.pingTimeout, this._maxPayload = t.maxPayload, this.onOpen(), this.readyState !== "closed" && this._resetPingTimeout();
  }
  /**
   * Sets and resets ping timeout timer based on server pings.
   *
   * @private
   */
  _resetPingTimeout() {
    this.clearTimeoutFn(this._pingTimeoutTimer);
    const t = this._pingInterval + this._pingTimeout;
    this._pingTimeoutTime = Date.now() + t, this._pingTimeoutTimer = this.setTimeoutFn(() => {
      this._onClose("ping timeout");
    }, t), this.opts.autoUnref && this._pingTimeoutTimer.unref();
  }
  /**
   * Called on `drain` event
   *
   * @private
   */
  _onDrain() {
    this.writeBuffer.splice(0, this._prevBufferLen), this._prevBufferLen = 0, this.writeBuffer.length === 0 ? this.emitReserved("drain") : this.flush();
  }
  /**
   * Flush write buffers.
   *
   * @private
   */
  flush() {
    if (this.readyState !== "closed" && this.transport.writable && !this.upgrading && this.writeBuffer.length) {
      const t = this._getWritablePackets();
      this.transport.send(t), this._prevBufferLen = t.length, this.emitReserved("flush");
    }
  }
  /**
   * Ensure the encoded size of the writeBuffer is below the maxPayload value sent by the server (only for HTTP
   * long-polling)
   *
   * @private
   */
  _getWritablePackets() {
    if (!(this._maxPayload && this.transport.name === "polling" && this.writeBuffer.length > 1))
      return this.writeBuffer;
    let n = 1;
    for (let i = 0; i < this.writeBuffer.length; i++) {
      const r = this.writeBuffer[i].data;
      if (r && (n += Pw(r)), i > 0 && n > this._maxPayload)
        return this.writeBuffer.slice(0, i);
      n += 2;
    }
    return this.writeBuffer;
  }
  /**
   * Checks whether the heartbeat timer has expired but the socket has not yet been notified.
   *
   * Note: this method is private for now because it does not really fit the WebSocket API, but if we put it in the
   * `write()` method then the message would not be buffered by the Socket.IO client.
   *
   * @return {boolean}
   * @private
   */
  /* private */
  _hasPingExpired() {
    if (!this._pingTimeoutTime)
      return !0;
    const t = Date.now() > this._pingTimeoutTime;
    return t && (this._pingTimeoutTime = 0, Ec(() => {
      this._onClose("ping timeout");
    }, this.setTimeoutFn)), t;
  }
  /**
   * Sends a message.
   *
   * @param {String} msg - message.
   * @param {Object} options.
   * @param {Function} fn - callback function.
   * @return {Socket} for chaining.
   */
  write(t, n, i) {
    return this._sendPacket("message", t, n, i), this;
  }
  /**
   * Sends a message. Alias of {@link Socket#write}.
   *
   * @param {String} msg - message.
   * @param {Object} options.
   * @param {Function} fn - callback function.
   * @return {Socket} for chaining.
   */
  send(t, n, i) {
    return this._sendPacket("message", t, n, i), this;
  }
  /**
   * Sends a packet.
   *
   * @param {String} type: packet type.
   * @param {String} data.
   * @param {Object} options.
   * @param {Function} fn - callback function.
   * @private
   */
  _sendPacket(t, n, i, r) {
    if (typeof n == "function" && (r = n, n = void 0), typeof i == "function" && (r = i, i = null), this.readyState === "closing" || this.readyState === "closed")
      return;
    i = i || {}, i.compress = i.compress !== !1;
    const s = {
      type: t,
      data: n,
      options: i
    };
    this.emitReserved("packetCreate", s), this.writeBuffer.push(s), r && this.once("flush", r), this.flush();
  }
  /**
   * Closes the connection.
   */
  close() {
    const t = () => {
      this._onClose("forced close"), this.transport.close();
    }, n = () => {
      this.off("upgrade", n), this.off("upgradeError", n), t();
    }, i = () => {
      this.once("upgrade", n), this.once("upgradeError", n);
    };
    return (this.readyState === "opening" || this.readyState === "open") && (this.readyState = "closing", this.writeBuffer.length ? this.once("drain", () => {
      this.upgrading ? i() : t();
    }) : this.upgrading ? i() : t()), this;
  }
  /**
   * Called upon transport error
   *
   * @private
   */
  _onError(t) {
    if (Os.priorWebsocketSuccess = !1, this.opts.tryAllTransports && this.transports.length > 1 && this.readyState === "opening")
      return this.transports.shift(), this._open();
    this.emitReserved("error", t), this._onClose("transport error", t);
  }
  /**
   * Called upon transport close.
   *
   * @private
   */
  _onClose(t, n) {
    if (this.readyState === "opening" || this.readyState === "open" || this.readyState === "closing") {
      if (this.clearTimeoutFn(this._pingTimeoutTimer), this.transport.removeAllListeners("close"), this.transport.close(), this.transport.removeAllListeners(), mf && (this._beforeunloadEventListener && removeEventListener("beforeunload", this._beforeunloadEventListener, !1), this._offlineEventListener)) {
        const i = Bu.indexOf(this._offlineEventListener);
        i !== -1 && Bu.splice(i, 1);
      }
      this.readyState = "closed", this.id = null, this.emitReserved("close", t, n), this.writeBuffer = [], this._prevBufferLen = 0;
    }
  }
}
Os.protocol = U1;
class Gw extends Os {
  constructor() {
    super(...arguments), this._upgrades = [];
  }
  onOpen() {
    if (super.onOpen(), this.readyState === "open" && this.opts.upgrade)
      for (let t = 0; t < this._upgrades.length; t++)
        this._probe(this._upgrades[t]);
  }
  /**
   * Probes a transport.
   *
   * @param {String} name - transport name
   * @private
   */
  _probe(t) {
    let n = this.createTransport(t), i = !1;
    Os.priorWebsocketSuccess = !1;
    const r = () => {
      i || (n.send([{ type: "ping", data: "probe" }]), n.once("packet", (d) => {
        if (!i)
          if (d.type === "pong" && d.data === "probe") {
            if (this.upgrading = !0, this.emitReserved("upgrading", n), !n)
              return;
            Os.priorWebsocketSuccess = n.name === "websocket", this.transport.pause(() => {
              i || this.readyState !== "closed" && (c(), this.setTransport(n), n.send([{ type: "upgrade" }]), this.emitReserved("upgrade", n), n = null, this.upgrading = !1, this.flush());
            });
          } else {
            const g = new Error("probe error");
            g.transport = n.name, this.emitReserved("upgradeError", g);
          }
      }));
    };
    function s() {
      i || (i = !0, c(), n.close(), n = null);
    }
    const o = (d) => {
      const g = new Error("probe error: " + d);
      g.transport = n.name, s(), this.emitReserved("upgradeError", g);
    };
    function a() {
      o("transport closed");
    }
    function l() {
      o("socket closed");
    }
    function h(d) {
      n && d.name !== n.name && s();
    }
    const c = () => {
      n.removeListener("open", r), n.removeListener("error", o), n.removeListener("close", a), this.off("close", l), this.off("upgrading", h);
    };
    n.once("open", r), n.once("error", o), n.once("close", a), this.once("close", l), this.once("upgrading", h), this._upgrades.indexOf("webtransport") !== -1 && t !== "webtransport" ? this.setTimeoutFn(() => {
      i || n.open();
    }, 200) : n.open();
  }
  onHandshake(t) {
    this._upgrades = this._filterUpgrades(t.upgrades), super.onHandshake(t);
  }
  /**
   * Filters upgrades, returning only those matching client transports.
   *
   * @param {Array} upgrades - server upgrades
   * @private
   */
  _filterUpgrades(t) {
    const n = [];
    for (let i = 0; i < t.length; i++)
      ~this.transports.indexOf(t[i]) && n.push(t[i]);
    return n;
  }
}
let Vw = class extends Gw {
  constructor(t, n = {}) {
    const i = typeof t == "object" ? t : n;
    (!i.transports || i.transports && typeof i.transports[0] == "string") && (i.transports = (i.transports || ["polling", "websocket", "webtransport"]).map((r) => $w[r]).filter((r) => !!r)), super(t, i);
  }
};
function Yw(e, t = "", n) {
  let i = e;
  n = n || typeof location < "u" && location, e == null && (e = n.protocol + "//" + n.host), typeof e == "string" && (e.charAt(0) === "/" && (e.charAt(1) === "/" ? e = n.protocol + e : e = n.host + e), /^(https?|wss?):\/\//.test(e) || (typeof n < "u" ? e = n.protocol + "//" + e : e = "https://" + e), i = gf(e)), i.port || (/^(http|ws)$/.test(i.protocol) ? i.port = "80" : /^(http|ws)s$/.test(i.protocol) && (i.port = "443")), i.path = i.path || "/";
  const s = i.host.indexOf(":") !== -1 ? "[" + i.host + "]" : i.host;
  return i.id = i.protocol + "://" + s + ":" + i.port + t, i.href = i.protocol + "://" + s + (n && n.port === i.port ? "" : ":" + i.port), i;
}
const Kw = typeof ArrayBuffer == "function", Jw = (e) => typeof ArrayBuffer.isView == "function" ? ArrayBuffer.isView(e) : e.buffer instanceof ArrayBuffer, K1 = Object.prototype.toString, Xw = typeof Blob == "function" || typeof Blob < "u" && K1.call(Blob) === "[object BlobConstructor]", Zw = typeof File == "function" || typeof File < "u" && K1.call(File) === "[object FileConstructor]";
function Nd(e) {
  return Kw && (e instanceof ArrayBuffer || Jw(e)) || Xw && e instanceof Blob || Zw && e instanceof File;
}
function qu(e, t) {
  if (!e || typeof e != "object")
    return !1;
  if (Array.isArray(e)) {
    for (let n = 0, i = e.length; n < i; n++)
      if (qu(e[n]))
        return !0;
    return !1;
  }
  if (Nd(e))
    return !0;
  if (e.toJSON && typeof e.toJSON == "function" && arguments.length === 1)
    return qu(e.toJSON(), !0);
  for (const n in e)
    if (Object.prototype.hasOwnProperty.call(e, n) && qu(e[n]))
      return !0;
  return !1;
}
function Qw(e) {
  const t = [], n = e.data, i = e;
  return i.data = yf(n, t), i.attachments = t.length, { packet: i, buffers: t };
}
function yf(e, t) {
  if (!e)
    return e;
  if (Nd(e)) {
    const n = { _placeholder: !0, num: t.length };
    return t.push(e), n;
  } else if (Array.isArray(e)) {
    const n = new Array(e.length);
    for (let i = 0; i < e.length; i++)
      n[i] = yf(e[i], t);
    return n;
  } else if (typeof e == "object" && !(e instanceof Date)) {
    const n = {};
    for (const i in e)
      Object.prototype.hasOwnProperty.call(e, i) && (n[i] = yf(e[i], t));
    return n;
  }
  return e;
}
function t3(e, t) {
  return e.data = bf(e.data, t), delete e.attachments, e;
}
function bf(e, t) {
  if (!e)
    return e;
  if (e && e._placeholder === !0) {
    if (typeof e.num == "number" && e.num >= 0 && e.num < t.length)
      return t[e.num];
    throw new Error("illegal attachments");
  } else if (Array.isArray(e))
    for (let n = 0; n < e.length; n++)
      e[n] = bf(e[n], t);
  else if (typeof e == "object")
    for (const n in e)
      Object.prototype.hasOwnProperty.call(e, n) && (e[n] = bf(e[n], t));
  return e;
}
const e3 = [
  "connect",
  "connect_error",
  "disconnect",
  "disconnecting",
  "newListener",
  "removeListener"
  // used by the Node.js EventEmitter
], n3 = 5;
var je;
(function(e) {
  e[e.CONNECT = 0] = "CONNECT", e[e.DISCONNECT = 1] = "DISCONNECT", e[e.EVENT = 2] = "EVENT", e[e.ACK = 3] = "ACK", e[e.CONNECT_ERROR = 4] = "CONNECT_ERROR", e[e.BINARY_EVENT = 5] = "BINARY_EVENT", e[e.BINARY_ACK = 6] = "BINARY_ACK";
})(je || (je = {}));
class i3 {
  /**
   * Encoder constructor
   *
   * @param {function} replacer - custom replacer to pass down to JSON.parse
   */
  constructor(t) {
    this.replacer = t;
  }
  /**
   * Encode a packet as a single string if non-binary, or as a
   * buffer sequence, depending on packet type.
   *
   * @param {Object} obj - packet object
   */
  encode(t) {
    return (t.type === je.EVENT || t.type === je.ACK) && qu(t) ? this.encodeAsBinary({
      type: t.type === je.EVENT ? je.BINARY_EVENT : je.BINARY_ACK,
      nsp: t.nsp,
      data: t.data,
      id: t.id
    }) : [this.encodeAsString(t)];
  }
  /**
   * Encode packet as string.
   */
  encodeAsString(t) {
    let n = "" + t.type;
    return (t.type === je.BINARY_EVENT || t.type === je.BINARY_ACK) && (n += t.attachments + "-"), t.nsp && t.nsp !== "/" && (n += t.nsp + ","), t.id != null && (n += t.id), t.data != null && (n += JSON.stringify(t.data, this.replacer)), n;
  }
  /**
   * Encode packet as 'buffer sequence' by removing blobs, and
   * deconstructing packet into object with placeholders and
   * a list of buffers.
   */
  encodeAsBinary(t) {
    const n = Qw(t), i = this.encodeAsString(n.packet), r = n.buffers;
    return r.unshift(i), r;
  }
}
function pg(e) {
  return Object.prototype.toString.call(e) === "[object Object]";
}
class Pd extends Fn {
  /**
   * Decoder constructor
   *
   * @param {function} reviver - custom reviver to pass down to JSON.stringify
   */
  constructor(t) {
    super(), this.reviver = t;
  }
  /**
   * Decodes an encoded packet string into packet JSON.
   *
   * @param {String} obj - encoded packet
   */
  add(t) {
    let n;
    if (typeof t == "string") {
      if (this.reconstructor)
        throw new Error("got plaintext data when reconstructing a packet");
      n = this.decodeString(t);
      const i = n.type === je.BINARY_EVENT;
      i || n.type === je.BINARY_ACK ? (n.type = i ? je.EVENT : je.ACK, this.reconstructor = new r3(n), n.attachments === 0 && super.emitReserved("decoded", n)) : super.emitReserved("decoded", n);
    } else if (Nd(t) || t.base64)
      if (this.reconstructor)
        n = this.reconstructor.takeBinaryData(t), n && (this.reconstructor = null, super.emitReserved("decoded", n));
      else
        throw new Error("got binary data when not reconstructing a packet");
    else
      throw new Error("Unknown type: " + t);
  }
  /**
   * Decode a packet String (JSON data)
   *
   * @param {String} str
   * @return {Object} packet
   */
  decodeString(t) {
    let n = 0;
    const i = {
      type: Number(t.charAt(0))
    };
    if (je[i.type] === void 0)
      throw new Error("unknown packet type " + i.type);
    if (i.type === je.BINARY_EVENT || i.type === je.BINARY_ACK) {
      const s = n + 1;
      for (; t.charAt(++n) !== "-" && n != t.length; )
        ;
      const o = t.substring(s, n);
      if (o != Number(o) || t.charAt(n) !== "-")
        throw new Error("Illegal attachments");
      i.attachments = Number(o);
    }
    if (t.charAt(n + 1) === "/") {
      const s = n + 1;
      for (; ++n && !(t.charAt(n) === "," || n === t.length); )
        ;
      i.nsp = t.substring(s, n);
    } else
      i.nsp = "/";
    const r = t.charAt(n + 1);
    if (r !== "" && Number(r) == r) {
      const s = n + 1;
      for (; ++n; ) {
        const o = t.charAt(n);
        if (o == null || Number(o) != o) {
          --n;
          break;
        }
        if (n === t.length)
          break;
      }
      i.id = Number(t.substring(s, n + 1));
    }
    if (t.charAt(++n)) {
      const s = this.tryParse(t.substr(n));
      if (Pd.isPayloadValid(i.type, s))
        i.data = s;
      else
        throw new Error("invalid payload");
    }
    return i;
  }
  tryParse(t) {
    try {
      return JSON.parse(t, this.reviver);
    } catch {
      return !1;
    }
  }
  static isPayloadValid(t, n) {
    switch (t) {
      case je.CONNECT:
        return pg(n);
      case je.DISCONNECT:
        return n === void 0;
      case je.CONNECT_ERROR:
        return typeof n == "string" || pg(n);
      case je.EVENT:
      case je.BINARY_EVENT:
        return Array.isArray(n) && (typeof n[0] == "number" || typeof n[0] == "string" && e3.indexOf(n[0]) === -1);
      case je.ACK:
      case je.BINARY_ACK:
        return Array.isArray(n);
    }
  }
  /**
   * Deallocates a parser's resources
   */
  destroy() {
    this.reconstructor && (this.reconstructor.finishedReconstruction(), this.reconstructor = null);
  }
}
class r3 {
  constructor(t) {
    this.packet = t, this.buffers = [], this.reconPack = t;
  }
  /**
   * Method to be called when binary data received from connection
   * after a BINARY_EVENT packet.
   *
   * @param {Buffer | ArrayBuffer} binData - the raw binary data received
   * @return {null | Object} returns null if more binary data is expected or
   *   a reconstructed packet object if all buffers have been received.
   */
  takeBinaryData(t) {
    if (this.buffers.push(t), this.buffers.length === this.reconPack.attachments) {
      const n = t3(this.reconPack, this.buffers);
      return this.finishedReconstruction(), n;
    }
    return null;
  }
  /**
   * Cleans up binary packet reconstruction variables.
   */
  finishedReconstruction() {
    this.reconPack = null, this.buffers = [];
  }
}
const s3 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({ __proto__: null, Decoder: Pd, Encoder: i3, get PacketType() {
  return je;
}, protocol: n3 }, Symbol.toStringTag, { value: "Module" }));
function hr(e, t, n) {
  return e.on(t, n), function() {
    e.off(t, n);
  };
}
const o3 = Object.freeze({
  connect: 1,
  connect_error: 1,
  disconnect: 1,
  disconnecting: 1,
  // EventEmitter reserved events: https://nodejs.org/api/events.html#events_event_newlistener
  newListener: 1,
  removeListener: 1
});
class J1 extends Fn {
  /**
   * `Socket` constructor.
   */
  constructor(t, n, i) {
    super(), this.connected = !1, this.recovered = !1, this.receiveBuffer = [], this.sendBuffer = [], this._queue = [], this._queueSeq = 0, this.ids = 0, this.acks = {}, this.flags = {}, this.io = t, this.nsp = n, i && i.auth && (this.auth = i.auth), this._opts = Object.assign({}, i), this.io._autoConnect && this.open();
  }
  /**
   * Whether the socket is currently disconnected
   *
   * @example
   * const socket = io();
   *
   * socket.on("connect", () => {
   *   console.log(socket.disconnected); // false
   * });
   *
   * socket.on("disconnect", () => {
   *   console.log(socket.disconnected); // true
   * });
   */
  get disconnected() {
    return !this.connected;
  }
  /**
   * Subscribe to open, close and packet events
   *
   * @private
   */
  subEvents() {
    if (this.subs)
      return;
    const t = this.io;
    this.subs = [
      hr(t, "open", this.onopen.bind(this)),
      hr(t, "packet", this.onpacket.bind(this)),
      hr(t, "error", this.onerror.bind(this)),
      hr(t, "close", this.onclose.bind(this))
    ];
  }
  /**
   * Whether the Socket will try to reconnect when its Manager connects or reconnects.
   *
   * @example
   * const socket = io();
   *
   * console.log(socket.active); // true
   *
   * socket.on("disconnect", (reason) => {
   *   if (reason === "io server disconnect") {
   *     // the disconnection was initiated by the server, you need to manually reconnect
   *     console.log(socket.active); // false
   *   }
   *   // else the socket will automatically try to reconnect
   *   console.log(socket.active); // true
   * });
   */
  get active() {
    return !!this.subs;
  }
  /**
   * "Opens" the socket.
   *
   * @example
   * const socket = io({
   *   autoConnect: false
   * });
   *
   * socket.connect();
   */
  connect() {
    return this.connected ? this : (this.subEvents(), this.io._reconnecting || this.io.open(), this.io._readyState === "open" && this.onopen(), this);
  }
  /**
   * Alias for {@link connect()}.
   */
  open() {
    return this.connect();
  }
  /**
   * Sends a `message` event.
   *
   * This method mimics the WebSocket.send() method.
   *
   * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/send
   *
   * @example
   * socket.send("hello");
   *
   * // this is equivalent to
   * socket.emit("message", "hello");
   *
   * @return self
   */
  send(...t) {
    return t.unshift("message"), this.emit.apply(this, t), this;
  }
  /**
   * Override `emit`.
   * If the event is in `events`, it's emitted normally.
   *
   * @example
   * socket.emit("hello", "world");
   *
   * // all serializable datastructures are supported (no need to call JSON.stringify)
   * socket.emit("hello", 1, "2", { 3: ["4"], 5: Uint8Array.from([6]) });
   *
   * // with an acknowledgement from the server
   * socket.emit("hello", "world", (val) => {
   *   // ...
   * });
   *
   * @return self
   */
  emit(t, ...n) {
    var i, r, s;
    if (o3.hasOwnProperty(t))
      throw new Error('"' + t.toString() + '" is a reserved event name');
    if (n.unshift(t), this._opts.retries && !this.flags.fromQueue && !this.flags.volatile)
      return this._addToQueue(n), this;
    const o = {
      type: je.EVENT,
      data: n
    };
    if (o.options = {}, o.options.compress = this.flags.compress !== !1, typeof n[n.length - 1] == "function") {
      const c = this.ids++, d = n.pop();
      this._registerAckCallback(c, d), o.id = c;
    }
    const a = (r = (i = this.io.engine) === null || i === void 0 ? void 0 : i.transport) === null || r === void 0 ? void 0 : r.writable, l = this.connected && !(!((s = this.io.engine) === null || s === void 0) && s._hasPingExpired());
    return this.flags.volatile && !a || (l ? (this.notifyOutgoingListeners(o), this.packet(o)) : this.sendBuffer.push(o)), this.flags = {}, this;
  }
  /**
   * @private
   */
  _registerAckCallback(t, n) {
    var i;
    const r = (i = this.flags.timeout) !== null && i !== void 0 ? i : this._opts.ackTimeout;
    if (r === void 0) {
      this.acks[t] = n;
      return;
    }
    const s = this.io.setTimeoutFn(() => {
      delete this.acks[t];
      for (let a = 0; a < this.sendBuffer.length; a++)
        this.sendBuffer[a].id === t && this.sendBuffer.splice(a, 1);
      n.call(this, new Error("operation has timed out"));
    }, r), o = (...a) => {
      this.io.clearTimeoutFn(s), n.apply(this, a);
    };
    o.withError = !0, this.acks[t] = o;
  }
  /**
   * Emits an event and waits for an acknowledgement
   *
   * @example
   * // without timeout
   * const response = await socket.emitWithAck("hello", "world");
   *
   * // with a specific timeout
   * try {
   *   const response = await socket.timeout(1000).emitWithAck("hello", "world");
   * } catch (err) {
   *   // the server did not acknowledge the event in the given delay
   * }
   *
   * @return a Promise that will be fulfilled when the server acknowledges the event
   */
  emitWithAck(t, ...n) {
    return new Promise((i, r) => {
      const s = (o, a) => o ? r(o) : i(a);
      s.withError = !0, n.push(s), this.emit(t, ...n);
    });
  }
  /**
   * Add the packet to the queue.
   * @param args
   * @private
   */
  _addToQueue(t) {
    let n;
    typeof t[t.length - 1] == "function" && (n = t.pop());
    const i = {
      id: this._queueSeq++,
      tryCount: 0,
      pending: !1,
      args: t,
      flags: Object.assign({ fromQueue: !0 }, this.flags)
    };
    t.push((r, ...s) => i !== this._queue[0] ? void 0 : (r !== null ? i.tryCount > this._opts.retries && (this._queue.shift(), n && n(r)) : (this._queue.shift(), n && n(null, ...s)), i.pending = !1, this._drainQueue())), this._queue.push(i), this._drainQueue();
  }
  /**
   * Send the first packet of the queue, and wait for an acknowledgement from the server.
   * @param force - whether to resend a packet that has not been acknowledged yet
   *
   * @private
   */
  _drainQueue(t = !1) {
    if (!this.connected || this._queue.length === 0)
      return;
    const n = this._queue[0];
    n.pending && !t || (n.pending = !0, n.tryCount++, this.flags = n.flags, this.emit.apply(this, n.args));
  }
  /**
   * Sends a packet.
   *
   * @param packet
   * @private
   */
  packet(t) {
    t.nsp = this.nsp, this.io._packet(t);
  }
  /**
   * Called upon engine `open`.
   *
   * @private
   */
  onopen() {
    typeof this.auth == "function" ? this.auth((t) => {
      this._sendConnectPacket(t);
    }) : this._sendConnectPacket(this.auth);
  }
  /**
   * Sends a CONNECT packet to initiate the Socket.IO session.
   *
   * @param data
   * @private
   */
  _sendConnectPacket(t) {
    this.packet({
      type: je.CONNECT,
      data: this._pid ? Object.assign({ pid: this._pid, offset: this._lastOffset }, t) : t
    });
  }
  /**
   * Called upon engine or manager `error`.
   *
   * @param err
   * @private
   */
  onerror(t) {
    this.connected || this.emitReserved("connect_error", t);
  }
  /**
   * Called upon engine `close`.
   *
   * @param reason
   * @param description
   * @private
   */
  onclose(t, n) {
    this.connected = !1, delete this.id, this.emitReserved("disconnect", t, n), this._clearAcks();
  }
  /**
   * Clears the acknowledgement handlers upon disconnection, since the client will never receive an acknowledgement from
   * the server.
   *
   * @private
   */
  _clearAcks() {
    Object.keys(this.acks).forEach((t) => {
      if (!this.sendBuffer.some((i) => String(i.id) === t)) {
        const i = this.acks[t];
        delete this.acks[t], i.withError && i.call(this, new Error("socket has been disconnected"));
      }
    });
  }
  /**
   * Called with socket packet.
   *
   * @param packet
   * @private
   */
  onpacket(t) {
    if (t.nsp === this.nsp)
      switch (t.type) {
        case je.CONNECT:
          t.data && t.data.sid ? this.onconnect(t.data.sid, t.data.pid) : this.emitReserved("connect_error", new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));
          break;
        case je.EVENT:
        case je.BINARY_EVENT:
          this.onevent(t);
          break;
        case je.ACK:
        case je.BINARY_ACK:
          this.onack(t);
          break;
        case je.DISCONNECT:
          this.ondisconnect();
          break;
        case je.CONNECT_ERROR:
          this.destroy();
          const i = new Error(t.data.message);
          i.data = t.data.data, this.emitReserved("connect_error", i);
          break;
      }
  }
  /**
   * Called upon a server event.
   *
   * @param packet
   * @private
   */
  onevent(t) {
    const n = t.data || [];
    t.id != null && n.push(this.ack(t.id)), this.connected ? this.emitEvent(n) : this.receiveBuffer.push(Object.freeze(n));
  }
  emitEvent(t) {
    if (this._anyListeners && this._anyListeners.length) {
      const n = this._anyListeners.slice();
      for (const i of n)
        i.apply(this, t);
    }
    super.emit.apply(this, t), this._pid && t.length && typeof t[t.length - 1] == "string" && (this._lastOffset = t[t.length - 1]);
  }
  /**
   * Produces an ack callback to emit with an event.
   *
   * @private
   */
  ack(t) {
    const n = this;
    let i = !1;
    return function(...r) {
      i || (i = !0, n.packet({
        type: je.ACK,
        id: t,
        data: r
      }));
    };
  }
  /**
   * Called upon a server acknowledgement.
   *
   * @param packet
   * @private
   */
  onack(t) {
    const n = this.acks[t.id];
    typeof n == "function" && (delete this.acks[t.id], n.withError && t.data.unshift(null), n.apply(this, t.data));
  }
  /**
   * Called upon server connect.
   *
   * @private
   */
  onconnect(t, n) {
    this.id = t, this.recovered = n && this._pid === n, this._pid = n, this.connected = !0, this.emitBuffered(), this.emitReserved("connect"), this._drainQueue(!0);
  }
  /**
   * Emit buffered events (received and emitted).
   *
   * @private
   */
  emitBuffered() {
    this.receiveBuffer.forEach((t) => this.emitEvent(t)), this.receiveBuffer = [], this.sendBuffer.forEach((t) => {
      this.notifyOutgoingListeners(t), this.packet(t);
    }), this.sendBuffer = [];
  }
  /**
   * Called upon server disconnect.
   *
   * @private
   */
  ondisconnect() {
    this.destroy(), this.onclose("io server disconnect");
  }
  /**
   * Called upon forced client/server side disconnections,
   * this method ensures the manager stops tracking us and
   * that reconnections don't get triggered for this.
   *
   * @private
   */
  destroy() {
    this.subs && (this.subs.forEach((t) => t()), this.subs = void 0), this.io._destroy(this);
  }
  /**
   * Disconnects the socket manually. In that case, the socket will not try to reconnect.
   *
   * If this is the last active Socket instance of the {@link Manager}, the low-level connection will be closed.
   *
   * @example
   * const socket = io();
   *
   * socket.on("disconnect", (reason) => {
   *   // console.log(reason); prints "io client disconnect"
   * });
   *
   * socket.disconnect();
   *
   * @return self
   */
  disconnect() {
    return this.connected && this.packet({ type: je.DISCONNECT }), this.destroy(), this.connected && this.onclose("io client disconnect"), this;
  }
  /**
   * Alias for {@link disconnect()}.
   *
   * @return self
   */
  close() {
    return this.disconnect();
  }
  /**
   * Sets the compress flag.
   *
   * @example
   * socket.compress(false).emit("hello");
   *
   * @param compress - if `true`, compresses the sending data
   * @return self
   */
  compress(t) {
    return this.flags.compress = t, this;
  }
  /**
   * Sets a modifier for a subsequent event emission that the event message will be dropped when this socket is not
   * ready to send messages.
   *
   * @example
   * socket.volatile.emit("hello"); // the server may or may not receive it
   *
   * @returns self
   */
  get volatile() {
    return this.flags.volatile = !0, this;
  }
  /**
   * Sets a modifier for a subsequent event emission that the callback will be called with an error when the
   * given number of milliseconds have elapsed without an acknowledgement from the server:
   *
   * @example
   * socket.timeout(5000).emit("my-event", (err) => {
   *   if (err) {
   *     // the server did not acknowledge the event in the given delay
   *   }
   * });
   *
   * @returns self
   */
  timeout(t) {
    return this.flags.timeout = t, this;
  }
  /**
   * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the
   * callback.
   *
   * @example
   * socket.onAny((event, ...args) => {
   *   console.log(`got ${event}`);
   * });
   *
   * @param listener
   */
  onAny(t) {
    return this._anyListeners = this._anyListeners || [], this._anyListeners.push(t), this;
  }
  /**
   * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the
   * callback. The listener is added to the beginning of the listeners array.
   *
   * @example
   * socket.prependAny((event, ...args) => {
   *   console.log(`got event ${event}`);
   * });
   *
   * @param listener
   */
  prependAny(t) {
    return this._anyListeners = this._anyListeners || [], this._anyListeners.unshift(t), this;
  }
  /**
   * Removes the listener that will be fired when any event is emitted.
   *
   * @example
   * const catchAllListener = (event, ...args) => {
   *   console.log(`got event ${event}`);
   * }
   *
   * socket.onAny(catchAllListener);
   *
   * // remove a specific listener
   * socket.offAny(catchAllListener);
   *
   * // or remove all listeners
   * socket.offAny();
   *
   * @param listener
   */
  offAny(t) {
    if (!this._anyListeners)
      return this;
    if (t) {
      const n = this._anyListeners;
      for (let i = 0; i < n.length; i++)
        if (t === n[i])
          return n.splice(i, 1), this;
    } else
      this._anyListeners = [];
    return this;
  }
  /**
   * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,
   * e.g. to remove listeners.
   */
  listenersAny() {
    return this._anyListeners || [];
  }
  /**
   * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the
   * callback.
   *
   * Note: acknowledgements sent to the server are not included.
   *
   * @example
   * socket.onAnyOutgoing((event, ...args) => {
   *   console.log(`sent event ${event}`);
   * });
   *
   * @param listener
   */
  onAnyOutgoing(t) {
    return this._anyOutgoingListeners = this._anyOutgoingListeners || [], this._anyOutgoingListeners.push(t), this;
  }
  /**
   * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the
   * callback. The listener is added to the beginning of the listeners array.
   *
   * Note: acknowledgements sent to the server are not included.
   *
   * @example
   * socket.prependAnyOutgoing((event, ...args) => {
   *   console.log(`sent event ${event}`);
   * });
   *
   * @param listener
   */
  prependAnyOutgoing(t) {
    return this._anyOutgoingListeners = this._anyOutgoingListeners || [], this._anyOutgoingListeners.unshift(t), this;
  }
  /**
   * Removes the listener that will be fired when any event is emitted.
   *
   * @example
   * const catchAllListener = (event, ...args) => {
   *   console.log(`sent event ${event}`);
   * }
   *
   * socket.onAnyOutgoing(catchAllListener);
   *
   * // remove a specific listener
   * socket.offAnyOutgoing(catchAllListener);
   *
   * // or remove all listeners
   * socket.offAnyOutgoing();
   *
   * @param [listener] - the catch-all listener (optional)
   */
  offAnyOutgoing(t) {
    if (!this._anyOutgoingListeners)
      return this;
    if (t) {
      const n = this._anyOutgoingListeners;
      for (let i = 0; i < n.length; i++)
        if (t === n[i])
          return n.splice(i, 1), this;
    } else
      this._anyOutgoingListeners = [];
    return this;
  }
  /**
   * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,
   * e.g. to remove listeners.
   */
  listenersAnyOutgoing() {
    return this._anyOutgoingListeners || [];
  }
  /**
   * Notify the listeners for each packet sent
   *
   * @param packet
   *
   * @private
   */
  notifyOutgoingListeners(t) {
    if (this._anyOutgoingListeners && this._anyOutgoingListeners.length) {
      const n = this._anyOutgoingListeners.slice();
      for (const i of n)
        i.apply(this, t.data);
    }
  }
}
function ma(e) {
  e = e || {}, this.ms = e.min || 100, this.max = e.max || 1e4, this.factor = e.factor || 2, this.jitter = e.jitter > 0 && e.jitter <= 1 ? e.jitter : 0, this.attempts = 0;
}
ma.prototype.duration = function() {
  var e = this.ms * Math.pow(this.factor, this.attempts++);
  if (this.jitter) {
    var t = Math.random(), n = Math.floor(t * this.jitter * e);
    e = Math.floor(t * 10) & 1 ? e + n : e - n;
  }
  return Math.min(e, this.max) | 0;
};
ma.prototype.reset = function() {
  this.attempts = 0;
};
ma.prototype.setMin = function(e) {
  this.ms = e;
};
ma.prototype.setMax = function(e) {
  this.max = e;
};
ma.prototype.setJitter = function(e) {
  this.jitter = e;
};
class vf extends Fn {
  constructor(t, n) {
    var i;
    super(), this.nsps = {}, this.subs = [], t && typeof t == "object" && (n = t, t = void 0), n = n || {}, n.path = n.path || "/socket.io", this.opts = n, Oc(this, n), this.reconnection(n.reconnection !== !1), this.reconnectionAttempts(n.reconnectionAttempts || 1 / 0), this.reconnectionDelay(n.reconnectionDelay || 1e3), this.reconnectionDelayMax(n.reconnectionDelayMax || 5e3), this.randomizationFactor((i = n.randomizationFactor) !== null && i !== void 0 ? i : 0.5), this.backoff = new ma({
      min: this.reconnectionDelay(),
      max: this.reconnectionDelayMax(),
      jitter: this.randomizationFactor()
    }), this.timeout(n.timeout == null ? 2e4 : n.timeout), this._readyState = "closed", this.uri = t;
    const r = n.parser || s3;
    this.encoder = new r.Encoder(), this.decoder = new r.Decoder(), this._autoConnect = n.autoConnect !== !1, this._autoConnect && this.open();
  }
  reconnection(t) {
    return arguments.length ? (this._reconnection = !!t, t || (this.skipReconnect = !0), this) : this._reconnection;
  }
  reconnectionAttempts(t) {
    return t === void 0 ? this._reconnectionAttempts : (this._reconnectionAttempts = t, this);
  }
  reconnectionDelay(t) {
    var n;
    return t === void 0 ? this._reconnectionDelay : (this._reconnectionDelay = t, (n = this.backoff) === null || n === void 0 || n.setMin(t), this);
  }
  randomizationFactor(t) {
    var n;
    return t === void 0 ? this._randomizationFactor : (this._randomizationFactor = t, (n = this.backoff) === null || n === void 0 || n.setJitter(t), this);
  }
  reconnectionDelayMax(t) {
    var n;
    return t === void 0 ? this._reconnectionDelayMax : (this._reconnectionDelayMax = t, (n = this.backoff) === null || n === void 0 || n.setMax(t), this);
  }
  timeout(t) {
    return arguments.length ? (this._timeout = t, this) : this._timeout;
  }
  /**
   * Starts trying to reconnect if reconnection is enabled and we have not
   * started reconnecting yet
   *
   * @private
   */
  maybeReconnectOnOpen() {
    !this._reconnecting && this._reconnection && this.backoff.attempts === 0 && this.reconnect();
  }
  /**
   * Sets the current transport `socket`.
   *
   * @param {Function} fn - optional, callback
   * @return self
   * @public
   */
  open(t) {
    if (~this._readyState.indexOf("open"))
      return this;
    this.engine = new Vw(this.uri, this.opts);
    const n = this.engine, i = this;
    this._readyState = "opening", this.skipReconnect = !1;
    const r = hr(n, "open", function() {
      i.onopen(), t && t();
    }), s = (a) => {
      this.cleanup(), this._readyState = "closed", this.emitReserved("error", a), t ? t(a) : this.maybeReconnectOnOpen();
    }, o = hr(n, "error", s);
    if (this._timeout !== !1) {
      const a = this._timeout, l = this.setTimeoutFn(() => {
        r(), s(new Error("timeout")), n.close();
      }, a);
      this.opts.autoUnref && l.unref(), this.subs.push(() => {
        this.clearTimeoutFn(l);
      });
    }
    return this.subs.push(r), this.subs.push(o), this;
  }
  /**
   * Alias for open()
   *
   * @return self
   * @public
   */
  connect(t) {
    return this.open(t);
  }
  /**
   * Called upon transport open.
   *
   * @private
   */
  onopen() {
    this.cleanup(), this._readyState = "open", this.emitReserved("open");
    const t = this.engine;
    this.subs.push(
      hr(t, "ping", this.onping.bind(this)),
      hr(t, "data", this.ondata.bind(this)),
      hr(t, "error", this.onerror.bind(this)),
      hr(t, "close", this.onclose.bind(this)),
      // @ts-ignore
      hr(this.decoder, "decoded", this.ondecoded.bind(this))
    );
  }
  /**
   * Called upon a ping.
   *
   * @private
   */
  onping() {
    this.emitReserved("ping");
  }
  /**
   * Called with data.
   *
   * @private
   */
  ondata(t) {
    try {
      this.decoder.add(t);
    } catch (n) {
      this.onclose("parse error", n);
    }
  }
  /**
   * Called when parser fully decodes a packet.
   *
   * @private
   */
  ondecoded(t) {
    Ec(() => {
      this.emitReserved("packet", t);
    }, this.setTimeoutFn);
  }
  /**
   * Called upon socket error.
   *
   * @private
   */
  onerror(t) {
    this.emitReserved("error", t);
  }
  /**
   * Creates a new socket for the given `nsp`.
   *
   * @return {Socket}
   * @public
   */
  socket(t, n) {
    let i = this.nsps[t];
    return i ? this._autoConnect && !i.active && i.connect() : (i = new J1(this, t, n), this.nsps[t] = i), i;
  }
  /**
   * Called upon a socket close.
   *
   * @param socket
   * @private
   */
  _destroy(t) {
    const n = Object.keys(this.nsps);
    for (const i of n)
      if (this.nsps[i].active)
        return;
    this._close();
  }
  /**
   * Writes a packet.
   *
   * @param packet
   * @private
   */
  _packet(t) {
    const n = this.encoder.encode(t);
    for (let i = 0; i < n.length; i++)
      this.engine.write(n[i], t.options);
  }
  /**
   * Clean up transport subscriptions and packet buffer.
   *
   * @private
   */
  cleanup() {
    this.subs.forEach((t) => t()), this.subs.length = 0, this.decoder.destroy();
  }
  /**
   * Close the current socket.
   *
   * @private
   */
  _close() {
    this.skipReconnect = !0, this._reconnecting = !1, this.onclose("forced close");
  }
  /**
   * Alias for close()
   *
   * @private
   */
  disconnect() {
    return this._close();
  }
  /**
   * Called when:
   *
   * - the low-level engine is closed
   * - the parser encountered a badly formatted packet
   * - all sockets are disconnected
   *
   * @private
   */
  onclose(t, n) {
    var i;
    this.cleanup(), (i = this.engine) === null || i === void 0 || i.close(), this.backoff.reset(), this._readyState = "closed", this.emitReserved("close", t, n), this._reconnection && !this.skipReconnect && this.reconnect();
  }
  /**
   * Attempt a reconnection.
   *
   * @private
   */
  reconnect() {
    if (this._reconnecting || this.skipReconnect)
      return this;
    const t = this;
    if (this.backoff.attempts >= this._reconnectionAttempts)
      this.backoff.reset(), this.emitReserved("reconnect_failed"), this._reconnecting = !1;
    else {
      const n = this.backoff.duration();
      this._reconnecting = !0;
      const i = this.setTimeoutFn(() => {
        t.skipReconnect || (this.emitReserved("reconnect_attempt", t.backoff.attempts), !t.skipReconnect && t.open((r) => {
          r ? (t._reconnecting = !1, t.reconnect(), this.emitReserved("reconnect_error", r)) : t.onreconnect();
        }));
      }, n);
      this.opts.autoUnref && i.unref(), this.subs.push(() => {
        this.clearTimeoutFn(i);
      });
    }
  }
  /**
   * Called upon successful reconnect.
   *
   * @private
   */
  onreconnect() {
    const t = this.backoff.attempts;
    this._reconnecting = !1, this.backoff.reset(), this.emitReserved("reconnect", t);
  }
}
const el = {};
function $u(e, t) {
  typeof e == "object" && (t = e, e = void 0), t = t || {};
  const n = Yw(e, t.path || "/socket.io"), i = n.source, r = n.id, s = n.path, o = el[r] && s in el[r].nsps, a = t.forceNew || t["force new connection"] || t.multiplex === !1 || o;
  let l;
  return a ? l = new vf(i, t) : (el[r] || (el[r] = new vf(i, t)), l = el[r]), n.query && !t.query && (t.query = n.queryKey), l.socket(n.path, t);
}
Object.assign($u, {
  Manager: vf,
  Socket: J1,
  io: $u,
  connect: $u
});
var a3 = typeof global == "object" && global && global.Object === Object && global, l3 = typeof self == "object" && self && self.Object === Object && self, Ld = a3 || l3 || Function("return this")(), ca = Ld.Symbol, X1 = Object.prototype, u3 = X1.hasOwnProperty, c3 = X1.toString, nl = ca ? ca.toStringTag : void 0;
function h3(e) {
  var t = u3.call(e, nl), n = e[nl];
  try {
    e[nl] = void 0;
    var i = !0;
  } catch {
  }
  var r = c3.call(e);
  return i && (t ? e[nl] = n : delete e[nl]), r;
}
var f3 = Object.prototype, d3 = f3.toString;
function p3(e) {
  return d3.call(e);
}
var g3 = "[object Null]", m3 = "[object Undefined]", gg = ca ? ca.toStringTag : void 0;
function Z1(e) {
  return e == null ? e === void 0 ? m3 : g3 : gg && gg in Object(e) ? h3(e) : p3(e);
}
function y3(e) {
  return e != null && typeof e == "object";
}
var b3 = "[object Symbol]";
function Cd(e) {
  return typeof e == "symbol" || y3(e) && Z1(e) == b3;
}
function v3(e, t) {
  for (var n = -1, i = e == null ? 0 : e.length, r = Array(i); ++n < i; )
    r[n] = t(e[n], n, e);
  return r;
}
var Td = Array.isArray, w3 = 1 / 0, mg = ca ? ca.prototype : void 0, yg = mg ? mg.toString : void 0;
function Q1(e) {
  if (typeof e == "string")
    return e;
  if (Td(e))
    return v3(e, Q1) + "";
  if (Cd(e))
    return yg ? yg.call(e) : "";
  var t = e + "";
  return t == "0" && 1 / e == -w3 ? "-0" : t;
}
function rc(e) {
  var t = typeof e;
  return e != null && (t == "object" || t == "function");
}
var x3 = "[object AsyncFunction]", S3 = "[object Function]", A3 = "[object GeneratorFunction]", k3 = "[object Proxy]";
function _3(e) {
  if (!rc(e))
    return !1;
  var t = Z1(e);
  return t == S3 || t == A3 || t == x3 || t == k3;
}
var Ih = Ld["__core-js_shared__"], bg = function() {
  var e = /[^.]+$/.exec(Ih && Ih.keys && Ih.keys.IE_PROTO || "");
  return e ? "Symbol(src)_1." + e : "";
}();
function N3(e) {
  return !!bg && bg in e;
}
var P3 = Function.prototype, L3 = P3.toString;
function C3(e) {
  if (e != null) {
    try {
      return L3.call(e);
    } catch {
    }
    try {
      return e + "";
    } catch {
    }
  }
  return "";
}
var T3 = /[\\^$.*+?()[\]{}|]/g, I3 = /^\[object .+?Constructor\]$/, E3 = Function.prototype, O3 = Object.prototype, F3 = E3.toString, M3 = O3.hasOwnProperty, R3 = RegExp(
  "^" + F3.call(M3).replace(T3, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"
);
function D3(e) {
  if (!rc(e) || N3(e))
    return !1;
  var t = _3(e) ? R3 : I3;
  return t.test(C3(e));
}
function j3(e, t) {
  return e == null ? void 0 : e[t];
}
function Id(e, t) {
  var n = j3(e, t);
  return D3(n) ? n : void 0;
}
var vg = function() {
  try {
    var e = Id(Object, "defineProperty");
    return e({}, "", {}), e;
  } catch {
  }
}(), B3 = 9007199254740991, q3 = /^(?:0|[1-9]\d*)$/;
function $3(e, t) {
  var n = typeof e;
  return t = t ?? B3, !!t && (n == "number" || n != "symbol" && q3.test(e)) && e > -1 && e % 1 == 0 && e < t;
}
function z3(e, t, n) {
  t == "__proto__" && vg ? vg(e, t, {
    configurable: !0,
    enumerable: !0,
    value: n,
    writable: !0
  }) : e[t] = n;
}
function tm(e, t) {
  return e === t || e !== e && t !== t;
}
var U3 = Object.prototype, W3 = U3.hasOwnProperty;
function H3(e, t, n) {
  var i = e[t];
  (!(W3.call(e, t) && tm(i, n)) || n === void 0 && !(t in e)) && z3(e, t, n);
}
var G3 = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/, V3 = /^\w*$/;
function Y3(e, t) {
  if (Td(e))
    return !1;
  var n = typeof e;
  return n == "number" || n == "symbol" || n == "boolean" || e == null || Cd(e) ? !0 : V3.test(e) || !G3.test(e) || t != null && e in Object(t);
}
var yl = Id(Object, "create");
function K3() {
  this.__data__ = yl ? yl(null) : {}, this.size = 0;
}
function J3(e) {
  var t = this.has(e) && delete this.__data__[e];
  return this.size -= t ? 1 : 0, t;
}
var X3 = "__lodash_hash_undefined__", Z3 = Object.prototype, Q3 = Z3.hasOwnProperty;
function tx(e) {
  var t = this.__data__;
  if (yl) {
    var n = t[e];
    return n === X3 ? void 0 : n;
  }
  return Q3.call(t, e) ? t[e] : void 0;
}
var ex = Object.prototype, nx = ex.hasOwnProperty;
function ix(e) {
  var t = this.__data__;
  return yl ? t[e] !== void 0 : nx.call(t, e);
}
var rx = "__lodash_hash_undefined__";
function sx(e, t) {
  var n = this.__data__;
  return this.size += this.has(e) ? 0 : 1, n[e] = yl && t === void 0 ? rx : t, this;
}
function vo(e) {
  var t = -1, n = e == null ? 0 : e.length;
  for (this.clear(); ++t < n; ) {
    var i = e[t];
    this.set(i[0], i[1]);
  }
}
vo.prototype.clear = K3;
vo.prototype.delete = J3;
vo.prototype.get = tx;
vo.prototype.has = ix;
vo.prototype.set = sx;
function ox() {
  this.__data__ = [], this.size = 0;
}
function Fc(e, t) {
  for (var n = e.length; n--; )
    if (tm(e[n][0], t))
      return n;
  return -1;
}
var ax = Array.prototype, lx = ax.splice;
function ux(e) {
  var t = this.__data__, n = Fc(t, e);
  if (n < 0)
    return !1;
  var i = t.length - 1;
  return n == i ? t.pop() : lx.call(t, n, 1), --this.size, !0;
}
function cx(e) {
  var t = this.__data__, n = Fc(t, e);
  return n < 0 ? void 0 : t[n][1];
}
function hx(e) {
  return Fc(this.__data__, e) > -1;
}
function fx(e, t) {
  var n = this.__data__, i = Fc(n, e);
  return i < 0 ? (++this.size, n.push([e, t])) : n[i][1] = t, this;
}
function ya(e) {
  var t = -1, n = e == null ? 0 : e.length;
  for (this.clear(); ++t < n; ) {
    var i = e[t];
    this.set(i[0], i[1]);
  }
}
ya.prototype.clear = ox;
ya.prototype.delete = ux;
ya.prototype.get = cx;
ya.prototype.has = hx;
ya.prototype.set = fx;
var dx = Id(Ld, "Map");
function px() {
  this.size = 0, this.__data__ = {
    hash: new vo(),
    map: new (dx || ya)(),
    string: new vo()
  };
}
function gx(e) {
  var t = typeof e;
  return t == "string" || t == "number" || t == "symbol" || t == "boolean" ? e !== "__proto__" : e === null;
}
function Mc(e, t) {
  var n = e.__data__;
  return gx(t) ? n[typeof t == "string" ? "string" : "hash"] : n.map;
}
function mx(e) {
  var t = Mc(this, e).delete(e);
  return this.size -= t ? 1 : 0, t;
}
function yx(e) {
  return Mc(this, e).get(e);
}
function bx(e) {
  return Mc(this, e).has(e);
}
function vx(e, t) {
  var n = Mc(this, e), i = n.size;
  return n.set(e, t), this.size += n.size == i ? 0 : 1, this;
}
function So(e) {
  var t = -1, n = e == null ? 0 : e.length;
  for (this.clear(); ++t < n; ) {
    var i = e[t];
    this.set(i[0], i[1]);
  }
}
So.prototype.clear = px;
So.prototype.delete = mx;
So.prototype.get = yx;
So.prototype.has = bx;
So.prototype.set = vx;
var wx = "Expected a function";
function Ed(e, t) {
  if (typeof e != "function" || t != null && typeof t != "function")
    throw new TypeError(wx);
  var n = function() {
    var i = arguments, r = t ? t.apply(this, i) : i[0], s = n.cache;
    if (s.has(r))
      return s.get(r);
    var o = e.apply(this, i);
    return n.cache = s.set(r, o) || s, o;
  };
  return n.cache = new (Ed.Cache || So)(), n;
}
Ed.Cache = So;
var xx = 500;
function Sx(e) {
  var t = Ed(e, function(i) {
    return n.size === xx && n.clear(), i;
  }), n = t.cache;
  return t;
}
var Ax = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g, kx = /\\(\\)?/g, _x = Sx(function(e) {
  var t = [];
  return e.charCodeAt(0) === 46 && t.push(""), e.replace(Ax, function(n, i, r, s) {
    t.push(r ? s.replace(kx, "$1") : i || n);
  }), t;
});
function Nx(e) {
  return e == null ? "" : Q1(e);
}
function em(e, t) {
  return Td(e) ? e : Y3(e, t) ? [e] : _x(Nx(e));
}
var Px = 1 / 0;
function nm(e) {
  if (typeof e == "string" || Cd(e))
    return e;
  var t = e + "";
  return t == "0" && 1 / e == -Px ? "-0" : t;
}
function Lx(e, t) {
  t = em(t, e);
  for (var n = 0, i = t.length; e != null && n < i; )
    e = e[nm(t[n++])];
  return n && n == i ? e : void 0;
}
function ho(e, t, n) {
  var i = e == null ? void 0 : Lx(e, t);
  return i === void 0 ? n : i;
}
function Cx(e, t, n, i) {
  if (!rc(e))
    return e;
  t = em(t, e);
  for (var r = -1, s = t.length, o = s - 1, a = e; a != null && ++r < s; ) {
    var l = nm(t[r]), h = n;
    if (l === "__proto__" || l === "constructor" || l === "prototype")
      return e;
    if (r != o) {
      var c = a[l];
      h = void 0, h === void 0 && (h = rc(c) ? c : $3(t[r + 1]) ? [] : {});
    }
    H3(a, l, h), a = a[l];
  }
  return e;
}
function wg(e, t, n) {
  return e == null ? e : Cx(e, t, n);
}
var wf = "http://www.w3.org/1999/xhtml";
const xg = {
  svg: "http://www.w3.org/2000/svg",
  xhtml: wf,
  xlink: "http://www.w3.org/1999/xlink",
  xml: "http://www.w3.org/XML/1998/namespace",
  xmlns: "http://www.w3.org/2000/xmlns/"
};
function im(e) {
  var t = e += "", n = t.indexOf(":");
  return n >= 0 && (t = e.slice(0, n)) !== "xmlns" && (e = e.slice(n + 1)), xg.hasOwnProperty(t) ? { space: xg[t], local: e } : e;
}
function Tx(e) {
  return function() {
    var t = this.ownerDocument, n = this.namespaceURI;
    return n === wf && t.documentElement.namespaceURI === wf ? t.createElement(e) : t.createElementNS(n, e);
  };
}
function Ix(e) {
  return function() {
    return this.ownerDocument.createElementNS(e.space, e.local);
  };
}
function rm(e) {
  var t = im(e);
  return (t.local ? Ix : Tx)(t);
}
function Ex() {
}
function sm(e) {
  return e == null ? Ex : function() {
    return this.querySelector(e);
  };
}
function Ox(e) {
  typeof e != "function" && (e = sm(e));
  for (var t = this._groups, n = t.length, i = new Array(n), r = 0; r < n; ++r)
    for (var s = t[r], o = s.length, a = i[r] = new Array(o), l, h, c = 0; c < o; ++c)
      (l = s[c]) && (h = e.call(l, l.__data__, c, s)) && ("__data__" in l && (h.__data__ = l.__data__), a[c] = h);
  return new Si(i, this._parents);
}
function om(e) {
  return e == null ? [] : Array.isArray(e) ? e : Array.from(e);
}
function Fx() {
  return [];
}
function Mx(e) {
  return e == null ? Fx : function() {
    return this.querySelectorAll(e);
  };
}
function Rx(e) {
  return function() {
    return om(e.apply(this, arguments));
  };
}
function Dx(e) {
  typeof e == "function" ? e = Rx(e) : e = Mx(e);
  for (var t = this._groups, n = t.length, i = [], r = [], s = 0; s < n; ++s)
    for (var o = t[s], a = o.length, l, h = 0; h < a; ++h)
      (l = o[h]) && (i.push(e.call(l, l.__data__, h, o)), r.push(l));
  return new Si(i, r);
}
function jx(e) {
  return function() {
    return this.matches(e);
  };
}
function am(e) {
  return function(t) {
    return t.matches(e);
  };
}
var Bx = Array.prototype.find;
function qx(e) {
  return function() {
    return Bx.call(this.children, e);
  };
}
function $x() {
  return this.firstElementChild;
}
function zx(e) {
  return this.select(e == null ? $x : qx(typeof e == "function" ? e : am(e)));
}
var Ux = Array.prototype.filter;
function Wx() {
  return Array.from(this.children);
}
function Hx(e) {
  return function() {
    return Ux.call(this.children, e);
  };
}
function Gx(e) {
  return this.selectAll(e == null ? Wx : Hx(typeof e == "function" ? e : am(e)));
}
function Vx(e) {
  typeof e != "function" && (e = jx(e));
  for (var t = this._groups, n = t.length, i = new Array(n), r = 0; r < n; ++r)
    for (var s = t[r], o = s.length, a = i[r] = [], l, h = 0; h < o; ++h)
      (l = s[h]) && e.call(l, l.__data__, h, s) && a.push(l);
  return new Si(i, this._parents);
}
function lm(e) {
  return new Array(e.length);
}
function Yx() {
  return new Si(this._enter || this._groups.map(lm), this._parents);
}
function sc(e, t) {
  this.ownerDocument = e.ownerDocument, this.namespaceURI = e.namespaceURI, this._next = null, this._parent = e, this.__data__ = t;
}
sc.prototype = {
  constructor: sc,
  appendChild: function(e) {
    return this._parent.insertBefore(e, this._next);
  },
  insertBefore: function(e, t) {
    return this._parent.insertBefore(e, t);
  },
  querySelector: function(e) {
    return this._parent.querySelector(e);
  },
  querySelectorAll: function(e) {
    return this._parent.querySelectorAll(e);
  }
};
function Kx(e) {
  return function() {
    return e;
  };
}
function Jx(e, t, n, i, r, s) {
  for (var o = 0, a, l = t.length, h = s.length; o < h; ++o)
    (a = t[o]) ? (a.__data__ = s[o], i[o] = a) : n[o] = new sc(e, s[o]);
  for (; o < l; ++o)
    (a = t[o]) && (r[o] = a);
}
function Xx(e, t, n, i, r, s, o) {
  var a, l, h = /* @__PURE__ */ new Map(), c = t.length, d = s.length, g = new Array(c), p;
  for (a = 0; a < c; ++a)
    (l = t[a]) && (g[a] = p = o.call(l, l.__data__, a, t) + "", h.has(p) ? r[a] = l : h.set(p, l));
  for (a = 0; a < d; ++a)
    p = o.call(e, s[a], a, s) + "", (l = h.get(p)) ? (i[a] = l, l.__data__ = s[a], h.delete(p)) : n[a] = new sc(e, s[a]);
  for (a = 0; a < c; ++a)
    (l = t[a]) && h.get(g[a]) === l && (r[a] = l);
}
function Zx(e) {
  return e.__data__;
}
function Qx(e, t) {
  if (!arguments.length) return Array.from(this, Zx);
  var n = t ? Xx : Jx, i = this._parents, r = this._groups;
  typeof e != "function" && (e = Kx(e));
  for (var s = r.length, o = new Array(s), a = new Array(s), l = new Array(s), h = 0; h < s; ++h) {
    var c = i[h], d = r[h], g = d.length, p = t4(e.call(c, c && c.__data__, h, i)), b = p.length, x = a[h] = new Array(b), N = o[h] = new Array(b), v = l[h] = new Array(g);
    n(c, d, x, N, v, p, t);
    for (var w = 0, k = 0, T, D; w < b; ++w)
      if (T = x[w]) {
        for (w >= k && (k = w + 1); !(D = N[k]) && ++k < b; ) ;
        T._next = D || null;
      }
  }
  return o = new Si(o, i), o._enter = a, o._exit = l, o;
}
function t4(e) {
  return typeof e == "object" && "length" in e ? e : Array.from(e);
}
function e4() {
  return new Si(this._exit || this._groups.map(lm), this._parents);
}
function n4(e, t, n) {
  var i = this.enter(), r = this, s = this.exit();
  return typeof e == "function" ? (i = e(i), i && (i = i.selection())) : i = i.append(e + ""), t != null && (r = t(r), r && (r = r.selection())), n == null ? s.remove() : n(s), i && r ? i.merge(r).order() : r;
}
function i4(e) {
  for (var t = e.selection ? e.selection() : e, n = this._groups, i = t._groups, r = n.length, s = i.length, o = Math.min(r, s), a = new Array(r), l = 0; l < o; ++l)
    for (var h = n[l], c = i[l], d = h.length, g = a[l] = new Array(d), p, b = 0; b < d; ++b)
      (p = h[b] || c[b]) && (g[b] = p);
  for (; l < r; ++l)
    a[l] = n[l];
  return new Si(a, this._parents);
}
function r4() {
  for (var e = this._groups, t = -1, n = e.length; ++t < n; )
    for (var i = e[t], r = i.length - 1, s = i[r], o; --r >= 0; )
      (o = i[r]) && (s && o.compareDocumentPosition(s) ^ 4 && s.parentNode.insertBefore(o, s), s = o);
  return this;
}
function s4(e) {
  e || (e = o4);
  function t(d, g) {
    return d && g ? e(d.__data__, g.__data__) : !d - !g;
  }
  for (var n = this._groups, i = n.length, r = new Array(i), s = 0; s < i; ++s) {
    for (var o = n[s], a = o.length, l = r[s] = new Array(a), h, c = 0; c < a; ++c)
      (h = o[c]) && (l[c] = h);
    l.sort(t);
  }
  return new Si(r, this._parents).order();
}
function o4(e, t) {
  return e < t ? -1 : e > t ? 1 : e >= t ? 0 : NaN;
}
function a4() {
  var e = arguments[0];
  return arguments[0] = this, e.apply(null, arguments), this;
}
function l4() {
  return Array.from(this);
}
function u4() {
  for (var e = this._groups, t = 0, n = e.length; t < n; ++t)
    for (var i = e[t], r = 0, s = i.length; r < s; ++r) {
      var o = i[r];
      if (o) return o;
    }
  return null;
}
function c4() {
  let e = 0;
  for (const t of this) ++e;
  return e;
}
function h4() {
  return !this.node();
}
function f4(e) {
  for (var t = this._groups, n = 0, i = t.length; n < i; ++n)
    for (var r = t[n], s = 0, o = r.length, a; s < o; ++s)
      (a = r[s]) && e.call(a, a.__data__, s, r);
  return this;
}
function d4(e) {
  return function() {
    this.removeAttribute(e);
  };
}
function p4(e) {
  return function() {
    this.removeAttributeNS(e.space, e.local);
  };
}
function g4(e, t) {
  return function() {
    this.setAttribute(e, t);
  };
}
function m4(e, t) {
  return function() {
    this.setAttributeNS(e.space, e.local, t);
  };
}
function y4(e, t) {
  return function() {
    var n = t.apply(this, arguments);
    n == null ? this.removeAttribute(e) : this.setAttribute(e, n);
  };
}
function b4(e, t) {
  return function() {
    var n = t.apply(this, arguments);
    n == null ? this.removeAttributeNS(e.space, e.local) : this.setAttributeNS(e.space, e.local, n);
  };
}
function v4(e, t) {
  var n = im(e);
  if (arguments.length < 2) {
    var i = this.node();
    return n.local ? i.getAttributeNS(n.space, n.local) : i.getAttribute(n);
  }
  return this.each((t == null ? n.local ? p4 : d4 : typeof t == "function" ? n.local ? b4 : y4 : n.local ? m4 : g4)(n, t));
}
function um(e) {
  return e.ownerDocument && e.ownerDocument.defaultView || e.document && e || e.defaultView;
}
function w4(e) {
  return function() {
    this.style.removeProperty(e);
  };
}
function x4(e, t, n) {
  return function() {
    this.style.setProperty(e, t, n);
  };
}
function S4(e, t, n) {
  return function() {
    var i = t.apply(this, arguments);
    i == null ? this.style.removeProperty(e) : this.style.setProperty(e, i, n);
  };
}
function A4(e, t, n) {
  return arguments.length > 1 ? this.each((t == null ? w4 : typeof t == "function" ? S4 : x4)(e, t, n ?? "")) : k4(this.node(), e);
}
function k4(e, t) {
  return e.style.getPropertyValue(t) || um(e).getComputedStyle(e, null).getPropertyValue(t);
}
function _4(e) {
  return function() {
    delete this[e];
  };
}
function N4(e, t) {
  return function() {
    this[e] = t;
  };
}
function P4(e, t) {
  return function() {
    var n = t.apply(this, arguments);
    n == null ? delete this[e] : this[e] = n;
  };
}
function L4(e, t) {
  return arguments.length > 1 ? this.each((t == null ? _4 : typeof t == "function" ? P4 : N4)(e, t)) : this.node()[e];
}
function cm(e) {
  return e.trim().split(/^|\s+/);
}
function Od(e) {
  return e.classList || new hm(e);
}
function hm(e) {
  this._node = e, this._names = cm(e.getAttribute("class") || "");
}
hm.prototype = {
  add: function(e) {
    var t = this._names.indexOf(e);
    t < 0 && (this._names.push(e), this._node.setAttribute("class", this._names.join(" ")));
  },
  remove: function(e) {
    var t = this._names.indexOf(e);
    t >= 0 && (this._names.splice(t, 1), this._node.setAttribute("class", this._names.join(" ")));
  },
  contains: function(e) {
    return this._names.indexOf(e) >= 0;
  }
};
function fm(e, t) {
  for (var n = Od(e), i = -1, r = t.length; ++i < r; ) n.add(t[i]);
}
function dm(e, t) {
  for (var n = Od(e), i = -1, r = t.length; ++i < r; ) n.remove(t[i]);
}
function C4(e) {
  return function() {
    fm(this, e);
  };
}
function T4(e) {
  return function() {
    dm(this, e);
  };
}
function I4(e, t) {
  return function() {
    (t.apply(this, arguments) ? fm : dm)(this, e);
  };
}
function E4(e, t) {
  var n = cm(e + "");
  if (arguments.length < 2) {
    for (var i = Od(this.node()), r = -1, s = n.length; ++r < s; ) if (!i.contains(n[r])) return !1;
    return !0;
  }
  return this.each((typeof t == "function" ? I4 : t ? C4 : T4)(n, t));
}
function O4() {
  this.textContent = "";
}
function F4(e) {
  return function() {
    this.textContent = e;
  };
}
function M4(e) {
  return function() {
    var t = e.apply(this, arguments);
    this.textContent = t ?? "";
  };
}
function R4(e) {
  return arguments.length ? this.each(e == null ? O4 : (typeof e == "function" ? M4 : F4)(e)) : this.node().textContent;
}
function D4() {
  this.innerHTML = "";
}
function j4(e) {
  return function() {
    this.innerHTML = e;
  };
}
function B4(e) {
  return function() {
    var t = e.apply(this, arguments);
    this.innerHTML = t ?? "";
  };
}
function q4(e) {
  return arguments.length ? this.each(e == null ? D4 : (typeof e == "function" ? B4 : j4)(e)) : this.node().innerHTML;
}
function $4() {
  this.nextSibling && this.parentNode.appendChild(this);
}
function z4() {
  return this.each($4);
}
function U4() {
  this.previousSibling && this.parentNode.insertBefore(this, this.parentNode.firstChild);
}
function W4() {
  return this.each(U4);
}
function H4(e) {
  var t = typeof e == "function" ? e : rm(e);
  return this.select(function() {
    return this.appendChild(t.apply(this, arguments));
  });
}
function G4() {
  return null;
}
function V4(e, t) {
  var n = typeof e == "function" ? e : rm(e), i = t == null ? G4 : typeof t == "function" ? t : sm(t);
  return this.select(function() {
    return this.insertBefore(n.apply(this, arguments), i.apply(this, arguments) || null);
  });
}
function Y4() {
  var e = this.parentNode;
  e && e.removeChild(this);
}
function K4() {
  return this.each(Y4);
}
function J4() {
  var e = this.cloneNode(!1), t = this.parentNode;
  return t ? t.insertBefore(e, this.nextSibling) : e;
}
function X4() {
  var e = this.cloneNode(!0), t = this.parentNode;
  return t ? t.insertBefore(e, this.nextSibling) : e;
}
function Z4(e) {
  return this.select(e ? X4 : J4);
}
function Q4(e) {
  return arguments.length ? this.property("__data__", e) : this.node().__data__;
}
function tS(e) {
  return function(t) {
    e.call(this, t, this.__data__);
  };
}
function eS(e) {
  return e.trim().split(/^|\s+/).map(function(t) {
    var n = "", i = t.indexOf(".");
    return i >= 0 && (n = t.slice(i + 1), t = t.slice(0, i)), { type: t, name: n };
  });
}
function nS(e) {
  return function() {
    var t = this.__on;
    if (t) {
      for (var n = 0, i = -1, r = t.length, s; n < r; ++n)
        s = t[n], (!e.type || s.type === e.type) && s.name === e.name ? this.removeEventListener(s.type, s.listener, s.options) : t[++i] = s;
      ++i ? t.length = i : delete this.__on;
    }
  };
}
function iS(e, t, n) {
  return function() {
    var i = this.__on, r, s = tS(t);
    if (i) {
      for (var o = 0, a = i.length; o < a; ++o)
        if ((r = i[o]).type === e.type && r.name === e.name) {
          this.removeEventListener(r.type, r.listener, r.options), this.addEventListener(r.type, r.listener = s, r.options = n), r.value = t;
          return;
        }
    }
    this.addEventListener(e.type, s, n), r = { type: e.type, name: e.name, value: t, listener: s, options: n }, i ? i.push(r) : this.__on = [r];
  };
}
function rS(e, t, n) {
  var i = eS(e + ""), r, s = i.length, o;
  if (arguments.length < 2) {
    var a = this.node().__on;
    if (a) {
      for (var l = 0, h = a.length, c; l < h; ++l)
        for (r = 0, c = a[l]; r < s; ++r)
          if ((o = i[r]).type === c.type && o.name === c.name)
            return c.value;
    }
    return;
  }
  for (a = t ? iS : nS, r = 0; r < s; ++r) this.each(a(i[r], t, n));
  return this;
}
function pm(e, t, n) {
  var i = um(e), r = i.CustomEvent;
  typeof r == "function" ? r = new r(t, n) : (r = i.document.createEvent("Event"), n ? (r.initEvent(t, n.bubbles, n.cancelable), r.detail = n.detail) : r.initEvent(t, !1, !1)), e.dispatchEvent(r);
}
function sS(e, t) {
  return function() {
    return pm(this, e, t);
  };
}
function oS(e, t) {
  return function() {
    return pm(this, e, t.apply(this, arguments));
  };
}
function aS(e, t) {
  return this.each((typeof t == "function" ? oS : sS)(e, t));
}
function* lS() {
  for (var e = this._groups, t = 0, n = e.length; t < n; ++t)
    for (var i = e[t], r = 0, s = i.length, o; r < s; ++r)
      (o = i[r]) && (yield o);
}
var gm = [null];
function Si(e, t) {
  this._groups = e, this._parents = t;
}
function uS() {
  return this;
}
Si.prototype = {
  constructor: Si,
  select: Ox,
  selectAll: Dx,
  selectChild: zx,
  selectChildren: Gx,
  filter: Vx,
  data: Qx,
  enter: Yx,
  exit: e4,
  join: n4,
  merge: i4,
  selection: uS,
  order: r4,
  sort: s4,
  call: a4,
  nodes: l4,
  node: u4,
  size: c4,
  empty: h4,
  each: f4,
  attr: v4,
  style: A4,
  property: L4,
  classed: E4,
  text: R4,
  html: q4,
  raise: z4,
  lower: W4,
  append: H4,
  insert: V4,
  remove: K4,
  clone: Z4,
  datum: Q4,
  on: rS,
  dispatch: aS,
  [Symbol.iterator]: lS
};
function cS(e) {
  return typeof e == "string" ? new Si([[document.querySelector(e)]], [document.documentElement]) : new Si([[e]], gm);
}
function hS(e) {
  return typeof e == "string" ? new Si([document.querySelectorAll(e)], [document.documentElement]) : new Si([om(e)], gm);
}
function zu(e, t) {
  return e == null || t == null ? NaN : e < t ? -1 : e > t ? 1 : e >= t ? 0 : NaN;
}
function fS(e, t) {
  return e == null || t == null ? NaN : t < e ? -1 : t > e ? 1 : t >= e ? 0 : NaN;
}
function mm(e) {
  let t, n, i;
  e.length !== 2 ? (t = zu, n = (a, l) => zu(e(a), l), i = (a, l) => e(a) - l) : (t = e === zu || e === fS ? e : dS, n = e, i = e);
  function r(a, l, h = 0, c = a.length) {
    if (h < c) {
      if (t(l, l) !== 0) return c;
      do {
        const d = h + c >>> 1;
        n(a[d], l) < 0 ? h = d + 1 : c = d;
      } while (h < c);
    }
    return h;
  }
  function s(a, l, h = 0, c = a.length) {
    if (h < c) {
      if (t(l, l) !== 0) return c;
      do {
        const d = h + c >>> 1;
        n(a[d], l) <= 0 ? h = d + 1 : c = d;
      } while (h < c);
    }
    return h;
  }
  function o(a, l, h = 0, c = a.length) {
    const d = r(a, l, h, c - 1);
    return d > h && i(a[d - 1], l) > -i(a[d], l) ? d - 1 : d;
  }
  return { left: r, center: o, right: s };
}
function dS() {
  return 0;
}
function pS(e) {
  return e === null ? NaN : +e;
}
const gS = mm(zu), mS = gS.right;
mm(pS).center;
const yS = Math.sqrt(50), bS = Math.sqrt(10), vS = Math.sqrt(2);
function oc(e, t, n) {
  const i = (t - e) / Math.max(0, n), r = Math.floor(Math.log10(i)), s = i / Math.pow(10, r), o = s >= yS ? 10 : s >= bS ? 5 : s >= vS ? 2 : 1;
  let a, l, h;
  return r < 0 ? (h = Math.pow(10, -r) / o, a = Math.round(e * h), l = Math.round(t * h), a / h < e && ++a, l / h > t && --l, h = -h) : (h = Math.pow(10, r) * o, a = Math.round(e / h), l = Math.round(t / h), a * h < e && ++a, l * h > t && --l), l < a && 0.5 <= n && n < 2 ? oc(e, t, n * 2) : [a, l, h];
}
function wS(e, t, n) {
  if (t = +t, e = +e, n = +n, !(n > 0)) return [];
  if (e === t) return [e];
  const i = t < e, [r, s, o] = i ? oc(t, e, n) : oc(e, t, n);
  if (!(s >= r)) return [];
  const a = s - r + 1, l = new Array(a);
  if (i)
    if (o < 0) for (let h = 0; h < a; ++h) l[h] = (s - h) / -o;
    else for (let h = 0; h < a; ++h) l[h] = (s - h) * o;
  else if (o < 0) for (let h = 0; h < a; ++h) l[h] = (r + h) / -o;
  else for (let h = 0; h < a; ++h) l[h] = (r + h) * o;
  return l;
}
function xf(e, t, n) {
  return t = +t, e = +e, n = +n, oc(e, t, n)[2];
}
function xS(e, t, n) {
  t = +t, e = +e, n = +n;
  const i = t < e, r = i ? xf(t, e, n) : xf(e, t, n);
  return (i ? -1 : 1) * (r < 0 ? 1 / -r : r);
}
function SS(e, t) {
  switch (arguments.length) {
    case 0:
      break;
    case 1:
      this.range(e);
      break;
    default:
      this.range(t).domain(e);
      break;
  }
  return this;
}
function AS(e, t) {
  switch (arguments.length) {
    case 0:
      break;
    case 1: {
      typeof e == "function" ? this.interpolator(e) : this.range(e);
      break;
    }
    default: {
      this.domain(e), typeof t == "function" ? this.interpolator(t) : this.range(t);
      break;
    }
  }
  return this;
}
function Fd(e, t, n) {
  e.prototype = t.prototype = n, n.constructor = e;
}
function ym(e, t) {
  var n = Object.create(e.prototype);
  for (var i in t) n[i] = t[i];
  return n;
}
function Cl() {
}
var bl = 0.7, ac = 1 / bl, oa = "\\s*([+-]?\\d+)\\s*", vl = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*", Fr = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*", kS = /^#([0-9a-f]{3,8})$/, _S = new RegExp(`^rgb\\(${oa},${oa},${oa}\\)$`), NS = new RegExp(`^rgb\\(${Fr},${Fr},${Fr}\\)$`), PS = new RegExp(`^rgba\\(${oa},${oa},${oa},${vl}\\)$`), LS = new RegExp(`^rgba\\(${Fr},${Fr},${Fr},${vl}\\)$`), CS = new RegExp(`^hsl\\(${vl},${Fr},${Fr}\\)$`), TS = new RegExp(`^hsla\\(${vl},${Fr},${Fr},${vl}\\)$`), Sg = {
  aliceblue: 15792383,
  antiquewhite: 16444375,
  aqua: 65535,
  aquamarine: 8388564,
  azure: 15794175,
  beige: 16119260,
  bisque: 16770244,
  black: 0,
  blanchedalmond: 16772045,
  blue: 255,
  blueviolet: 9055202,
  brown: 10824234,
  burlywood: 14596231,
  cadetblue: 6266528,
  chartreuse: 8388352,
  chocolate: 13789470,
  coral: 16744272,
  cornflowerblue: 6591981,
  cornsilk: 16775388,
  crimson: 14423100,
  cyan: 65535,
  darkblue: 139,
  darkcyan: 35723,
  darkgoldenrod: 12092939,
  darkgray: 11119017,
  darkgreen: 25600,
  darkgrey: 11119017,
  darkkhaki: 12433259,
  darkmagenta: 9109643,
  darkolivegreen: 5597999,
  darkorange: 16747520,
  darkorchid: 10040012,
  darkred: 9109504,
  darksalmon: 15308410,
  darkseagreen: 9419919,
  darkslateblue: 4734347,
  darkslategray: 3100495,
  darkslategrey: 3100495,
  darkturquoise: 52945,
  darkviolet: 9699539,
  deeppink: 16716947,
  deepskyblue: 49151,
  dimgray: 6908265,
  dimgrey: 6908265,
  dodgerblue: 2003199,
  firebrick: 11674146,
  floralwhite: 16775920,
  forestgreen: 2263842,
  fuchsia: 16711935,
  gainsboro: 14474460,
  ghostwhite: 16316671,
  gold: 16766720,
  goldenrod: 14329120,
  gray: 8421504,
  green: 32768,
  greenyellow: 11403055,
  grey: 8421504,
  honeydew: 15794160,
  hotpink: 16738740,
  indianred: 13458524,
  indigo: 4915330,
  ivory: 16777200,
  khaki: 15787660,
  lavender: 15132410,
  lavenderblush: 16773365,
  lawngreen: 8190976,
  lemonchiffon: 16775885,
  lightblue: 11393254,
  lightcoral: 15761536,
  lightcyan: 14745599,
  lightgoldenrodyellow: 16448210,
  lightgray: 13882323,
  lightgreen: 9498256,
  lightgrey: 13882323,
  lightpink: 16758465,
  lightsalmon: 16752762,
  lightseagreen: 2142890,
  lightskyblue: 8900346,
  lightslategray: 7833753,
  lightslategrey: 7833753,
  lightsteelblue: 11584734,
  lightyellow: 16777184,
  lime: 65280,
  limegreen: 3329330,
  linen: 16445670,
  magenta: 16711935,
  maroon: 8388608,
  mediumaquamarine: 6737322,
  mediumblue: 205,
  mediumorchid: 12211667,
  mediumpurple: 9662683,
  mediumseagreen: 3978097,
  mediumslateblue: 8087790,
  mediumspringgreen: 64154,
  mediumturquoise: 4772300,
  mediumvioletred: 13047173,
  midnightblue: 1644912,
  mintcream: 16121850,
  mistyrose: 16770273,
  moccasin: 16770229,
  navajowhite: 16768685,
  navy: 128,
  oldlace: 16643558,
  olive: 8421376,
  olivedrab: 7048739,
  orange: 16753920,
  orangered: 16729344,
  orchid: 14315734,
  palegoldenrod: 15657130,
  palegreen: 10025880,
  paleturquoise: 11529966,
  palevioletred: 14381203,
  papayawhip: 16773077,
  peachpuff: 16767673,
  peru: 13468991,
  pink: 16761035,
  plum: 14524637,
  powderblue: 11591910,
  purple: 8388736,
  rebeccapurple: 6697881,
  red: 16711680,
  rosybrown: 12357519,
  royalblue: 4286945,
  saddlebrown: 9127187,
  salmon: 16416882,
  sandybrown: 16032864,
  seagreen: 3050327,
  seashell: 16774638,
  sienna: 10506797,
  silver: 12632256,
  skyblue: 8900331,
  slateblue: 6970061,
  slategray: 7372944,
  slategrey: 7372944,
  snow: 16775930,
  springgreen: 65407,
  steelblue: 4620980,
  tan: 13808780,
  teal: 32896,
  thistle: 14204888,
  tomato: 16737095,
  turquoise: 4251856,
  violet: 15631086,
  wheat: 16113331,
  white: 16777215,
  whitesmoke: 16119285,
  yellow: 16776960,
  yellowgreen: 10145074
};
Fd(Cl, ha, {
  copy(e) {
    return Object.assign(new this.constructor(), this, e);
  },
  displayable() {
    return this.rgb().displayable();
  },
  hex: Ag,
  // Deprecated! Use color.formatHex.
  formatHex: Ag,
  formatHex8: IS,
  formatHsl: ES,
  formatRgb: kg,
  toString: kg
});
function Ag() {
  return this.rgb().formatHex();
}
function IS() {
  return this.rgb().formatHex8();
}
function ES() {
  return bm(this).formatHsl();
}
function kg() {
  return this.rgb().formatRgb();
}
function ha(e) {
  var t, n;
  return e = (e + "").trim().toLowerCase(), (t = kS.exec(e)) ? (n = t[1].length, t = parseInt(t[1], 16), n === 6 ? _g(t) : n === 3 ? new xi(t >> 8 & 15 | t >> 4 & 240, t >> 4 & 15 | t & 240, (t & 15) << 4 | t & 15, 1) : n === 8 ? Tu(t >> 24 & 255, t >> 16 & 255, t >> 8 & 255, (t & 255) / 255) : n === 4 ? Tu(t >> 12 & 15 | t >> 8 & 240, t >> 8 & 15 | t >> 4 & 240, t >> 4 & 15 | t & 240, ((t & 15) << 4 | t & 15) / 255) : null) : (t = _S.exec(e)) ? new xi(t[1], t[2], t[3], 1) : (t = NS.exec(e)) ? new xi(t[1] * 255 / 100, t[2] * 255 / 100, t[3] * 255 / 100, 1) : (t = PS.exec(e)) ? Tu(t[1], t[2], t[3], t[4]) : (t = LS.exec(e)) ? Tu(t[1] * 255 / 100, t[2] * 255 / 100, t[3] * 255 / 100, t[4]) : (t = CS.exec(e)) ? Lg(t[1], t[2] / 100, t[3] / 100, 1) : (t = TS.exec(e)) ? Lg(t[1], t[2] / 100, t[3] / 100, t[4]) : Sg.hasOwnProperty(e) ? _g(Sg[e]) : e === "transparent" ? new xi(NaN, NaN, NaN, 0) : null;
}
function _g(e) {
  return new xi(e >> 16 & 255, e >> 8 & 255, e & 255, 1);
}
function Tu(e, t, n, i) {
  return i <= 0 && (e = t = n = NaN), new xi(e, t, n, i);
}
function OS(e) {
  return e instanceof Cl || (e = ha(e)), e ? (e = e.rgb(), new xi(e.r, e.g, e.b, e.opacity)) : new xi();
}
function Pn(e, t, n, i) {
  return arguments.length === 1 ? OS(e) : new xi(e, t, n, i ?? 1);
}
function xi(e, t, n, i) {
  this.r = +e, this.g = +t, this.b = +n, this.opacity = +i;
}
Fd(xi, Pn, ym(Cl, {
  brighter(e) {
    return e = e == null ? ac : Math.pow(ac, e), new xi(this.r * e, this.g * e, this.b * e, this.opacity);
  },
  darker(e) {
    return e = e == null ? bl : Math.pow(bl, e), new xi(this.r * e, this.g * e, this.b * e, this.opacity);
  },
  rgb() {
    return this;
  },
  clamp() {
    return new xi(fo(this.r), fo(this.g), fo(this.b), lc(this.opacity));
  },
  displayable() {
    return -0.5 <= this.r && this.r < 255.5 && -0.5 <= this.g && this.g < 255.5 && -0.5 <= this.b && this.b < 255.5 && 0 <= this.opacity && this.opacity <= 1;
  },
  hex: Ng,
  // Deprecated! Use color.formatHex.
  formatHex: Ng,
  formatHex8: FS,
  formatRgb: Pg,
  toString: Pg
}));
function Ng() {
  return `#${so(this.r)}${so(this.g)}${so(this.b)}`;
}
function FS() {
  return `#${so(this.r)}${so(this.g)}${so(this.b)}${so((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;
}
function Pg() {
  const e = lc(this.opacity);
  return `${e === 1 ? "rgb(" : "rgba("}${fo(this.r)}, ${fo(this.g)}, ${fo(this.b)}${e === 1 ? ")" : `, ${e})`}`;
}
function lc(e) {
  return isNaN(e) ? 1 : Math.max(0, Math.min(1, e));
}
function fo(e) {
  return Math.max(0, Math.min(255, Math.round(e) || 0));
}
function so(e) {
  return e = fo(e), (e < 16 ? "0" : "") + e.toString(16);
}
function Lg(e, t, n, i) {
  return i <= 0 ? e = t = n = NaN : n <= 0 || n >= 1 ? e = t = NaN : t <= 0 && (e = NaN), new gr(e, t, n, i);
}
function bm(e) {
  if (e instanceof gr) return new gr(e.h, e.s, e.l, e.opacity);
  if (e instanceof Cl || (e = ha(e)), !e) return new gr();
  if (e instanceof gr) return e;
  e = e.rgb();
  var t = e.r / 255, n = e.g / 255, i = e.b / 255, r = Math.min(t, n, i), s = Math.max(t, n, i), o = NaN, a = s - r, l = (s + r) / 2;
  return a ? (t === s ? o = (n - i) / a + (n < i) * 6 : n === s ? o = (i - t) / a + 2 : o = (t - n) / a + 4, a /= l < 0.5 ? s + r : 2 - s - r, o *= 60) : a = l > 0 && l < 1 ? 0 : o, new gr(o, a, l, e.opacity);
}
function MS(e, t, n, i) {
  return arguments.length === 1 ? bm(e) : new gr(e, t, n, i ?? 1);
}
function gr(e, t, n, i) {
  this.h = +e, this.s = +t, this.l = +n, this.opacity = +i;
}
Fd(gr, MS, ym(Cl, {
  brighter(e) {
    return e = e == null ? ac : Math.pow(ac, e), new gr(this.h, this.s, this.l * e, this.opacity);
  },
  darker(e) {
    return e = e == null ? bl : Math.pow(bl, e), new gr(this.h, this.s, this.l * e, this.opacity);
  },
  rgb() {
    var e = this.h % 360 + (this.h < 0) * 360, t = isNaN(e) || isNaN(this.s) ? 0 : this.s, n = this.l, i = n + (n < 0.5 ? n : 1 - n) * t, r = 2 * n - i;
    return new xi(
      Eh(e >= 240 ? e - 240 : e + 120, r, i),
      Eh(e, r, i),
      Eh(e < 120 ? e + 240 : e - 120, r, i),
      this.opacity
    );
  },
  clamp() {
    return new gr(Cg(this.h), Iu(this.s), Iu(this.l), lc(this.opacity));
  },
  displayable() {
    return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && 0 <= this.l && this.l <= 1 && 0 <= this.opacity && this.opacity <= 1;
  },
  formatHsl() {
    const e = lc(this.opacity);
    return `${e === 1 ? "hsl(" : "hsla("}${Cg(this.h)}, ${Iu(this.s) * 100}%, ${Iu(this.l) * 100}%${e === 1 ? ")" : `, ${e})`}`;
  }
}));
function Cg(e) {
  return e = (e || 0) % 360, e < 0 ? e + 360 : e;
}
function Iu(e) {
  return Math.max(0, Math.min(1, e || 0));
}
function Eh(e, t, n) {
  return (e < 60 ? t + (n - t) * e / 60 : e < 180 ? n : e < 240 ? t + (n - t) * (240 - e) / 60 : t) * 255;
}
const Md = (e) => () => e;
function RS(e, t) {
  return function(n) {
    return e + n * t;
  };
}
function DS(e, t, n) {
  return e = Math.pow(e, n), t = Math.pow(t, n) - e, n = 1 / n, function(i) {
    return Math.pow(e + i * t, n);
  };
}
function jS(e) {
  return (e = +e) == 1 ? vm : function(t, n) {
    return n - t ? DS(t, n, e) : Md(isNaN(t) ? n : t);
  };
}
function vm(e, t) {
  var n = t - e;
  return n ? RS(e, n) : Md(isNaN(e) ? t : e);
}
const Tg = function e(t) {
  var n = jS(t);
  function i(r, s) {
    var o = n((r = Pn(r)).r, (s = Pn(s)).r), a = n(r.g, s.g), l = n(r.b, s.b), h = vm(r.opacity, s.opacity);
    return function(c) {
      return r.r = o(c), r.g = a(c), r.b = l(c), r.opacity = h(c), r + "";
    };
  }
  return i.gamma = e, i;
}(1);
function BS(e, t) {
  t || (t = []);
  var n = e ? Math.min(t.length, e.length) : 0, i = t.slice(), r;
  return function(s) {
    for (r = 0; r < n; ++r) i[r] = e[r] * (1 - s) + t[r] * s;
    return i;
  };
}
function qS(e) {
  return ArrayBuffer.isView(e) && !(e instanceof DataView);
}
function $S(e, t) {
  var n = t ? t.length : 0, i = e ? Math.min(n, e.length) : 0, r = new Array(i), s = new Array(n), o;
  for (o = 0; o < i; ++o) r[o] = Rc(e[o], t[o]);
  for (; o < n; ++o) s[o] = t[o];
  return function(a) {
    for (o = 0; o < i; ++o) s[o] = r[o](a);
    return s;
  };
}
function zS(e, t) {
  var n = /* @__PURE__ */ new Date();
  return e = +e, t = +t, function(i) {
    return n.setTime(e * (1 - i) + t * i), n;
  };
}
function uc(e, t) {
  return e = +e, t = +t, function(n) {
    return e * (1 - n) + t * n;
  };
}
function US(e, t) {
  var n = {}, i = {}, r;
  (e === null || typeof e != "object") && (e = {}), (t === null || typeof t != "object") && (t = {});
  for (r in t)
    r in e ? n[r] = Rc(e[r], t[r]) : i[r] = t[r];
  return function(s) {
    for (r in n) i[r] = n[r](s);
    return i;
  };
}
var Sf = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g, Oh = new RegExp(Sf.source, "g");
function WS(e) {
  return function() {
    return e;
  };
}
function HS(e) {
  return function(t) {
    return e(t) + "";
  };
}
function GS(e, t) {
  var n = Sf.lastIndex = Oh.lastIndex = 0, i, r, s, o = -1, a = [], l = [];
  for (e = e + "", t = t + ""; (i = Sf.exec(e)) && (r = Oh.exec(t)); )
    (s = r.index) > n && (s = t.slice(n, s), a[o] ? a[o] += s : a[++o] = s), (i = i[0]) === (r = r[0]) ? a[o] ? a[o] += r : a[++o] = r : (a[++o] = null, l.push({ i: o, x: uc(i, r) })), n = Oh.lastIndex;
  return n < t.length && (s = t.slice(n), a[o] ? a[o] += s : a[++o] = s), a.length < 2 ? l[0] ? HS(l[0].x) : WS(t) : (t = l.length, function(h) {
    for (var c = 0, d; c < t; ++c) a[(d = l[c]).i] = d.x(h);
    return a.join("");
  });
}
function Rc(e, t) {
  var n = typeof t, i;
  return t == null || n === "boolean" ? Md(t) : (n === "number" ? uc : n === "string" ? (i = ha(t)) ? (t = i, Tg) : GS : t instanceof ha ? Tg : t instanceof Date ? zS : qS(t) ? BS : Array.isArray(t) ? $S : typeof t.valueOf != "function" && typeof t.toString != "function" || isNaN(t) ? US : uc)(e, t);
}
function wm(e, t) {
  return e = +e, t = +t, function(n) {
    return Math.round(e * (1 - n) + t * n);
  };
}
function VS(e) {
  return function() {
    return e;
  };
}
function YS(e) {
  return +e;
}
var Ig = [0, 1];
function Cs(e) {
  return e;
}
function Af(e, t) {
  return (t -= e = +e) ? function(n) {
    return (n - e) / t;
  } : VS(isNaN(t) ? NaN : 0.5);
}
function KS(e, t) {
  var n;
  return e > t && (n = e, e = t, t = n), function(i) {
    return Math.max(e, Math.min(t, i));
  };
}
function JS(e, t, n) {
  var i = e[0], r = e[1], s = t[0], o = t[1];
  return r < i ? (i = Af(r, i), s = n(o, s)) : (i = Af(i, r), s = n(s, o)), function(a) {
    return s(i(a));
  };
}
function XS(e, t, n) {
  var i = Math.min(e.length, t.length) - 1, r = new Array(i), s = new Array(i), o = -1;
  for (e[i] < e[0] && (e = e.slice().reverse(), t = t.slice().reverse()); ++o < i; )
    r[o] = Af(e[o], e[o + 1]), s[o] = n(t[o], t[o + 1]);
  return function(a) {
    var l = mS(e, a, 1, i) - 1;
    return s[l](r[l](a));
  };
}
function ZS(e, t) {
  return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown());
}
function QS() {
  var e = Ig, t = Ig, n = Rc, i, r, s, o = Cs, a, l, h;
  function c() {
    var g = Math.min(e.length, t.length);
    return o !== Cs && (o = KS(e[0], e[g - 1])), a = g > 2 ? XS : JS, l = h = null, d;
  }
  function d(g) {
    return g == null || isNaN(g = +g) ? s : (l || (l = a(e.map(i), t, n)))(i(o(g)));
  }
  return d.invert = function(g) {
    return o(r((h || (h = a(t, e.map(i), uc)))(g)));
  }, d.domain = function(g) {
    return arguments.length ? (e = Array.from(g, YS), c()) : e.slice();
  }, d.range = function(g) {
    return arguments.length ? (t = Array.from(g), c()) : t.slice();
  }, d.rangeRound = function(g) {
    return t = Array.from(g), n = wm, c();
  }, d.clamp = function(g) {
    return arguments.length ? (o = g ? !0 : Cs, c()) : o !== Cs;
  }, d.interpolate = function(g) {
    return arguments.length ? (n = g, c()) : n;
  }, d.unknown = function(g) {
    return arguments.length ? (s = g, d) : s;
  }, function(g, p) {
    return i = g, r = p, c();
  };
}
function t6() {
  return QS()(Cs, Cs);
}
function e6(e) {
  return Math.abs(e = Math.round(e)) >= 1e21 ? e.toLocaleString("en").replace(/,/g, "") : e.toString(10);
}
function cc(e, t) {
  if ((n = (e = t ? e.toExponential(t - 1) : e.toExponential()).indexOf("e")) < 0) return null;
  var n, i = e.slice(0, n);
  return [
    i.length > 1 ? i[0] + i.slice(2) : i,
    +e.slice(n + 1)
  ];
}
function fa(e) {
  return e = cc(Math.abs(e)), e ? e[1] : NaN;
}
function n6(e, t) {
  return function(n, i) {
    for (var r = n.length, s = [], o = 0, a = e[0], l = 0; r > 0 && a > 0 && (l + a + 1 > i && (a = Math.max(1, i - l)), s.push(n.substring(r -= a, r + a)), !((l += a + 1) > i)); )
      a = e[o = (o + 1) % e.length];
    return s.reverse().join(t);
  };
}
function i6(e) {
  return function(t) {
    return t.replace(/[0-9]/g, function(n) {
      return e[+n];
    });
  };
}
var r6 = /^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;
function hc(e) {
  if (!(t = r6.exec(e))) throw new Error("invalid format: " + e);
  var t;
  return new Rd({
    fill: t[1],
    align: t[2],
    sign: t[3],
    symbol: t[4],
    zero: t[5],
    width: t[6],
    comma: t[7],
    precision: t[8] && t[8].slice(1),
    trim: t[9],
    type: t[10]
  });
}
hc.prototype = Rd.prototype;
function Rd(e) {
  this.fill = e.fill === void 0 ? " " : e.fill + "", this.align = e.align === void 0 ? ">" : e.align + "", this.sign = e.sign === void 0 ? "-" : e.sign + "", this.symbol = e.symbol === void 0 ? "" : e.symbol + "", this.zero = !!e.zero, this.width = e.width === void 0 ? void 0 : +e.width, this.comma = !!e.comma, this.precision = e.precision === void 0 ? void 0 : +e.precision, this.trim = !!e.trim, this.type = e.type === void 0 ? "" : e.type + "";
}
Rd.prototype.toString = function() {
  return this.fill + this.align + this.sign + this.symbol + (this.zero ? "0" : "") + (this.width === void 0 ? "" : Math.max(1, this.width | 0)) + (this.comma ? "," : "") + (this.precision === void 0 ? "" : "." + Math.max(0, this.precision | 0)) + (this.trim ? "~" : "") + this.type;
};
function s6(e) {
  t: for (var t = e.length, n = 1, i = -1, r; n < t; ++n)
    switch (e[n]) {
      case ".":
        i = r = n;
        break;
      case "0":
        i === 0 && (i = n), r = n;
        break;
      default:
        if (!+e[n]) break t;
        i > 0 && (i = 0);
        break;
    }
  return i > 0 ? e.slice(0, i) + e.slice(r + 1) : e;
}
var xm;
function o6(e, t) {
  var n = cc(e, t);
  if (!n) return e + "";
  var i = n[0], r = n[1], s = r - (xm = Math.max(-8, Math.min(8, Math.floor(r / 3))) * 3) + 1, o = i.length;
  return s === o ? i : s > o ? i + new Array(s - o + 1).join("0") : s > 0 ? i.slice(0, s) + "." + i.slice(s) : "0." + new Array(1 - s).join("0") + cc(e, Math.max(0, t + s - 1))[0];
}
function Eg(e, t) {
  var n = cc(e, t);
  if (!n) return e + "";
  var i = n[0], r = n[1];
  return r < 0 ? "0." + new Array(-r).join("0") + i : i.length > r + 1 ? i.slice(0, r + 1) + "." + i.slice(r + 1) : i + new Array(r - i.length + 2).join("0");
}
const Og = {
  "%": (e, t) => (e * 100).toFixed(t),
  b: (e) => Math.round(e).toString(2),
  c: (e) => e + "",
  d: e6,
  e: (e, t) => e.toExponential(t),
  f: (e, t) => e.toFixed(t),
  g: (e, t) => e.toPrecision(t),
  o: (e) => Math.round(e).toString(8),
  p: (e, t) => Eg(e * 100, t),
  r: Eg,
  s: o6,
  X: (e) => Math.round(e).toString(16).toUpperCase(),
  x: (e) => Math.round(e).toString(16)
};
function Fg(e) {
  return e;
}
var Mg = Array.prototype.map, Rg = ["y", "z", "a", "f", "p", "n", "µ", "m", "", "k", "M", "G", "T", "P", "E", "Z", "Y"];
function a6(e) {
  var t = e.grouping === void 0 || e.thousands === void 0 ? Fg : n6(Mg.call(e.grouping, Number), e.thousands + ""), n = e.currency === void 0 ? "" : e.currency[0] + "", i = e.currency === void 0 ? "" : e.currency[1] + "", r = e.decimal === void 0 ? "." : e.decimal + "", s = e.numerals === void 0 ? Fg : i6(Mg.call(e.numerals, String)), o = e.percent === void 0 ? "%" : e.percent + "", a = e.minus === void 0 ? "−" : e.minus + "", l = e.nan === void 0 ? "NaN" : e.nan + "";
  function h(d) {
    d = hc(d);
    var g = d.fill, p = d.align, b = d.sign, x = d.symbol, N = d.zero, v = d.width, w = d.comma, k = d.precision, T = d.trim, D = d.type;
    D === "n" ? (w = !0, D = "g") : Og[D] || (k === void 0 && (k = 12), T = !0, D = "g"), (N || g === "0" && p === "=") && (N = !0, g = "0", p = "=");
    var G = x === "$" ? n : x === "#" && /[boxX]/.test(D) ? "0" + D.toLowerCase() : "", R = x === "$" ? i : /[%p]/.test(D) ? o : "", O = Og[D], $ = /[defgprs%]/.test(D);
    k = k === void 0 ? 6 : /[gprs]/.test(D) ? Math.max(1, Math.min(21, k)) : Math.max(0, Math.min(20, k));
    function z(A) {
      var _ = G, I = R, M, st, W;
      if (D === "c")
        I = O(A) + I, A = "";
      else {
        A = +A;
        var U = A < 0 || 1 / A < 0;
        if (A = isNaN(A) ? l : O(Math.abs(A), k), T && (A = s6(A)), U && +A == 0 && b !== "+" && (U = !1), _ = (U ? b === "(" ? b : a : b === "-" || b === "(" ? "" : b) + _, I = (D === "s" ? Rg[8 + xm / 3] : "") + I + (U && b === "(" ? ")" : ""), $) {
          for (M = -1, st = A.length; ++M < st; )
            if (W = A.charCodeAt(M), 48 > W || W > 57) {
              I = (W === 46 ? r + A.slice(M + 1) : A.slice(M)) + I, A = A.slice(0, M);
              break;
            }
        }
      }
      w && !N && (A = t(A, 1 / 0));
      var Q = _.length + A.length + I.length, Z = Q < v ? new Array(v - Q + 1).join(g) : "";
      switch (w && N && (A = t(Z + A, Z.length ? v - I.length : 1 / 0), Z = ""), p) {
        case "<":
          A = _ + A + I + Z;
          break;
        case "=":
          A = _ + Z + A + I;
          break;
        case "^":
          A = Z.slice(0, Q = Z.length >> 1) + _ + A + I + Z.slice(Q);
          break;
        default:
          A = Z + _ + A + I;
          break;
      }
      return s(A);
    }
    return z.toString = function() {
      return d + "";
    }, z;
  }
  function c(d, g) {
    var p = h((d = hc(d), d.type = "f", d)), b = Math.max(-8, Math.min(8, Math.floor(fa(g) / 3))) * 3, x = Math.pow(10, -b), N = Rg[8 + b / 3];
    return function(v) {
      return p(x * v) + N;
    };
  }
  return {
    format: h,
    formatPrefix: c
  };
}
var Eu, Dd, Sm;
l6({
  thousands: ",",
  grouping: [3],
  currency: ["$", ""]
});
function l6(e) {
  return Eu = a6(e), Dd = Eu.format, Sm = Eu.formatPrefix, Eu;
}
function Am(e) {
  return Math.max(0, -fa(Math.abs(e)));
}
function u6(e, t) {
  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(fa(t) / 3))) * 3 - fa(Math.abs(e)));
}
function c6(e, t) {
  return e = Math.abs(e), t = Math.abs(t) - e, Math.max(0, fa(t) - fa(e)) + 1;
}
function h6(e, t, n, i) {
  var r = xS(e, t, n), s;
  switch (i = hc(i ?? ",f"), i.type) {
    case "s": {
      var o = Math.max(Math.abs(e), Math.abs(t));
      return i.precision == null && !isNaN(s = u6(r, o)) && (i.precision = s), Sm(i, o);
    }
    case "":
    case "e":
    case "g":
    case "p":
    case "r": {
      i.precision == null && !isNaN(s = c6(r, Math.max(Math.abs(e), Math.abs(t)))) && (i.precision = s - (i.type === "e"));
      break;
    }
    case "f":
    case "%": {
      i.precision == null && !isNaN(s = Am(r)) && (i.precision = s - (i.type === "%") * 2);
      break;
    }
  }
  return Dd(i);
}
function km(e) {
  var t = e.domain;
  return e.ticks = function(n) {
    var i = t();
    return wS(i[0], i[i.length - 1], n ?? 10);
  }, e.tickFormat = function(n, i) {
    var r = t();
    return h6(r[0], r[r.length - 1], n ?? 10, i);
  }, e.nice = function(n) {
    n == null && (n = 10);
    var i = t(), r = 0, s = i.length - 1, o = i[r], a = i[s], l, h, c = 10;
    for (a < o && (h = o, o = a, a = h, h = r, r = s, s = h); c-- > 0; ) {
      if (h = xf(o, a, n), h === l)
        return i[r] = o, i[s] = a, t(i);
      if (h > 0)
        o = Math.floor(o / h) * h, a = Math.ceil(a / h) * h;
      else if (h < 0)
        o = Math.ceil(o * h) / h, a = Math.floor(a * h) / h;
      else
        break;
      l = h;
    }
    return e;
  }, e;
}
function _m() {
  var e = t6();
  return e.copy = function() {
    return ZS(e, _m());
  }, SS.apply(e, arguments), km(e);
}
function f6() {
  var e = 0, t = 1, n, i, r, s, o = Cs, a = !1, l;
  function h(d) {
    return d == null || isNaN(d = +d) ? l : o(r === 0 ? 0.5 : (d = (s(d) - n) * r, a ? Math.max(0, Math.min(1, d)) : d));
  }
  h.domain = function(d) {
    return arguments.length ? ([e, t] = d, n = s(e = +e), i = s(t = +t), r = n === i ? 0 : 1 / (i - n), h) : [e, t];
  }, h.clamp = function(d) {
    return arguments.length ? (a = !!d, h) : a;
  }, h.interpolator = function(d) {
    return arguments.length ? (o = d, h) : o;
  };
  function c(d) {
    return function(g) {
      var p, b;
      return arguments.length ? ([p, b] = g, o = d(p, b), h) : [o(0), o(1)];
    };
  }
  return h.range = c(Rc), h.rangeRound = c(wm), h.unknown = function(d) {
    return arguments.length ? (l = d, h) : l;
  }, function(d) {
    return s = d, n = d(e), i = d(t), r = n === i ? 0 : 1 / (i - n), h;
  };
}
function d6(e, t) {
  return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown());
}
function Nm() {
  var e = km(f6()(Cs));
  return e.copy = function() {
    return d6(e, Nm());
  }, AS.apply(e, arguments);
}
function p6(e) {
  return e;
}
var Uu = 1, Wu = 2, kf = 3, ol = 4, Dg = 1e-6;
function g6(e) {
  return "translate(" + e + ",0)";
}
function m6(e) {
  return "translate(0," + e + ")";
}
function y6(e) {
  return (t) => +e(t);
}
function b6(e, t) {
  return t = Math.max(0, e.bandwidth() - t * 2) / 2, e.round() && (t = Math.round(t)), (n) => +e(n) + t;
}
function v6() {
  return !this.__axis;
}
function Dc(e, t) {
  var n = [], i = null, r = null, s = 6, o = 6, a = 3, l = typeof window < "u" && window.devicePixelRatio > 1 ? 0 : 0.5, h = e === Uu || e === ol ? -1 : 1, c = e === ol || e === Wu ? "x" : "y", d = e === Uu || e === kf ? g6 : m6;
  function g(p) {
    var b = i ?? (t.ticks ? t.ticks.apply(t, n) : t.domain()), x = r ?? (t.tickFormat ? t.tickFormat.apply(t, n) : p6), N = Math.max(s, 0) + a, v = t.range(), w = +v[0] + l, k = +v[v.length - 1] + l, T = (t.bandwidth ? b6 : y6)(t.copy(), l), D = p.selection ? p.selection() : p, G = D.selectAll(".domain").data([null]), R = D.selectAll(".tick").data(b, t).order(), O = R.exit(), $ = R.enter().append("g").attr("class", "tick"), z = R.select("line"), A = R.select("text");
    G = G.merge(G.enter().insert("path", ".tick").attr("class", "domain").attr("stroke", "currentColor")), R = R.merge($), z = z.merge($.append("line").attr("stroke", "currentColor").attr(c + "2", h * s)), A = A.merge($.append("text").attr("fill", "currentColor").attr(c, h * N).attr("dy", e === Uu ? "0em" : e === kf ? "0.71em" : "0.32em")), p !== D && (G = G.transition(p), R = R.transition(p), z = z.transition(p), A = A.transition(p), O = O.transition(p).attr("opacity", Dg).attr("transform", function(_) {
      return isFinite(_ = T(_)) ? d(_ + l) : this.getAttribute("transform");
    }), $.attr("opacity", Dg).attr("transform", function(_) {
      var I = this.parentNode.__axis;
      return d((I && isFinite(I = I(_)) ? I : T(_)) + l);
    })), O.remove(), G.attr("d", e === ol || e === Wu ? o ? "M" + h * o + "," + w + "H" + l + "V" + k + "H" + h * o : "M" + l + "," + w + "V" + k : o ? "M" + w + "," + h * o + "V" + l + "H" + k + "V" + h * o : "M" + w + "," + l + "H" + k), R.attr("opacity", 1).attr("transform", function(_) {
      return d(T(_) + l);
    }), z.attr(c + "2", h * s), A.attr(c, h * N).text(x), D.filter(v6).attr("fill", "none").attr("font-size", 10).attr("font-family", "sans-serif").attr("text-anchor", e === Wu ? "start" : e === ol ? "end" : "middle"), D.each(function() {
      this.__axis = T;
    });
  }
  return g.scale = function(p) {
    return arguments.length ? (t = p, g) : t;
  }, g.ticks = function() {
    return n = Array.from(arguments), g;
  }, g.tickArguments = function(p) {
    return arguments.length ? (n = p == null ? [] : Array.from(p), g) : n.slice();
  }, g.tickValues = function(p) {
    return arguments.length ? (i = p == null ? null : Array.from(p), g) : i && i.slice();
  }, g.tickFormat = function(p) {
    return arguments.length ? (r = p, g) : r;
  }, g.tickSize = function(p) {
    return arguments.length ? (s = o = +p, g) : s;
  }, g.tickSizeInner = function(p) {
    return arguments.length ? (s = +p, g) : s;
  }, g.tickSizeOuter = function(p) {
    return arguments.length ? (o = +p, g) : o;
  }, g.tickPadding = function(p) {
    return arguments.length ? (a = +p, g) : a;
  }, g.offset = function(p) {
    return arguments.length ? (l = +p, g) : l;
  }, g;
}
function w6(e) {
  return Dc(Uu, e);
}
function x6(e) {
  return Dc(Wu, e);
}
function S6(e) {
  return Dc(kf, e);
}
function A6(e) {
  return Dc(ol, e);
}
const _f = Math.PI, Nf = 2 * _f, eo = 1e-6, k6 = Nf - eo;
function Pm(e) {
  this._ += e[0];
  for (let t = 1, n = e.length; t < n; ++t)
    this._ += arguments[t] + e[t];
}
function _6(e) {
  let t = Math.floor(e);
  if (!(t >= 0)) throw new Error(`invalid digits: ${e}`);
  if (t > 15) return Pm;
  const n = 10 ** t;
  return function(i) {
    this._ += i[0];
    for (let r = 1, s = i.length; r < s; ++r)
      this._ += Math.round(arguments[r] * n) / n + i[r];
  };
}
class jd {
  constructor(t) {
    this._x0 = this._y0 = // start of current subpath
    this._x1 = this._y1 = null, this._ = "", this._append = t == null ? Pm : _6(t);
  }
  moveTo(t, n) {
    this._append`M${this._x0 = this._x1 = +t},${this._y0 = this._y1 = +n}`;
  }
  closePath() {
    this._x1 !== null && (this._x1 = this._x0, this._y1 = this._y0, this._append`Z`);
  }
  lineTo(t, n) {
    this._append`L${this._x1 = +t},${this._y1 = +n}`;
  }
  quadraticCurveTo(t, n, i, r) {
    this._append`Q${+t},${+n},${this._x1 = +i},${this._y1 = +r}`;
  }
  bezierCurveTo(t, n, i, r, s, o) {
    this._append`C${+t},${+n},${+i},${+r},${this._x1 = +s},${this._y1 = +o}`;
  }
  arcTo(t, n, i, r, s) {
    if (t = +t, n = +n, i = +i, r = +r, s = +s, s < 0) throw new Error(`negative radius: ${s}`);
    let o = this._x1, a = this._y1, l = i - t, h = r - n, c = o - t, d = a - n, g = c * c + d * d;
    if (this._x1 === null)
      this._append`M${this._x1 = t},${this._y1 = n}`;
    else if (g > eo) if (!(Math.abs(d * l - h * c) > eo) || !s)
      this._append`L${this._x1 = t},${this._y1 = n}`;
    else {
      let p = i - o, b = r - a, x = l * l + h * h, N = p * p + b * b, v = Math.sqrt(x), w = Math.sqrt(g), k = s * Math.tan((_f - Math.acos((x + g - N) / (2 * v * w))) / 2), T = k / w, D = k / v;
      Math.abs(T - 1) > eo && this._append`L${t + T * c},${n + T * d}`, this._append`A${s},${s},0,0,${+(d * p > c * b)},${this._x1 = t + D * l},${this._y1 = n + D * h}`;
    }
  }
  arc(t, n, i, r, s, o) {
    if (t = +t, n = +n, i = +i, o = !!o, i < 0) throw new Error(`negative radius: ${i}`);
    let a = i * Math.cos(r), l = i * Math.sin(r), h = t + a, c = n + l, d = 1 ^ o, g = o ? r - s : s - r;
    this._x1 === null ? this._append`M${h},${c}` : (Math.abs(this._x1 - h) > eo || Math.abs(this._y1 - c) > eo) && this._append`L${h},${c}`, i && (g < 0 && (g = g % Nf + Nf), g > k6 ? this._append`A${i},${i},0,1,${d},${t - a},${n - l}A${i},${i},0,1,${d},${this._x1 = h},${this._y1 = c}` : g > eo && this._append`A${i},${i},0,${+(g >= _f)},${d},${this._x1 = t + i * Math.cos(s)},${this._y1 = n + i * Math.sin(s)}`);
  }
  rect(t, n, i, r) {
    this._append`M${this._x0 = this._x1 = +t},${this._y0 = this._y1 = +n}h${i = +i}v${+r}h${-i}Z`;
  }
  toString() {
    return this._;
  }
}
function Lm() {
  return new jd();
}
Lm.prototype = jd.prototype;
function Xi(e) {
  return function() {
    return e;
  };
}
const jg = Math.abs, ni = Math.atan2, Qs = Math.cos, N6 = Math.max, Fh = Math.min, _r = Math.sin, Ir = Math.sqrt, bi = 1e-12, da = Math.PI, fc = da / 2, Cm = 2 * da;
function P6(e) {
  return e > 1 ? 0 : e < -1 ? da : Math.acos(e);
}
function Bg(e) {
  return e >= 1 ? fc : e <= -1 ? -fc : Math.asin(e);
}
function Tm(e) {
  let t = 3;
  return e.digits = function(n) {
    if (!arguments.length) return t;
    if (n == null)
      t = null;
    else {
      const i = Math.floor(n);
      if (!(i >= 0)) throw new RangeError(`invalid digits: ${n}`);
      t = i;
    }
    return e;
  }, () => new jd(t);
}
function L6(e) {
  return e.innerRadius;
}
function C6(e) {
  return e.outerRadius;
}
function T6(e) {
  return e.startAngle;
}
function I6(e) {
  return e.endAngle;
}
function E6(e) {
  return e && e.padAngle;
}
function O6(e, t, n, i, r, s, o, a) {
  var l = n - e, h = i - t, c = o - r, d = a - s, g = d * l - c * h;
  if (!(g * g < bi))
    return g = (c * (t - s) - d * (e - r)) / g, [e + g * l, t + g * h];
}
function Ou(e, t, n, i, r, s, o) {
  var a = e - n, l = t - i, h = (o ? s : -s) / Ir(a * a + l * l), c = h * l, d = -h * a, g = e + c, p = t + d, b = n + c, x = i + d, N = (g + b) / 2, v = (p + x) / 2, w = b - g, k = x - p, T = w * w + k * k, D = r - s, G = g * x - b * p, R = (k < 0 ? -1 : 1) * Ir(N6(0, D * D * T - G * G)), O = (G * k - w * R) / T, $ = (-G * w - k * R) / T, z = (G * k + w * R) / T, A = (-G * w + k * R) / T, _ = O - N, I = $ - v, M = z - N, st = A - v;
  return _ * _ + I * I > M * M + st * st && (O = z, $ = A), {
    cx: O,
    cy: $,
    x01: -c,
    y01: -d,
    x11: O * (r / D - 1),
    y11: $ * (r / D - 1)
  };
}
function F6() {
  var e = L6, t = C6, n = Xi(0), i = null, r = T6, s = I6, o = E6, a = null, l = Tm(h);
  function h() {
    var c, d, g = +e.apply(this, arguments), p = +t.apply(this, arguments), b = r.apply(this, arguments) - fc, x = s.apply(this, arguments) - fc, N = jg(x - b), v = x > b;
    if (a || (a = c = l()), p < g && (d = p, p = g, g = d), !(p > bi)) a.moveTo(0, 0);
    else if (N > Cm - bi)
      a.moveTo(p * Qs(b), p * _r(b)), a.arc(0, 0, p, b, x, !v), g > bi && (a.moveTo(g * Qs(x), g * _r(x)), a.arc(0, 0, g, x, b, v));
    else {
      var w = b, k = x, T = b, D = x, G = N, R = N, O = o.apply(this, arguments) / 2, $ = O > bi && (i ? +i.apply(this, arguments) : Ir(g * g + p * p)), z = Fh(jg(p - g) / 2, +n.apply(this, arguments)), A = z, _ = z, I, M;
      if ($ > bi) {
        var st = Bg($ / g * _r(O)), W = Bg($ / p * _r(O));
        (G -= st * 2) > bi ? (st *= v ? 1 : -1, T += st, D -= st) : (G = 0, T = D = (b + x) / 2), (R -= W * 2) > bi ? (W *= v ? 1 : -1, w += W, k -= W) : (R = 0, w = k = (b + x) / 2);
      }
      var U = p * Qs(w), Q = p * _r(w), Z = g * Qs(D), ct = g * _r(D);
      if (z > bi) {
        var St = p * Qs(k), P = p * _r(k), B = g * Qs(T), V = g * _r(T), J;
        if (N < da)
          if (J = O6(U, Q, B, V, St, P, Z, ct)) {
            var nt = U - J[0], gt = Q - J[1], yt = St - J[0], vt = P - J[1], Rt = 1 / _r(P6((nt * yt + gt * vt) / (Ir(nt * nt + gt * gt) * Ir(yt * yt + vt * vt))) / 2), Dt = Ir(J[0] * J[0] + J[1] * J[1]);
            A = Fh(z, (g - Dt) / (Rt - 1)), _ = Fh(z, (p - Dt) / (Rt + 1));
          } else
            A = _ = 0;
      }
      R > bi ? _ > bi ? (I = Ou(B, V, U, Q, p, _, v), M = Ou(St, P, Z, ct, p, _, v), a.moveTo(I.cx + I.x01, I.cy + I.y01), _ < z ? a.arc(I.cx, I.cy, _, ni(I.y01, I.x01), ni(M.y01, M.x01), !v) : (a.arc(I.cx, I.cy, _, ni(I.y01, I.x01), ni(I.y11, I.x11), !v), a.arc(0, 0, p, ni(I.cy + I.y11, I.cx + I.x11), ni(M.cy + M.y11, M.cx + M.x11), !v), a.arc(M.cx, M.cy, _, ni(M.y11, M.x11), ni(M.y01, M.x01), !v))) : (a.moveTo(U, Q), a.arc(0, 0, p, w, k, !v)) : a.moveTo(U, Q), !(g > bi) || !(G > bi) ? a.lineTo(Z, ct) : A > bi ? (I = Ou(Z, ct, St, P, g, -A, v), M = Ou(U, Q, B, V, g, -A, v), a.lineTo(I.cx + I.x01, I.cy + I.y01), A < z ? a.arc(I.cx, I.cy, A, ni(I.y01, I.x01), ni(M.y01, M.x01), !v) : (a.arc(I.cx, I.cy, A, ni(I.y01, I.x01), ni(I.y11, I.x11), !v), a.arc(0, 0, g, ni(I.cy + I.y11, I.cx + I.x11), ni(M.cy + M.y11, M.cx + M.x11), v), a.arc(M.cx, M.cy, A, ni(M.y11, M.x11), ni(M.y01, M.x01), !v))) : a.arc(0, 0, g, D, T, v);
    }
    if (a.closePath(), c) return a = null, c + "" || null;
  }
  return h.centroid = function() {
    var c = (+e.apply(this, arguments) + +t.apply(this, arguments)) / 2, d = (+r.apply(this, arguments) + +s.apply(this, arguments)) / 2 - da / 2;
    return [Qs(d) * c, _r(d) * c];
  }, h.innerRadius = function(c) {
    return arguments.length ? (e = typeof c == "function" ? c : Xi(+c), h) : e;
  }, h.outerRadius = function(c) {
    return arguments.length ? (t = typeof c == "function" ? c : Xi(+c), h) : t;
  }, h.cornerRadius = function(c) {
    return arguments.length ? (n = typeof c == "function" ? c : Xi(+c), h) : n;
  }, h.padRadius = function(c) {
    return arguments.length ? (i = c == null ? null : typeof c == "function" ? c : Xi(+c), h) : i;
  }, h.startAngle = function(c) {
    return arguments.length ? (r = typeof c == "function" ? c : Xi(+c), h) : r;
  }, h.endAngle = function(c) {
    return arguments.length ? (s = typeof c == "function" ? c : Xi(+c), h) : s;
  }, h.padAngle = function(c) {
    return arguments.length ? (o = typeof c == "function" ? c : Xi(+c), h) : o;
  }, h.context = function(c) {
    return arguments.length ? (a = c ?? null, h) : a;
  }, h;
}
const M6 = {
  draw(e, t) {
    const n = Ir(t / da);
    e.moveTo(n, 0), e.arc(0, 0, n, 0, Cm);
  }
}, R6 = {
  draw(e, t) {
    const n = Ir(t), i = -n / 2;
    e.rect(i, i, n, n);
  }
}, Mh = Ir(3), D6 = {
  draw(e, t) {
    const n = -Ir(t / (Mh * 3));
    e.moveTo(0, n * 2), e.lineTo(-Mh * n, -n), e.lineTo(Mh * n, -n), e.closePath();
  }
};
function j6(e, t) {
  let n = null, i = Tm(r);
  e = typeof e == "function" ? e : Xi(e || M6), t = typeof t == "function" ? t : Xi(t === void 0 ? 64 : +t);
  function r() {
    let s;
    if (n || (n = s = i()), e.apply(this, arguments).draw(n, +t.apply(this, arguments)), s) return n = null, s + "" || null;
  }
  return r.type = function(s) {
    return arguments.length ? (e = typeof s == "function" ? s : Xi(s), r) : e;
  }, r.size = function(s) {
    return arguments.length ? (t = typeof s == "function" ? s : Xi(+s), r) : t;
  }, r.context = function(s) {
    return arguments.length ? (n = s ?? null, r) : n;
  }, r;
}
const Re = {
  precisionFixed: Am,
  format: Dd,
  select: cS,
  selectAll: hS,
  scaleLinear: _m,
  scaleSequential: Nm,
  axisTop: w6,
  axisBottom: S6,
  axisRight: x6,
  axisLeft: A6,
  symbol: j6,
  path: Lm,
  arc: F6,
  symbolTriangle: D6,
  symbolSquare: R6
};
function Jo(e) {
  return typeof e == "string" && e.length === 6 && !isNaN(+("0x" + e.replace("#", "")));
}
class B6 {
  constructor({
    elementID: t,
    env: n = "production",
    main: i = !0,
    units: r = "decimal",
    decimalPlaces: s = 2,
    fractionRoundTo: o = 0,
    saw: a = null,
    app: l = !1,
    embed: h = !1,
    height: c = 0,
    width: d = 0,
    flipY: g = !1,
    flipX: p = !1,
    colors: b = {
      partA: "#1d9bc4",
      partB: "#127da1",
      partHover: "#29c778",
      partSelected: "#1bc319",
      stock: "#ffd166",
      text: "#ffffff"
    },
    options: x = {
      disableClick: !1,
      enableStretch: !0
    },
    vueComponent: N
  }) {
    H(this, "env");
    H(this, "main");
    //is this the main vis or not
    H(this, "units", "decimal");
    H(this, "decimalPlaces");
    H(this, "fractionRoundTo");
    H(this, "formatNumber", (t) => Yt(
      t,
      this.units,
      this.decimalPlaces ?? 2,
      !1,
      this.fractionRoundTo ?? 0
    ).toString());
    H(this, "saw");
    H(this, "stockType");
    H(this, "numUniqueShapes");
    H(this, "app");
    H(this, "embed");
    H(this, "height");
    H(this, "width");
    H(this, "device");
    H(this, "vueComponent");
    H(this, "elWidth");
    H(this, "elHeight");
    H(this, "w");
    H(this, "h");
    H(this, "padding");
    H(this, "mobileBreakpoint");
    //scales
    H(this, "xScale", Re.scaleLinear());
    H(this, "yScale", Re.scaleLinear());
    H(this, "yPositionScale", Re.scaleLinear());
    H(this, "xPositionScale", Re.scaleLinear());
    H(this, "yAxisScale", Re.scaleLinear());
    H(this, "measurementScale", Re.scaleLinear());
    H(this, "xAxis");
    H(this, "yAxis");
    H(this, "stretched");
    H(this, "shapeXAxis");
    H(this, "shapeYAxis");
    H(this, "cutMeasurementXAxes");
    H(this, "cutMeasurementYAxes");
    H(this, "axisSpacing");
    H(this, "flipY");
    H(this, "flipX");
    H(this, "colors");
    H(this, "options");
    H(this, "moveMode");
    H(this, "moveRotation");
    H(this, "moving");
    H(this, "shape");
    H(this, "shapeColorScale");
    H(this, "scoreColorScale");
    H(this, "hasTouch");
    H(this, "highlightguillotine");
    H(this, "debug", "");
    //groups | guillotine | positions
    H(this, "elementID");
    //the id of the element to draw the vis in
    H(this, "el");
    H(this, "htmlEl");
    H(this, "svgCanvas");
    H(this, "axisGroup");
    H(this, "stockGroup");
    H(this, "stockWrappers");
    H(this, "stock");
    H(this, "shapeGroup");
    H(this, "shapeWrappers");
    H(this, "shapes");
    H(this, "shapeIDText");
    H(this, "shapeNameText");
    H(this, "shapeLengthText");
    H(this, "shapeWidthText");
    H(this, "groupGroup");
    H(this, "groups");
    H(this, "bandingGroup");
    H(this, "bandingWrappers");
    H(this, "banding");
    H(this, "segmentGroup");
    H(this, "segments");
    H(this, "segment");
    H(this, "positionGroup");
    H(this, "position");
    H(this, "dotGroup");
    H(this, "placementPositionGroup");
    H(this, "dot");
    H(this, "cutGroup");
    H(this, "cuts");
    H(this, "cut");
    if (!t) throw new Error("elementID is required");
    if (this.el = Re.select(t), this.el === null) return;
    const v = this.el.node();
    if (v !== null) {
      this.htmlEl = v, this.vueComponent = N, this.env = Ge.call(this.vueComponent, ["env"]) === "development" ? "development" : "production", this.debug = this.env === "development" ? "groups" : "", this.app = l || !1, this.embed = h || !1, this.height = c, this.width = d, this.device = l ? "app" : "desktop", this.stretched = !1, this.elWidth = this.htmlEl.offsetWidth, this.elHeight = this.htmlEl.offsetHeight, this.w = 0, this.h = 0, this.padding = 0, this.mobileBreakpoint = 450, this.main = i, this.saw = a, this.cutMeasurementXAxes = [], this.cutMeasurementYAxes = [], this.axisSpacing = 16, this.flipY = g, this.flipX = p, b = {
        ...b
      };
      for (const [w, k] of Object.entries(b))
        k && (b[w] = k.replace("#", ""));
      this.colors = {
        partA: Jo(b == null ? void 0 : b.partA) ? Pn("#" + b.partA) : Pn("#1d9bc4"),
        partB: Jo(b == null ? void 0 : b.partB) ? Pn("#" + b.partB) : Pn("#127da1"),
        partHover: Jo(b == null ? void 0 : b.partHover) ? Pn("#" + b.partHover) : Pn("#29c778"),
        partSelected: Jo(b == null ? void 0 : b.partSelected) ? Pn("#" + b.partSelected) : Pn("#1bc319"),
        stock: Jo(b == null ? void 0 : b.stock) ? Pn("#" + b.stock) : Pn("#ffd166"),
        text: Jo(b == null ? void 0 : b.text) ? Pn("#" + b.text) : Pn("#ffffff")
      }, this.shapeColorScale = Re.scaleSequential([
        this.colors.partA,
        this.colors.partB
      ]), this.env = n, this.moveMode = !1, this.moving = !1, this.moveRotation = !1, this.units = r, this.decimalPlaces = s, this.fractionRoundTo = o, this.hasTouch = !1, this.options = x, this.init();
    }
  }
  /**
      * sets up the various wrappers - only needs to be called once
      * the z index is set by the order drawn
      */
  init() {
    if (!this.el) return !1;
    if ((this.decimalPlaces === null || this.decimalPlaces === void 0 || isNaN(this.decimalPlaces)) && (this.decimalPlaces = 2), (this.fractionRoundTo === null || this.fractionRoundTo === void 0 || isNaN(this.fractionRoundTo)) && (this.fractionRoundTo = 0), !this.svgCanvas) {
      if (this.htmlEl.querySelector("svg") === null) {
        const n = this.el.append("svg").attr("class", "vis");
        if (n === null) return;
        n.append("defs").append("pattern").attr("patternUnits", "userSpaceOnUse").attr("patternTransform", "rotate(45)").attr("id", "stripes").attr("width", 6).attr("height", 6).append("line").attr("x1", 0).attr("y1", 0).attr("x2", 0).attr("y2", 6).attr("stroke", "#a1a1a1").attr("stroke-width", "1"), n.append("defs").append("pattern").attr("patternUnits", "userSpaceOnUse").attr("patternTransform", "rotate(90)").attr("id", "grain-l").attr("width", 6).attr("height", 6).append("line").attr("x1", 0).attr("y1", 0).attr("x2", 0).attr("y2", 6).attr("stroke", "#a1a1a1").attr("stroke-width", "1"), n.append("defs").append("pattern").attr("patternUnits", "userSpaceOnUse").attr("id", "grain-w").attr("width", 6).attr("height", 6).append("line").attr("x1", 0).attr("y1", 0).attr("x2", 0).attr("y2", 6).attr("stroke", "#a1a1a1").attr("stroke-width", "1"), this.svgCanvas = n;
      }
      this.axisGroup = this.svgCanvas.append("g").attr("class", "axis-group"), this.stockGroup = this.svgCanvas.append("g").attr("class", "stock-group"), this.shapeGroup = this.svgCanvas.append("g").attr("class", "shapes"), this.bandingGroup = this.svgCanvas.append("g").attr("class", "banding-group"), this.segmentGroup = this.svgCanvas.append("g").attr("class", "segments").attr("display", "none"), this.groupGroup = this.svgCanvas.append("g").attr("class", "groups").attr("display", "none"), this.positionGroup = this.svgCanvas.append("g").attr("class", "positions"), this.dotGroup = this.svgCanvas.append("g").attr("class", "dots"), this.env === "development" && (this.placementPositionGroup = this.svgCanvas.append("g").attr("class", "placements")), this.cutGroup = this.svgCanvas.append("g").attr("class", "cuts");
    }
    this.elWidth > 0 && this.updateSize(!0), this.hasTouch = "ontouchstart" in document.documentElement || navigator.maxTouchPoints > 0;
  }
  updateUnits(t, n, i) {
    t && (this.units = t), n && (this.decimalPlaces = n), i && (this.fractionRoundTo = i), this.refreshShapes(), this.refreshStock();
  }
  trimNameToFit(t, n) {
    function i(r, s, o) {
      const a = o[s], l = Re.select(a);
      l.text(r.name);
      let h = l.text();
      const c = l.node();
      if (!c) return;
      let d = c.getComputedTextLength();
      const g = this.getWidthAttribute(r) - 20;
      for (; d > g && h.length > 0; )
        h = h.slice(0, -1), l.text(h.length ? h + "..." : ""), d = l.node().getComputedTextLength();
    }
    t.each(i.bind(n));
  }
  getShapeColor(t) {
    var n;
    if (this.env === "development")
      switch (this.debug) {
        case "guillotine":
          if (t.guillotineData.firstShape)
            return Pn(252, 3, 182);
          if (t.addedAsGroup)
            return Pn(43, 156, 16);
          if (typeof t.guillotineData.myPhase == "number") {
            const i = [0, 115, 255], r = [176, 255, 231];
            return `rgb(${i.map((o, a) => Math.round(o + t.guillotineData.myPhase / 5 * (r[a] - o))).join(",")})`;
          }
          break;
        case "groups":
          if (t.addedAsGroup !== !1)
            return Pn(43, 156, 16);
          break;
        case "priorityShapes":
          if (t != null && t.priority && ((n = t.priority) != null && n[t.stock.parentID]))
            return Pn(139, 171, 46);
          break;
        case "score":
          return this.scoreColorScale(t.bestScore.total);
      }
    return this.shapeColorScale(t.parentID - 1);
  }
  setDevice() {
    if (!(!this.htmlEl || this.htmlEl.style.display === "none") && this.htmlEl.offsetWidth) {
      if (this.elWidth = this.htmlEl.offsetWidth, this.elHeight = this.htmlEl.offsetHeight, this.elWidth === 0) return !1;
      this.main ? this.elWidth <= this.mobileBreakpoint || this.app ? (this.device = "mobile", this.padding = 0) : (this.device = "desktop", this.padding = 50) : this.padding = 0, this.w = this.elWidth;
    }
  }
  //find the largest dimensions of all the stock (not just the active one)
  findLargestStockDimensions() {
    const t = Ge.call(this.vueComponent, ["stockList"]).filter((r) => r.used);
    if (!(t != null && t.length)) return [null, null];
    const n = t.reduce((r, s) => r.l > s.l ? r : s), i = t.reduce((r, s) => r.w > s.w ? r : s);
    return [n, i];
  }
  debounce(t, n, i = !1) {
    let r;
    return (...s) => new Promise((o) => {
      const a = () => {
        r = null, i || o(t.apply(this, s));
      };
      clearTimeout(r), i && !r && o(t.apply(this, s)), r = setTimeout(a, n);
    });
  }
  updateSize(t = !1) {
    return this.debounce(this._updateSize.bind(this), 10, t)();
  }
  requiresStretch(t, n = null) {
    return t ? (n === null && (n = t.w / t.l), n < 0.15) : !1;
  }
  setAspectRatio(t) {
    if (t) {
      this.w = this.elWidth;
      const n = t.w / t.l;
      this.xScale.domain([0, t.l]).range([this.padding, this.w - this.padding]), this.requiresStretch(t, n) && this.options.enableStretch ? (this.h = this.htmlEl.clientWidth * 0.15 + this.padding * 2, this.stretched = !0) : (this.h = this.xScale(t.getShortSide()) + this.padding, this.stretched = !1), this.yScale.domain([0, t.w]).range([this.padding, this.h - this.padding]), this.yAxisScale.domain(this.flipY ? [0, t.w] : [t.w, 0]).range([this.padding, this.h - this.padding]), this.yPositionScale.domain([0, t.w]).range(this.flipY ? [this.padding, this.h - this.padding] : [this.h - this.padding, this.padding]), n > 2 && (this.w = this.htmlEl.clientWidth / n + this.padding * 2, this.xScale.domain([0, t.l]).range([this.padding, this.w - this.padding]), this.h = this.xScale(t.getShortSide()) + this.padding), this.xPositionScale.domain([0, t.l]).range(this.flipX ? [this.w - this.padding, this.padding] : [this.padding, this.w - this.padding]), this.measurementScale.domain([0, t.l]).range([0, this.w - this.padding * 2]), this.w > 0 && this.h > 0 && (n > 2 ? this.el.style("width", this.w + "px") : this.el.style("width", ""), this.el.style("height", this.h + "px"));
    }
  }
  _updateSize() {
    if (!this.htmlEl || this.htmlEl.style.display === "none") return;
    this.vueComponent && "suppressResizeObserver" in this.vueComponent && (this.vueComponent.suppressResizeObserver = !0);
    const t = Ge.call(this.vueComponent, ["stockList"]), n = Ge.call(this.vueComponent, ["shapeList"]);
    if (!(t != null && t.length) || !(n != null && n.length)) return !1;
    this.setDevice(), this.refreshStock(), this.refreshShapes(), this.env === "development" && this.refreshPlacementPositions();
  }
  refreshCuts() {
    const t = Ge.call(this.vueComponent, ["activeCuts"]);
    this.resetSegments(), this.initCuts(t);
  }
  refreshStock() {
    const t = Ge.call(this.vueComponent, ["stockList"]);
    if (!(t != null && t.length)) return !1;
    const n = Ge.call(this.vueComponent, ["activeStock"]);
    this.initStock(n), this.refreshCuts();
    const i = Ge.call(this.vueComponent, ["activeSegments"]);
    this.initSegments(i), this.resetPositions(), typeof this.vueComponent.toggleSegments == "function" && this.vueComponent.toggleSegments(!1);
  }
  refreshShapes() {
    const t = Ge.call(this.vueComponent, ["shapeList"]);
    if (!(t != null && t.length)) return !1;
    this.resetPositions();
    const n = Ge.call(this.vueComponent, ["activeShapes"]);
    this.initShapes(n, t);
  }
  refreshPlacementPositions() {
    const t = Ge.call(this.vueComponent, ["placementPositions"]);
    if (!(t != null && t.length)) return !1;
    this.resetPlacementPositions();
    const n = t.filter((i) => i.stockID === Ge.call(this.vueComponent, ["activeStock"]).id);
    this.initPlacementPositions(n);
  }
  recreateUerGroups(t) {
    t.filter((r) => r.inUserGroup);
    const n = [];
    for (let r = 0; r < t.length; r++) {
      const o = t[r].addedAsGroup, a = t.filter((l) => l.addedAsGroup === o);
      n.push(a), r += a.length;
    }
    const i = [];
    n.forEach((r) => {
      const s = Math.min(...r.map((c) => c.x)), o = Math.min(...r.map((c) => c.y)), a = Math.max(...r.map((c) => c.x + c.l)) - s, l = Math.max(...r.map((c) => c.y + c.w)) - o, h = {
        x: s,
        y: o,
        l: a,
        w: l,
        shapes: r
      };
      i.push(h);
    }), this.initGroups(i);
  }
  //init or update the stock
  initStock(t) {
    if (this.resetStock(), this.setAspectRatio(t), !t || !(t != null && t.w) || !(t != null && t.l) || !this.elWidth)
      return !1;
    this.stockType = t.type;
    let n;
    if (typeof t == "object" && (n = [t]), this.device === "desktop" && this.main) {
      this.xAxis = this.axisGroup.append("g").attr("transform", `translate(0, ${this.padding})`).attr("class", "axis stock x").call(Re.axisTop(this.xScale).ticks(5).tickSize(5)).selectAll("text").attr("dy", -5);
      const i = this.requiresStretch(t);
      (!i || i && this.stretched) && (this.yAxis = this.axisGroup.append("g").attr(
        "transform",
        `translate(${this.w - this.padding}, 0)`
      ).attr("class", "axis stock y").call(Re.axisRight(this.yAxisScale).ticks(5).tickSize(5)).selectAll("text").attr("dx", 5));
    }
    this.stockGroup.data(n).attr(
      "transform",
      () => `translate(${this.padding},${this.padding})`
    ), this.stockGroup.append("rect").attr("class", "background stock").style("fill", this.colors.stock).attr("width", (i) => this.getWidthAttribute(i)).attr("height", (i) => this.getHeightAttribute(i)).attr("x", (i) => {
      i.x = 0;
      const r = i.x;
      i.x = 0;
      const s = this.getRectangleCoordinate(i, "x") - this.padding;
      return i.x = r, s;
    }).attr("y", (i) => {
      i.y = 0;
      const r = i.y;
      i.y = 0;
      const s = this.getRectangleCoordinate(i, "y") - this.padding;
      return i.y = r, s;
    }), this.stock = this.stockGroup.append("rect").attr("width", (i) => this.getWidthAttribute(i)).attr("height", (i) => this.getHeightAttribute(i)).attr(
      "x",
      (i) => this.getRectangleCoordinate(i, "x") - this.padding
    ).attr(
      "y",
      (i) => this.getRectangleCoordinate(i, "y") - this.padding
    ).attr("class", "stock-pattern").style("fill", (i) => i != null && i.grain ? `url(#grain-${i.grain.toLowerCase()})` : "url(#stripes)");
  }
  getWidthAttribute(t) {
    return this.xScale(t.l) - this.padding;
  }
  getHeightAttribute(t) {
    return this.yScale(t.w) - this.padding;
  }
  //init or update the shapes
  initShapes(t, n) {
    var i, r, s;
    if (this.resetShapes(), !(!t || !t.length || !this.elWidth)) {
      if (this.numUniqueShapes = n.filter((o) => !o.duplicate).length, this.shapeColorScale.domain([0, this.numUniqueShapes]), (i = this == null ? void 0 : this.vueComponent) != null && i.gs) {
        Je.call(this.vueComponent, ["shapeColors"], {});
        for (let o = t.length; o--; ) {
          const a = t[o];
          a.parentID && Ge.call(this.vueComponent, ["shapeColors", a.parentID]) || a.parentID && Je.call(this.vueComponent, ["shapeColors", a.parentID], ha(this.shapeColorScale(parseInt(a.parentID) - 1)).formatHex());
        }
      }
      if (this.env === "development") {
        let o = 1 / 0, a = -1 / 0;
        for (const c of t) {
          const d = (r = c == null ? void 0 : c.bestScore) == null ? void 0 : r.total;
          if (d !== 0 && d !== null && d !== void 0) {
            o = d, a = d;
            break;
          }
        }
        const l = t.reduce((c, d) => {
          var p;
          const g = (p = d == null ? void 0 : d.bestScore) == null ? void 0 : p.total;
          return g === 0 || g === null || g === void 0 ? c : g < c ? g : c;
        }, o), h = t.reduce((c, d) => {
          var p;
          const g = (p = d == null ? void 0 : d.bestScore) == null ? void 0 : p.total;
          return g == null ? c : g > c ? g : c;
        }, a);
        this.scoreColorScale = Re.scaleSequential([Pn(251, 224, 255), Pn(122, 0, 138)]).domain([l, h]);
      }
      if (!t || !t.length || (this.shapeWrappers = this.shapeGroup.selectAll("g").data(t).join("g").attr("class", "shape-group"), !this.shapeWrappers.size())) return !1;
      if (this.shapes = this.shapeWrappers.append("rect").attr("class", "shape").attr("fill", (o) => this.getShapeColor(o)).attr("stroke-width", () => this.env === "development" ? 3 : 0).attr("width", (o) => this.getWidthAttribute(o)).attr("height", (o) => this.getHeightAttribute(o)), this.main) {
        const o = [];
        t.forEach((a) => {
          if (a != null && a._banding)
            for (const [l, h] of Object.entries(a._banding)) {
              if (!h || ["a", "b", "c", "d"].includes(l)) continue;
              let c = l;
              if (a.rot)
                switch (l) {
                  case "x1":
                    c = "y1";
                    break;
                  case "x2":
                    c = "y2";
                    break;
                  case "y1":
                    c = "x2";
                    break;
                  case "y2":
                    c = "x1";
                    break;
                }
              switch (c) {
                case "x1":
                  o.push({
                    x1: a.x,
                    x2: a.x,
                    y1: a.y,
                    y2: a.y + a.w,
                    type: "x1"
                  });
                  break;
                case "x2":
                  o.push({
                    x1: a.x + a.l,
                    x2: a.x + a.l,
                    y1: a.y,
                    y2: a.y + a.w,
                    type: "x2"
                  });
                  break;
                case "y1":
                  o.push({
                    x1: a.x,
                    x2: a.x + a.l,
                    y1: a.y,
                    y2: a.y,
                    type: "y1"
                  });
                  break;
                case "y2":
                  o.push({
                    x1: a.x,
                    x2: a.x + a.l,
                    y1: a.y + a.w,
                    y2: a.y + a.w,
                    type: "y2"
                  });
                  break;
              }
            }
        }), this.bandingWrappers = this.bandingGroup.selectAll("g").data(o).join("line").attr("class", "banding").attr(
          "x1",
          (a) => this.xPositionScale(a.x1) + this.getBandingAdjustment(a.type, "x")
        ).attr(
          "x2",
          (a) => this.xPositionScale(a.x2) + this.getBandingAdjustment(a.type, "x")
        ).attr(
          "y1",
          (a) => this.yPositionScale(a.y1) + this.getBandingAdjustment(a.type, "y")
        ).attr(
          "y2",
          (a) => this.yPositionScale(a.y2) + this.getBandingAdjustment(a.type, "y")
        ).attr("stroke-width", 2).attr("stroke", "white"), this.shapeIDText = this.shapeWrappers.append("text").attr("class", "shape-text id").text((a) => {
          var l, h;
          if (this.env === "development")
            switch (this.debug) {
              case "guillotine": {
                const c = a.guillotineData.myStripDirection, d = a.addedAsGroup;
                let g = "";
                return c === "l" ? g = `→ ${a.parentID}` : c === "w" && (g = `↑ ${a.parentID}`), (h = a == null ? void 0 : a.priotity) != null && h[(l = a == null ? void 0 : a.stock) == null ? void 0 : l.parentID] && (g += "P"), d && (g += "G"), g.length ? g : this.shapeNameText;
              }
              case "groups":
                {
                  const c = a.addedAsGroup;
                  if (c) return c.split(".")[0].toUpperCase();
                }
                break;
              case "positions":
                return a.id;
            }
          return a.parentID ? a.parentID : a.getParentID();
        }).classed("hidden", (a, l, h) => {
          const c = h[l].getBBox();
          return c.width >= this.measurementScale(a.l) || c.height >= this.yScale(a.w) - this.padding;
        }).attr("dominant-baseline", "middle").attr("fill", this.colors.text), this.shapeNameText = this.shapeWrappers.append("text").attr("class", "shape-text name").text((a) => !(a != null && a.name) || typeof (a == null ? void 0 : a.name) != "string" ? null : a.name.toUpperCase().trim()).call(this.trimNameToFit, this).classed("hidden", (a, l, h) => h[l].getBBox().width >= this.measurementScale(a.l) || this.measurementScale(a.w) < 40).attr("dominant-baseline", "middle").attr("fill", this.colors.text), this.shapeLengthText = this.shapeWrappers.append("text").attr("class", "shape-text length").text((a) => this.debug === "guillotine" ? "" : Yt(
          a.l,
          this.units,
          this.decimalPlaces,
          !1,
          this.fractionRoundTo
        )).classed("hidden", (a, l, h) => {
          var d;
          return this.app ? this.measurementScale(a.l) < 50 || this.measurementScale(a.w) < 50 : ((d = a == null ? void 0 : a.stock) == null ? void 0 : d.type) === "linear" ? !1 : h[l].getBBox().width >= this.measurementScale(a.l) || this.measurementScale(a.w) < 30;
        }).attr("dominant-baseline", "middle").attr("fill", this.colors.text), this.shapeWidthText = this.shapeWrappers.append("text").attr("class", "shape-text width").text((a) => this.debug === "guillotine" ? "" : Yt(
          a.w,
          this.units,
          this.decimalPlaces,
          !1,
          this.fractionRoundTo
        )).classed("hidden", (a, l, h) => {
          if (this.app)
            return this.measurementScale(a.l) < 50 || this.measurementScale(a.w) < 50;
          const c = h[l].getBBox();
          return this.measurementScale(a.l) < 30 || c.height >= this.measurementScale(a.w);
        }).attr("dominant-baseline", "middle").attr("fill", this.colors.text);
      }
      (this.main || this.app) && !((s = this == null ? void 0 : this.options) != null && s.disableClick) && (this.shapes.on("mousedown", (o, a) => {
        var l, h, c, d, g;
        if (this.moving) return !1;
        if (this.env === "development") {
          if (console.clear(), a) {
            let p = ["id", "placementOrder", "priority", "addedAsGroup"];
            this.debug === "guillotine" ? p = [
              "id",
              "placementOrder",
              "priority",
              "guillotineData.myPhase",
              "guillotineData.myStripDirection",
              "guillotineData.myStripParent",
              "guillotineData.firstShape",
              "addedAsGroup"
            ] : this.debug === "groups" && (p = [
              "id",
              "addedAsGroup"
            ]), console.table(p.reduce((b, x) => {
              const N = qg(a, x);
              return b[x] = Array.isArray(N) ? N.join(", ") : N, b;
            }, {}));
          }
          if (this.debug === "guillotine") {
            this.shapeWrappers.selectAll(".highlight-a").classed("highlight-a", !1), this.shapeWrappers.selectAll(".highlight-b").classed("highlight-b", !1), this.shapeWrappers.selectAll(".highlight-c").classed("highlight-c", !1);
            const p = (l = a.guillotineData) == null ? void 0 : l.myStripParent, b = (c = (h = t.find((x) => x.id === p)) == null ? void 0 : h.guillotineData) == null ? void 0 : c.myStripParent;
            p && this.shapeWrappers.filter((v) => v.id === p || v.addedAsGroup === p).select("rect").classed("highlight-a", !0), b && this.shapeWrappers.filter((v) => v.id === b || v.addedAsGroup === p).select("rect").classed("highlight-b", !0);
          }
        }
        if (this.app || this.embed) {
          const p = {
            name: a.name,
            id: a.id,
            x: a.x,
            y: a.y,
            l: a.l,
            w: a.w,
            banding: a != null && a.banding && typeof a.banding == "object" ? a.banding : null,
            rot: a.rot,
            stock: (d = a == null ? void 0 : a.stock) == null ? void 0 : d.id,
            color: (g = this.getShapeColor(a)) == null ? void 0 : g.toString(),
            notes: a == null ? void 0 : a.notes
          }, b = new CustomEvent("partClick", {
            detail: p
          });
          if (this.env === "development" && console.log(p), this.htmlEl.dispatchEvent(b), this.app) return !1;
        }
        if (this.device === "desktop" && (this.resetCutMeasurementAxes(), this.addShapeAxes(a)), this.moveMode) {
          const p = aa.call(this.vueComponent, "partsBin");
          p && p.addToPartBin(a);
        } else
          this.findShape(a.id);
      }), !this.app && !this.hasTouch && this.shapes.on(
        "mouseover",
        (o) => {
          this != null && this.moveMode && this.moving || (Re.select(o.target).classed("hover", !0), Re.select(o.target).classed("selected") || Re.select(o.target).style(
            "fill",
            this.colors.partHover.toString()
          ));
        },
        {
          passive: !0
        }
      ).on(
        "mouseout",
        (o, a) => {
          var l;
          Re.select(o.target).classed("hover", !1), Re.select(o.target).classed("selected") || Re.select(o.target).style(
            "fill",
            (l = this.getShapeColor(a)) == null ? void 0 : l.toString()
          );
        },
        {
          passive: !0
        }
      )), this.setShapePosition();
    }
  }
  findShapeElement(t) {
    const n = this.shapeWrappers.filter((i) => i.id === t);
    return n.empty() ? null : n.node();
  }
  findShape(t) {
    const n = this.findShapeElement(t), i = Ge.call(this.vueComponent, ["shapeList"]).find((r) => r.id === t);
    n && this.selectShape(n, i);
  }
  selectShape(t, n) {
    Je.call(this.vueComponent, ["examineShape"], n), this.shapes.classed("selected", !1), this.shapes.style("fill", (r) => this.getShapeColor(r));
    const i = Re.select(t).select("rect");
    i && (i.classed("selected", !0), i.style("fill", this.colors.partSelected.toString()));
  }
  /**
      * update SHAPE visibility - used for replay
      * @param {Number} number
      */
  updateShapeVisibility(t) {
    var n;
    (n = this == null ? void 0 : this.shapeWrappers) == null || n.style("visibility", (i) => (i == null ? void 0 : i.placementOrder) >= t ? "hidden" : "visible");
  }
  isCutComplete(t, n, i) {
    return t.guillotineData.parentSegmentID === n && i && t.guillotineData.segmentCutOrder < i;
  }
  isCutInsideSegment(t, n) {
    var i;
    return ((i = t.guillotineData) == null ? void 0 : i.parentSegmentID) !== null && !(t != null && t.isTrim) ? t.guillotineData.parentSegmentID === n : !1;
  }
  //update CUT visibility
  updateCutVisibility(t, n = null, i = "") {
    var h, c, d, g, p, b, x, N, v;
    if (n === null || t == null || this != null && this.cuts.empty()) return;
    this.resetShapeAxes(), this.resetCutMeasurementAxes(), Re.select(this.cuts.nodes()[n].parentNode).raise();
    const r = (h = t.guillotineData) == null ? void 0 : h.parentSegmentID, s = this.getHalfBladeWidth(t.stock), o = t.dimension === "l" ? "y" : "x", a = (c = t == null ? void 0 : t.stock) == null ? void 0 : c.trim, l = i === "ptx" ? "ptxOrder" : "order";
    if ((((d = t == null ? void 0 : t.stock) == null ? void 0 : d.cutType) === "guillotine" || ((g = t == null ? void 0 : t.stock) == null ? void 0 : g.cutType) === "beam") && r !== null && typeof r < "u") {
      if (this.cuts.style("visibility", (w) => typeof t.guillotineData[l] == "number" && w.guillotineData[l] <= t.guillotineData[l] || !i && w.guillotineData.parentSegmentID === r ? "visible" : "hidden"), this.cuts.classed("highlight", (w) => t.stock.cutType === "guillotine" && w.isTrim ? w.type === t.type : w.guillotineData[l] === t.guillotineData[l]), this.cuts.classed("ptx-dummy", (w) => w.guillotineData.ptxDummyCut), !i) {
        const w = (p = t == null ? void 0 : t.guillotineData) == null ? void 0 : p.segmentCutOrder;
        if (w == null)
          return;
        this.cuts.classed("completed", (R) => this.isCutComplete(R, r, w)), this.cuts.classed("inside-segment", (R) => this.isCutInsideSegment(R, r));
        let k, T;
        const D = this.getCutSegments(t);
        if (D === !1) return;
        const G = (x = D == null ? void 0 : D.siblings) == null ? void 0 : x[(b = D.main) != null && b.hasBeamTrim ? w - 1 : w];
        G && ((t == null ? void 0 : t.dimension) === "l" ? k = [
          [
            G.y,
            G.y + G.w
          ],
          [
            t.y1 + s,
            (D == null ? void 0 : D.main.y) + (D == null ? void 0 : D.main.w)
          ]
        ] : (t == null ? void 0 : t.dimension) === "w" && (k = [
          [
            G.x,
            G.x + G.l
          ],
          [
            t.x1 + s,
            (D == null ? void 0 : D.main.x) + (D == null ? void 0 : D.main.l)
          ]
        ]), (t == null ? void 0 : t.dimension) === "l" ? T = [(N = t == null ? void 0 : t.distances) == null ? void 0 : N.bottom, t == null ? void 0 : t.distances.top] : (t == null ? void 0 : t.dimension) === "w" && (T = [t == null ? void 0 : t.distances.left, (v = t == null ? void 0 : t.distances) == null ? void 0 : v.right]), this.device === "desktop" && !t.isTrim && this.addCutMeasurementAxes(k, T, o));
      }
    } else {
      this.cuts.style("visibility", (k, T) => T <= n ? "visible" : "hidden");
      let w;
      if ((t == null ? void 0 : t.dimension) === "l" ? w = [
        [0 + (a.y1 ?? 0), t.y1 - s],
        [
          t.y1 + s,
          t.stock.w - (a != null && a.y2 ? a.y2 : 0)
        ]
      ] : (t == null ? void 0 : t.dimension) === "w" && (w = [
        [0 + (a.x1 ?? 0), t.x1 - s],
        [
          t.x1 + s,
          t.stock.l - (a != null && a.x2 ? a.x2 : 0)
        ]
      ]), w != null && w.length) {
        const k = [
          w[0][1] - w[0][0],
          w[1][1] - w[1][0]
        ];
        this.device === "desktop" && !t.isTrim && this.addCutMeasurementAxes(w, k, o);
      }
      this.cuts.classed(
        "highlight",
        (k, T) => T === n
      );
    }
    this.cuts.attr("stroke-width", (w, k) => {
      var G;
      let T = Math.ceil(this.measurementScale(this.getBladeWidth(w.stock)));
      const D = (G = t == null ? void 0 : t.guillotineData) == null ? void 0 : G.segmentCutOrder;
      return (this.isCutComplete(w, r, D) || this.isCutInsideSegment(w, r)) && (T += 1), k === n && Math.ceil(this.measurementScale(this.getBladeWidth(w.stock))) < 5 && (T = 5), T;
    });
  }
  //highlight a specific cut (by order or index), segments and related measurements
  showCut(t, n = null, i = "") {
    var h;
    if (n === null) return !1;
    if (this.updateCutVisibility(t, n, i), i === "ptx") {
      this.resetSegments();
      return;
    }
    const r = this.getCutSegments(t);
    if (r === !1) return;
    const { main: s, siblings: o } = r;
    if (!((h = t == null ? void 0 : t.guillotineData) != null && h.parentSegmentID))
      return this.initSegments([s]);
    const a = o == null ? void 0 : o.length;
    let l = [];
    if (a) {
      for (let d = a; d--; )
        o[d] && (o[d].completed = !1);
      if (t.guillotineData.segmentCutOrder === void 0 || t.guillotineData.segmentCutOrder === null)
        return;
      const c = t.guillotineData.segmentCutOrder;
      for (let d = 0; d < a; d++)
        d < c && (o[d].completed = !0);
      l.push(...o), l = l.filter((d) => d);
    }
    l.length && (this.resetSegments(), this.initSegments(l));
  }
  /**
      * toggle the visibility of the shapes
      * @param {Boolean} show
      */
  toggleShapes(t = !1) {
    t ? (this.shapeGroup.attr("display", "block"), this.bandingGroup.attr("display", "block")) : (this.shapeGroup.attr("display", "none"), this.bandingGroup.attr("display", "none"));
  }
  /**
      * add measurements to an axis
      * @param {Array} measurements array of arrays
      * @param {Array} values array of values
      * @param {String} axis x | y
      */
  addCutMeasurementAxes(t, n, i) {
    !i || !(t != null && t.length) || t.forEach((r, s) => {
      const o = r[0], a = r[1];
      if (i === "x") {
        const l = Re.scaleLinear().domain([o, a]).range([
          this.xPositionScale(o),
          this.xPositionScale(a)
        ]), h = (l.domain()[1] - l.domain()[0]) / 2 + l.domain()[0], c = this.axisGroup.append("g").attr(
          "transform",
          `translate(0, ${this.h - this.padding + this.axisSpacing})`
        ).attr("class", "axis measurement x").call(Re.axisBottom(l).tickValues([h]).tickSize(4).tickFormat(() => this.formatNumber(n[s])));
        c.selectAll("text").attr("x", 0).attr("y", 0).attr(
          "dy",
          (d, g, p) => p[g].getBBox().height + 10
        ), this.cutMeasurementXAxes.push(c);
      } else {
        const l = Re.scaleLinear().domain([o, a]).range([
          this.yPositionScale(o),
          this.yPositionScale(a)
        ]), h = (l.domain()[1] - l.domain()[0]) / 2 + l.domain()[0], c = this.axisGroup.append("g").attr(
          "transform",
          `translate(${this.padding - this.axisSpacing}, 0)`
        ).attr("class", "axis measurement y").call(Re.axisLeft(l).tickValues([h]).tickSize(4).tickFormat(() => this.formatNumber(n[s])));
        c.selectAll("text").attr("x", 0).attr("y", 0).attr(
          "dy",
          (d, g, p) => p[g].getBBox().height + 10
        ).attr(
          "dx",
          (d, g, p) => p[g].getBBox().width / 4
        ).attr(
          "transform",
          (d, g, p) => "rotate(90) translate(" + p[g].getBBox().width / 4 + ")"
        ), this.cutMeasurementYAxes.push(c);
      }
    });
  }
  /**
      * add the shape axes
      * @param {Shape} shape
      */
  addShapeAxes(t) {
    var l;
    this.shapeXAxis && this.shapeXAxis.remove(), this.shapeYAxis && this.shapeYAxis.remove();
    const n = t.x, i = t.x + t.l, r = Re.scaleLinear().domain([n, i]).range([this.xPositionScale(n), this.xPositionScale(i)]), s = t.y, o = t.y + t.w, a = Re.scaleLinear().domain([s, o]).range([this.yPositionScale(s), this.yPositionScale(o)]);
    this.shapeXAxis = this.axisGroup.append("g").attr(
      "transform",
      `translate(0, ${this.h - this.padding + this.axisSpacing})`
    ).attr("class", "axis shape x").call(Re.axisBottom(r).tickValues(r.domain()).tickSize(4).tickFormat(this.formatNumber)), this.shapeXAxis.selectAll("text").attr("dx", (h, c, d) => {
      const g = d[c];
      if (g === null) return;
      const p = g.getBBox();
      return c === 0 ? -p.width / 2 : p.width / 2;
    }), ((l = t == null ? void 0 : t.stock) == null ? void 0 : l.type) !== "linear" && (this.shapeYAxis = this.axisGroup.append("g").attr(
      "transform",
      `translate(${this.padding - this.axisSpacing}, 0)`
    ).attr("class", "axis shape y").call(Re.axisLeft(a).tickValues(a.domain()).tickSize(4).tickFormat(this.formatNumber)), this.shapeYAxis.selectAll("text").attr("x", 0).attr("y", 0).attr(
      "dy",
      (h, c, d) => {
        var g, p;
        return ((p = (g = d[c]) == null ? void 0 : g.getBBox()) == null ? void 0 : p.height) + 2;
      }
    ).attr(
      "dx",
      (h, c, d) => {
        var g, p;
        return ((p = (g = d[c]) == null ? void 0 : g.getBBox()) == null ? void 0 : p.width) / 2;
      }
    ).attr("transform", (h, c, d) => {
      var g, p, b, x, N, v, w, k;
      return this.flipY ? c === 0 ? "rotate(90) translate(-" + ((p = (g = d[c]) == null ? void 0 : g.getBBox()) == null ? void 0 : p.width) / 2 + ")" : "rotate(90) translate(" + ((x = (b = d[c]) == null ? void 0 : b.getBBox()) == null ? void 0 : x.width) / 2 + ")" : c === 0 ? "rotate(90) translate(" + ((v = (N = d[c]) == null ? void 0 : N.getBBox()) == null ? void 0 : v.width) / 2 + ")" : "rotate(90) translate(-" + ((k = (w = d[c]) == null ? void 0 : w.getBBox()) == null ? void 0 : k.width) / 2 + ")";
    }));
  }
  getBandingAdjustment(t, n) {
    switch (t) {
      case "y1":
        if (n === "x") return 0;
        if (n === "y") return this.flipY ? 1 : -1;
        break;
      case "y2":
        if (n === "x") return 0;
        if (n === "y") return this.flipY ? -1 : 1;
        break;
      case "x1":
        if (n === "x") return this.flipX ? -1 : 1;
        if (n === "y") return 0;
        break;
      case "x2":
        if (n === "x") return this.flipX ? 1 : -1;
        if (n === "y") return 0;
        break;
    }
    return 0;
  }
  getRectangleCoordinate(t, n, i, r) {
    let s;
    if (n === "x") {
      let o;
      switch (i) {
        case "center":
          o = this.xPositionScale(t.x + t.l / 2), r && (o += r);
          break;
        case "right":
          o = this.xPositionScale(t.x + t.l), r && (o -= r);
          break;
        case "left":
        default:
          o = this.xPositionScale(this.flipX ? t.x - t.l : t.x), r && (o -= r);
      }
      s = o;
    } else if (n === "y") {
      let o;
      switch (i) {
        case "center":
          o = this.yPositionScale(t.y + t.w / 2), r && (o += r);
          break;
        case "bottom":
          o = this.yPositionScale(this.flipY ? t.y + t.w : t.y), r && (o += r);
          break;
        case "top":
        default:
          o = this.yPositionScale(this.flipY ? t.y : t.y + t.w), r && (o -= r);
      }
      s = o;
    }
    return s;
  }
  getRotatedSide(t) {
    switch (t) {
      case "x1":
      case "l1":
        return "w1";
      case "x2":
      case "l2":
        return "w2";
      case "y1":
      case "w1":
        return "l2";
      case "y2":
      case "w2":
        return "l1";
    }
  }
  /**
      * update the position of the shapes and the content within
      */
  setShapePosition() {
    if (!this.shapes) return !1;
    this.shapes.attr("x", (t) => this.getRectangleCoordinate(t, "x")).attr("y", (t) => this.getRectangleCoordinate(t, "y")).attr("width", (t) => this.getWidthAttribute(t)).attr("height", (t) => this.getHeightAttribute(t)), this.main && (this.shapeIDText.attr("x", (t) => this.getRectangleCoordinate(t, "x", "center")).attr("y", (t) => this.getRectangleCoordinate(t, "y", "center")).attr("dy", 1), this.shapeNameText && this.shapeNameText.attr("x", (t) => this.getRectangleCoordinate(t, "x", "center")).attr("y", (t, n, i) => this.getRectangleCoordinate(
      t,
      "y",
      "bottom",
      -(i[n].getBBox().height / 2 + 1)
    )), this.shapeLengthText.attr("x", (t) => this.getRectangleCoordinate(t, "x", "center")).attr("y", (t, n, i) => this.getRectangleCoordinate(
      t,
      "y",
      "top",
      -(i[n].getBBox().height / 2 + 2)
    )), this.shapeWidthText.attr(
      "transform",
      (t, n, i) => `translate(${this.getRectangleCoordinate(
        t,
        "x",
        "left",
        -(i[n].getBBox().height / 2 + 2)
      )},${this.getRectangleCoordinate(t, "y", "center")}) ${this.device === "mobile" ? "rotate(90)" : "rotate(-90)"}`
    ));
  }
  //init or update the cuts
  initCuts(t) {
    if (this.resetCuts(), !t || !(t != null && t.length) || !this.main || !this.elWidth)
      return !1;
    this.cuts = this.cutGroup.selectAll("line").data(t).join("line").attr("class", "cut").attr("stroke-width", (n) => {
      const i = this.measurementScale(this.getBladeWidth(n.stock));
      return i < 1 ? 1 : Math.ceil(i);
    }).attr("x1", (n) => this.xPositionScale(n.getVisCoords("x1"))).attr("x2", (n) => this.xPositionScale(n.getVisCoords("x2"))).attr("y1", (n) => this.yPositionScale(n.getVisCoords("y1"))).attr("y2", (n) => this.yPositionScale(n.getVisCoords("y2"))).classed("trim", (n) => n.isTrim);
  }
  //init or update the segments
  initSegments(t) {
    if (!t || !(t != null && t.length) || !this.main || !this.elWidth)
      return !1;
    this.resetSegments(), this.segments = this.segmentGroup.selectAll("rect").data(t).join("rect").attr("class", "segment").style("opacity", (n) => {
      if ((n == null ? void 0 : n.offcut) === !0) return 0.5;
    }).classed("offcut", (n) => n.offcut).classed("merged", (n) => n.merged).classed("near", (n) => n.shapePosition === "near").classed("far", (n) => n.shapePosition === "far").classed("completed", (n) => n.completed).attr("x", (n) => this.getRectangleCoordinate(n, "x")).attr("y", (n) => this.getRectangleCoordinate(n, "y")).attr("width", (n) => this.getWidthAttribute(n)).attr("height", (n) => this.getHeightAttribute(n)), this.segmentGroup.selectAll("text").data(t).join("text").attr("class", "segment-text").attr("x", (n) => this.getRectangleCoordinate(n, "x", "center")).attr("y", (n) => this.getRectangleCoordinate(n, "y", "center")).attr("text-anchor", "middle").text((n) => {
      if (this.env !== "development" || n.offcut) return null;
      if (n.cutDirection === "l")
        return this.env === "development" ? `→ ${n.id}` : "→";
      if (n.cutDirection === "w")
        return this.env === "development" ? `↑ ${n.id}` : "↑";
    }).attr("dominant-baseline", "middle"), !this.app && this.env === "development" && this.segments.on("mousedown", function(n, i) {
      const r = structuredClone(i);
      console.log([
        "id",
        "x",
        "y",
        "l",
        "w",
        "cutDirection",
        "cutPreference"
      ].reduce((o, a) => (o[a] = qg(r, a), o), {}));
    });
  }
  initGroups(t) {
    if (!t || !(t != null && t.length) || !this.main || !this.elWidth)
      return !1;
    this.resetGroups(), this.groups = this.groupGroup.selectAll("rect").data(t).join("rect").attr("class", "group").attr("x", (n) => this.getRectangleCoordinate(n, "x")).attr("y", (n) => this.getRectangleCoordinate(n, "y")).attr("width", (n) => this.getWidthAttribute(n)).attr("height", (n) => this.getHeightAttribute(n)), this.groupGroup.attr("display", "block");
  }
  //get relevant segments for a specific cut
  getCutSegments(t) {
    var o, a, l, h;
    const n = (o = t == null ? void 0 : t.guillotineData) == null ? void 0 : o.parentSegmentID, i = ((l = (a = this.vueComponent) == null ? void 0 : a.gs) == null ? void 0 : l.activeSegments) ?? ((h = this.vueComponent) == null ? void 0 : h.activeSegments);
    if (!i.length) return !1;
    let r;
    if (n ? r = i.find((c) => c.id === n) : r = i.find((c) => c.segmentType === "root"), r === void 0) return !1;
    const s = r == null ? void 0 : r.children;
    if (s != null && s.length) {
      const c = s.map((g) => {
        const p = i.find((b) => b.x === g.x && b.y === g.y && b.l === g.l && b.w === g.w);
        return p !== void 0 ? p : null;
      }).filter((g) => g !== null);
      return {
        main: r,
        siblings: c
      };
    }
    return !1;
  }
  /**
      * toggle the visibility of the segments
      * @param {Boolean} show
      */
  toggleSegments(t = !0) {
    t ? this.segmentGroup.attr("display", "block") : this.segmentGroup.attr("display", "none");
  }
  /**
      * show a list of possible movement positions
      */
  initPositions(t, n) {
    if (!n || !t || !this.main) return !1;
    let i;
    if (n.trimDimensions(), !t.willItFit(n, t.rot)) return !1;
    n.removeTrim();
    const r = Ge.call(this.vueComponent, ["shapeList"]).filter((l) => {
      var h;
      return l.added && ((h = l == null ? void 0 : l.stock) == null ? void 0 : h.id) === n.id;
    }), s = Iy(
      null,
      r,
      n
    );
    let o;
    if (n.cutType === "efficiency") {
      if (this.env === "development") {
        const l = W0(r, n);
        this.positionGroup.selectAll("line").remove();
        const h = l.flatMap((c) => Object.values(c.rays));
        this.positionGroup.selectAll("line").data(h).enter().append("line").attr("x1", (c) => this.xPositionScale(c.x1)).attr("x2", (c) => this.xPositionScale(c.x2)).attr("y1", (c) => this.yPositionScale(c.y1)).attr("y2", (c) => this.yPositionScale(c.y2)).attr("stroke", "rgba(245, 66, 227, 0.5)").attr("stroke-width", 2).on("mousedown", (c, d) => console.log(d));
      }
      o = Ey(
        n,
        r
      );
    }
    const a = new wo();
    for (const l of s.toArray()) {
      const h = H0(t, l, n);
      h && a.addPoints(h.toArray());
    }
    if (o) {
      const l = o.toArray();
      for (const h of l) {
        const c = Cy(t, h, n);
        c && a.addPoints(c.toArray());
      }
    }
    n.cutType === "efficiency" ? ([
      new $n(0 + (n.trim.x1 ?? 0), 0 + (n.trim.y1 ?? 0)),
      new $n(0 + (n.trim.x1 ?? 0), 0 + (n.trim.y1 ?? 0)),
      new $n(
        n.l - t.l - (n.trim.x2 ?? 0),
        0 + (n.trim.y1 ?? 0)
      ),
      new $n(
        0 + (n.trim.x1 ?? 0),
        n.w - t.w - (n.trim.y2 ?? 0)
      ),
      new $n(
        n.l - t.l - (n.trim.x2 ?? 0),
        n.w - t.w - (n.trim.y2 ?? 0)
      )
    ].forEach((l) => a.addPoint(l)), i = a.toArray()) : (a.addPoint(new $n(0 + (n.trim.x1 ?? 0), 0 + (n.trim.y1 ?? 0))), i = a.toArray());
    for (let l = i.length; l--; ) {
      const h = i[l];
      t.x = h.x, t.y = h.y;
      for (const c of r)
        if (this.collision(t, c, n)) {
          i.splice(l, 1);
          break;
        }
    }
    return this.positionGroup.selectAll("rect").data(i).join("rect").attr("data-id", (l, h) => h).attr("class", "shape ghost").attr("x", (l) => (t.x = l.x, this.getRectangleCoordinate(t, "x"))).attr("y", (l) => (t.y = l.y, this.getRectangleCoordinate(t, "y"))).attr("width", this.getWidthAttribute(t)).attr("height", this.getHeightAttribute(t)).on("mousedown", (l, h) => {
      l.stopPropagation();
      const c = aa.call(this.vueComponent, "partsBin");
      c && c.moveShape(
        l.currentTarget,
        t,
        h
      );
    }), this.hasTouch || this.positionGroup.selectAll("rect").on(
      "mouseover",
      function(l) {
        l.stopPropagation(), Re.select(this).classed("hover", !0), Re.select(this).raise();
      },
      {
        passive: !0
      }
    ).on(
      "mouseout",
      function(l) {
        l.stopPropagation(), Re.select(this).classed("hover", !1);
      },
      {
        passive: !0
      }
    ), this.dotGroup.selectAll("circle").data(i).join("circle").attr("data-id", (l, h) => h).attr("class", "dot").classed("raycast", (l) => this.env !== "development" ? !1 : l.raycast).attr("cx", (l) => (t.x = l.x, this.getRectangleCoordinate(t, "x"))).attr("cy", (l) => (t.y = l.y, this.getRectangleCoordinate(t, "y", "bottom"))).attr("r", 8).on("mousedown", (l, h) => {
      l.stopPropagation();
      const c = aa.call(this.vueComponent, "partsBin");
      c && c.moveShape(
        l.currentTarget,
        t,
        h
      );
    }), t.x = 0, t.y = 0, this.hasTouch || this.dotGroup.selectAll("circle").on(
      "mouseover",
      function(l) {
        l.stopPropagation(), Re.select(this).classed("hover", !0);
        const h = Re.select(this).attr("data-id"), c = Re.select(`.ghost[data-id="${h}"]`);
        c.raise(), c.classed("highlight", !0);
      },
      {
        passive: !0
      }
    ).on(
      "mouseout",
      function(l) {
        l.stopPropagation(), Re.select(this).classed("hover", !1);
        const h = Re.select(this).attr("data-id");
        Re.select(`.ghost[data-id="${h}"]`).classed(
          "highlight",
          !1
        );
      },
      {
        passive: !0
      }
    ), !!(i != null && i.length);
  }
  /**
      * show a list of placement positions
      */
  initPlacementPositions(t) {
    if (!(this.env !== "development" || this.debug !== "positions")) {
      if (!(t != null && t.length)) return !1;
      this.placementPositionGroup.selectAll("circle").data(t).join("circle").attr("data-id", (n, i) => i).attr("class", "dot").attr("cx", (n) => this.xPositionScale(n.x)).attr("cy", (n) => this.yPositionScale(n.y)).attr("r", 3).on("mousedown", (n) => {
        n.stopPropagation();
      });
    }
  }
  /**
      * toggle the visibility of the cuts
      * @param {Boolean} show
      */
  toggleCuts(t = !0) {
    t ? this.cutGroup.attr("display", "block") : this.cutGroup.attr("display", "none");
  }
  clearSelection() {
    var t;
    this != null && this.shapes && (this.shapes.classed("selected", !1), this.shapes.classed("hover", !1), this.shapes.style("fill", (n) => this.getShapeColor(n))), this != null && this.cuts && (this.cuts.classed("selected", !1), this.cuts.classed("highlight", !1), this.cuts.classed("inside-segment", !1), this.cuts.style("visibility", "visible"), this.cuts.attr("stroke-width", (n) => {
      const i = this.measurementScale(this.getBladeWidth(n.stock));
      return i < 1 ? 1 : Math.ceil(i);
    })), (t = this == null ? void 0 : this.shapes) != null && t.length && this.shapes.classed("selected", !1);
  }
  /**
      * add padding
      * this.padding will be 0 when necessary
      * @param {number} value
      */
  addPadding(t) {
    return t + this.padding;
  }
  /**
      * @param {Container} container
      * @returns {number} blade width
      */
  getBladeWidth(t = null) {
    var n, i;
    return Lt((n = this == null ? void 0 : this.saw) == null ? void 0 : n.bladeWidth) ? (i = this.saw) == null ? void 0 : i.bladeWidth : Lt(t) && t !== null ? t.getBladeWidth() : 0;
  }
  getHalfBladeWidth(t = null) {
    const n = this.getBladeWidth(t);
    return n !== void 0 && n > 0 ? n / 2 : 0;
  }
  resetShapes() {
    this.shapeGroup && this.shapeGroup.selectAll("*").remove(), this.bandingGroup && this.bandingGroup.selectAll("*").remove(), this.resetShapeAxes();
  }
  resetShapeAxes() {
    this.shapeXAxis && this.shapeXAxis.remove(), this.shapeYAxis && this.shapeYAxis.remove();
  }
  resetStock() {
    this.stockGroup && this.stockGroup.selectAll("*").remove(), this.axisGroup && this.axisGroup.selectAll("*").remove(), this.resetStockAxes();
  }
  resetStockAxes() {
    this.xAxis && this.xAxis.remove(), this.yAxis && this.yAxis.remove();
  }
  resetCuts() {
    this.cutGroup && this.cutGroup.selectAll("*").remove(), this.resetCutMeasurementAxes();
  }
  resetSegments() {
    this.segmentGroup && this.segmentGroup.selectAll("*").remove();
  }
  resetGroups() {
    this.groupGroup && this.groupGroup.selectAll("*").remove();
  }
  resetCutMeasurementAxes() {
    var t, n;
    (t = this.cutMeasurementXAxes) != null && t.length && (this.cutMeasurementXAxes.forEach((i) => i.remove()), this.cutMeasurementXAxes.length = 0), (n = this.cutMeasurementYAxes) != null && n.length && (this.cutMeasurementYAxes.forEach((i) => i.remove()), this.cutMeasurementYAxes.length = 0);
  }
  resetPositions() {
    this.positionGroup && this.positionGroup.selectAll("*").remove(), this.dotGroup && this.dotGroup.selectAll("*").remove();
  }
  resetPlacementPositions() {
    this.placementPositionGroup && this.dotGroup.selectAll("*").remove();
  }
  reset() {
    this.resetPositions(), this.resetPlacementPositions(), this.resetShapes(), this.resetStock(), this.resetCuts(), this.resetSegments();
  }
  /**
      * detect collision - required for move mode
      * @param {object} thisShape
      * @param {object} testShape
      * @param {object} container
      * @returns {boolean} true if collision
      */
  collision(t, n, i) {
    if (t.id === n.id)
      throw new Error("collision comparing to self");
    return (
      // 1 left
      t.x < n.x + n.l + this.getBladeWidth(i) && // 2 right
      t.x + t.l + this.getBladeWidth(i) > n.x && // 3 bottom
      t.y < n.y + n.w + this.getBladeWidth(i) && // 4 top
      t.y + t.w + this.getBladeWidth(i) > n.y
    );
  }
}
function qg(e, t) {
  return t.split(".").reduce((n, i) => n[i], e);
}
function q6(e = "issues", t, n, i = null) {
  var s;
  if (!t || !((s = t == null ? void 0 : t[e]) != null && s.length)) return !1;
  if (t[e].map((o) => o.field).flat().includes(n))
    return i ? t[e].map((a) => a.subField).flat().includes(i) : !0;
}
function $6(e) {
  if (!ta(e)) return !1;
  const t = Object.getOwnPropertyDescriptor(e, "value");
  return (t == null ? void 0 : t.configurable) === !1;
}
function Je(e, t) {
  var l;
  if (!(e != null && e[0]) || !this) return !1;
  const n = (h) => ta(h) ? $6(h) ? "shallowRef" : "ref" : gp(h) ? "reactive" : !_2(h) && typeof h == "object" ? "raw" : "ref";
  let i, r, s;
  if ("gs" in this && typeof ((l = this.gs) == null ? void 0 : l[e[0]]) < "u")
    i = this.gs, r = ho(this.gs, e), s = e[e.length - 1];
  else if (typeof (this == null ? void 0 : this[e[0]]) < "u")
    i = this, r = ho(this, e), s = e[e.length - 1];
  else
    return !1;
  if (ta(r))
    return r.value = t, !0;
  const o = n(r || t);
  let a = t;
  switch (o) {
    case "shallowRef":
      a = no(t);
      break;
    case "raw":
      typeof t == "object" && t !== null && t.constructor !== Object && t.constructor !== Array ? a = ea(t) : Array.isArray(t) ? a = ea(t.map((h) => typeof h == "object" && h !== null && h.constructor !== Object ? h : JSON.parse(JSON.stringify(h)))) : a = typeof t == "object" ? ea(JSON.parse(JSON.stringify(t))) : ea(t);
      break;
    case "ref":
      ta(t) ? a = t : a = Pe(t);
      break;
    case "reactive":
      a = gp(t) ? t : Nr(t);
      break;
  }
  if (e.length > 1) {
    const h = e.slice(0, -1), c = ho(i, h);
    if (ta(c))
      return wg(c.value, s, a), !0;
  }
  return wg(i, e, a), !0;
}
function Ge(e) {
  var n;
  if (!(e != null && e[0]) || !this) return null;
  let t;
  if ("gs" in this && typeof ((n = this == null ? void 0 : this.gs) == null ? void 0 : n[e[0]]) < "u")
    t = ho(this.gs, e);
  else if (typeof (this == null ? void 0 : this[e[0]]) < "u")
    t = ho(this, e);
  else
    return console.warn("getData path not found", e), null;
  return ta(t) || t && typeof t == "object" && "value" in t ? t.value : t;
}
function Ik(e) {
  var t;
  if (!(e != null && e[0])) return null;
  if ("optionsStore" in this && typeof ((t = this == null ? void 0 : this.optionsStore) == null ? void 0 : t[e[0]]) < "u")
    return ho(this.optionsStore, e);
  if (typeof (this == null ? void 0 : this[e[0]]) < "u") return ho(this, e);
}
function dc(e) {
  e.queue = 0, e.stockCount = 0, e.shapeCount = 0, e.resultCount = 0, e.complete = !1;
}
function z6(e, t) {
  return e != null && e.length ? e.find((n) => n.id === t) : null;
}
function U6(e, t, n = "") {
  if (!(e != null && e.length) || !t) return [];
  const i = e.filter((r) => {
    var s, o, a;
    if (n) {
      if (n === "ptx") return (((a = r == null ? void 0 : r.stock) == null ? void 0 : a.id) ?? (r == null ? void 0 : r.stockId)) === t.id;
    } else return (((s = r == null ? void 0 : r.stock) == null ? void 0 : s.id) ?? (r == null ? void 0 : r.stockId)) === t.id && !((o = r == null ? void 0 : r.guillotineData) != null && o.ptxDummyCut);
  });
  return i.sort((r, s) => {
    var o, a;
    return ((o = r == null ? void 0 : r.guillotineData) == null ? void 0 : o.order) - ((a = s == null ? void 0 : s.guillotineData) == null ? void 0 : a.order);
  }), i;
}
function W6(e) {
  return e != null && e.length ? e.filter((t) => t.used === !0) : [];
}
function H6(e = !1) {
  let t = Ge.call(this, ["inputStock"]);
  if (!(t != null && t.length)) return [{ message: "No stock input" }];
  const n = Ge.call(this, ["stockList"]);
  n && (n.length = 0);
  const i = [];
  e && (t = [t[0]]);
  for (let r = 0; r < t.length; r++) {
    const s = t[r];
    !(s != null && s.q) && !s.autoAdd && !e || i.push(...this.createStock(s, r));
  }
  return i;
}
function G6() {
  const e = Ge.call(this, ["vis"]);
  if (!e) return;
  const t = Ge.call(this, ["shapeList"]);
  if (!(t != null && t.length)) return !1;
  e.resetPositions(), e.resetShapes();
  const n = Ge.call(this, ["activeShapes"]);
  e.initShapes(n, t);
  const i = aa.call(this, "PartsBin");
  i && i.clear(!1);
}
function V6() {
  const e = Ge.call(this, ["vis"]);
  if (!e) return;
  const t = Ge.call(this, ["stockList"]);
  if (!(t != null && t.length)) return !1;
  const n = Ge.call(this, ["activeStock"]);
  e.initStock(n);
  const i = Ge.call(this, ["activeCuts"]);
  e.initCuts(i);
  const r = Ge.call(this, ["activeSegments"]);
  e.initSegments(r), e.resetPositions(), typeof this.toggleSegments == "function" && this.toggleSegments(!1), this != null && this.cutMode && (this == null || this.showCut(0));
}
function Y6() {
  var t;
  const e = ((t = this == null ? void 0 : this.gs) == null ? void 0 : t.vis) ?? (this == null ? void 0 : this.vis);
  e && (e.clearSelection(), e.resetShapeAxes(), e.resetCutMeasurementAxes(), e.resetPositions());
}
function K6(e) {
  Ge.call(this, ["examineShape"]) && (this.examineShape = null), Je.call(this, ["activeStockId"], e);
}
function $g() {
  return this != null && this.$parent ? this.$parent : null;
}
function aa(e, t = 0) {
  var r;
  let n = this;
  for (let s = 0; s < t; s++) {
    if (!$g.call(n))
      return null;
    n = $g.call(n);
  }
  const i = (r = n == null ? void 0 : n.$refs) == null ? void 0 : r[e];
  return i || null;
}
function J6(e = void 0) {
  return this.socket = $u(e, {
    withCredentials: !0,
    //this is required to send passport user data
    autoConnect: !1
  }), this.socket.on("connect", () => {
    Je.call(this, ["connected"], !0);
  }), this.socket.on("maintenance", () => {
    Je.call(this, ["maintenanceMode"], !0), this.socket.disconnect(), this.env === "development" && console.log("SmartCut - maintenance mode flag received from server");
  }), this.socket.on("connect_error", (t) => {
    Je.call(this, ["connected"], !1), console.warn(`SmartCut - socket connect_error: ${t.message}`), typeof alert < "u" && alert("We are having trouble connecting to the server. Please try again later."), this.socket.close();
  }), this.socket.on("message", (t) => console.log(t)), this.socket.on("user", (t) => {
    Je.call(this, ["user"], t);
  }), this.socket.on("queued", () => {
    Je.call(this, ["progress", "queue"], 1);
  }), this.socket.on("jobInProgess", (t) => (alert(`You already have a job in progress, please wait for it to finish

Job ID: ${t}`), !1)), this.socket.on("jobStart", () => Je.call(this, ["progress", "queue"], 2)), this.socket.on("progress", (t) => {
    const n = t.data;
    if (typeof n.shapeCount < "u" && Je.call(this, ["progress", "shapeCount"], n.shapeCount), typeof n.stockCount < "u" && Je.call(this, ["progress", "stockCount"], n.stockCount), !n.stockCount && !n.shapeCount) {
      const i = Ge.call(this, ["progress", "resultCount"]);
      Je.call(this, ["progress", "resultCount"], i + 1);
    }
  }), this.socket.on("upgrade", () => {
    "showUpgradeModal" in this && typeof this.showUpgradeModal == "function" && this.showUpgradeModal(), Je.call(this, ["thinking"], !1);
  }), this.socket.on("error", (t) => {
    var i;
    Je.call(this, ["thinking"], !1);
    const n = Ge.call(this, ["reset"]);
    typeof n == "function" && n(), console.error("SmartCut error:", t), (i = window == null ? void 0 : window.top) == null || i.postMessage(
      {
        type: "scError",
        message: t
      },
      "*"
    ), "showMessage" in this && typeof this.showMessage == "function" && this.showMessage(t), typeof this.showModalMessage == "function" && this.showModalMessage({
      heading: "Issue",
      main: t ? `<p>${t}</p>` : "<p>We are having trouble connecting to the server.</p><p>Please try again later and let us know.</p>"
    });
  }), this.socket.on("result", (t) => {
    var l, h, c, d, g, p, b, x, N, v;
    this.socket.disconnect();
    const n = t.result;
    if (Je.call(this, ["metadata"], n.metadata ?? {}), Je.call(this, ["unusableShapes"], n.unusableShapes ?? []), Je.call(this, ["unavailableStock"], n.unavailableStock ?? []), !((l = n.shapeList) != null && l.length) || !((h = n.stockList) != null && h.length)) {
      const w = Ge.call(this, ["progress"]);
      if (dc(w), typeof this.showModalMessage == "function") {
        let k = "<p>We did not manage to fit any parts.</p>";
        (c = n == null ? void 0 : n.unusableShapes) != null && c.length ? (k = "<p>No parts were usable.</p><p>Click below to view the <strong>Unusable parts</strong> message in the <strong>Inputs panel</stong>.</p>", this.showModalMessage({
          heading: "Parts unusable",
          main: k,
          buttonText: "Show me",
          buttonCallback: (T) => {
            T.showInputPanel(
              "parts",
              "inputs-unusable-parts"
            );
          }
        })) : (k += "<p>Please double check your list.</p>", this.$nextTick(() => {
          this.showModalMessage({
            heading: "Parts unusable",
            main: k
          });
        }));
      }
      return (d = window == null ? void 0 : window.top) == null || d.postMessage(
        {
          type: "scError",
          message: "No parts were added - please double check your list."
        },
        "*"
      ), "showMessage" in this && typeof this.showMessage == "function" && this.showMessage("No parts were added - please double check your list."), Je.call(this, ["thinking"], !1), typeof this.toggleWidget == "function" && this.toggleWidget.call(this, "inputs", !0), !1;
    }
    n.shapeList.find((w) => !w.added) && typeof this.showModalMessage == "function" && this.$nextTick(() => {
      this.showModalMessage({
        heading: "Parts not used",
        main: "<p>We did not use all your parts.</p><p>Click below to view the <strong>Unusable parts</strong> message in the <strong>Inputs panel</stong>.</p>",
        buttonText: "Show me",
        buttonCallback: (w) => {
          w.showInputPanel(
            "parts",
            "inputs-unusable-parts"
          );
        }
      });
    }), Je.call(this, ["progress", "complete"], !0), Je.call(this, ["jobId"], t == null ? void 0 : t.jobId), typeof this.toggleWidget == "function" && (this.toggleWidget("updateStock", !1), this.toggleWidget("options", !1), this.toggleWidget("offcuts", !1), this.toggleWidget("results", !1), this.toggleWidget("cutlist", !1), this.toggleWidget("export", !1), this.toggleWidget("labels", !1));
    let i;
    n != null && n.saw && (i = new Fs(
      n == null ? void 0 : n.saw,
      ((g = n == null ? void 0 : n.saw) == null ? void 0 : g.stockType) ?? ((b = (p = n.stockList) == null ? void 0 : p[0]) == null ? void 0 : b.type)
    ), Je.call(this, ["saw"], i));
    const r = Eb({
      saw: i,
      stockList: n.stockList,
      removeScores: !0,
      preventAutoRotation: !0
    });
    Je.call(this, ["stockList"], r);
    const s = Ge.call(this, ["usedStock"]);
    s.length && Je.call(this, ["activeStockId"], s[0].id), Je.call(
      this,
      ["shapeList"],
      Ob({
        shapeList: n.shapeList,
        stockList: r,
        preventAutoRotation: !0
      })
    ), n != null && n.cutList && Je.call(
      this,
      ["cutList"],
      Fb({
        cutList: n.cutList,
        stockList: r
      })
    ), n != null && n.segmentList && Je.call(
      this,
      ["segmentList"],
      Mb({
        segmentList: n.segmentList,
        stockList: r
      })
    ), n != null && n.offcuts && Je.call(
      this,
      ["offcuts"],
      Db({
        offcuts: n.offcuts,
        stockList: r,
        preventAutoRotation: !0
      })
    ), n != null && n.metadata && Je.call(this, ["metadata"], n.metadata), (x = n == null ? void 0 : n.evolutionVisData) != null && x.length ? Je.call(this, ["evolutionVisData"], n.evolutionVisData) : typeof this.toggleWidget == "function" && this.toggleWidget.call(this, "evolution", !1), typeof this.toggleWidget == "function" && this.toggleWidget.call(this, "workbench", !0), Je.call(this, ["thinking"], !1);
    const o = aa.call(this, "inputs");
    if (o && (o != null && o.success) && (o.success = !1), Ge.call(this, ["addedShapes"]).length === 0) {
      const w = Ge.call(this, ["progress"]);
      if (dc(w), typeof this.showModalMessage == "function") {
        let k = "<p>We could not fit any parts.</p>";
        (N = n == null ? void 0 : n.unusableShapes) != null && N.length ? (k += "<p>Some parts were not usable - click below to view the <strong>Unusable parts</strong> message in the <strong>Inputs panel</stong>.</p>", this.showModalMessage({
          heading: "No layouts",
          main: k,
          buttonText: "More info",
          buttonCallback: (T) => {
            T.showInputPanel(
              "parts",
              "inputs-unusable-parts"
            );
          }
        })) : (k += "<p>Please double check your list.</p>", this.showModalMessage({
          heading: "No layouts",
          main: k
        }));
      }
      (v = window == null ? void 0 : window.top) == null || v.postMessage(
        {
          type: "scError",
          message: "No parts were added."
        },
        "*"
      ), console.warn("No parts were added."), typeof this.toggleWidget == "function" && this.toggleWidget.call(this, "inputs", !0);
    }
  }), this.socket;
}
function X6(e) {
  return !e || !bo(e) ? "" : Object.values(e).filter((t) => t).join("|");
}
function Bd(e, t, n = "Options") {
  if (!n && `${t}` in e && typeof e[t] == "object") return !0;
  const i = `${t}${n}`;
  return !!(n && i in e && typeof e[i] == "object");
}
function qd(e) {
  return `${e}Options`;
}
function Z6(e, t, n) {
  const i = qd(t);
  for (const r in e[i]) {
    const s = Object.keys(e[i][r]);
    for (const o of s)
      n.includes(o) || o in e[i][r] && delete e[i][r][o];
    for (const o of n)
      (r === "all" || !(o in e[i][r])) && (e[i][r][o] = "");
  }
}
function Q6(e, t, n = !0) {
  if (!Bd(e, t, "Options")) return;
  const i = e[t], r = Object.keys(i);
  for (const s of r)
    Im(e, t, s, n);
  n && Em(e, t, "all");
}
function Im(e, t, n, i = !0) {
  i && Em(e, t, n), n !== "all" && Bd(e, t) && (e[t][n] = !1);
}
function Em(e, t, n) {
  if (!Bd(e, t, "Options")) return;
  const r = e[`${t}Options`][n];
  if (typeof r != "object" || r === null) return;
  Object.keys(r).forEach((o) => r[o] = "");
}
function Om(e, t, n, i, r, s) {
  var c;
  const o = t + "Options";
  if (!((c = e == null ? void 0 : e[o]) != null && c[n]) || !(i in e[o][n])) return;
  wl(e, t, n, !1), e[o][n][i] = r;
  const a = e[o][n], l = Object.values(a || {}).filter((d) => d);
  if (!Array.isArray(l)) return;
  const h = pc(e, t, n, s);
  wl(e, t, n, !!h);
}
function tA(e, t, n, i, r = [], s) {
  const o = t + "Options";
  if (!e[o] || typeof e[o] != "object") return;
  const a = Object.keys(e[o]);
  if (!a.length) return;
  const l = pc(e, t, "all", s), h = e[o][n], c = Object.values(h || {}).filter((d) => d);
  for (const d of a)
    d !== "all" && (r.includes(d) || (Om(e, t, d, n, i, s), Array.isArray(c) || wl(e, t, d, !1), wl(e, t, d, !!l)));
}
function wl(e, t, n, i) {
  var o;
  if (n === "all") return;
  const r = qd(t), s = X6((o = e == null ? void 0 : e[r]) == null ? void 0 : o[n]);
  i ? e[t][n] = s || !0 : e[t][n] = !1;
}
function pc(e, t, n, i) {
  var l;
  const r = t + "Options";
  if (!((l = e == null ? void 0 : e[r]) != null && l[n])) return !1;
  const s = e[r][n], o = Object.values(s || {}).filter((h) => h);
  if (!Array.isArray(o) || !i || typeof i != "function")
    return !1;
  const a = i(t, o);
  return t === "banding" && c1(n) && a ? Nb(e, n, a) / 1e3 : a;
}
function Ek(e) {
  e != null && e.type && delete e.type, eA.call(this, e);
}
function eA(e) {
  if (!(e != null && e.banding) || typeof e.banding != "object") return;
  const t = Object.keys(e.banding);
  if (!t.length) return;
  const n = ["labels", "pricing"];
  if (!t.every((i) => n.includes(i)))
    this.error("legacy banding data provided - please update to use { labels: string[], pricing: Record<string, number> }");
  else return;
  e.banding = {
    labels: Object.keys(e.banding),
    pricing: e.bandingPricing
  };
}
function nA(e) {
  if (e != null && e.enable) return;
  e.enable = {};
  const t = {
    showDiagram: { new: "diagram", map: "equal" },
    enableFocus: { new: "focus", map: "equal" },
    enableMachining: { new: "machining", map: "equal" },
    enableCSVImport: { new: "csvImport", map: "equal" },
    showProgressNumber: { new: "progressNumber", map: "equal" },
    disableBanding: { new: "banding", map: "reverse" },
    disableFinish: { new: "finish", map: "reverse" },
    disableOrientation: { new: "orientation", map: "reverse" },
    disableClick: { new: "click", map: "reverse" },
    disablePartName: { new: "partName", map: "reverse" }
  };
  for (const n of Object.keys(t))
    n in e && (e.enable[t[n].new] = t[n].map === "reverse" ? !e[n] : e[n], delete e[n]);
  console.log(e);
}
function Pf(e = 0, t, n = null, i = null, r = null) {
  if (!fr(n) && !io || i === "stock") return !1;
  let s, o;
  if (fr(n) ? s = n.orientationLock : io(n) ? s = n.direction : i === "shape" && (s = r), e === 0 || io(n))
    switch (t) {
      case "n":
        o = s === "w" || r === "w";
        break;
      case "l":
      case "y":
        o = s === "w" || r === "w";
        break;
      case "w":
        o = s === "l" || r === "l";
        break;
      default:
        o = r === "w";
    }
  else if (e === 1)
    o = n.w > n.l;
  else if (e === 2)
    switch (t) {
      case "n":
        o = n.w > n.l;
        break;
      case "y":
      case "l":
        o = n.w > n.l;
        break;
      case "w":
        o = n.l >= n.w;
        break;
      default:
        o = !1;
    }
  return o;
}
function zg(e, t, n = null, i = null, r = null) {
  if (!fr(n) || i === "shape") return !1;
  let s;
  return e === 0 || e === 1 ? Pf(e, t, n, i, r) ? "cc" : !1 : e === 2 ? t === "w" ? n.l < n.w ? "c" : "cc" : !1 : s;
}
function iA(e) {
  e.banding && (e.banding = gc(e.banding, "cc")), e.trim && (e.trim = gc(e.trim, "cc"));
}
function rA(e, t = 0) {
  return t && (t === 1 || t === 2) && (e.preventAutoRotation = !0, t === 2 && e.l < e.w && iA(e)), e;
}
function gc(e, t = "cc", n = {
  x1: "y1",
  x2: "y2",
  y1: "x1",
  y2: "x2"
}, i = {
  a: "d",
  b: "a",
  c: "b",
  d: "c"
}) {
  const r = {
    x1: null,
    x2: null,
    y1: null,
    y2: null
  };
  if (t === "c") {
    for (const [s, o] of Object.entries(n))
      r[o] = e[s];
    for (const [s, o] of Object.entries(i))
      o in e && (r[o] = e[s]);
  } else if (t === "cc") {
    for (const [s, o] of Object.entries(n))
      r[s] = e[o];
    for (const [s, o] of Object.entries(i))
      o in e && (r[s] = e[o]);
  }
  return console.log(r), r;
}
const sA = {
  name: "StockNavigation",
  props: {
    stockList: {
      type: Array,
      default: () => []
    },
    primaryColor: {
      type: String,
      default: ""
    },
    secondaryColor: {
      type: String,
      default: ""
    },
    activeStockId: {
      type: String,
      default: null
    }
  },
  emits: ["show-stock"],
  methods: {
    showStock(e) {
      this.$emit("show-stock", e);
    }
  }
}, Tl = (e, t) => {
  const n = e.__vccOpts || e;
  for (const [i, r] of t)
    n[i] = r;
  return n;
}, oA = { id: "mini-stock-nav" }, aA = ["onMousedown"], lA = { class: "id" };
function uA(e, t, n, i, r, s) {
  return Vt(), re("div", oA, [
    (Vt(!0), re(ri, null, ts(n.stockList, (o, a) => (Vt(), re("button", {
      key: a,
      class: wi(["nav-button", { selected: o.id === n.activeStockId }]),
      type: "button",
      style: zn({
        backgroundColor: o.id === n.activeStockId ? "#" + n.secondaryColor : "#" + n.primaryColor
      }),
      onMousedown: (l) => s.showStock(o.id)
    }, [
      fe("div", lA, gn(a + 1), 1),
      Gg(fe("div", { class: "stack legibility" }, gn(o.stack), 513), [
        [Vg, typeof o.stack == "number" && o.stack > 1]
      ])
    ], 46, aA))), 128))
  ]);
}
const cA = /* @__PURE__ */ Tl(sA, [["render", uA]]), hA = {
  name: "Spinner",
  props: {
    size: {
      type: Number,
      default: 100
    },
    showNumber: {
      type: Boolean,
      default: !0
    },
    number: {
      type: Number,
      default: 0
    },
    complete: {
      type: Boolean,
      default: !1
    }
  }
}, fA = { id: "spinner" }, dA = ["width", "height"], pA = {
  key: 2,
  id: "spinner-number",
  class: "stock-number"
};
function gA(e, t, n, i, r, s) {
  return Vt(), re("div", fA, [
    n.complete ? Ne("", !0) : (Vt(), re("svg", {
      key: 0,
      class: "loading",
      style: zn({ width: n.size + "px", height: n.size + "px" }),
      width: n.size,
      height: n.size,
      viewBox: "0 0 300 300"
    }, t[0] || (t[0] = [
      N2('<rect class="square s1" x="0" y="0"></rect><rect class="square s2" x="100" y="0"></rect><rect class="square s3" x="200" y="0"></rect><rect class="square s4" x="0" y="100"></rect><rect class="square s5" x="200" y="100"></rect><rect class="square s6" x="0" y="200"></rect><rect class="square s7" x="100" y="200"></rect>', 7)
    ]), 12, dA)),
    n.complete ? (Vt(), re("svg", {
      key: 1,
      class: "complete",
      style: zn({ width: n.size + "px", height: n.size + "px" }),
      viewBox: "0 0 448 512",
      xmlns: "http://www.w3.org/2000/svg"
    }, t[1] || (t[1] = [
      fe("path", { d: "m203.3 331.3c-6.2 6.3-16.4 6.3-22.6 0l-64-64c-6.3-6.2-6.3-16.4 0-22.6 6.2-6.3 16.4-6.3 22.6 0l52.7 52.7 116.7-116.7c6.2-6.3 16.4-6.3 22.6 0 6.3 6.2 6.3 16.4 0 22.6zm-203.3-235.3c0-35.35 28.65-64 64-64h320c35.3 0 64 28.65 64 64v320c0 35.3-28.7 64-64 64h-320c-35.35 0-64-28.7-64-64zm32 0v320c0 17.7 14.33 32 32 32h320c17.7 0 32-14.3 32-32v-320c0-17.67-14.3-32-32-32h-320c-17.67 0-32 14.33-32 32z" }, null, -1)
    ]), 4)) : Ne("", !0),
    n.showNumber ? (Vt(), re("div", pA, gn(n.number), 1)) : Ne("", !0)
  ]);
}
const Ug = /* @__PURE__ */ Tl(hA, [["render", gA]]);
function mA(e, t) {
  return e === "unitDependent" ? t === "decimal" ? "decimal" : "text" : e === "float" ? "decimal" : e === "integer" ? "numeric" : "text";
}
function yA(e, t) {
  return e === "unitDependent" ? t === "decimal" ? "number" : "text" : e === "checkbox" ? "checkbox" : e === "float" || e === "integer" ? "number" : "text";
}
function bA(e, t = null, n = "decimal") {
  switch (e) {
    case "float":
    case "integer":
    case "string":
      return e;
    case "unitDependent":
      return n === "decimal" ? "float" : "string";
    case "checkbox":
      return t || "boolean";
    case "select":
      return t || "string";
    default:
      return "string";
  }
}
function vA(e) {
  return !!e;
}
function wA(e, t) {
  return t ? t.split(".").reduce((i, r) => i && i[r] !== "undefined" ? i[r] : void 0, e) : null;
}
function xA(e, t, n, i = !0) {
  const r = t.split(".");
  let s = e;
  for (let o = 0; o < r.length - 1; o++)
    s[r[o]] || (s[r[o]] = {}), s = s[r[o]];
  (i || !Lt(s[r[r.length - 1]])) && (s[r[r.length - 1]] = n);
}
function SA(e, t, n, i, r = !0) {
  var o;
  if (!e || !n || !i || !((o = e == null ? void 0 : e[t]) != null && o[n])) return;
  const s = e[t][n].find((a) => a.id === i);
  if (s)
    return r ? s.enabled = !0 : s.enabled = !1, !0;
}
function AA(e, t, n) {
  var i;
  return (i = e == null ? void 0 : e[t]) != null && i[n] ? e[t][n].filter((r) => r.enabled === !0).map((r) => r.id) : [];
}
function kA(e, t, n, i, r = []) {
  const s = AA(e, n, i);
  if (!s.length) return [];
  const o = t.filter((l) => s.includes(l.id) || l.custom === !0), a = o.filter((l) => (l == null ? void 0 : l.fieldMap) && !l.fieldMap.startsWith("customData."));
  if (s.length !== a.length) {
    const l = new Set(a.map((c) => c.id)), h = o.map((c) => c.id).filter((c) => !l.has(c)).map((c) => `'${c}'`);
    console.warn(`Inputs - these fields do not have a field definition - ${h.join()}`);
  }
  return r.length && o.sort((l, h) => {
    const c = r.indexOf(l.id), d = r.indexOf(h.id);
    return c === -1 ? 1 : d === -1 ? -1 : c - d;
  }), o;
}
const _A = ["id"], NA = {
  key: 0,
  class: "delete",
  viewBox: "0 0 512 512",
  xmlns: "http://www.w3.org/2000/svg"
}, PA = /* @__PURE__ */ Ds({
  __name: "OrientationButton",
  props: {
    id: { default: "" },
    orientationModel: { default: 0 },
    rectangleType: { default: null },
    rectangle: { default: () => null },
    shapeOrientation: { default: "" },
    stockGrain: { default: "n" },
    buttonBackground: { default: "#848484" },
    iconColor: { default: "#FFFFFF" },
    disabled: { type: Boolean, default: !1 }
  },
  emits: ["updateOrientation"],
  setup(e, { emit: t }) {
    const n = e, i = t, r = Pe(0), s = rn(() => {
      if (!n.rectangle) return ["l", "w"];
      if (io(n.rectangle)) return ["l", "w"];
      let v = ["", "l", "w"];
      return n.rectangle.multiEdit && (v = [" ", "", "l", "w"]), o.value && (v = v.filter((w) => w !== "w")), v;
    }), o = rn(() => {
      var v, w, k, T;
      return fr(n.rectangle) || Du(n.rectangle) ? n.rectangle.isSquare() : n.rectangleType && ((v = n.rectangle) != null && v.l) && ((w = n.rectangle) != null && w.w) ? ((k = n.rectangle) == null ? void 0 : k.l) === ((T = n.rectangle) == null ? void 0 : T.w) : !1;
    }), a = () => {
      if (!fr(n.rectangle)) return "";
      let v = "";
      switch (n.orientationModel) {
        case 0:
          v = p.value;
          break;
        case 1:
          n.stockGrain === "y" || n.stockGrain === "n" ? v = n.rectangle.l >= n.rectangle.w ? "l" : "w" : n.rectangle.l >= n.rectangle.w ? v = n.stockGrain : v = v = n.stockGrain === "l" ? "w" : "l";
          break;
        case 2:
          v = n.rectangle.l >= n.rectangle.w ? "l" : "w";
          break;
      }
      return v;
    }, l = (v) => s.value.findIndex((k) => k === v), h = () => {
      if (n.disabled || s.value.length <= 1) return;
      let v = null;
      if ([1, 2].includes(n.orientationModel))
        if (p.value === "") {
          const w = a();
          v = s.value.findIndex((k) => k === w);
        } else
          v = s.value.findIndex((w) => w === "");
      else n.orientationModel === 0 && (v = l(p.value) + 1, v > s.value.length - 1 && (v = 0));
      r.value = v;
    }, c = (v) => {
      (v.key === "Enter" || v.key === " ") && h();
    }, d = (v) => {
      i("updateOrientation", v);
    }, g = () => {
      const v = p.value;
      switch (n.orientationModel) {
        case 0:
          return v ? n.stockGrain === "n" ? v || n.shapeOrientation || "default" : n.stockGrain === "w" ? v === "w" ? "w" : "l" : v === "l" ? "l" : "w" : "default";
        case 1:
          return v ? n.stockGrain === "n" ? v || n.shapeOrientation || "default" : n.stockGrain === "w" ? v === "w" ? "w" : "l" : v === "l" ? "l" : "w" : "default";
        case 2:
          return v ? n.stockGrain === "n" ? v || n.shapeOrientation || "default" : n.stockGrain === "w" ? v === "w" ? "w" : "l" : v === "l" ? "l" : "w" : "default";
        default:
          return "default";
      }
    }, p = rn(() => {
      let v = "";
      return io(n.rectangle) ? v = n.rectangle.direction : fr(n.rectangle) ? v = n.rectangle.orientationLock : Du(n.rectangle) && (v = n.rectangle.grain), v;
    }), b = rn(() => io(n.rectangle) || !n.rectangle ? {
      l: null,
      w: null
    } : {
      l: n.rectangle.l,
      w: n.rectangle.w
    }), x = rn(() => Pf(
      n.orientationModel,
      n.stockGrain,
      n.rectangle,
      n.rectangleType,
      n.shapeOrientation
    )), N = rn(() => {
      var T;
      if (!n.rectangle)
        return n.shapeOrientation ? "noGrain" : "freeRotation";
      if (Du(n.rectangle) || n.rectangleType === "stock")
        return {
          " ": "delete",
          l: "grainLeftRight",
          w: "grainTopBottom"
        }[n.rectangle.grain] || "noGrain";
      const v = {
        n: { " ": "delete", l: "leftRight", w: "leftRight", default: "freeRotation" },
        y: { " ": "delete", l: "grainLeftRight", w: "grainTopBottom", default: "freeRotation" },
        l: { " ": "delete", l: "grainLeftRight", w: "grainTopBottom", default: "freeRotation" },
        w: { " ": "delete", l: "grainLeftRight", w: "grainTopBottom", default: "freeRotation" },
        default: { " ": "delete", l: "leftRight", w: "topBottom", default: "freeRotation" }
      }, w = n.stockGrain || "default";
      let k = "default";
      return fr(n.rectangle) || n.rectangleType === "shape" ? k = g() : io(n.rectangle) && (k = n.rectangle.direction || "default"), ((T = v[w]) == null ? void 0 : T[k]) || v[w].default;
    });
    return dr(r, (v) => {
      d(s.value[v]);
    }, { immediate: !1 }), dr(b, () => {
      if (!n.rectangle || n.orientationModel === 0 || !fr(n.rectangle)) return;
      const v = a();
      p.value && p.value !== v && d(v);
    }, { immediate: !1 }), pa(() => {
      document.addEventListener("keydown", c), fr(n.rectangle) ? r.value = l(a()) : r.value = l(p.value);
    }), Lf(() => {
      document.removeEventListener("keydown", c);
    }), (v, w) => (Vt(), re("div", {
      id: v.id,
      class: wi(["orientation-button", { rot: x.value, square: o.value, disabled: v.disabled, [N.value]: !0 }]),
      tabindex: "0",
      "aria-label": "Part orientation",
      style: zn({
        backgroundColor: v.buttonBackground
      }),
      onClick: h
    }, [
      N.value === "delete" ? (Vt(), re("svg", NA, w[0] || (w[0] = [
        fe("path", { d: "M144 0L128 32H0V96H448V32H320L304 0H144zM416 128H32L56 512H392l24-384z" }, null, -1)
      ]))) : Ne("", !0),
      N.value === "freeRotation" ? (Vt(), re("svg", {
        key: 1,
        class: "arrow",
        style: zn({
          stroke: v.iconColor ? v.iconColor : "#ffffff"
        }),
        viewBox: "0 0 67 63",
        xmlns: "http://www.w3.org/2000/svg"
      }, w[1] || (w[1] = [
        fe("g", null, [
          fe("path", { d: "m9.296 31.378c0-3.305.67-6.455 1.88-9.322 3.642-8.621 12.179-14.678 22.12-14.678 10.63 0 19.656 6.927 22.806 16.509" }),
          fe("path", { d: "m57.296 31.378c0 13.246-10.754 24-24 24-10.631 0-19.656-6.926-22.806-16.508" }),
          fe("path", { d: "m61.183 5.408-4.622 17.851-18.347-1.838" }),
          fe("path", { d: "m5.408 57.349 4.622-17.851 18.348 1.838" })
        ], -1)
      ]), 4)) : Ne("", !0),
      N.value === "leftRight" ? (Vt(), re("svg", {
        key: 2,
        class: "arrow",
        style: zn({
          stroke: v.iconColor ? v.iconColor : "#ffffff"
        }),
        viewBox: "0 0 72 39",
        xmlns: "http://www.w3.org/2000/svg"
      }, w[2] || (w[2] = [
        fe("g", null, [
          fe("path", { d: "m5.408 19.408h61.095" }),
          fe("g", null, [
            fe("path", { d: "m52.695 5.408 13.808 14-13.808 14" }),
            fe("path", { d: "m17.408 33.408-12-14 12-14" })
          ])
        ], -1)
      ]), 4)) : Ne("", !0),
      N.value === "topBottom" ? (Vt(), re("svg", {
        key: 3,
        class: "arrow",
        style: zn({
          stroke: v.iconColor ? v.iconColor : "#ffffff"
        }),
        viewBox: "0 0 39 72",
        xmlns: "http://www.w3.org/2000/svg"
      }, w[3] || (w[3] = [
        fe("g", null, [
          fe("path", { d: "m19.408 66.503v-61.095" }),
          fe("g", null, [
            fe("path", { d: "m5.408 19.216 14-13.808 14 13.808" }),
            fe("path", { d: "m33.408 54.503-14 12-14-12" })
          ])
        ], -1)
      ]), 4)) : Ne("", !0),
      N.value === "grainLeftRight" ? (Vt(), re("svg", {
        key: 4,
        class: "grain",
        style: zn({
          stroke: v.iconColor ? v.iconColor : "#ffffff"
        }),
        viewBox: "0 0 106 64",
        xmlns: "http://www.w3.org/2000/svg"
      }, w[4] || (w[4] = [
        fe("g", null, [
          fe("path", { d: "m3 3h99.887" }),
          fe("path", { d: "m3.113 32h99.887" }),
          fe("path", { d: "m3.113 61h99.887" })
        ], -1)
      ]), 4)) : Ne("", !0),
      N.value === "grainTopBottom" ? (Vt(), re("svg", {
        key: 5,
        class: "grain",
        style: zn({
          stroke: v.iconColor ? v.iconColor : "#ffffff"
        }),
        viewBox: "0 0 64 106",
        xmlns: "http://www.w3.org/2000/svg"
      }, w[5] || (w[5] = [
        fe("g", null, [
          fe("path", { d: "m61 3v99.887" }),
          fe("path", { d: "m32 3.113v99.887" }),
          fe("path", { d: "m3 3.113v99.887" })
        ], -1)
      ]), 4)) : Ne("", !0)
    ], 14, _A));
  }
}), LA = ["id"], CA = /* @__PURE__ */ Ds({
  __name: "BandingButton",
  props: {
    inputShape: { default: null },
    open: { type: Boolean, default: !1 },
    id: { default: "" },
    orientationModel: { default: 0 },
    stockGrain: { default: "n" },
    disabled: { type: Boolean, default: !1 }
  },
  emits: ["clicked"],
  setup(e, { emit: t }) {
    const n = e, i = t, r = Pe({
      x1: !1,
      x2: !1,
      y1: !1,
      y2: !1
    });
    dr(() => n.inputShape.orientationLock, () => {
      let l = {
        x1: n.inputShape.banding.x1,
        x2: n.inputShape.banding.x2,
        y1: n.inputShape.banding.y1,
        y2: n.inputShape.banding.y2
      };
      const h = zg(
        n.orientationModel,
        n.stockGrain,
        n.inputShape
      );
      h && (l = gc(l, h, {
        x1: "y2",
        x2: "y1",
        y1: "x1",
        y2: "x2"
      })), r.value = l;
    }, { deep: !0, immediate: !0 }), dr([
      () => {
        var l;
        return (l = n.inputShape) == null ? void 0 : l.banding;
      },
      () => n.orientationModel,
      () => n.stockGrain,
      () => {
        var l;
        return (l = n.inputShape) == null ? void 0 : l.orientationLock;
      }
    ], () => {
      var c;
      if (!((c = n.inputShape) != null && c.banding)) return;
      let l = {
        x1: n.inputShape.banding.x1,
        x2: n.inputShape.banding.x2,
        y1: n.inputShape.banding.y1,
        y2: n.inputShape.banding.y2
      };
      const h = zg(
        n.orientationModel,
        n.stockGrain,
        n.inputShape
      );
      h && (l = gc(l, h, {
        x1: "y2",
        x2: "y1",
        y1: "x1",
        y2: "x2"
      })), r.value = l;
    }, { deep: !0, immediate: !0 });
    const s = rn(() => r.value), o = (l) => {
      (l.key === "Enter" || l.key === " ") && a();
    }, a = () => {
      n.disabled || i("clicked");
    };
    return pa(() => {
      var l;
      (l = document.getElementById(n.id)) == null || l.addEventListener("keydown", o);
    }), Lf(() => {
      var l;
      (l = document.getElementById(n.id)) == null || l.removeEventListener("keydown", o);
    }), (l, h) => (Vt(), re("div", {
      id: l.id,
      class: wi(["banding-button", { open: l.open, disabled: l.disabled }]),
      tabindex: "0",
      onClick: a
    }, [
      fe("div", {
        class: wi(["outer", {
          x1: s.value.x1,
          x2: s.value.x2,
          y1: s.value.y1,
          y2: s.value.y2
        }])
      }, h[0] || (h[0] = [
        fe("div", { class: "inner" }, null, -1)
      ]), 2)
    ], 10, LA));
  }
}), TA = ["unitDependent", "string", "integer", "float", "checkbox", "select"], IA = {
  name: "CustomInput",
  props: {
    type: {
      type: String,
      default: "string",
      validator(e) {
        return TA.includes(e);
      }
    },
    value: {
      type: [String, Boolean, Number],
      default: null
    },
    //element id
    id: {
      type: String,
      default: ""
    },
    focus: {
      type: Boolean,
      default: !1
    },
    enableLabel: {
      type: Boolean,
      default: !0
    },
    labelPosition: {
      type: String,
      default: "first",
      validator(e) {
        return ["first", "last"].includes(e);
      }
    },
    //used for select / checkbox
    output: {
      type: String,
      default: "string",
      validator(e) {
        return ["string", "integer", "float", "boolean"].includes(e);
      }
    },
    options: {
      type: Array,
      default: () => []
    },
    selectFirstOptionDisabled: {
      type: Boolean,
      default: !0
    },
    placeholder: {
      type: String,
      default: ""
    },
    label: {
      type: String,
      default: ""
    },
    disabled: {
      type: Boolean,
      default: !1
    },
    readonly: {
      type: Boolean,
      default: !1
    },
    trueValue: {
      type: [String, Number, Boolean],
      default: !0
    },
    falseValue: {
      type: [String, Number, Boolean],
      default: !1
    },
    default: {
      type: [String, Number, Boolean],
      default: ""
    },
    units: {
      type: String,
      default: "decimal",
      validator(e) {
        return ["decimal", "fraction"].includes(e);
      }
    },
    min: {
      type: Number,
      default: null
    },
    max: {
      type: Number,
      default: null
    },
    custom: {
      type: Boolean,
      default: !1
    },
    multiEdit: {
      type: Boolean,
      default: !1
    },
    allowBlank: {
      type: Boolean,
      default: !1
    },
    text: {
      type: Object,
      default: () => ({
        select: "Select",
        delete: "Delete"
      })
    },
    issue: {
      type: Boolean,
      default: !1
    },
    warning: {
      type: Boolean,
      default: !1
    }
  },
  emits: ["update", "default"],
  computed: {
    thisId() {
      return this.custom ? "custom-" + this.id : this.id;
    },
    inputType() {
      return yA(this.type, this.units);
    },
    inputMode() {
      return mA(this.type, this.units);
    },
    outputType() {
      return bA(this.type, this.output, this.units);
    }
  },
  watch: {
    options: {
      handler() {
        this.value && (this.options.find((e) => e.value == this.value) || this.updateValue(""));
      },
      deep: !1,
      immediate: !1
    }
    /* value: {
    	handler( value )
    	{
    		console.log( 'value changed', value )
    	},
    	deep: false,
    	immediate: true
    } */
  },
  created() {
    this.setDefault();
  },
  mounted() {
    const e = aa.call(this, "input");
    e && this.focus && this.$nextTick(() => e.focus());
  },
  methods: {
    getType() {
      return this.type === "unitDependent" ? this.units === "fraction" ? "string" : "float" : this.type;
    },
    handleInput(e) {
      let t = e.target.value;
      switch ((t === "" || t === null) && this.allowBlank && this.updateValue(null), this.getType()) {
        case "integer":
          t = t.replace(/[^0-9-]/g, ""), t = parseInt(t);
          break;
        case "float":
          t = t.replace(/[^0-9.-]/g, ""), t = parseFloat(t);
          break;
      }
      if ((this.getType() === "integer" || this.getType() === "float") && isNaN(t))
        return this.updateValue(null);
      typeof this.min == "number" && t < this.min && (t = this.min), typeof this.max == "number" && t > this.max && (t = this.max), this.updateValue(t);
    },
    updateValue(e, t = "update") {
      if (e === null) return this.$emit(t, e);
      if (this.type === "unitDependent" || this.output === "unitDependent") {
        if (this.units === "fraction")
          return e = e.replace(/[^0-9/ ]+/g, "").replace(/\s{2,}/g, " ").trim(), this.$emit(t, e);
        if (this.units === "decimal")
          return this.$emit(t, parseFloat(e));
      }
      switch (this.outputType) {
        case "string":
          return this.$emit(t, e);
        case "integer":
          return this.$emit(t, parseInt(e));
        case "float":
          return this.$emit(t, parseFloat(e));
        case "boolean":
          return this.$emit(t, vA(e));
        default:
          return this.$emit(t, e);
      }
    },
    setDefault() {
      !Lt(this.value) && Lt(this.default) && this.updateValue(this.default);
    }
  }
}, EA = ["for"], OA = ["id", "inputmode", "type", "value", "placeholder", "disabled", "readonly", "min", "max", "aria-label"], FA = ["id", "disabled", "checked", "aria-label"], MA = ["id", "value", "disabled", "aria-label"], RA = ["disabled", "selected"], DA = {
  key: 0,
  value: " "
}, jA = ["hidden", "value"], BA = ["for"];
function qA(e, t, n, i, r, s) {
  var o, a, l, h;
  return Vt(), re(ri, null, [
    n.label && n.enableLabel && n.labelPosition === "first" ? (Vt(), re("label", {
      key: 0,
      for: s.thisId
    }, gn(n.label), 9, EA)) : Ne("", !0),
    n.type === "string" || n.type === "integer" || n.type === "float" || n.type === "unitDependent" ? (Vt(), re("input", {
      key: 1,
      id: s.thisId,
      ref: "input",
      inputmode: s.inputMode,
      type: s.inputType,
      value: n.value,
      placeholder: n.placeholder,
      disabled: n.disabled,
      readonly: n.readonly,
      class: wi({ issue: n.issue, warning: n.warning }),
      min: n.min,
      max: n.max,
      "aria-label": n.label,
      onChange: t[0] || (t[0] = (...c) => s.handleInput && s.handleInput(...c))
    }, null, 42, OA)) : Ne("", !0),
    n.type === "checkbox" ? (Vt(), re("input", {
      key: 2,
      id: s.thisId,
      ref: "input",
      type: "checkbox",
      disabled: n.readonly || n.disabled,
      checked: n.value === n.trueValue,
      "aria-label": n.label,
      class: wi({ issue: n.issue, warning: n.warning }),
      onChange: t[1] || (t[1] = (c) => s.updateValue(c.target.checked ? n.trueValue : n.falseValue))
    }, null, 42, FA)) : Ne("", !0),
    n.type === "select" ? (Vt(), re("select", {
      key: 3,
      id: s.thisId,
      ref: "input",
      value: n.value,
      disabled: n.readonly || n.disabled,
      "aria-label": n.label,
      class: wi({ issue: n.issue, warning: n.warning }),
      onChange: t[2] || (t[2] = (c) => s.updateValue(c.target.value))
    }, [
      fe("option", {
        value: "",
        disabled: n.selectFirstOptionDisabled,
        selected: !n.value
      }, gn(((a = (o = n.text) == null ? void 0 : o.select) == null ? void 0 : a.toUpperCase()) ?? "SELECT"), 9, RA),
      n.multiEdit ? (Vt(), re("option", DA, gn(((h = (l = n.text) == null ? void 0 : l.delete) == null ? void 0 : h.toUpperCase()) ?? "DELETE"), 1)) : Ne("", !0),
      (Vt(!0), re(ri, null, ts(n.options, (c) => {
        var d, g, p;
        return Vt(), re("option", {
          key: c.value,
          hidden: c.hidden,
          value: c.value
        }, gn(((d = c == null ? void 0 : c.label) == null ? void 0 : d.toUpperCase()) ?? ((p = (g = c == null ? void 0 : c.value) == null ? void 0 : g.toString()) == null ? void 0 : p.toUpperCase())), 9, jA);
      }), 128))
    ], 42, MA)) : Ne("", !0),
    n.label && n.enableLabel && n.labelPosition === "last" ? (Vt(), re("label", {
      key: 4,
      for: n.id
    }, gn(n.label), 9, BA)) : Ne("", !0)
  ], 64);
}
const al = /* @__PURE__ */ Tl(IA, [["render", qA]]), $A = {
  key: 0,
  class: "inputs"
}, zA = { class: "label" }, UA = { class: "label" }, WA = { class: "label" }, HA = ["onClick"], GA = { class: "price" }, VA = ["aria-label"], Wg = /* @__PURE__ */ Ds({
  __name: "ExtrasInputs",
  props: {
    translate: { type: Boolean, default: !0 },
    shape: {},
    shapeIndex: { default: 0 },
    extraType: {},
    extraLabel: {},
    extraKeys: {},
    allOptions: {},
    pricing: { default: () => ({}) },
    labels: {},
    userFriendlyFieldMap: {},
    partColumns: {},
    orientationModel: { default: 0 },
    getPrice: {},
    formatPrice: {},
    getAvailablePricingOptions: {}
  },
  emits: ["update-all", "set"],
  setup(e, { emit: t }) {
    const n = e, i = t, { t: r } = Yg({
      inheritLocale: !0,
      useScope: "global"
    }), s = Pe(!1), o = rn(() => n.extraType + "Options"), a = rn(() => {
      var N;
      if (!((N = n.allOptions) != null && N.length)) return "auto";
      const b = n.allOptions.length;
      return b ? `repeat(${b + 3 - 1}, minmax(20px, max-content)) 1fr` : "auto";
    }), l = (b, x) => {
      i("update-all", n.shape, n.extraType, b, x);
    }, h = (b, x, N) => {
      i("set", n.shape, n.extraType, b, x, N);
    }, c = (b, x, N, v, w) => {
      var G;
      if (!b) return [];
      const k = (G = x == null ? void 0 : x[N]) == null ? void 0 : G[v];
      if (!k)
        return console.error(`ExtrasInputs: cannot find pricing options for ${N} > ${v}`), [];
      const T = Object.values(k);
      if (!T.length)
        return console.error(`ExtrasInputs: cannot find pricing options for ${N} > ${v}`), [];
      const D = T.filter((R) => typeof R == "string");
      return n.getAvailablePricingOptions ? n.getAvailablePricingOptions(b, D, w) : (console.error("ExtrasInputs: cannot find pricing function in parent"), []);
    }, d = (b) => {
      if (!n.pricing || !Object.values(n.pricing).length) return "";
      if (!n.getPrice)
        return console.error("ExtrasInputs: cannot find getExtrasPrice or formatPrice in parent"), "";
      const x = n.getPrice(n.shape, n.extraType, b);
      return x ? n.formatPrice(x) : "";
    }, g = () => {
      const b = [];
      n.extraType in n.shape || b.push({ message: `The extra type '${n.extraType}' does not exist in the shape.` }), o.value in n.shape || b.push({ message: `The options key '${o.value}' does not exist in the shape.` }), b.length && (s.value = !0, console.error("pre-flight issues found in ExtrasInputs: " + b.map((x) => x.message).join(" ")));
    }, p = (b) => Hb(b);
    return pa(() => g()), (b, x) => {
      var v, w, k, T, D, G, R, O;
      const N = mc("font-awesome-icon");
      return s.value ? Ne("", !0) : (Vt(), re("div", {
        key: 0,
        class: wi(["extras group", [b.extraType]]),
        style: zn({ "grid-column-end": "span " + (b.partColumns + 1) })
      }, [
        b.allOptions.length === 1 && b.allOptions[0].length === 1 ? (Vt(), re("div", $A, [
          fe("div", zA, gn(p((w = (v = b.allOptions) == null ? void 0 : v[0]) == null ? void 0 : w[0])), 1),
          (k = b.shape) != null && k[o.value] && "all" in b.shape[o.value] ? (Vt(), Vn(al, {
            key: 0,
            id: `${b.extraType}-all-${b.shapeIndex}`,
            type: "checkbox",
            label: p(Ie(r)("all")),
            "true-value": (D = (T = b.allOptions) == null ? void 0 : T[0]) == null ? void 0 : D[0],
            "false-value": "",
            value: (R = b.shape[o.value].all) == null ? void 0 : R[(G = b.labels) == null ? void 0 : G[0]],
            onUpdate: x[0] || (x[0] = ($) => {
              var z, A;
              h("all", (z = b.labels) == null ? void 0 : z[0], $), l((A = b.labels) == null ? void 0 : A[0], $);
            })
          }, null, 8, ["id", "label", "true-value", "value"])) : Ne("", !0),
          (Vt(!0), re(ri, null, ts(b.extraKeys, ($) => {
            var z, A, _, I, M, st;
            return Vt(), re(ri, { key: $ }, [
              (z = b.labels) != null && z[0] && ((_ = (A = b.shape) == null ? void 0 : A[o.value]) != null && _[$]) && b.labels[0] in b.shape[o.value][$] ? (Vt(), Vn(al, {
                key: 0,
                id: `${b.extraType}-${$}-${b.shapeIndex}`,
                type: "checkbox",
                label: p(Ie(r)((I = b.userFriendlyFieldMap) == null ? void 0 : I[$])),
                "true-value": (st = (M = b.allOptions) == null ? void 0 : M[0]) == null ? void 0 : st[0],
                "false-value": "",
                value: b.shape[o.value][$][b.labels[0]],
                onUpdate: (W) => h($, b.labels[0], W)
              }, null, 8, ["id", "label", "true-value", "value", "onUpdate"])) : Ne("", !0)
            ], 64);
          }), 128))
        ])) : (Vt(), re("div", {
          key: 1,
          class: "grid inputs",
          style: zn({
            "grid-template-columns": a.value
          })
        }, [
          (O = b.shape) != null && O[o.value] && "all" in b.shape[o.value] ? (Vt(), re(ri, { key: 0 }, [
            fe("div", UA, gn(p(Ie(r)("all"))), 1),
            (Vt(!0), re(ri, null, ts(b.allOptions, ($, z) => {
              var A, _;
              return Vt(), Vn(al, {
                id: `${b.extraType}-all-${b.labels[z]}-${z}-${b.shapeIndex}`,
                key: `${b.extraType}-all-${b.labels[z]}-${z}-${b.shapeIndex}`,
                type: "select",
                disabled: c(b.pricing, b.shape, o.value, "all", z).length === 0,
                options: c(b.pricing, b.shape, o.value, "all", z).map((I) => ({ value: I, label: I })),
                text: { select: "✘" },
                "select-first-option-disabled": !1,
                value: (_ = b.shape[o.value].all) == null ? void 0 : _[(A = b.labels) == null ? void 0 : A[z]],
                onUpdate: (I) => {
                  var M, st;
                  h("all", (M = b.labels) == null ? void 0 : M[z], I), l((st = b.labels) == null ? void 0 : st[z], I);
                }
              }, null, 8, ["id", "disabled", "options", "value", "onUpdate"]);
            }), 128)),
            x[2] || (x[2] = fe("div", null, null, -1)),
            x[3] || (x[3] = fe("div", null, null, -1))
          ], 64)) : Ne("", !0),
          (Vt(!0), re(ri, null, ts(b.extraKeys, ($) => {
            var z, A;
            return Vt(), re(ri, { key: $ }, [
              (z = b.shape) != null && z[o.value] && $ in b.shape[o.value] ? (Vt(), re(ri, { key: 0 }, [
                fe("div", WA, gn(p(Ie(r)((A = b.userFriendlyFieldMap) == null ? void 0 : A[$]))), 1),
                (Vt(!0), re(ri, null, ts(b.allOptions, (_, I) => {
                  var M;
                  return Vt(), Vn(al, {
                    id: `${b.extraType}-${$}-${b.labels[I]}-${I}-${b.shapeIndex}`,
                    key: `${b.extraType}-${$}-${b.labels[I]}-${I}-${b.shapeIndex}`,
                    type: "select",
                    disabled: c(b.pricing, b.shape, o.value, $, I).length === 0,
                    options: c(b.pricing, b.shape, o.value, $, I).map((st) => ({
                      value: st,
                      label: st
                    })),
                    text: { select: "✘" },
                    "select-first-option-disabled": !1,
                    value: b.shape[o.value][$][(M = b.labels) == null ? void 0 : M[I]],
                    onUpdate: (st) => {
                      var W;
                      return h($, (W = b.labels) == null ? void 0 : W[I], st);
                    }
                  }, null, 8, ["id", "disabled", "options", "value", "onUpdate"]);
                }), 128))
              ], 64)) : Ne("", !0),
              fe("div", {
                class: "delete",
                onClick: () => Ie(Im)(b.shape, b.extraType, $)
              }, [
                ii(N, { icon: ["fass", "trash"] })
              ], 8, HA),
              fe("div", GA, gn(d($) || Ie(r)("N/A")), 1)
            ], 64);
          }), 128))
        ], 4)),
        fe("button", {
          type: "button",
          class: "delete icon-left",
          "aria-label": Ie(r)(`delete ${b.extraLabel}`),
          onClick: x[1] || (x[1] = () => Ie(Q6)(b.shape, b.extraType, !0))
        }, [
          ii(N, { icon: ["fass", "trash"] }),
          Fu(" " + gn(Ie(r)(`delete ${b.extraLabel}`)), 1)
        ], 8, VA)
      ], 6));
    };
  }
}), YA = ["id", "disabled"], KA = { class: "icon" }, JA = /* @__PURE__ */ Ds({
  __name: "FinishButton",
  props: {
    inputShape: { default: null },
    open: { type: Boolean, default: !1 },
    id: { default: "" },
    disabled: { type: Boolean, default: !1 }
  },
  emits: ["clicked"],
  setup(e, { emit: t }) {
    const n = e, i = t, r = () => {
      n.disabled || i("clicked");
    };
    return (s, o) => {
      var l, h, c, d;
      const a = mc("font-awesome-icon");
      return Vt(), re("button", {
        id: s.id,
        class: wi(["finish-button", {
          "face-a": (h = (l = s.inputShape) == null ? void 0 : l.finish) == null ? void 0 : h.a,
          "face-b": (d = (c = s.inputShape) == null ? void 0 : c.finish) == null ? void 0 : d.b,
          selected: s.open
        }]),
        type: "button",
        tabindex: "0",
        disabled: s.disabled,
        onClick: r
      }, [
        fe("div", KA, [
          ii(a, { icon: ["fass", "spray-can"] })
        ]),
        o[0] || (o[0] = fe("div", { class: "indicator" }, null, -1))
      ], 10, YA);
    };
  }
}), XA = Ds({
  name: "MachiningButton",
  props: {
    inputShape: {
      type: Object,
      default: null
    },
    id: {
      type: String,
      default: ""
    },
    disabled: {
      type: Boolean,
      default: !1
    }
  },
  emits: ["open"],
  computed: {
    hasMachining() {
      return u1(this.inputShape);
    },
    disabledOrReadonly() {
      var e;
      return this.disabled || !!((e = this.inputShape) != null && e.readonly);
    }
  },
  methods: {
    openMachining() {
      this.disabled || this.$emit("open");
    }
  }
}), ZA = ["id", "disabled"];
function QA(e, t, n, i, r, s) {
  const o = mc("font-awesome-icon");
  return Vt(), re("button", {
    id: e.id,
    class: wi(["machining-button", { "has-machining": e.hasMachining }]),
    type: "button",
    disabled: e.disabled,
    onClick: t[0] || (t[0] = (...a) => e.openMachining && e.openMachining(...a))
  }, [
    ii(o, { icon: ["fass", "hammer"] })
  ], 10, ZA);
}
const tk = /* @__PURE__ */ Tl(XA, [["render", QA]]), ek = {
  key: 0,
  class: "debug"
}, nk = { key: 2 }, ik = {
  key: 0,
  class: "row table-heading"
}, rk = {
  key: 0,
  class: "cell center"
}, sk = {
  key: 1,
  class: "cell delete"
}, ok = { class: "cell" }, ak = {
  key: 0,
  class: "cell center"
}, lk = ["onClick"], uk = {
  key: 1,
  class: "cell"
}, ck = ["disabled", "aria-label", "onClick"], hk = { class: "button-wrapper main" }, fk = ["aria-label"], dk = ["aria-label", "disabled"], pk = ["aria-label"], gk = { id: "part-count" }, mk = {
  key: 3,
  id: "messages"
}, yk = {
  key: 0,
  class: "heading"
}, bk = { class: "content" }, vk = {
  key: 4,
  id: "progress"
}, wk = {
  id: "diagram",
  class: "diagram production"
}, xk = {
  key: 0,
  id: "stack"
}, Sk = !0, Fm = /* @__PURE__ */ Ds({
  __name: "CheckoutCalculator",
  props: {
    debug: {
      type: Boolean,
      default: !1
    },
    units: {
      type: String,
      default: "decimal"
    },
    stock: {
      type: Array,
      default: () => []
    },
    findExtrasPrice: {
      type: Function,
      required: !0
    },
    formatPrice: {
      type: Function,
      required: !0
    },
    readonly: {
      type: Boolean,
      default: !1
    }
  },
  emits: ["inputs-changed", "calculating", "result", "log", "error"],
  setup(e, { expose: t, emit: n }) {
    const i = sa(() => import("./Machining-Bzr_N8S0.js")), r = sa(() => import("./ImportCSV-BWBkj81t.js")), s = sa(() => import("./ObjectViewer-sOARGFKO.js")), o = e, a = n, { t: l, locale: h } = Yg({
      locale: "en_US",
      useScope: "global"
    }), c = "production", d = window.location.hostname;
    let g = null, p = null;
    const b = Pe(!1), x = Pe(!1), N = Pe(!0), v = ug("Checkout/currentURL", window.location.href), w = Pe(window.innerWidth), k = Pe(!1), T = Pe(!1), D = Pe(!1), G = Pe(!1), R = Pe(0), O = Pe(!1), $ = Pe(!1), z = Pe(Vb()), A = Nr({
      enable: {
        banding: !0,
        finish: !0,
        orientation: !0,
        diagram: !0,
        focus: !0,
        machining: !0,
        csvImport: !0,
        click: !0,
        partName: !0,
        progressNumber: !0
      },
      decimalPlaces: 2,
      stackHeight: 100,
      maxParts: null,
      locale: "en_US",
      orientationModel: 0,
      customFields: [],
      fieldOrder: [],
      units: "decimal",
      minDimension: 0,
      stockSelection: null,
      cutPreference: null,
      bladeWidth: null,
      stockType: null,
      minSpacing: 0,
      stockGrain: null
    }), _ = Pe(null), I = Nr({
      bladeWidth: 1,
      cutPreference: "l",
      cutType: "guillotine",
      stockType: "sheet",
      stackHeight: 0,
      options: {
        stockSelection: "efficiency",
        minSpacing: 0
      }
    }), M = ug(
      "Checkout/inputShapes",
      [],
      {
        serializer: {
          read: (et) => {
            if (!et) return [];
            const at = et ? JSON.parse(et) : [];
            return Ib(at, o.units);
          },
          write: (et) => JSON.stringify(et)
        },
        listenToStorageChanges: !1
      }
    ), st = Pe([]), W = no([]), U = no([]), Q = no([]), Z = no([]), ct = Pe({
      parts: [],
      stock: []
    }), St = Pe(null), P = Pe(null), B = Pe(null), V = rn(() => U.value.filter((et) => et.added)), J = rn(() => U.value.filter((et) => et.added && !et.duplicate)), nt = rn(() => J.value.filter((et) => et.added)), gt = rn(() => W.value.filter((et) => et.used && !et.duplicate)), yt = rn(() => gt.value.filter((et) => et.used).map((et) => (et.q = gt.value.filter((at) => at.parentID === et.parentID).reduce(
      (at, ft) => at + (typeof (ft == null ? void 0 : ft.stack) == "number" && ft.stack > 0 ? ft.stack : 1),
      0
    ), et))), vt = rn(() => W6(W.value)), Rt = rn(() => B.value ? z6(W.value, B.value) : null), Dt = rn(() => Gb(W.value)), Ut = rn(() => U.value.filter((et) => {
      var at, ft;
      return et.added && ((at = et == null ? void 0 : et.stock) == null ? void 0 : at.id) === ((ft = Rt.value) == null ? void 0 : ft.id);
    })), Wt = rn(() => U6(Q.value, Rt.value)), he = rn(() => M.value.reduce((et, at) => et + at.q, 0)), Nt = Pe(!1), it = Pe(""), de = Pe(""), Xt = Nr({
      banding: null,
      finish: null,
      info: null
    }), Mt = Pe([]), qt = Pe([]), Gt = Pe([]), Ht = Pe(!1), ee = Nr({
      units: "decimal",
      faces: { enabled: !0 },
      holes: { enabled: !1 },
      corners: {
        enabled: !1,
        types: []
      },
      banding: { enabled: !1 },
      hingeHoles: { enabled: !1 },
      shelfHoles: { enabled: !1 }
    }), Qt = Nr({
      labels: [],
      pricing: {},
      options: {},
      keys: mr
    }), oe = Nr({
      labels: [],
      pricing: {},
      options: {},
      keys: ["a", "b"]
    }), xe = Pe({
      queue: 0,
      stockCount: 0,
      shapeCount: 0,
      complete: !1
    }), ke = Nr({
      partA: "#118ab2",
      partB: null,
      partHover: null,
      partSelected: null,
      stock: "#ffd166",
      button: "#118ab2",
      buttonText: "#ffffff",
      text: "#ffffff"
    });
    let Fe = null;
    const ue = Pe(!1), rt = Pe(!1), mt = Nr({
      disableClick: !1,
      enableStretch: !0
    }), zt = no(null), It = Nr({
      parts: {
        sheet: [
          { id: "material", enabled: !1 },
          { id: "l", enabled: !0 },
          { id: "w", enabled: !0 },
          { id: "t", enabled: !1 },
          { id: "q", enabled: !0 },
          { id: "name", enabled: !0 },
          { id: "orientationLock", enabled: !0 },
          { id: "banding", enabled: !1 },
          { id: "finish", enabled: !1 },
          { id: "machining", enabled: !1 }
        ],
        linear: [
          { id: "l", enabled: !0 },
          { id: "q", enabled: !0 },
          { id: "name", enabled: !0 },
          { id: "finish", enabled: !1 }
        ],
        roll: [
          { id: "l", enabled: !0 },
          { id: "w", enabled: !0 },
          { id: "q", enabled: !0 },
          { id: "name", enabled: !0 },
          { id: "orientationLock", enabled: !0 }
        ]
      }
    }), be = Pe([]), $t = rn(() => {
      var at;
      return [...[
        {
          id: "material",
          fieldMap: "material",
          label: l("material"),
          w: "minmax(20px, max-content)",
          type: "select",
          output: "string",
          default: (at = Mt.value[0]) == null ? void 0 : at.name,
          options: Mt.value.map((ft) => ({
            value: ft.name,
            label: ft.name
          }))
        },
        {
          id: "t",
          fieldMap: "t",
          w: "minmax(20px, max-content)",
          type: "select",
          output: o.units === "decimal" ? "float" : "string",
          label: l("thickness")
        },
        {
          id: "l",
          fieldMap: "l",
          type: "unitDependent",
          label: l("length"),
          min: 0
        },
        {
          id: "w",
          fieldMap: "w",
          type: "unitDependent",
          label: l("width"),
          min: 0
        },
        {
          id: "q",
          fieldMap: "q",
          type: "integer",
          default: 1,
          label: l("quantity"),
          min: 0
        },
        {
          id: "name",
          fieldMap: "name",
          type: "string",
          label: l("name")
        },
        {
          id: "orientationLock",
          w: "32px",
          label: l("orientation"),
          fieldMap: "orientationLock"
        },
        {
          id: "banding",
          w: "32px",
          label: l("banding"),
          fieldMap: "bandingOptions"
        },
        {
          id: "finish",
          type: "checkbox",
          w: "32px",
          label: l("finish"),
          fieldMap: "finish"
        },
        {
          id: "machining",
          w: "32px",
          label: l("machining"),
          fieldMap: "machining"
        }
      ], ...be.value];
    }), Ft = rn(() => kA(
      It,
      $t.value,
      "parts",
      I.stockType,
      A.fieldOrder
    )), pe = rn(() => {
      let et = Ft.value.length;
      return M.value.length > 1 && et++, et;
    }), Me = rn(() => {
      const et = {
        id: "34px",
        del: "30px",
        info: "30px"
      }, at = [];
      for (const ft of Ft.value)
        ft.id !== "trim" && at.push(ft.w ?? "minmax(20px, 1fr)");
      return at.unshift(et.id), M.value.length > 1 && at.push(et.del), at.join(" ");
    }), ji = rn(() => ({
      fontSize: "11px",
      textAlign: "right",
      width: "100%",
      height: "auto",
      position: "relative",
      display: "flex",
      visibility: "visible",
      opacity: "1",
      flexDirection: "row",
      flexWrap: "wrap",
      justifyContent: "flex-end",
      paddingRight: "10px",
      marginTop: "10px",
      marginBottom: "2px",
      userSelect: "none",
      alignItems: "center"
    })), on = rn(() => ({
      width: "auto",
      height: "auto",
      display: "inline-block",
      position: "relative",
      visibility: "visible",
      opacity: "1",
      color: "#4e4e4e"
    })), Yn = (et, at) => {
      let ft;
      return function(...kt) {
        const ae = () => {
          clearTimeout(ft), et(...kt);
        };
        clearTimeout(ft), ft = setTimeout(ae, at);
      };
    }, Dn = (et, at) => wA(et, at), an = (et, at, ft, Ct = !0) => {
      xA(et, at, ft, Ct);
    }, ve = (et) => {
      if (o.debug && a("log", ["checkout init...", et]), et != null && et.options) {
        const at = et.options;
        nA(at), [
          "stockType",
          "cutPreference",
          "bladeWidth"
        ].forEach((kt) => {
          kt in at || a("error", `${kt} is a required option`);
        });
        const Ct = {
          stockType: () => {
            const kt = ["sheet", "linear"];
            kt.includes(at.stockType) || console.warn(`${at.stockType} is not a valid stockType, expected ${kt.join("|")}`), I.stockType = at.stockType;
          },
          stockSelection: () => {
            const kt = [void 0, "efficiency", "smallest"];
            kt.includes(at.stockSelection) || console.warn(`${at.stockSelection} is not a valid stockSelection, expected ${kt.join("|")}`), I.options.stockSelection = at.stockSelection;
          },
          minSpacing: () => {
            I.options.minSpacing = at.minSpacing;
          },
          cutPreference: () => {
            const kt = ["efficiency", "length", "width", "beam"];
            if (kt.includes(at.cutPreference)) {
              const { cutType: ae, cutPreference: ne } = Zh(at.cutPreference);
              I.cutType = ae, I.cutPreference = ne, I.stackHeight = at.stackHeight, at.stockType === "linear" && (I.cutType = null, I.cutPreference = null), at.cutPreference === "beam" && (I.stackHeight = at.stackHeight);
            } else
              console.warn(`SmartCut - ${at.cutPreference} is not one of ${kt.join("|")}`);
          },
          bladeWidth: () => {
            at.bladeWidth >= 0 ? I.bladeWidth = at.bladeWidth : console.warn(`SmartCut - you provided an incorrect blade width of: ${at.bladeWidth}`);
          },
          colors: () => {
            for (const [kt, ae] of Object.entries(at == null ? void 0 : at.colors))
              ae && (ke[kt] = ae);
          },
          maxParts: () => {
            A.maxParts = at.maxParts;
          },
          enable: () => {
            Ze("banding", vn(at, ["enable", "banding"])), Ze("finish", vn(at, ["enable", "finish"])), Ze("orientationLock", vn(at, ["enable", "orientation"])), Ze("machining", vn(at, ["enable", "machining"])), $.value = vn(at, ["enable", "csvImport"]), mt.disableClick = vn(at, ["enable", "click"]) === !1, Ze("name", vn(at, ["enable", "partName"]));
          },
          locale: () => {
            h.value = at.locale;
          },
          customFields: () => {
            var ae;
            if (!Array.isArray(at.customFields) || !((ae = at.customFields) != null && ae.length)) return;
            const kt = [];
            at.customFields.forEach((ne, we) => {
              kt.push(ne), kt[we].custom = !0;
              const Ye = ki(ne.id);
              kt[we].id = Ye, kt[we].fieldMap = "customData." + Ye, ne.type === "checkbox" && (kt[we].w = "32px"), ne.type === "select" && (kt[we].output = ne.output ?? "string", kt[we].options = ne.options);
            }), be.value = kt, M.value.forEach((ne) => {
              ne.customData = at.customFields.reduce((we, Ye) => {
                const We = ki(Ye.id);
                return we[We] = ne.customData[We] || Ye.default || "", we;
              }, {});
            });
          }
        };
        for (const kt in at)
          A[kt] = at[kt], kt in Ct && Ct[kt]();
      }
      No("banding", et), No("finish", et), Bi(et), wn(et), T.value = !0, Qr(() => {
        ue.value || _o(), $i() || alert("The SmartCut credit seems to have been tampered with - this is against our terms of service. Please contact support.");
      }), window.smartcutCheckout = { init: ve };
    }, qe = (et) => {
      if (!st.value.length) return "n";
      const at = et.material, ft = et.t, Ct = st.value.filter((kt) => kt.material === at && kt.t === ft);
      return Ct.length ? qb(Ct) : "n";
    }, Dr = (et, at) => {
      et.orientationLock = at;
    }, Ze = (et, at = !0) => {
      SA(It, "parts", I.stockType, et, at);
    }, ki = (et) => et ? Ll(et).toLowerCase() : null, Bi = (et) => {
      var at, ft, Ct, kt, ae;
      if (vn(A, ["enable", "machining"]) && et != null && et.machining) {
        for (const ne in ee)
          et.machining[ne] && (ee[ne] = et.machining[ne]);
        if (["holes", "hingeHoles"].forEach((ne) => {
          var we, Ye;
          (we = et == null ? void 0 : et.machining) != null && we[ne] && (ee[ne].enabled = (Ye = et == null ? void 0 : et.machining) == null ? void 0 : Ye[ne].enabled);
        }), (Ct = (ft = (at = et == null ? void 0 : et.machining) == null ? void 0 : at.corners) == null ? void 0 : ft.types) != null && Ct.length && (ee.corners.enabled = !0, ee.corners.types = et.machining.corners.types), et.banding && ((ae = (kt = et == null ? void 0 : et.options) == null ? void 0 : kt.enable) != null && ae.banding)) {
          if (!Qt) return;
          ee.banding = {
            enabled: !0
          }, Qt.options.length && (ee.banding.options = Qt.options), Qt.labels.length && (ee.banding.labels = Qt.labels), bo(Qt.pricing) && (ee.banding.pricing = Qt.pricing);
        }
      }
    }, ge = (et = null) => {
      P.value = et, et && et.l && et.w ? Ht.value = !0 : alert("Please enter dimensions first");
    }, _i = () => {
      Ht.value = !1, document.exitFullscreen && document.exitFullscreen();
    }, Ni = (et = []) => {
      if (qt.value = [], Gt.value = [], Ze("t", !1), !!et.length) {
        for (const at of et)
          if (at != null && at.t)
            if (typeof at.t == "string" && at.t.includes(",")) {
              const ft = jr(at.t, !0);
              ft.length === 2 ? (ai(ft), Ze("t", !0), at.t = qt.value[0]) : a("error", "bonded thickness found which does not have 2 options");
            } else qt.value.includes(at.t) || qt.value.push(at.t);
        qt.value.length > 1 && Ze("t", !0);
      }
    }, Kn = (et) => kn(et).thicknesses.map((ft) => ({
      label: ft == null ? void 0 : ft.toString(),
      value: ft
    })), kn = (et) => {
      var kt;
      if (!et) return { thicknesses: [], bondedThicknesses: [] };
      if (!((kt = Mt.value) != null && kt.length))
        return {
          thicknesses: qt.value,
          bondedThicknesses: []
        };
      if (!et.material) return { thicknesses: [], bondedThicknesses: [] };
      const at = Mt.value.find((ae) => ae.name === et.material);
      if (!at) return { thicknesses: [], bondedThicknesses: [] };
      const ft = [...at.thicknesses], Ct = [];
      for (let ae = 0; ae < ft.length; ae++) {
        const ne = ft[ae], we = jr(ne), Ye = [];
        if (we.length) {
          for (const We of we)
            ft[ae] = Yt(We), Ye.push(ae);
          ae++;
        }
        Ye.length && Ct.push(Ye);
      }
      return {
        thicknesses: ft,
        bondedThicknesses: Ct
      };
    }, wn = (et) => {
      var at;
      if ((at = et == null ? void 0 : et.stock) != null && at.some((ft) => ft == null ? void 0 : ft.material)) {
        Mt.value = [], qt.value = [], Gt.value = [];
        const ft = /* @__PURE__ */ new Map();
        et.stock.forEach((Ct) => {
          var ae;
          if (!Ct.material) return;
          const kt = Ct.material.toUpperCase();
          if (ft.has(kt) || ft.set(kt, /* @__PURE__ */ new Set()), Ct.t != null) {
            const ne = Number(Ct.t);
            isNaN(ne) || (ae = ft.get(kt)) == null || ae.add(ne);
          }
        }), Mt.value = Array.from(ft.entries()).map(([Ct, kt]) => ({
          name: Ct,
          thicknesses: Array.from(kt).sort((ne, we) => ne - we)
        })), Mt.value.length > 1 && Ze("material", !0);
      } else
        Ni(et.stock);
    }, ai = (et, at = null) => {
      if (!Array.isArray(et)) {
        a("error", "addBondedThicknesses expects an array");
        return;
      }
      const ft = [];
      for (let Ct = 0; Ct < et.length; Ct++) {
        let kt = et[Ct];
        o.units === "decimal" && (kt = parseFloat(kt)), qt.value.push(kt), at && at.thicknesses.push(kt), ft.push(qt.value.length - 1);
      }
      Gt.value.push(ft);
    }, jr = (et, at = !1) => {
      if (typeof et == "string" && et.includes(",")) {
        const ft = et.split(",");
        return at ? ft.map((Ct) => Yt(Ct)) : ft;
      }
      return [];
    }, er = () => {
      rt.value ? Li() : Pi();
    }, Pi = () => {
      document.getElementById("smartcut-checkout").requestFullscreen(), rt.value = !0;
    }, Li = () => {
      document.exitFullscreen && document.exitFullscreen(), rt.value = !1;
    };
    g = Yn(() => {
      w.value = window.innerWidth;
    }, 30);
    const $i = () => {
      var Ct, kt;
      if ((kt = (Ct = zt.value) == null ? void 0 : Ct.api) != null && kt.whiteLabel) return !0;
      let et = !0;
      const at = document.querySelector("#smartcut-app #credit"), ft = document.querySelector("#smartcut-app #credit a");
      return [at, ft].forEach((ae, ne) => {
        if (!ae) return et = !1;
        const we = window.getComputedStyle(ae);
        if (we.display === "none" || we.display === "hidden" || we.opacity === "0" || we.color === "transparent" || we.position !== "relative" || ne === 1 && we.color !== "#4e4e4e" && we.color !== "rgb(78, 78, 78)")
          return et = !1;
      }), N.value = et, et;
    }, li = (et, at, ft, Ct, kt) => {
      Om(
        et,
        at,
        ft,
        Ct,
        kt,
        o.findExtrasPrice
      );
    }, Ci = (et, at, ft, Ct) => {
      tA(
        et,
        at,
        ft,
        Ct,
        at === "banding" ? Nl : [],
        o.findExtrasPrice
      );
    }, zi = (et, at) => {
      const ft = at === "banding" ? Qt == null ? void 0 : Qt.labels : oe == null ? void 0 : oe.labels;
      Z6(et, at, ft);
      const Ct = qd(at);
      if (et != null && et[Ct])
        for (const kt in et[Ct]) {
          const ae = pc(et, at, kt, o.findExtrasPrice);
          wl(et, at, kt, !!ae);
        }
    }, Br = (et) => {
      const at = Object.keys(et);
      return Math.max(...at.map((Ct) => Ct.split("|").length));
    }, qr = (et) => {
      const at = [], ft = Object.keys(et), Ct = Br(et);
      for (let kt = Ct; kt--; ) at.push(/* @__PURE__ */ new Set());
      for (const kt of ft)
        kt.split("|").forEach((ne, we) => at[we].add(ne));
      for (let kt = 0; kt < Ct; kt++)
        at[kt] = Array.from(at[kt]);
      return at;
    }, nr = (et, at = [], ft) => {
      if (!et) return [];
      if (ft > 0 && !at[ft - 1]) return [];
      const Ct = /* @__PURE__ */ new Set();
      for (const kt of Object.keys(et)) {
        const ae = kt.split("|");
        if (ae.length > ft) {
          let ne = !0;
          for (let we = 0; we < ft; we++)
            if (at[we] && ae[we] !== at[we]) {
              ne = !1;
              break;
            }
          ne && Ct.add(ae[ft]);
        }
      }
      return Array.from(Ct);
    }, ir = (et, at, ft) => pc(
      et,
      at,
      ft,
      o.findExtrasPrice
    ), Bs = (et = "issues", at, ft) => q6(et, at, ft), ss = (et = 1) => {
      for (let at = et; at--; ) {
        let ft;
        if (M.value.length > 0) {
          const Ct = M.value[M.value.length - 1];
          ft = Ui({
            material: Ct.material,
            t: Ct.t
          });
        } else
          ft = Ui();
        M.value.push(ft);
      }
    }, ba = (et) => {
      var ft;
      if (o.readonly || M.value.length === 1) return;
      const at = M.value[et].listId;
      M.value.splice(et, 1), ((ft = P.value) == null ? void 0 : ft.listId) === at && (P.value = null), dc(xe);
    }, Ui = ({
      l: et = null,
      w: at = I.stockType === "linear" ? ((fn) => (fn = st.value[0]) == null ? void 0 : fn.w)() : null,
      t: ft = qt.value.length ? qt.value[0] : null,
      q: Ct = 1,
      material: kt = ((Aa) => (Aa = Mt.value) == null ? void 0 : Aa.length)() === 1 ? Mt.value[0].name : "",
      name: ae = null,
      orientationLock: ne = A.orientationModel === 2 ? "l" : null,
      bandingOptions: we = null,
      finishOptions: Ye = null,
      banding: We = null,
      finish: _e = null,
      customData: He = null,
      readonly: le = !1
    } = {}) => {
      var Ae, Lo;
      const as = new md({
        id: (M.value.length + 1).toString(),
        units: o.units,
        l: et,
        w: at,
        t: ft,
        q: Ct,
        material: kt,
        name: ae,
        orientationLock: ne,
        banding: We,
        bandingOptions: we,
        finish: _e,
        finishOptions: Ye,
        customData: He,
        readonly: le
      });
      return (Ae = Qt == null ? void 0 : Qt.labels) != null && Ae.length && zi(as, "banding"), (Lo = oe == null ? void 0 : oe.labels) != null && Lo.length && zi(as, "finish"), as;
    }, Ao = ({
      name: et = "",
      l: at = null,
      w: ft = null,
      t: Ct = null,
      material: kt = "",
      q: ae = 1,
      trim: ne = {
        x1: 0,
        x2: 0,
        y1: 0,
        y2: 0
      },
      grain: we = "",
      cost: Ye = 0,
      allowExactFitShapes: We = !1,
      notes: _e = ""
    }) => new f1({
      id: (st.value.length + 1).toString(),
      name: et,
      units: o.units,
      l: at,
      w: ft,
      t: Ct,
      material: kt,
      q: ae,
      autoAdd: !0,
      trim: ne,
      grain: we,
      cost: Ye,
      allowExactFitShapes: We,
      notes: _e
    }), va = (et, at) => {
      const ft = Yt(et.l), Ct = Yt(et.w), kt = et.t ? Yt(et.t) : null, ae = new Fs(I), ne = new ns({
        id: (at + 1).toString() + ".0",
        name: et != null && et.name ? et.name : `${ft}x${Ct}`,
        l: ft,
        w: Ct,
        t: kt,
        saw: ae,
        material: et.material,
        grain: et.grain,
        autoAdd: !0,
        cost: et == null ? void 0 : et.cost,
        trim: et.trim,
        allowExactFitShapes: et.allowExactFitShapes,
        type: I.stockType,
        notes: et == null ? void 0 : et.notes
      });
      return W.value.push(ne), ne.issues;
    }, qs = () => {
      var at, ft;
      const et = [];
      for (let Ct = 0; Ct < M.value.length; Ct++) {
        const kt = M.value[Ct];
        if (Yt(kt.l) < Yt(A.minDimension) && kt.issues.push({
          message: l("Part") + ` ${Ct + 1}: ` + l("Minimum dimension is") + ` ${A.minDimension}`,
          field: ["l"],
          index: Ct
        }), Yt(kt.w) < Yt(A.minDimension) && kt.issues.push({
          message: l("Part") + ` ${Ct + 1}: ` + l("Minimum dimension is") + ` ${A.minDimension}`,
          field: ["w"],
          index: Ct
        }), (at = kt == null ? void 0 : kt.issues) != null && at.length && et.push(...kt.issues.map((we) => (we.message = l("Part") + ` ${Ct + 1}: ${we.message}`, we))), !kt.l || !kt.w || !kt.q) continue;
        const ae = {
          id: (Ct + 1).toString() + ".0",
          l: Yt(kt == null ? void 0 : kt.l),
          w: Yt(kt == null ? void 0 : kt.w),
          t: kt != null && kt.t ? Yt(kt.t) : null,
          material: kt != null && kt.material ? kt.material : null,
          q: typeof kt.q != "number" ? parseInt(kt.q) : kt.q,
          name: kt.name,
          orientationLock: kt.orientationLock,
          banding: kt.banding,
          finish: kt.finish,
          machining: kt.machining,
          customData: kt.customData
        }, ne = new is(rA(ae, A.orientationModel));
        U.value.push(ne), (ft = ne == null ? void 0 : ne.issues) != null && ft.length && et.push(...ne.issues);
      }
      return $s(), et;
    }, wa = (et) => {
      K6.call({ activeStockId: B }, et);
    }, $s = () => {
      qt.value.length && U.value.forEach((et) => {
        if (!et.t) return;
        const at = qt.value.findIndex(
          (kt) => Yt(kt) === et.t
        ), ft = Gt.value.find((kt) => kt.includes(at));
        if (!ft) return;
        const Ct = Math.min(
          ...ft.map((kt) => qt.value[kt])
        );
        et.t > Ct && (et.q = et.q * (et.t / Ct), et.t = Ct);
      });
    }, xa = () => {
      V6.call({
        vis: Fe,
        stockList: W,
        activeStock: Rt,
        activeCuts: Wt
      }), G6.call({
        vis: Fe,
        shapeList: U,
        activeShapes: Ut
      }, J.value.length);
    }, $r = () => {
      dc(xe), W.value = [], U.value = [], Q.value = [], R.value = 0;
    }, Sa = () => {
      M.value.length = 0, ss(1);
    }, mn = () => {
      var Ct, kt, ae;
      if (ko(), A.maxParts && he.value > A.maxParts) {
        Ti(l("The maximum number of parts is") + " " + A.maxParts);
        return;
      }
      if (a("calculating"), D.value) return !1;
      D.value = !0, G.value = !1;
      const et = [];
      let at = 0;
      for (const ne of M.value)
        et.push(...ne.validate(
          st.value,
          at,
          I.stockType,
          null,
          !1
        )), at++;
      if (et.length) {
        console.warn(et), Ti({
          heading: "Part issue",
          main: "Issue with part inputs"
          // list: issues.map( i => i.message ).slice( 0, 5 )
        }), D.value = !1;
        return;
      }
      if ($r(), et.push(...H6.call({
        inputStock: st,
        stockList: W,
        createStock: va
      }, !1)), et.length) {
        Ti({
          heading: `Stock issue${et.length > 1 ? "s" : ""}`,
          main: `${et.length} issue${et.length > 1 ? "s" : ""} found with stock inputs`,
          list: et.map((ne) => ne.message)
        }), D.value = !1;
        return;
      }
      if (et.push(...qs()), et.length) {
        Ti({
          heading: "Part issue",
          main: "Issue with part inputs"
          // list: issues.slice( 0, 5 )
        }), D.value = !1;
        return;
      }
      if (_.value = new Fs(
        I,
        (I == null ? void 0 : I.stockType) ?? ((Ct = W.value) == null ? void 0 : Ct[0].type)
      ), _.value.issues.length) {
        Ti({
          heading: `Saw issue${_.value.issues.length > 1 ? "s" : ""}`,
          main: `${_.value.issues.length} issue${_.value.issues.length > 1 ? "s" : ""} found with saw inputs`
          // list: saw.value.issues.slice( 0, 5 )
        }), D.value = !1;
        return;
      }
      if (!((kt = W.value) != null && kt.length)) {
        Ti({
          heading: "No stock",
          main: "No stock items were found",
          list: []
        }), D.value = !1;
        return;
      }
      if (!((ae = U.value) != null && ae.length)) {
        Ti({
          heading: "No parts",
          main: "No parts in list",
          list: []
        }), D.value = !1;
        return;
      }
      o.debug && console.log(
        "SmartCut - calculating",
        "stock",
        W.value.map((ne) => ne.dimensions()),
        "parts",
        U.value.map((ne) => ne.dimensions())
      ), p.connect();
      const ft = {
        inputs: {
          parts: M.value,
          stock: st.value,
          saw: _.value
        },
        saw: _.value,
        shapeList: U.value,
        stockList: W.value,
        enableEvo: O.value,
        domain: d
      };
      p.compress(!0).emit("calculate", ft);
    }, Ti = (et = {
      main: null,
      heading: null,
      list: []
    }) => {
      var at;
      typeof et == "object" ? (de.value = l(et == null ? void 0 : et.main), it.value = l(et.heading), et != null && et.list && Array.isArray(et.list) && ((at = et.list) != null && at.length) && et.list.forEach((ft) => {
        ft && (de.value += `

${l(ft)}`);
      })) : de.value = l(et), Nt.value = !0;
    }, ko = () => {
      Nt.value = !1, de.value = "", it.value = "";
    }, _o = () => {
      const et = {
        elementID: "#diagram",
        env: c,
        main: !0,
        units: o.units,
        decimalPlaces: A.decimalPlaces,
        saw: I,
        app: !1,
        embed: !0,
        colors: ke,
        options: mt,
        vueComponent: {
          env: c,
          stockList: W,
          shapeList: U,
          activeStock: Rt,
          activeShapes: Ut,
          activeCuts: Wt
        }
      };
      Fe = new B6(et), Fe.initStock(Rt.value), Fe.initShapes(Ut.value, U.value), Fe.initCuts(Wt.value), ue.value = !0;
    }, os = async (et = !1) => {
      if (!Fe) return !1;
      await Fe.updateSize(et), Y6.call({ vis: Fe });
    }, No = (et, at) => {
      var _e;
      if (Ze(et, !1), !et || !at || !(at != null && at[et]) || !vn(A, ["enable", et])) return;
      const ft = [et, "pricing"];
      if (!ec(at, ft)) {
        a("error", `${ft.join(".")} not found in sent data`);
        return;
      }
      const Ct = vn(at, ft);
      if (typeof Ct != "object") {
        a("error", `${ft.join(".")} data must be an object`);
        return;
      }
      if (!bo(Ct)) {
        a("error", `if provided, ${ft.join(".")} data must contain some values`);
        return;
      }
      const kt = Object.keys(Ct), ae = Object.values(Ct);
      if (!kt.length) {
        a("error", `no ${ft.join(".")} pricing found`);
        return;
      }
      const ne = /,/;
      for (const He of kt)
        if (ne.test(He)) {
          a("error", `${ft} keys must not contain commas and should only be separated by a pipe (|)`);
          return;
        }
      if (ae.some((He) => isNaN(He))) {
        a("error", `${ft} values must be a number`);
        return;
      }
      const we = Br(Ct), Ye = [et, "labels"];
      let We = [];
      if (ec(at, Ye))
        We = vn(at, Ye);
      else {
        a("error", `${Ye.join(".")} not found`);
        return;
      }
      if (!We) {
        a("error", `${Ye.join(".")} data not provided`);
        return;
      }
      if (!Array.isArray(We)) {
        a("error", `${Ye.join(".")} data must be an array`);
        return;
      }
      if (!(We != null && We.length)) {
        a("error", `if provided, ${Ye.join(".")} data must contain values`);
        return;
      }
      if (We.length !== we) {
        a("error", `${Ye.join(".")} length (${We.length}) must match the number of levels in ${ft.join(".")} (${we})`);
        return;
      }
      switch (et) {
        case "banding":
          Qt.labels = We, Qt.pricing = Ct, Qt.options = qr(Ct);
          break;
        case "finish":
          oe.labels = We, oe.pricing = Ct, oe.options = qr(Ct);
          break;
      }
      if (Ze(et, !0), !!((_e = M.value) != null && _e.length))
        for (const He of M.value)
          zi(He, et);
    }, ui = (et, at) => {
      if (!at) return;
      et !== "info" && Object.keys(Xt).forEach((Ct) => {
        Ct !== et && Ct !== "info" && (Xt[Ct] = null);
      });
      const ft = M.value.indexOf(at);
      Xt[et] === ft ? (P.value = null, Xt[et] = null) : (P.value = at, Xt[et] = ft);
    }, zr = (et) => {
      a("log", ["SmartCut - load event received"]), Jn(et.detail);
    }, Jn = (et) => {
      a("log", ["SmartCut - loading parts..."]), Qr(() => {
        var ft, Ct, kt;
        if (!et || !((Ct = (ft = et == null ? void 0 : et.inputs) == null ? void 0 : ft.parts) != null && Ct.length)) return;
        M.value = [];
        let at = 0;
        for (const ae of et.inputs.parts) {
          const ne = Ui(ae);
          ne ? (M.value.push(ne), (kt = ne.issues) != null && kt.length && a("log", [`SmartCut - issues found while importing part at index ${at}`, ne.issues])) : a("log", [`SmartCut - error loading part at index ${at}`, ae]), at++;
        }
        a("log", [`SmartCut - loaded ${M.value.length} parts`]);
      });
    }, zs = (et) => {
      M.value.length = 0, Qr(() => {
        var at, ft;
        for (const Ct of et)
          Ct.t = ((ft = (at = st.value) == null ? void 0 : at[0]) == null ? void 0 : ft.t) ?? null, M.value.push(Ui(Ct));
      });
    };
    dr(() => o.stock, (et) => {
      if ($r(), Array.isArray(et) || console.warn("SmartCut - stock must be passed as an array"), !!(et != null && et.length)) {
        st.value = [], Mt.value.length || Ni(et);
        for (const at of et) {
          at.type = I.stockType;
          const ft = Ao(at);
          st.value.push(ft);
        }
        st.value.length && (M.value.length ? Qr(() => {
          M.value.forEach((at) => {
            if (at.material) {
              const ft = Mt.value.find((Ct) => Ct.name === at.material);
              ft && (ft.thicknesses.includes(Yt(at.t)) || (at.t = ft.thicknesses[0]), at.t == null && (at.t = ft.thicknesses[0]));
            } else
              at.t = st.value[0].t;
          });
        }) : Qr(() => ss(1)));
      }
    }, { immediate: !0 }), dr(M, (et) => {
      a("inputs-changed"), et.forEach((at) => {
        var Ct;
        I.stockType === "linear" && (at.w = (Ct = st.value[0]) == null ? void 0 : Ct.w);
        const ft = Mt.value.find((kt) => kt.name === at.material);
        ft && (ft.thicknesses.includes(Yt(at.t)) || (at.t = ft.thicknesses[0]));
      });
    }, { deep: !0 }), dr(R, (et) => {
      if (!et) return;
      ue.value && os(), St.value || a("error", "SmartCut - no metadata received from server"), $s();
      const at = {
        jobId: R.value,
        metadata: St.value,
        parts: nt.value.map((ft) => {
          var Ct, kt;
          return {
            l: ft.l,
            w: ft.w,
            t: ft == null ? void 0 : ft.t,
            material: ft.material,
            orientationLock: ft.orientationLock,
            q: (kt = (Ct = St.value) == null ? void 0 : Ct.addedPartTally) == null ? void 0 : kt[ft.parentID],
            name: ft.name,
            banding: ft.banding,
            finish: ft.finish,
            customData: ft.customData
          };
        }),
        stock: yt.value.map((ft) => {
          var Ct, kt;
          return {
            name: ft == null ? void 0 : ft.name,
            l: ft.l,
            w: ft.w,
            t: ft == null ? void 0 : ft.t,
            material: ft.material,
            q: (kt = (Ct = St.value) == null ? void 0 : Ct.usedStockTally) == null ? void 0 : kt[ft.parentID],
            trim: ft == null ? void 0 : ft.trim,
            cost: ft == null ? void 0 : ft.cost,
            analysis: ft == null ? void 0 : ft.analysis,
            type: ft == null ? void 0 : ft.type
          };
        }),
        offcuts: Z.value.map((ft) => ({
          l: ft.l,
          w: ft.w,
          t: (ft == null ? void 0 : ft.t) ?? null,
          q: ft.q
        })),
        inputs: {
          parts: ct.value.parts.map((ft) => {
            const Ct = { ...ft };
            return delete Ct.listId, Ct;
          })
        }
      };
      if (St.value.unplacedParts.length) {
        const ft = St.value.unplacedParts.map((Ct) => Ct.id).join();
        Ti(l("The following parts did not fit") + ": " + ft);
      }
      a("result", at);
    }), dr(w, () => {
      ue.value && os();
    }), dr(B, () => {
      ue.value && Qr(() => xa());
    });
    const Po = () => {
      p && (p.disconnect(), p = null);
    };
    return pa(() => {
      if (k.value) return;
      const et = new URL(window.location.href), at = et.searchParams.toString(), ft = et.origin + et.pathname + (at ? `?${at}` : "");
      v.value !== ft && (M.value.length = 0, ss(1)), v.value = ft, h.value = A.locale;
      const Ct = {
        socket: null,
        connected: b,
        maintenanceMode: x,
        jobId: R,
        progress: xe,
        thinking: D,
        user: zt,
        saw: _,
        stockList: W,
        shapeList: U,
        cutList: Q,
        offcuts: Z,
        metadata: St,
        usedStock: vt,
        addedShapes: V,
        activeStockId: B
      };
      p = J6.call(Ct, "https://api.cutlistevo.com/"), p.connect(), p.emit("getUserFromDomain"), window.addEventListener("resize", g, { passive: !0 }), window.addEventListener("smartcut/load", zr), k.value = !0, o.debug && a("log", [
        "SmartCut - ready...",
        "fields:",
        Ft.value.map((kt) => kt.id)
      ]), typeof window < "u" && (window.smartcutCheckout = { init: ve });
    }), Lf(() => {
      window.removeEventListener("resize", g), window.removeEventListener("smartcut/load", zr), Po(), delete window.smartcutCheckout;
    }), t({
      init: ve,
      getAvailablePricingOptions: nr,
      getExtrasPrice: ir,
      formatPrice: o.formatPrice,
      findExtrasPrice: o.findExtrasPrice,
      inputShapes: M,
      initExtrasOptions: zi,
      createShapeInput: Ui
    }), (et, at) => {
      var Ct, kt, ae, ne, we, Ye, We;
      const ft = mc("font-awesome-icon");
      return Vt(), re(ri, null, [
        Ie(c) === "development" && Sk ? (Vt(), re("div", ek, [
          at[5] || (at[5] = fe("div", null, "Developer information", -1)),
          ii(Ie(s), {
            data: [st.value[0]],
            paths: ["inputStock[0]"]
          }, null, 8, ["data"])
        ])) : Ne("", !0),
        Ht.value && ((Ct = P.value) != null && Ct.machining) ? (Vt(), Vn(Ie(i), {
          key: 1,
          shape: P.value,
          "onUpdate:shape": at[0] || (at[0] = (_e) => P.value = _e),
          translate: !0,
          options: ee,
          env: Ie(c),
          "find-extras-price": e.findExtrasPrice,
          "get-extras-price": ir,
          "get-available-pricing-options": nr,
          "format-price": e.formatPrice,
          onClose: _i
        }, null, 8, ["shape", "options", "env", "find-extras-price", "format-price"])) : Ne("", !0),
        T.value ? Ne("", !0) : (Vt(), re("div", nk, [
          ii(Ug, {
            size: 50,
            "show-number": !1
          })
        ])),
        T.value ? (Vt(), re("div", {
          key: 3,
          id: "smartcut-checkout",
          class: wi({ fullscreen: rt.value })
        }, [
          z.value && !e.readonly ? (Vt(), re("div", {
            key: 0,
            id: "smartcut-full-screen",
            class: "icon-left",
            onClick: at[1] || (at[1] = (_e) => er())
          }, [
            ii(ft, { icon: ["fasr", "expand"] }),
            Fu(" " + gn(Ie(l)("full screen")), 1)
          ])) : Ne("", !0),
          (ae = (kt = zt.value) == null ? void 0 : kt.api) != null && ae.whiteLabel ? Ne("", !0) : (Vt(), re("div", {
            key: 1,
            id: "credit",
            style: zn(ji.value)
          }, [
            fe("a", {
              title: "SmartCut | Cut list optimization software",
              style: zn(on.value),
              target: "_blank",
              href: "https://smartcut.dev/"
            }, gn(Ie(l)("Powered by SmartCut")), 5)
          ], 4)),
          fe("div", {
            id: "part-input",
            class: "inputs no-margin-top grid-table",
            style: zn({ "grid-template-columns": Me.value })
          }, [
            Ie(M).length ? (Vt(), re("div", ik, [
              at[6] || (at[6] = fe("div", { class: "cell id" }, null, -1)),
              (Vt(!0), re(ri, null, ts(Ft.value, (_e) => (Vt(), re("div", {
                key: _e.id,
                class: wi(["cell", { center: ["orientationLock", "banding", "finish", "machining"].includes(_e.id) || _e.type === "checkbox" }])
              }, gn(_e.label), 3))), 128)),
              Ie(c) === "development" ? (Vt(), re("div", rk, " Info ")) : Ne("", !0),
              Ie(M).length > 1 ? (Vt(), re("div", sk)) : Ne("", !0)
            ])) : Ne("", !0),
            (Vt(!0), re(ri, null, ts(Ie(M), (_e, He) => (Vt(), re("div", {
              key: He,
              class: "row inputs"
            }, [
              fe("div", ok, [
                fe("div", {
                  class: "id",
                  style: zn({
                    background: ke.partA,
                    color: ke.text
                  })
                }, gn(He + 1), 5)
              ]),
              (Vt(!0), re(ri, null, ts(Ft.value, (le) => (Vt(), re("div", {
                key: le.fieldMap,
                class: wi(["cell", [`${le.id}`, { center: ["orientationLock", "banding", "finish", "machining"].includes(le.id) || le.type === "checkbox" }]])
              }, [
                ["orientationLock", "banding", "finish", "machining"].includes(le.id) ? le.id === "orientationLock" ? (Vt(), Vn(PA, {
                  key: 1,
                  id: "orientation-" + He,
                  rectangle: _e,
                  disabled: e.readonly,
                  "stock-grain": qe(_e),
                  "button-background": ke.button,
                  "icon-color": ke.buttonText,
                  "orientation-model": A.orientationModel,
                  onUpdateOrientation: (fn) => Dr(_e, fn)
                }, null, 8, ["id", "rectangle", "disabled", "stock-grain", "button-background", "icon-color", "orientation-model", "onUpdateOrientation"])) : le.id === "banding" ? (Vt(), Vn(CA, {
                  key: 2,
                  id: "banding-" + He,
                  "input-shape": _e,
                  disabled: e.readonly,
                  "stock-grain": qe(_e),
                  open: Xt.banding === He,
                  "orientation-model": A.orientationModel,
                  onClicked: (fn) => ui("banding", _e)
                }, null, 8, ["id", "input-shape", "disabled", "stock-grain", "open", "orientation-model", "onClicked"])) : le.id === "finish" ? (Vt(), Vn(JA, {
                  key: 3,
                  id: "finish-" + He,
                  "input-shape": _e,
                  disabled: e.readonly,
                  open: Xt.finish === He,
                  onClicked: (fn) => ui("finish", _e)
                }, null, 8, ["id", "input-shape", "disabled", "open", "onClicked"])) : le.fieldMap === "machining" && z.value ? (Vt(), Vn(tk, {
                  key: 4,
                  id: "machining-" + He,
                  disabled: e.readonly,
                  "input-shape": _e,
                  onOpen: (fn) => ge(_e)
                }, null, 8, ["id", "disabled", "input-shape", "onOpen"])) : Ne("", !0) : (Vt(), Vn(al, {
                  key: 0,
                  id: le.id + "-" + He,
                  focus: !e.readonly && A.enable.focus && He === Ie(M).length - 1 && le.id === "l",
                  warning: Bs("warnings", _e, le.fieldMap),
                  issue: Bs("issues", _e, le.fieldMap),
                  type: le.type,
                  output: le.output,
                  label: le.label,
                  units: e.units,
                  readonly: e.readonly,
                  placeholder: le == null ? void 0 : le.placeholder,
                  options: le.id === "t" ? Kn(_e) : le == null ? void 0 : le.options,
                  "true-value": le == null ? void 0 : le.trueValue,
                  "false-value": le == null ? void 0 : le.falseValue,
                  default: le == null ? void 0 : le.default,
                  min: typeof (le == null ? void 0 : le.min) == "number" ? le.min : null,
                  max: typeof (le == null ? void 0 : le.max) == "number" ? le.max : null,
                  custom: le == null ? void 0 : le.custom,
                  value: Dn(_e, le == null ? void 0 : le.fieldMap),
                  text: {
                    delete: Ie(l)("delete"),
                    select: Ie(l)("select")
                  },
                  onUpdate: (fn) => {
                    le.fieldMap && an(_e, le.fieldMap, fn);
                  }
                }, null, 8, ["id", "focus", "warning", "issue", "type", "output", "label", "units", "readonly", "placeholder", "options", "true-value", "false-value", "default", "min", "max", "custom", "value", "text", "onUpdate"]))
              ], 2))), 128)),
              Ie(c) === "development" ? (Vt(), re("div", ak, [
                fe("button", {
                  type: "button",
                  class: wi({ selected: Xt.info === He }),
                  onClick: (le) => ui("info", _e)
                }, " i ", 10, lk)
              ])) : Ne("", !0),
              Ie(M).length > 1 ? (Vt(), re("div", uk, [
                fe("button", {
                  type: "button",
                  disabled: e.readonly,
                  class: "delete",
                  "aria-label": Ie(l)("remove part"),
                  onClick: (le) => ba(He)
                }, [
                  ii(ft, { icon: ["fass", "trash"] })
                ], 8, ck)
              ])) : Ne("", !0),
              Xt.banding === He && Qt.options.length > 0 ? (Vt(), Vn(Wg, {
                key: 2,
                env: Ie(c),
                shape: _e,
                "shape-index": He,
                "extra-type": "banding",
                "extra-label": "banding",
                "extra-keys": Qt.keys,
                "all-options": Qt.options,
                pricing: Qt.pricing,
                labels: Qt.labels,
                "user-friendly-field-map": Ie(tf),
                "part-columns": pe.value,
                "get-price": ir,
                "format-price": e.formatPrice,
                "orientation-model": A.orientationModel,
                "get-available-pricing-options": nr,
                onUpdateAll: Ci,
                onSet: li
              }, null, 8, ["env", "shape", "shape-index", "extra-keys", "all-options", "pricing", "labels", "user-friendly-field-map", "part-columns", "format-price", "orientation-model"])) : Ne("", !0),
              Xt.finish === He && oe.options.length > 0 ? (Vt(), Vn(Wg, {
                key: 3,
                env: Ie(c),
                shape: _e,
                "shape-index": He,
                "extra-type": "finish",
                "extra-label": "finish",
                "extra-keys": oe.keys,
                "all-options": oe.options,
                pricing: oe.pricing,
                labels: oe.labels,
                "user-friendly-field-map": Ie(tf),
                "part-columns": pe.value,
                "get-price": ir,
                "format-price": e.formatPrice,
                "orientation-model": A.orientationModel,
                "get-available-pricing-options": nr,
                onUpdateAll: Ci,
                onSet: li
              }, null, 8, ["env", "shape", "shape-index", "extra-keys", "all-options", "pricing", "labels", "user-friendly-field-map", "part-columns", "format-price", "orientation-model"])) : Ne("", !0),
              Xt.info === He ? (Vt(), re("div", {
                key: 4,
                id: "shape-info",
                style: zn({ "grid-column-end": "span " + (pe.value + 1) })
              }, [
                ii(Ie(s), {
                  data: [_e == null ? void 0 : _e.machining],
                  paths: ["machining"]
                }, null, 8, ["data"])
              ], 4)) : Ne("", !0)
            ]))), 128))
          ], 4),
          fe("div", hk, [
            e.readonly ? Ne("", !0) : (Vt(), re("button", {
              key: 0,
              type: "button",
              "aria-label": Ie(l)("add part"),
              style: zn({ background: ke.button, color: ke.buttonText }),
              class: "add c-btn icon-left",
              onClick: at[2] || (at[2] = (_e) => ss(1))
            }, [
              ii(ft, { icon: ["fasr", "plus-large"] }),
              Fu(" " + gn(Ie(l)("add part")), 1)
            ], 12, fk)),
            fe("button", {
              id: "calculate-button",
              type: "button",
              class: "c-btn calculate icon-left",
              "aria-label": Ie(l)("calculate"),
              style: zn({
                background: ke.button,
                color: ke.buttonText
              }),
              disabled: !((ne = st.value) != null && ne.length) || D.value,
              onClick: at[3] || (at[3] = (_e) => mn())
            }, [
              ii(ft, { icon: ["fass", "calculator"] }),
              Fu(gn(Ie(l)("calculate")), 1)
            ], 12, dk),
            e.readonly ? Ne("", !0) : (Vt(), re("button", {
              key: 1,
              type: "button",
              class: "c-btn clear",
              "aria-label": Ie(l)("clear"),
              onClick: at[4] || (at[4] = (_e) => Sa())
            }, [
              ii(ft, { icon: ["fass", "trash"] })
            ], 8, pk)),
            fe("div", gk, gn(he.value) + gn(A != null && A.maxParts ? "/" + A.maxParts : ""), 1)
          ]),
          $.value && !e.readonly ? (Vt(), Vn(Ie(r), {
            key: 2,
            ref: "import",
            units: e.units,
            "custom-fields": be.value,
            "banding-options": Qt.options,
            "banding-labels": Qt.labels,
            "finish-options": oe.options,
            "finish-labels": oe.labels,
            options: {
              locale: A.locale
            },
            onImport: zs
          }, null, 8, ["units", "custom-fields", "banding-options", "banding-labels", "finish-options", "finish-labels", "options"])) : Ne("", !0),
          Nt.value ? (Vt(), re("div", mk, [
            it.value ? (Vt(), re("div", yk, gn(it.value), 1)) : Ne("", !0),
            fe("pre", bk, gn(de.value), 1)
          ])) : Ne("", !0),
          (A.enable.diagram ? D.value && !xe.value.complete : D.value || xe.value.complete) ? (Vt(), re("div", vk, [
            ii(Ug, {
              size: 50,
              number: xe.value.shapeCount,
              complete: xe.value.complete,
              "show-number": A.enable.progressNumber
            }, null, 8, ["number", "complete", "show-number"])
          ])) : Ne("", !0),
          Gg(fe("div", wk, [
            ((we = Rt.value) == null ? void 0 : we.type) !== "roll" ? (Vt(), re("div", xk, gn((Ye = Rt.value) != null && Ye.stack ? (We = Rt.value) == null ? void 0 : We.stack : 1), 1)) : Ne("", !0)
          ], 512), [
            [Vg, A.enable.diagram && R.value > 0]
          ]),
          A.enable.diagram && ue.value && vt.value.length > 1 && R.value > 0 && xe.value.complete ? (Vt(), Vn(cA, {
            key: 5,
            ref: "stockNavigation",
            "active-stock-id": B.value,
            "stock-list": Dt.value,
            "stock-count": W.value.length,
            "viewport-width": w.value,
            onShowStock: wa
          }, null, 8, ["active-stock-id", "stock-list", "stock-count", "viewport-width"])) : Ne("", !0)
        ], 2)) : Ne("", !0)
      ], 64);
    };
  }
});
function Hg(e) {
  const t = e;
  t.__i18n = t.__i18n || [], t.__i18n.push({
    locale: "",
    resource: {
      en_US: {
        "N/A": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "N/A" } },
        length: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Length" } },
        l: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "L" } },
        width: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Width" } },
        w: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "W" } },
        thickness: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Thickness" } },
        t: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "T" } },
        name: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Name" } },
        quantity: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Quantity" } },
        q: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Q" } },
        material: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Material" } },
        orientation: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Orientation" } },
        machining: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Machining" } },
        grain: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Grain" } },
        "add part": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Add part" } },
        "remove part": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Remove part" } },
        calculate: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Calculate" } },
        "full screen": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Full screen" } },
        banding: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Banding" } },
        "delete banding": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Delete banding" } },
        finish: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Finish" } },
        "delete finish": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Delete finish" } },
        select: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Select" } },
        delete: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Delete" } },
        clear: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Clear" } },
        l1: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "L1" } },
        l2: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "L2" } },
        w1: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "W1" } },
        w2: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "W2" } },
        all: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "All" } },
        a: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "A" } },
        b: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "B" } },
        c: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "C" } },
        d: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "D" } },
        "Drop CSV file here": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Drop CSV file here" } },
        "Powered by SmartCut": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Powered by SmartCut" } },
        Part: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Part" } },
        Issue: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Issue" } },
        "Part issue": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Part issue" } },
        "Issue with part inputs": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Issue with part inputs" } },
        "No parts": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "No parts" } },
        "No parts in list": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "No parts in list" } },
        "No quantity of parts found": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "No quantity of parts found" } },
        "No parts were added - please double check your list.": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "No parts were added - please double check your list." } },
        "The following parts did not fit": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "The following parts did not fit" } },
        "The maximum number of parts is": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "The maximum number of parts is" } },
        "No valid parts found": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "No valid parts found" } },
        Hardware: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Hardware" } },
        "Hardware total": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Hardware total" } },
        Panels: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Panels" } },
        pdf: {
          orderSummary: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Order summary" } },
          stockRequirements: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Stock requirements" } },
          totals: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Totals" } },
          item: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Item" } },
          totalParts: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Total parts" } },
          partArea: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Part area" } },
          totalStockRequired: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Total stock required" } },
          totalBandingLength: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Total banding length" } },
          totalFinishArea: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Total finish area" } }
        }
      },
      ca: {
        length: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Llarg" } },
        l: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "L" } },
        width: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Ample" } },
        w: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "A" } },
        thickness: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Gruix" } },
        t: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "G" } },
        name: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Nom" } },
        quantity: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Quantitat" } },
        q: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Q" } },
        machining: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Mecanitzat" } },
        orientation: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Gir" } },
        "add part": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Afegeix" } },
        "remove part": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Elimina" } },
        calculate: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Calcula" } },
        "full screen": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Pantalla completa" } },
        banding: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Cantell" } },
        "delete banding": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Elimina cantell" } },
        delete: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Elimina" } },
        clear: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Neteja" } },
        l1: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "L1" } },
        l2: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "L2" } },
        w1: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "A1" } },
        w2: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "A1" } },
        all: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Todos" } },
        Part: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Peça" } },
        Issue: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Tema" } },
        "The following parts did not fit": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Les peces següents no encaixaven" } },
        "The maximum number of parts is": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "El número màxim de peces és" } },
        "No valid parts found": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "No s'han trobat peces vàlides" } },
        "Drop CSV file here": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "No s'han trobat peces vàlides" } },
        "Powered by SmartCut": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Desenvolupat per SmartCut" } }
      },
      es_ES: {
        length: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Largo" } },
        l: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "L" } },
        width: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Ancho" } },
        w: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "A" } },
        thickness: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Grueso" } },
        t: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "G" } },
        name: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Nombre" } },
        quantity: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Cantidad" } },
        q: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "C" } },
        machining: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Mecanizado" } },
        orientation: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Giro" } },
        "add part": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Añade" } },
        "remove part": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Elimina" } },
        calculate: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Calcula" } },
        "full screen": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Pantalla completa" } },
        banding: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Canto" } },
        "delete banding": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Elimina canto" } },
        delete: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Elimina" } },
        clear: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Borra" } },
        l1: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "L1" } },
        l2: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "L2" } },
        w1: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "A1" } },
        w2: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "A1" } },
        all: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Todos" } },
        Part: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Pieza" } },
        Issue: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Tema" } },
        "The following parts did not fit": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Las siguientes piezas no encajaban" } },
        "The maximum number of parts is": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "El número máximo de piezas es" } },
        "No valid parts found": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "No se encontraron piezas válidas" } },
        "Drop CSV file here": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Carga el archivo CSV aquí" } },
        "Powered by SmartCut": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Desarrollado por SmartCut" } }
      },
      fr_FR: {
        length: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Longueur" } },
        l: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "L" } },
        width: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Largeur" } },
        w: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "la" } },
        thickness: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Epaisseur" } },
        t: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "ep" } },
        name: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Nom" } },
        quantity: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Quantité" } },
        q: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Qt" } },
        material: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Matèriel" } },
        machining: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Machinage" } },
        grain: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Sens de fil" } },
        orientation: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Orientation" } },
        "add part": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Ajouter pièce" } },
        "remove part": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Supprimer pièce" } },
        calculate: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Optimiser" } },
        "full screen": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Plein écran" } },
        banding: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Chants" } },
        "delete banding": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Supprimer chants" } },
        select: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Sélectionner" } },
        delete: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Supprimer" } },
        clear: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Effacer" } },
        l1: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "L1" } },
        l2: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "L2" } },
        w1: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "la1" } },
        w2: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "la2" } },
        all: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Tous" } },
        "N/A": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "N/A" } },
        "Powered by SmartCut": { t: 0, b: { static: "", t: 2, i: [] } },
        Part: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Pièce" } },
        "Drop CSV file here": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Télécharger CSV" } },
        Issue: { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Erreur" } },
        "Part issue": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Pièce erreur" } },
        "Issue with part inputs": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Erreur avec l'importation de pièces" } },
        "No parts": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Aucune pièce" } },
        "No parts in list": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Aucune pièce dans la liste" } },
        "No quantity of parts found": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Aucune quantité trouvé pour certaines pièces" } },
        "No parts were added - please double check your list.": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Aucune pièce n'a été ajoutée - veuillez vérifier votre liste." } },
        "The following parts did not fit": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Les pièces suivantes ne s'adaptent pas" } },
        "The maximum number of parts is": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Le nombre maximum de pièces est" } },
        "No valid parts found": { t: 0, b: { t: 2, i: [{ t: 3 }], s: "Aucune pièce valide trouvée" } }
      }
    }
  });
}
typeof Hg == "function" && Hg(Fm);
const Ak = /* @__PURE__ */ Tl(Fm, [["__scopeId", "data-v-acc3f94c"]]), kk = {
  key: 0,
  class: "debug"
}, _k = !1, Nk = /* @__PURE__ */ Ds({
  __name: "WordPress",
  setup(e) {
    const t = ["banding", "finish", "cutLength", "perPart", "surcharge", "machining", "stock", "custom"], n = (rt) => t.includes(rt), i = sa(() => import("./FormulaPricing-BlmuBJfq.js")), r = sa(() => import("./ObjectViewer-sOARGFKO.js")), s = "production", o = {}, a = {};
    let l = {};
    const h = {
      banding: null,
      finish: null
    };
    let c = null, d = [], g = null, p = {};
    const b = Pe(!1), x = Pe("manual"), N = Pe(""), v = Pe([]), w = Pe(null), k = Pe(!0), T = Pe(null), D = Pe(null), G = Pe(!1), R = Pe(null), O = rn(() => window.smartcutConfig.settings.units ?? "decimal");
    P2("calculator", () => R.value);
    const $ = (rt) => {
      b.value && console.log("SmartCut -", ...rt);
    }, z = (rt) => {
      console.error(`SmartCut - ${rt}`);
    }, A = (rt = !1) => {
      G.value = !0, ["checkout", "intro_text", "offcuts", "banding_key"].forEach((zt) => {
        const It = o[zt];
        It && (It.style.display = "block");
      }), Ht() && (o.pricing_table.style.display = "table"), rt ? I(!0) : M(), U();
    }, _ = (rt = !0, mt = !0) => {
      G.value = !1, ["checkout", "intro_text", "offcuts", "banding_key", "pricing_table"].forEach((It) => {
        const be = o[It];
        be && (be.style.display = "none");
      }), mt === !0 ? W() : mt === !1 && U(), rt ? I() : rt === !1 && M();
    }, I = (rt = !1) => {
      o.quantity.style.display = "inline-block", o.quantity.readOnly = rt;
    }, M = () => {
      G.value !== !1 && (o.quantity.value = "1", o.quantity.style.display = "none", o.quantity.readOnly = !0);
    }, st = (rt, mt) => {
      if (!n(rt)) return;
      const It = {
        custom: {
          visible: null,
          hidden: "smartcut-custom-price"
        },
        perPart: {
          hidden: "smartcut-per-part-price",
          visible: "per_part_price"
        },
        banding: {
          hidden: "smartcut-banding-price",
          visible: "banding_total_price"
        },
        finish: {
          hidden: "smartcut-finish-price",
          visible: "finish_total_price"
        },
        machining: {
          hidden: "smartcut-machining-price",
          visible: "machining_total_price"
        },
        surcharge: {
          hidden: "smartcut-cut-to-size-surcharge",
          visible: "surcharge_price"
        },
        cutLength: {
          hidden: "smartcut-cut-length-price",
          visible: "cut_length_price"
        },
        stock: {
          hidden: null,
          visible: "stock_total_price"
        }
      }[rt];
      It != null && It.hidden && a[It.hidden] ? ($([`setting hidden price ${rt}`, mt]), a[It.hidden].value = mt) : It != null && It.hidden && $(["hidden price field not found", It, rt]), It != null && It.visible && o[It.visible] ? ($(["setting visible price", rt, yt(mt)]), o[It.visible].innerText = yt(mt)) : It != null && It.visible && $(["visible price field not found", It, rt]);
    }, W = () => {
      if (!o.cart_button) {
        z("Cart button not found");
        return;
      }
      o.cart_button.disabled = !1;
    }, U = () => {
      if (G.value !== !1) {
        if (!o.cart_button) {
          z("Cart button not found");
          return;
        }
        o.cart_button.disabled = !0;
      }
    }, Q = (rt, mt = 0) => {
      if (!o.quantity) {
        z("Quantity field not found when trying to set");
        return;
      }
      o.quantity.value = rt.toFixed(mt);
    }, Z = (rt) => {
      $(["setting variation price", rt]);
      const mt = document.querySelector(".woocommerce-variation-price .smartcut-price-selector");
      mt && (mt.innerText = yt(rt)), w.value.display_price = rt;
    }, ct = () => {
      if (!(window != null && window.smartcutConfig)) {
        z("SmartCut config not found");
        return;
      }
      const rt = window.smartcutConfig;
      l = rt.settings;
      const mt = Ut(vn(window, ["smartcutConfig", "banding_data"])), zt = Ut(vn(window, ["smartcutConfig", "finish_data"])), It = {
        debug: l.debug,
        units: l.units,
        locale: rt.locale,
        decimalPlaces: 2,
        //saw
        stockType: l.stock_type,
        bladeWidth: l.blade_width,
        cutPreference: l.cut_preference,
        stackHeight: l.stack_height,
        stockSelection: l.stock_selection,
        stockGrain: l.stock_grain,
        minSpacing: l.min_spacing,
        maxParts: l.max_parts ?? null,
        orientationModel: l.orientation_model,
        minDimension: l.min_dimension,
        enable: {
          banding: !l.disable_banding,
          finish: !l.disable_finish,
          orientation: !l.disable_orientation,
          diagram: !l.hide_diagram,
          focus: !0,
          machining: l.enable_machining,
          csvImport: l.enable_import,
          click: !0,
          partName: !l.disable_part_name,
          progressNumber: l.pricing_strategy !== "part_area"
        },
        colors: {
          partA: (l == null ? void 0 : l.part_a_color) ?? "#1d9bc4",
          partB: (l == null ? void 0 : l.part_b_color) ?? "#065d7a",
          partHover: (l == null ? void 0 : l.part_hover_color) ?? "#f8b029",
          partSelected: (l == null ? void 0 : l.part_selected_color) ?? "#5bc85b",
          stock: (l == null ? void 0 : l.stock_color) ?? "#ffd166",
          button: (l == null ? void 0 : l.button_color) ?? "#118ab2",
          buttonText: (l == null ? void 0 : l.button_text_color) ?? "#ffffff",
          text: (l == null ? void 0 : l.text_color) ?? "#ffffff"
        }
      };
      b.value = It.debug;
      const be = {
        units: "decimal",
        faces: {
          enabled: l.machining_sides
        },
        holes: {
          enabled: l.machining_holes,
          defaultDiameter: l.machining_holes_default_diameter,
          diameters: l.machining_holes_diameters.split(",").map((Ft) => Ft.trim()).filter(Boolean),
          minDiameter: l.machining_holes_min_diameter,
          maxDiameter: l.machining_holes_max_diameter,
          enableDepth: l.machining_holes_depth,
          depths: l.machining_holes_depths.split(",").map((Ft) => Ft.trim()).filter(Boolean),
          defaultDepth: l.machining_holes_default_depth,
          minDepth: l.machining_holes_min_depth,
          maxDepth: l.machining_holes_max_depth
        },
        hingeHoles: {
          enabled: l.machining_hinge_holes,
          minimumHoleDistance: l.machining_hinge_holes_minimum_hole_distance,
          defaultDistanceFromEdge: l.machining_hinge_holes_default_distance_from_edge,
          defaultOuterSpacing: l.machining_hinge_holes_default_outer_spacing,
          defaultHingeLength: l.machining_hinge_holes_default_hinge_length
        },
        corners: {
          enabled: l.machining_radius_corners || l.machining_bevel_corners,
          types: [
            l.machining_radius_corners ? "radius" : null,
            l.machining_bevel_corners ? "bevel" : null
          ].filter(Boolean),
          minValue: l.machining_corners_min_value,
          maxValue: l.machining_corners_max_value,
          enableBanding: l.machining_corners_enable_banding
        }
      };
      k.value = Xt(), k.value ? I(!0) : M(), c.type === "variable" ? _(!1, !1) : A(!0);
      const $t = {
        type: c.type,
        stock: v.value,
        variations: d ?? null,
        options: It,
        banding: mt,
        finish: zt,
        machining: be
      };
      Qr(() => {
        R.value && R.value.init($t);
      });
    }, St = (rt) => {
      const mt = (rt == null ? void 0 : rt.multiple_sizes) === !0;
      c = {
        type: rt == null ? void 0 : rt.product_type,
        multiple_sizes: mt,
        size: rt != null && rt.size ? rt.size.split(" | ") : [],
        l: !mt && (rt != null && rt.l) ? parseFloat(rt.l) : null,
        w: !mt && (rt != null && rt.w) ? parseFloat(rt.w) : null,
        t: (rt == null ? void 0 : rt.t) ?? null,
        price: parseFloat(rt == null ? void 0 : rt.price) ?? null,
        stock_name: rt.stock_name
      }, c.multiple_sizes || (c.l || z("product 'length' attribute not available"), c.w || z("product 'width' attribute not available"));
    }, P = (rt) => {
      x.value = vn(window, ["smartcutConfig", "settings", "enable_formula"]) === !0 ? "formula" : "manual", N.value = vn(window, ["smartcutConfig", "settings", "formula_url"]), $([`Input type: ${x.value}`]), $([`Input type: ${x.value}`]), p = {
        thousands_separator: rt == null ? void 0 : rt.thousands_separator,
        decimal_separator: rt == null ? void 0 : rt.decimal_separator,
        number_of_decimals: rt == null ? void 0 : rt.number_of_decimals,
        currency_symbol: rt == null ? void 0 : rt.currency_symbol,
        currency_position: rt == null ? void 0 : rt.currency_position
      };
    }, B = () => {
      const rt = {
        checkout: "#smartcut-app",
        intro_text: "#smartcut-intro-text",
        pricing_table: "#smartcut-pricing-table",
        offcuts: "#include_offcuts_field",
        banding_key: "#smartcut-banding-key",
        finish_key: "#smartcut-finish-key",
        banding_total_price: "#smartcut-banding-total bdi .smartcut-price-selector",
        finish_total_price: "#smartcut-finish-total bdi .smartcut-price-selector",
        cut_length_price: "#smartcut-cut-length-total bdi .smartcut-price-selector",
        per_part_price: "#smartcut-per-part-total bdi .smartcut-price-selector",
        surcharge_price: "#smartcut-surcharge-total bdi .smartcut-price-selector",
        machining_total_price: "#smartcut-machining-total bdi .smartcut-price-selector",
        stock_total_price: "#smartcut-stock-total bdi .smartcut-price-selector",
        quantity: ".smartcut-stock-quantity",
        //this is the add to cart quantity element(s)
        cart_button: ".single_add_to_cart_button"
      };
      for (const [mt, zt] of Object.entries(rt))
        o[mt] = document.querySelector(zt);
      if (!o.checkout)
        return z("checkout iframe not found");
      if (!o.quantity)
        return z("quantity field not found");
      if (!o.cart_button)
        return z("cart button not found");
      o.quantity.readOnly = !0, U();
    }, V = () => ({
      x1: l.stock_trim_x1 ?? 0,
      x2: l.stock_trim_x2 ?? 0,
      y1: l.stock_type === "linear" ? 0 : l.stock_trim_y1 ?? 0,
      y2: l.stock_type === "linear" ? 0 : l.stock_trim_y2 ?? 0
    }), J = (rt = null, mt = null, zt = null, It = null, be = null) => {
      let $t;
      if (be && typeof be == "object") {
        $t = [];
        for (const [pe, Me] of Object.entries(be))
          pe !== "attribute_size" && pe !== "attribute_thickness" && $t.push(`${pe.replace("attribute_", "")}: ${Me}`);
        $t = $t.join(" - ");
      }
      return {
        name: c.stock_name,
        type: l.stock_type,
        l: rt,
        w: mt,
        t: zt,
        grain: l.stock_grain,
        cost: parseFloat((It == null ? void 0 : It.toString()) || "0"),
        trim: V(),
        allowExactFitShapes: !0,
        notes: $t
      };
    }, nt = () => {
      c != null && c.stock_name || z("product name not specified"), v.value = [], c.multiple_sizes ? c.size.forEach((rt) => {
        const [mt, zt] = rt.split("x"), It = J(
          parseFloat(mt),
          parseFloat(zt),
          c == null ? void 0 : c.t,
          rt.price
        );
        v.value.push(It);
      }) : v.value.push(J(
        c.l,
        c.w,
        c == null ? void 0 : c.t,
        c == null ? void 0 : c.price
      ));
    }, gt = (rt, mt) => {
      const zt = rt.split(".");
      return zt[0] = zt[0].replace(/\B(?=(\d{3})+(?!\d))/g, mt), zt.join(".");
    }, yt = (rt = 0, mt = "") => {
      if (!rt)
        return mt ? Rt("0.00") : "0.00";
      typeof rt == "string" && (rt = parseFloat(rt));
      const zt = rt.toFixed(p.number_of_decimals).replace(".", p.decimal_separator), It = gt(zt, p.thousands_separator);
      return mt ? Rt(It) : It;
    }, vt = (rt) => {
      if (rt == null) return "";
      typeof rt == "string" && (rt = parseFloat(rt));
      const zt = rt % 1 !== 0 ? p.number_of_decimals : 0, It = rt.toFixed(zt).replace(".", p.decimal_separator);
      return gt(It, p.thousands_separator);
    }, Rt = (rt) => {
      switch (p.currency_position) {
        case "left":
          return `${p.currency_symbol}${rt}`;
        case "right":
          return `${rt}${p.currency_symbol}`;
        default:
          return `${p.currency_symbol}${rt}`;
      }
    }, Dt = (rt) => {
      const mt = (zt) => p1(Ll(zt), 100).replace("|", "_");
      return Array.isArray(rt) ? rt.map(mt).join(",") : mt(rt);
    }, Ut = (rt) => {
      if (!rt) return null;
      const mt = {
        labels: [],
        pricing: {}
      }, zt = Object.values(rt);
      for (const It of zt)
        It != null && It.variations ? (mt.labels.push(...Object.keys(It.options)), Object.values(It.variations).forEach((be) => {
          const { options: $t } = be, Ft = Object.values($t).map((pe) => Dt(pe)).join("|");
          mt.pricing[Ft] = parseInt(be.price);
        })) : It != null && It.options && Object.keys(It.options).forEach((be) => {
          mt.pricing[Dt(be)] = parseInt(It.price);
        });
      return mt.labels.length || mt.labels.push("type"), mt;
    }, Wt = (rt, mt) => {
      if (!mt.length || !ec(h, [rt])) return null;
      const zt = vn(h, [rt]);
      if (!bo(zt)) return null;
      const be = Object.values(zt).map(($t) => $t != null && $t.variations ? Object.values($t.variations).map((Ft) => (Ft.type = "variable", Ft)) : ($t.type = "simple", $t)).flat().find(($t) => {
        let Ft;
        return $t.type === "simple" ? Ft = Object.keys($t.options) : Ft = Object.values($t.options), Ft ? Ft.every((pe, Me) => Dt(pe) === Dt(mt[Me])) : !1;
      });
      return be != null && be.price ? parseFloat(be.price) : null;
    }, he = (rt) => {
      let mt = 0;
      if (typeof rt == "object") {
        for (let [zt, It] of Object.entries(rt)) {
          typeof It == "string" && (It = parseFloat(It));
          const be = zt.split("|"), $t = Wt("finish", be);
          if ($t === null) continue;
          const pe = Number(It) / 1e6 * parseFloat($t.toString());
          mt += pe;
        }
        if ("min_finish_charge" in l) {
          const zt = parseFloat(l == null ? void 0 : l.min_finish_charge);
          if (zt > 0 && mt > 0 && mt < zt)
            return zt;
        }
      }
      return mt;
    }, Nt = (rt) => {
      let mt = 0;
      if (typeof rt == "object") {
        for (let [zt, It] of Object.entries(rt)) {
          typeof It == "string" && (It = parseFloat(It));
          const be = zt.split("|"), $t = Wt("banding", be);
          if ($t === null) continue;
          const Ft = It / (l.units === "fraction" ? 12 : 1e3) * parseFloat($t.toString());
          mt += Ft;
        }
        if ("min_banding_charge" in l) {
          const zt = parseFloat(l == null ? void 0 : l.min_banding_charge);
          if (zt > 0 && mt > 0 && mt < zt)
            return zt;
        }
      }
      return mt;
    }, it = (rt) => (g.holes ?? 0) * (rt.metadata.numHoles ?? 0) + (g.corners ?? 0) * (rt.metadata.numCorners ?? 0), de = () => {
      o.quantity.value = "1", U(), a["smartcut-cut-to-size-surcharge"].value = 0;
      for (const rt of t) st(rt, 0);
      for (const rt in a)
        rt !== "smartcut-hardware-price" && (a[rt].value = null);
    }, Xt = () => {
      var rt;
      if (((rt = window.smartcutConfig) == null ? void 0 : rt.product_type) === "variable")
        return !1;
      switch (l.pricing_strategy) {
        case "full_sheet":
        case "part_area":
        case "full_sheet_plus_cut_length":
        case "full_sheet_plus_num_parts":
          return !0;
        case "cut_length":
          return !1;
        default:
          return !1;
      }
    }, Mt = (rt) => {
      if (ec(l, ["enable", rt]) && vn(l, ["enable", rt]) === !1)
        return !1;
      const mt = vn(h, [rt]);
      return !!(mt && Object.values(mt).length);
    }, qt = () => l.enable_machining === !0, Gt = () => !((l == null ? void 0 : l.surcharge_type) === "none" || !(l != null && l.surcharge) || l.surcharge === "0.00"), Ht = () => !!(l.pricing_strategy === "full_sheet_plus_cut_length" || l.pricing_strategy === "full_sheet_plus_num_parts" || Gt() || Mt("banding") || Mt("finish") || qt()), ee = (rt) => {
      var zt;
      let mt = (zt = rt == null ? void 0 : rt.attributes) == null ? void 0 : zt.attribute_size;
      return mt || (mt = c == null ? void 0 : c.size), mt;
    }, Qt = (rt) => /\d+x\d+/.test(rt), oe = () => {
      window.smartcutConfig.input_fields.forEach((rt) => {
        const mt = rt.replaceAll("_", "-");
        a[mt] = document.getElementById(mt);
      });
    }, xe = (rt, mt) => {
      de(), w.value = mt, $(["variation selected", mt.attributes]), v.value = [];
      const zt = vn(mt, ["attributes", "attribute_thickness"]);
      if (c.selected_thickness = zt, c.multiple_sizes) {
        const It = ee(mt);
        if ($([`variation found with size: ${It} & thickness: ${zt}`]), !It)
          return _(!1), z("The size of this multiple size product could not be found");
        if (Array.isArray(It) ? A(!1) : Qt(It) ? _(!0, !0) : A(!1), d != null && d.length && zt) {
          let be;
          if (Array.isArray(It)) {
            const $t = d.find((Ft) => Ft.attributes.thickness === zt);
            if (!$t)
              return z(`variation not found for thickness ${zt}`);
            be = It.map((Ft) => ({
              size: Ft,
              l: Ft.split("x")[0],
              w: Ft.split("x")[1],
              t: zt,
              price: $t == null ? void 0 : $t.price
            }));
          } else
            be = d.filter(($t) => {
              var Ft, pe;
              return /\d+x\d+/.test((Ft = $t == null ? void 0 : $t.attributes) == null ? void 0 : Ft.size) ? zt === ((pe = $t == null ? void 0 : $t.attributes) == null ? void 0 : pe.thickness) : !1;
            }).map(($t) => {
              var Me, ji, on, Yn;
              const Ft = d.find((Dn) => {
                var an, ve;
                return zt === ((an = Dn == null ? void 0 : Dn.attributes) == null ? void 0 : an.thickness) && It === ((ve = Dn == null ? void 0 : Dn.attributes) == null ? void 0 : ve.size);
              });
              Ft || z(`exactMatchVariation not found for thickness ${zt}, size: ${It} in variations`);
              let pe = !(Ft != null && Ft.price) || parseFloat(Ft.price) === 0 ? ($t == null ? void 0 : $t.price) ?? "0" : Ft == null ? void 0 : Ft.price;
              return $([
                `size attribute: '${(Me = $t == null ? void 0 : $t.attributes) == null ? void 0 : Me.size}'`,
                `price for 'thickness ${zt}, size: ${It}' detected as ${pe}`
              ]), {
                size: (ji = $t == null ? void 0 : $t.attributes) == null ? void 0 : ji.size,
                l: (on = $t == null ? void 0 : $t.attributes) == null ? void 0 : on.size.split("x")[0],
                w: (Yn = $t == null ? void 0 : $t.attributes) == null ? void 0 : Yn.size.split("x")[1],
                t: c.selected_thickness,
                price: pe
              };
            });
          G.value === !0 && be.forEach(($t) => {
            const Ft = J(
              $t.l,
              $t.w,
              $t.t,
              $t.price,
              mt == null ? void 0 : mt.attributes
            );
            v.value.push(Ft);
          });
        }
      } else {
        const It = d.find((be) => be.attributes.thickness === zt);
        if (!It) return z(`variation not found for thickness ${zt}`);
        v.value.push(J(
          c.l,
          c.w,
          zt,
          It.price,
          mt == null ? void 0 : mt.attributes
        )), A(!1);
      }
    }, ke = async (rt) => {
      var be, $t;
      de();
      let mt = 0;
      const zt = Xt();
      if (zt || Q(1), $(["result event received", rt]), !(rt != null && rt.jobId)) return;
      switch (b.value && console.table([
        { Property: "multiple sized stock", Value: c.multiple_sizes },
        { Property: "quantity based pricing", Value: zt ? "Y" : "N" }
      ]), D.value = ea(rt.metadata), l.pricing_strategy) {
        case "full_sheet": {
          $(["calculating cost by full sheet"]), zt ? Q(rt.metadata.totalUsedStock) : mt = parseFloat(rt.metadata.totalStockCost), W();
          break;
        }
        case "part_area": {
          $(["calculating cost by part area in meters / sq feet"]);
          const Ft = l.units === "fraction" ? rt.metadata.totalPartArea / 144 : rt.metadata.totalPartArea / 1e6;
          $([`part area in square ${l.units === "fraction" ? "feet" : "meters"}`, Ft]), zt ? Q(Ft, 2) : ($([`totalPrice is area: ${Ft} * price: ${w.value.display_price}`]), mt = Ft * parseFloat(w.value.display_price)), W();
          break;
        }
        case "cut_length": {
          $(["calculating cost by cut length in feet / meters"]);
          const Ft = rt.metadata.totalCutLength / (l.units === "fraction" ? 12 : 1e3);
          Q(Ft, 2), W();
          break;
        }
        case "full_sheet_plus_cut_length": {
          $(["calculating cost by full sheet plus cut length"]), zt ? o.quantity.value = rt.metadata.totalUsedStock : mt = parseFloat(rt.metadata.totalStockCost);
          const pe = rt.metadata.totalCutLength / (l.units === "fraction" ? 12 : 1e3) * l.cut_length_price;
          st("cutLength", pe), mt += pe, W();
          break;
        }
        case "full_sheet_plus_num_parts": {
          if ($(["calculating cost by full sheet plus number of parts"]), zt)
            o.quantity.value = rt.metadata.totalUsedStock;
          else {
            const pe = parseFloat(rt.metadata.totalStockCost);
            st("stock", pe), mt = pe;
          }
          const Ft = rt.metadata.totalPartsProduced * l.per_part_price;
          st("perPart", Ft), mt += Ft, W();
          break;
        }
      }
      if (!zt) {
        if (!rt.metadata.totalStockCost)
          return z("Total stock cost not returned for a multiple size product");
        $([`total cost is ${mt}`]), st("custom", mt);
      }
      if (Mt("banding") && ((be = rt == null ? void 0 : rt.metadata) != null && be.bandingLengthByType)) {
        const Ft = Nt(rt.metadata.bandingLengthByType);
        st("banding", Ft), mt += Ft;
      }
      if (Mt("finish") && (($t = rt == null ? void 0 : rt.metadata) != null && $t.bandingLengthByType)) {
        const Ft = he(rt.metadata.finishAreaByType);
        st("finish", Ft), mt += Ft;
      }
      if (x.value === "formula") {
        const Ft = parseFloat(a["smartcut-hardware-price"].value);
        isNaN(Ft) || (mt += Ft);
      }
      if (qt()) {
        const Ft = it(rt);
        st("machining", Ft), mt += Ft;
      }
      if (Gt() && (l != null && l.surcharge)) {
        let Ft = 0;
        (l == null ? void 0 : l.surcharge_type) === "per_sheet" ? Ft = parseFloat(l == null ? void 0 : l.surcharge) * parseFloat(rt.metadata.totalUsedStock) : Ft = parseFloat(l == null ? void 0 : l.surcharge), st("surcharge", Ft), $(["added surcharge", Ft]), mt += Ft;
      }
      w.value && Z(mt);
      const It = {
        "smartcut-job-id": rt == null ? void 0 : rt.jobId,
        "smartcut-dimensions": rt == null ? void 0 : rt.parts.map((Ft) => `${Ft == null ? void 0 : Ft.l}x${Ft == null ? void 0 : Ft.w} [${Ft == null ? void 0 : Ft.q}]`).join(", "),
        "smartcut-total-cut-length": rt.metadata.totalCutLength,
        "smartcut-part-area": rt.metadata.totalPartArea,
        "smartcut-total-cuts": rt.metadata.totalCuts,
        "smartcut-total-parts": rt.metadata.totalPartsProduced,
        "smartcut-machining": rt.metadata.hasMachining
      };
      if (Object.entries(It).forEach(([Ft, pe]) => {
        a != null && a[Ft] && (a[Ft].value = pe);
      }), a != null && a["smartcut-stock-summary"]) {
        const Ft = rt.stock.map((pe) => `${pe == null ? void 0 : pe.l}x${pe == null ? void 0 : pe.w}${pe != null && pe.t ? "x" + pe.t : ""} [${pe == null ? void 0 : pe.q}]`).join(", ");
        a["smartcut-stock-summary"].value = Ft;
      }
      await Fe(rt);
    }, Fe = async (rt) => {
      const mt = await Kv(rt, T.value, vt), zt = await new Promise((It) => {
        const be = new FileReader();
        be.onloadend = () => It(be.result.split(",")[1]), be.readAsDataURL(mt);
      });
      a["smartcut-order-summary-pdf"].value = zt;
    }, ue = (rt, mt) => {
      U(), T.value = ea(rt), a["smartcut-hardware-price"].value = mt;
    };
    return pa(() => {
      console.log("💥 Powered by https://smartcut.dev", window.smartcutConfig.version), $(["Launching WordPress checkout..."]), h.banding = vn(window, ["smartcutConfig", "banding_data"]), h.finish = vn(window, ["smartcutConfig", "finish_data"]), g = vn(window, ["smartcutConfig", "machining_pricing"]), d = vn(window, ["smartcutConfig", "variations"]), B(), oe(), St(window.smartcutConfig), P(window.smartcutConfig), ct(), nt(), jQuery(".variations_form").on("reset_data", () => _(!1, !1)), jQuery(".variations_form").on("found_variation", xe), [
        "div.quantity > input.plus",
        "div.quantity > input.minus",
        "div.quantity .qty-plus",
        "div.quantity .qty-minus"
      ].forEach((zt) => {
        const It = document.querySelector(zt);
        It && (It.style.display = "none");
      });
      const mt = new CustomEvent("smartcut/ready");
      window.dispatchEvent(mt), $(["Wordpress checkout ready"]);
    }), (rt, mt) => (Vt(), re(ri, null, [
      Ie(s) === "development" && _k ? (Vt(), re("div", kk, [
        mt[0] || (mt[0] = fe("div", null, "WP - developer information", -1)),
        ii(Ie(r), {
          data: [Ie(c)],
          paths: ["product"]
        }, null, 8, ["data"]),
        ii(Ie(r), {
          data: [v.value],
          paths: ["stock"]
        }, null, 8, ["data"]),
        ii(Ie(r), {
          data: [h],
          paths: ["extrasData"]
        }, null, 8, ["data"])
      ])) : Ne("", !0),
      x.value === "formula" && N.value ? (Vt(), Vn(Ie(i), {
        key: 1,
        ref: "formulapricing",
        units: O.value,
        "format-price": yt,
        url: N.value,
        debug: b.value,
        onHardwareResult: ue,
        onPanelResult: U
      }, null, 8, ["units", "url", "debug"])) : Ne("", !0),
      x.value === "manual" || x.value === "formula" && N.value ? (Vt(), Vn(Ak, {
        key: 2,
        ref_key: "calculator",
        ref: R,
        readonly: x.value === "formula",
        debug: b.value,
        stock: v.value,
        "find-extras-price": Wt,
        "format-price": yt,
        units: O.value,
        onLog: $,
        onError: z,
        onResult: ke,
        onInputsChanged: U
      }, null, 8, ["readonly", "debug", "stock", "units"])) : Ne("", !0)
    ], 64));
  }
}), Pk = /* @__PURE__ */ Ds({
  __name: "Launch",
  props: {
    type: { default: "" }
  },
  setup(e) {
    const t = sa(() => import("./Vanilla-DCycCfpI.js")), n = {
      wordpress: Nk,
      vanilla: t
    }, i = e, r = rn(() => {
      const s = i.type.toLowerCase();
      return n[s] || null;
    });
    return (s, o) => (Vt(), Vn(L2(r.value), { ref: "checkout" }, null, 512));
  }
}), Ok = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({ __proto__: null, default: Pk }, Symbol.toStringTag, { value: "Module" }));
export {
  Ak as C,
  al as I,
  Ok as L,
  Tl as _,
  dh as a,
  en as b,
  ec as c,
  hd as d,
  Re as e,
  Yt as f,
  vn as g,
  mr as h,
  u1 as i,
  Ik as j,
  a1 as k,
  Wg as l,
  Ek as m,
  tA as n,
  zy as o,
  Im as r,
  Om as s,
  tf as u,
  Lt as v
};
